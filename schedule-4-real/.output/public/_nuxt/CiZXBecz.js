import{Z as M,C as u,l as $,m as L,J as v,V as D}from"./DmxtK6KT.js";const se=M("sensors",()=>{const e=u(null),t=u(null),i=u([]),s=u([]),n=u({}),r=$(!1),l=$("4h"),p=u([]),c=u({}),T=u({}),y=$(!1),f=u([]),O=u([]),I=L(()=>{if(e.value)return e.value.temp>30?"high":e.value.temp<18?"low":"optimal"}),R=L(()=>{if(e.value)return e.value.humi>70?"high":e.value.humi<40?"low":"optimal"}),F=L(()=>{if(e.value)return e.value.vpd>1.6?"high":e.value.vpd<.4?"low":"optimal"}),H=L(()=>e.value?.co2!=null&&e.value.co2>0);async function U(){try{const o=await $fetch("/api/sensors/current");o&&(e.value=o)}catch{}}async function B(o="24h"){l.value=o;const d=i.value.length===0;d&&(r.value=!0);try{const[a,h,g]=await Promise.all([$fetch(`/api/sensors/history?range=${o}`),$fetch(`/api/sensors/blower-history?range=${o}`),$fetch(`/api/sensors/fan-history?range=${o}`)]);a&&(i.value=a),h&&(f.value=h),g&&(O.value=g),await _(o)}catch{}finally{d&&(r.value=!1)}}async function _(o,d,a){p.value.length===0&&await E();const h=p.value;if(h.length!==0)try{const g=h.map(async S=>{const Y=d&&a?`start=${encodeURIComponent(d)}&end=${encodeURIComponent(a)}&sensorId=${S.id}`:`range=${o}&sensorId=${S.id}`,G=await $fetch(`/api/sensors/soil/history?${Y}`);return{sensorId:S.id,data:G||[]}}),P=await Promise.all(g),w={};for(const S of P)w[S.sensorId]=S.data;T.value=w,h.length>0&&w[h[0].id]&&(s.value=w[h[0].id])}catch{}}async function J(o="24h"){try{const d=await $fetch(`/api/sensors/stats?range=${o}`);n.value=d||{}}catch{}}async function W(o,d){l.value="custom";const a=i.value.length===0;a&&(r.value=!0);try{const[h,g,P]=await Promise.all([$fetch(`/api/sensors/history?start=${encodeURIComponent(o)}&end=${encodeURIComponent(d)}`),$fetch(`/api/sensors/blower-history?start=${encodeURIComponent(o)}&end=${encodeURIComponent(d)}`),$fetch(`/api/sensors/fan-history?start=${encodeURIComponent(o)}&end=${encodeURIComponent(d)}`)]);h&&(i.value=h),g&&(f.value=g),P&&(O.value=P),await _("custom",o,d)}catch{}finally{a&&(r.value=!1)}}async function E(){y.value=!0;try{const o=await $fetch("/api/sensors/soil/list");p.value=o||[];const d={};for(const a of p.value)a.current&&(d[a.id]=a.current);c.value=d}catch{}finally{y.value=!1}}async function j(o,d,a){try{const{getAuthHeaders:h}=v();await $fetch("/api/sensor-names",{method:"POST",headers:h(),body:{sensorId:o,name:d,plantId:a,sensorType:"soil"}}),await E()}catch(h){throw h}}function V(o,d){const a={...c.value};a[o]=d,c.value=a;const h=p.value.find(g=>g.id===o);h&&(h.lastSeen=d.timestamp),p.value.length>0&&p.value[0].id===o&&(t.value=d)}return{current:e,soil:t,history:i,soilHistory:s,stats:n,loading:r,selectedRange:l,soilSensors:p,soilSensorsCurrent:c,soilSensorsHistory:T,soilSensorsLoading:y,blowerHistory:f,fanHistory:O,temperatureStatus:I,humidityStatus:R,vpdStatus:F,hasCo2Sensor:H,fetchCurrent:U,fetchHistory:B,fetchHistoryCustomRange:W,fetchStats:J,fetchSoilSensors:E,updateSoilSensorName:j,updateSoilSensorCurrent:V}}),N=7,q=8,Z=13,z=3,K=4,m=99;function C(e){return[N,q,Z,z,K].includes(e)}const x={enabled:1,weekmask:127,startTime:8*3600,endTime:20*3600},b={weekmask:127,startTime:8*3600,openDur:3600,closeDur:1800,times:3},Q=M("blower",{state:()=>({on:!1,level:50,modeType:0,closeCO2:!1,minSpeed:0,maxSpeed:0,timePeriod:[{...x}],cycleTime:{...b},pendingOn:!1,pendingLevel:50,pendingModeType:0,pendingCloseCO2:!1,pendingMinSpeed:0,pendingMaxSpeed:0,pendingTimePeriod:[{...x}],pendingCycleTime:{...b},loaded:!1,saving:!1,userEdited:!1}),getters:{hasChanges(){const e=JSON.stringify(this.pendingTimePeriod)!==JSON.stringify(this.timePeriod),t=JSON.stringify(this.pendingCycleTime)!==JSON.stringify(this.cycleTime);return this.pendingOn!==this.on||this.pendingLevel!==this.level||this.pendingModeType!==this.modeType||this.pendingCloseCO2!==this.closeCO2||this.pendingMinSpeed!==this.minSpeed||this.pendingMaxSpeed!==this.maxSpeed||e||t},pendingModeCategory(){return this.pendingModeType===m?4:C(this.pendingModeType)?3:this.pendingModeType}},actions:{initFromFetch(e){this.on=e.on,this.level=e.level>0?e.level:this.level||50,this.modeType=e.modeType,this.closeCO2=e.closeCO2??!1,this.minSpeed=e.minSpeed??0,this.maxSpeed=e.maxSpeed??0,this.timePeriod=e.timePeriod&&e.timePeriod.length>0?e.timePeriod.map(t=>({...t})):[{...x}],this.cycleTime=e.cycleTime?{...e.cycleTime}:{...b},this.pendingOn=e.on,this.pendingLevel=this.level,this.pendingModeType=e.modeType,this.pendingCloseCO2=this.closeCO2,this.pendingMinSpeed=this.minSpeed,this.pendingMaxSpeed=this.maxSpeed,this.pendingTimePeriod=this.timePeriod.map(t=>({...t})),this.pendingCycleTime={...this.cycleTime},this.loaded=!0,this.userEdited=!1},async fetchIfNeeded(){if(!this.loaded)try{const e=await $fetch("/api/control/blower");e&&this.initFromFetch(e)}catch{}},updateBlower(e){const t=e.on??e.mOnOff,i=e.level??e.mLevel;if(t===void 0&&i===void 0)return;const s=t!==void 0?t===1||t===!0:i!==void 0?i>0:this.on,n=e.modeType??this.modeType,r=e.closeCO2!==void 0?e.closeCO2===1||e.closeCO2===!0:this.closeCO2,l=e.minSpeed??this.minSpeed,p=e.maxSpeed??this.maxSpeed,c=e.timePeriod&&e.timePeriod.length>0?e.timePeriod.map(f=>({...f})):this.timePeriod,T=e.cycleTime?{...e.cycleTime}:this.cycleTime,y=i!==void 0&&i>0?i:this.level;this.on=s,this.level=y,this.modeType=n,this.closeCO2=r,this.minSpeed=l,this.maxSpeed=p,this.timePeriod=c,this.cycleTime=T,this.userEdited||(this.pendingOn=s,this.pendingLevel=y,this.pendingModeType=n,this.pendingCloseCO2=r,this.pendingMinSpeed=l,this.pendingMaxSpeed=p,this.pendingTimePeriod=c.map(f=>({...f})),this.pendingCycleTime={...T}),i!==void 0&&i>0&&(this.loaded=!0)},setPendingOn(e){this.pendingOn=e,this.userEdited=!0},setPendingLevel(e){this.pendingLevel=e,this.userEdited=!0},setPendingModeType(e){this.pendingModeType=e,this.userEdited=!0},setPendingCloseCO2(e){this.pendingCloseCO2=e,this.userEdited=!0},setPendingMinSpeed(e){this.pendingMinSpeed=e,this.userEdited=!0},setPendingMaxSpeed(e){this.pendingMaxSpeed=e,this.userEdited=!0},updatePendingTimePeriod(e,t,i){this.pendingTimePeriod[e]&&(this.pendingTimePeriod[e][t]=i,this.userEdited=!0)},updatePendingCycleTime(e,t){this.pendingCycleTime[e]=t,this.userEdited=!0},setPendingModeCategory(e){e===4?this.pendingModeType=m:e===3?C(this.pendingModeType)||(this.pendingModeType=N):this.pendingModeType=e,this.userEdited=!0},resetPending(){this.pendingOn=this.on,this.pendingLevel=this.level,this.pendingModeType=this.modeType,this.pendingCloseCO2=this.closeCO2,this.pendingMinSpeed=this.minSpeed,this.pendingMaxSpeed=this.maxSpeed,this.pendingTimePeriod=this.timePeriod.map(e=>({...e})),this.pendingCycleTime={...this.cycleTime},this.userEdited=!1},async save(){if(this.hasChanges){this.saving=!0;try{const{getAuthHeaders:e}=v(),t=this.pendingModeType===m,i=this.modeType===m,s=t?0:this.pendingModeType,n={on:this.pendingOn,level:this.pendingLevel,modeType:s,closeCO2:this.pendingCloseCO2,minSpeed:this.pendingMinSpeed,maxSpeed:this.pendingMaxSpeed,timePeriod:this.pendingTimePeriod,cycleTime:this.pendingCycleTime};await $fetch("/api/control/blower",{method:"POST",headers:e(),body:n}),t?await $fetch("/api/automation/blower-ai-mode",{method:"POST",headers:e(),body:{aiMode:!0}}):i&&await $fetch("/api/automation/blower-ai-mode",{method:"POST",headers:e(),body:{aiMode:!1}}),this.on=this.pendingOn,this.level=this.pendingLevel,this.modeType=this.pendingModeType,this.closeCO2=this.pendingCloseCO2,this.minSpeed=this.pendingMinSpeed,this.maxSpeed=this.pendingMaxSpeed,this.timePeriod=this.pendingTimePeriod.map(r=>({...r})),this.cycleTime={...this.pendingCycleTime},this.userEdited=!1}catch(e){throw e}finally{this.saving=!1}}},setTriggerModeFromDb(e){e&&this.modeType===0&&(this.modeType=m,this.userEdited||(this.pendingModeType=m))}}}),k={enabled:1,weekmask:127,startTime:8*3600,endTime:20*3600},A={weekmask:127,startTime:8*3600,openDur:3600,closeDur:1800,times:3},X=M("fan",{state:()=>({on:!1,level:5,modeType:0,minSpeed:0,maxSpeed:0,shakeLevel:0,natural:0,timePeriod:[{...k}],cycleTime:{...A},pendingOn:!1,pendingLevel:5,pendingModeType:0,pendingMinSpeed:0,pendingMaxSpeed:0,pendingShakeLevel:0,pendingNatural:0,pendingTimePeriod:[{...k}],pendingCycleTime:{...A},loaded:!1,saving:!1,userEdited:!1}),getters:{hasChanges(){return this.pendingOn!==this.on||this.pendingLevel!==this.level||this.pendingModeType!==this.modeType||this.pendingMinSpeed!==this.minSpeed||this.pendingMaxSpeed!==this.maxSpeed||this.pendingShakeLevel!==this.shakeLevel||this.pendingNatural!==this.natural||JSON.stringify(this.pendingTimePeriod)!==JSON.stringify(this.timePeriod)||JSON.stringify(this.pendingCycleTime)!==JSON.stringify(this.cycleTime)},pendingModeCategory(){return this.pendingModeType===m?4:C(this.pendingModeType)?3:this.pendingModeType}},actions:{initFromFetch(e){this.on=e.on,this.level=e.level>0?e.level:this.level||5,this.modeType=e.modeType,this.minSpeed=e.minSpeed??0,this.maxSpeed=e.maxSpeed??0,this.shakeLevel=e.shakeLevel??0,this.natural=e.natural??0,this.timePeriod=e.timePeriod&&e.timePeriod.length>0?e.timePeriod.map(t=>({...t})):[{...k}],this.cycleTime=e.cycleTime?{...e.cycleTime}:{...A},this.pendingOn=e.on,this.pendingLevel=this.level,this.pendingModeType=e.modeType,this.pendingMinSpeed=this.minSpeed,this.pendingMaxSpeed=this.maxSpeed,this.pendingShakeLevel=this.shakeLevel,this.pendingNatural=this.natural,this.pendingTimePeriod=this.timePeriod.map(t=>({...t})),this.pendingCycleTime={...this.cycleTime},this.loaded=!0,this.userEdited=!1},updateFan(e){const t=e.on??e.mOnOff,i=e.level??e.mLevel;if(t===void 0&&i===void 0)return;const s=t!==void 0?t===1||t===!0:i!==void 0?i>0:this.on,n=e.modeType??this.modeType,r=e.minSpeed??this.minSpeed,l=e.maxSpeed??this.maxSpeed,p=e.shakeLevel??this.shakeLevel,c=e.natural??this.natural,T=i!==void 0&&i>0?i:this.level,y=e.timePeriod&&e.timePeriod.length>0?e.timePeriod.map(O=>({...O})):this.timePeriod,f=e.cycleTime?{...e.cycleTime}:this.cycleTime;this.on=s,this.level=T,this.modeType=n,this.minSpeed=r,this.maxSpeed=l,this.shakeLevel=p,this.natural=c,this.timePeriod=y,this.cycleTime=f,this.userEdited||(this.pendingOn=s,this.pendingLevel=T,this.pendingModeType=n,this.pendingMinSpeed=r,this.pendingMaxSpeed=l,this.pendingShakeLevel=p,this.pendingNatural=c,this.pendingTimePeriod=y.map(O=>({...O})),this.pendingCycleTime={...f}),i!==void 0&&i>0&&(this.loaded=!0)},setPendingOn(e){this.pendingOn=e,this.userEdited=!0},setPendingLevel(e){this.pendingLevel=e,this.userEdited=!0},setPendingModeType(e){this.pendingModeType=e,this.userEdited=!0},setPendingMinSpeed(e){this.pendingMinSpeed=e,this.userEdited=!0},setPendingMaxSpeed(e){this.pendingMaxSpeed=e,this.userEdited=!0},setPendingShakeLevel(e){this.pendingShakeLevel=e,this.userEdited=!0},setPendingNatural(e){this.pendingNatural=e,this.userEdited=!0},setPendingModeCategory(e){e===4?this.pendingModeType=m:e===3?C(this.pendingModeType)||(this.pendingModeType=N):this.pendingModeType=e,this.userEdited=!0},updatePendingTimePeriod(e,t,i){this.pendingTimePeriod[e]&&(this.pendingTimePeriod[e][t]=i,this.userEdited=!0)},updatePendingCycleTime(e,t){this.pendingCycleTime[e]=t,this.userEdited=!0},resetPending(){this.pendingOn=this.on,this.pendingLevel=this.level,this.pendingModeType=this.modeType,this.pendingMinSpeed=this.minSpeed,this.pendingMaxSpeed=this.maxSpeed,this.pendingShakeLevel=this.shakeLevel,this.pendingNatural=this.natural,this.pendingTimePeriod=this.timePeriod.map(e=>({...e})),this.pendingCycleTime={...this.cycleTime},this.userEdited=!1},async save(){if(this.hasChanges){this.saving=!0;try{const{getAuthHeaders:e}=v(),t=this.pendingModeType===m,i=this.modeType===m,s=t?0:this.pendingModeType;await $fetch("/api/control/fan",{method:"POST",headers:e(),body:{on:this.pendingOn,level:this.pendingLevel,modeType:s,minSpeed:this.pendingMinSpeed,maxSpeed:this.pendingMaxSpeed,shakeLevel:this.pendingShakeLevel,natural:this.pendingNatural,timePeriod:this.pendingTimePeriod,cycleTime:this.pendingCycleTime}}),t?await $fetch("/api/automation/fan-ai-mode",{method:"POST",headers:e(),body:{aiMode:!0}}):i&&await $fetch("/api/automation/fan-ai-mode",{method:"POST",headers:e(),body:{aiMode:!1}}),this.on=this.pendingOn,this.level=this.pendingLevel,this.modeType=this.pendingModeType,this.minSpeed=this.pendingMinSpeed,this.maxSpeed=this.pendingMaxSpeed,this.shakeLevel=this.pendingShakeLevel,this.natural=this.pendingNatural,this.timePeriod=this.pendingTimePeriod.map(n=>({...n})),this.cycleTime={...this.pendingCycleTime},this.userEdited=!1}catch(e){throw e}finally{this.saving=!1}}},setTriggerModeFromDb(e){e&&this.modeType===0&&(this.modeType=m,this.userEdited||(this.pendingModeType=m))}}}),ee={0:"Manual",1:"Time Slot",2:"Cycle",3:"Temperature",4:"Humidity",5:"CO2",14:"Drip"},ne=M("sockets",{state:()=>({states:{},configs:{},events:null,log:[],wattage:{},lightWattage:{},wattageLoaded:!1,powerStats:null,loading:!1,loaded:!1}),getters:{activeSockets:e=>Object.entries(e.states).filter(([t,i])=>i.isOn).map(([t])=>t),getModeName:()=>e=>ee[e]||"Unknown",isLight1Disabled:e=>e.wattageLoaded?e.lightWattage.light?.watts===-1:!1,isLight2Disabled:e=>{if(!e.wattageLoaded)return!1;const t=e.lightWattage.light2;return!t||t.watts===-1}},actions:{async fetchStates(){this.loaded||(this.loading=!0);try{const e=await $fetch("/api/control/sockets");if(e?.sockets){for(const[t,i]of Object.entries(e.sockets))this.states[t]?(this.states[t].modeType=i.modeType??this.states[t].modeType,this.states[t].mOnOff=i.mOnOff??this.states[t].mOnOff,this.states[t].isOn=i.isOn??this.states[t].isOn):this.states[t]={modeType:i.modeType??0,mOnOff:i.mOnOff??0,isOn:i.isOn??!1},this.configs[t]={modeType:i.modeType??0,mOnOff:i.mOnOff??0,tempAdd:i.tempAdd,humiAdd:i.humiAdd,co2Add:i.co2Add,timePeriod:i.timePeriod,cycleTime:i.cycleTime,wateringEnv:i.wateringEnv,bind:i.bind};this.loaded=!0}e?.blower&&Q().initFromFetch(e.blower),e?.fan&&X().initFromFetch(e.fan)}catch{}finally{this.loading=!1}},async toggleSocket(e){const t=this.states[e];if(!(!t||t.modeType!==0)){try{const{requireAuth:i}=D();await i()}catch{return}try{const{getAuthHeaders:i}=v();await $fetch("/api/control/socket/toggle",{method:"POST",headers:i(),body:{socket:e,mOnOff:t.mOnOff?0:1}}),this.states[e].mOnOff=t.mOnOff?0:1,this.states[e].isOn=!t.isOn}catch{}}},async updateConfig(e,t){try{const{getAuthHeaders:i}=v(),s=await $fetch("/api/settings/socket",{method:"POST",headers:i(),body:{socket:e,...t}}),n={modeType:s.modeType??t.modeType,mOnOff:s.mOnOff??t.mOnOff,tempAdd:s.tempAdd??t.tempAdd,humiAdd:s.humiAdd??t.humiAdd,co2Add:s.co2Add??t.co2Add,timePeriod:s.timePeriod??t.timePeriod,cycleTime:s.cycleTime??t.cycleTime,wateringEnv:s.wateringEnv??t.wateringEnv,bind:s.bind??t.bind};return this.configs[e]=n,this.states[e]&&(this.states[e].modeType=n.modeType,this.states[e].mOnOff=n.mOnOff,this.states[e].isOn=n.mOnOff===1),n}catch(i){throw i?.statusCode===409?new Error("Save verification failed - device may not have applied changes"):i}},updateState(e,t){this.states[e]&&(this.states[e]={...this.states[e],...t})},async fetchEvents(e="24h"){try{const t=await $fetch(`/api/sockets/events?range=${e}`);this.events=t}catch{}},async fetchEventsCustomRange(e,t){try{const i=await $fetch(`/api/sockets/events?start=${encodeURIComponent(e)}&end=${encodeURIComponent(t)}`);this.events=i}catch{}},async fetchLog(e=50){try{const t=await $fetch(`/api/sockets/log?limit=${e}`);this.log=t}catch{}},async fetchWattage(){try{const e=await $fetch("/api/settings/power");this.wattage=e.sockets||{},this.lightWattage=e.lights||{}}catch{}finally{this.wattageLoaded=!0}},async saveWattage(){try{const{getAuthHeaders:e}=v();await $fetch("/api/settings/power",{method:"POST",headers:e(),body:{sockets:this.wattage,lights:this.lightWattage}})}catch(e){throw e}},async fetchPowerStats(e="24h"){try{const t=await $fetch(`/api/stats/power?range=${e}`);this.powerStats=t}catch{}}}}),te={0:"Manual",1:"Time Slot",2:"Cycle",12:"PPFD Auto"},oe=M("lights",{state:()=>({states:{},configs:{},loading:!1,loaded:!1}),getters:{activeLights:e=>Object.entries(e.states).filter(([t,i])=>i?.isOn).map(([t])=>t),totalBrightness:e=>{const t=e.states.light?.isOn?e.states.light.mLevel:0,i=e.states.light2?.isOn?e.states.light2.mLevel:0;return!t&&!i?0:Math.round((t+i)/2)},getModeName:()=>e=>te[e]||`Mode ${e}`},actions:{async fetchStates(){this.loading=!0;try{const e=await $fetch("/api/control/lights");if(e){for(const[t,i]of Object.entries(e)){this.states[t]?(this.states[t].modeType=i.modeType??this.states[t].modeType,this.states[t].mOnOff=i.mOnOff??this.states[t].mOnOff,this.states[t].mLevel=i.mLevel??this.states[t].mLevel,this.states[t].isOn=i.isOn??this.states[t].isOn):this.states[t]={modeType:i.modeType??0,mOnOff:i.mOnOff??0,mLevel:i.mLevel??0,isOn:i.isOn??!1};const s={modeType:i.modeType??this.configs[t]?.modeType??0,mOnOff:i.mOnOff,mLevel:i.mLevel};i.lastAutoModeType!==void 0&&(s.lastAutoModeType=i.lastAutoModeType),i.timePeriod!==void 0&&(s.timePeriod=i.timePeriod),i.cycleTime!==void 0&&(s.cycleTime=i.cycleTime),i.ppfdPeriod!==void 0&&(s.ppfdPeriod=i.ppfdPeriod),i.darkTemp!==void 0&&(s.darkTemp=i.darkTemp),i.offTemp!==void 0&&(s.offTemp=i.offTemp),i.ppfdMinBrightness!==void 0&&(s.ppfdMinBrightness=i.ppfdMinBrightness),i.ppfdMaxBrightness!==void 0&&(s.ppfdMaxBrightness=i.ppfdMaxBrightness),this.configs[t]=s}this.loaded=!0}}catch{}finally{this.loading=!1}},async setLight(e,t){const{requireAuth:i}=D();await i();try{const{getAuthHeaders:s}=v(),n=await $fetch("/api/control/light",{method:"POST",headers:s(),body:{light:e,...t}}),r=n.modeType??t.modeType,l=n.mOnOff??t.mOnOff,p=n.mLevel??t.mLevel;this.states[e]={modeType:r,mOnOff:l,mLevel:p,isOn:l===1},this.configs[e]&&(this.configs[e].modeType=r,this.configs[e].mOnOff=l,this.configs[e].mLevel=p)}catch(s){throw s}},async updateConfig(e,t){try{const{getAuthHeaders:i}=v(),s=await $fetch("/api/settings/light",{method:"POST",headers:i(),body:{light:e,...t}}),n={modeType:s.modeType??t.modeType,mOnOff:s.mOnOff??t.mOnOff,mLevel:s.mLevel??t.mLevel,lastAutoModeType:s.lastAutoModeType,timePeriod:s.timePeriod??t.timePeriod,cycleTime:s.cycleTime??t.cycleTime,ppfdPeriod:s.ppfdPeriod??t.ppfdPeriod,darkTemp:s.darkTemp??t.darkTemp,offTemp:s.offTemp??t.offTemp,ppfdMinBrightness:s.ppfdMinBrightness??t.ppfdMinBrightness,ppfdMaxBrightness:s.ppfdMaxBrightness??t.ppfdMaxBrightness};return this.configs[e]=n,this.states[e]={modeType:n.modeType,mOnOff:n.mOnOff??0,mLevel:n.mLevel??0,isOn:n.mOnOff===1},n}catch(i){throw i?.statusCode===409?new Error("Save verification failed - device may not have applied changes"):i}},async toggleLight(e){const t=this.states[e];if(!t)return;const i=t.mOnOff?0:1,s=i===1&&t.mLevel===0?100:t.mLevel;await this.setLight(e,{modeType:t.modeType,mOnOff:i,mLevel:s})},async setBrightness(e,t){const i=this.states[e];i&&await this.setLight(e,{modeType:i.modeType,mOnOff:1,mLevel:t})},updateState(e,t){this.states[e]&&(this.states[e]={...this.states[e],...t})},updateFromWs(e){for(const[t,i]of Object.entries(e)){if(typeof i!="object")continue;const s=i,n=s.on??s.mOnOff??0,r=s.mLevel??s.level??0,l=s.modeType??this.states[t]?.modeType??0;this.states[t]?(this.states[t].mOnOff=n,this.states[t].isOn=n===1,this.states[t].mLevel=r,this.states[t].modeType=l):this.states[t]={mOnOff:n,isOn:n===1,mLevel:r,modeType:l}}}}});export{ne as a,oe as b,Q as c,X as d,se as u};
