import{e as ct,o as c,c as d,n as S,f as D,a as o,t as x,g as Dt,h as a,F as Z,r as tt,b as H,i as Wt,v as Bt,j as ne,k as Qt,d as xt,l as j,m as O,p as Ie,q as rt,s as qe,x as nt,T as Re,y as Ae,z as se,A as re,B as je,C as Be,D as ae,E as Qe}from"./DkTmUuRE.js";import{u as zt,a as Tt,b as pe,c as ye}from"./Chcv_rkg.js";import{u as It}from"./DOEm7_Ti.js";import{u as xe}from"./DaWxNq8Z.js";import{s as Ve}from"./qjwKZoPi.js";import{r as qt}from"./BDIOoEMA.js";import{a as Xe,C as Ge,L as ze,T as Ue,P as Ze,b as Ke,p as Je,c as tn,d as en,i as nn,e as sn}from"./BC74N4Vv.js";import{r as rn}from"./BCum0JXN.js";import{r as oe}from"./D6AEb5JG.js";import{r as ie,a as le,b as an}from"./CDvKspuM.js";import{r as on}from"./BQ8r8toA.js";import{r as ln}from"./CQPnYA4x.js";import{_ as cn}from"./DlAUqK2U.js";const un={class:"relative p-2.5 sm:p-3 rounded-xl bg-gradient-to-br from-gray-800/60 to-gray-900/60 backdrop-blur-md border border-gray-700/50 overflow-hidden group hover:border-gray-600/50 transition-all"},dn={class:"relative flex items-center justify-between gap-2"},fn={class:"min-w-0 flex-1"},mn={class:"flex items-center gap-1.5 mb-1"},hn={class:"text-[10px] sm:text-xs text-gray-400 uppercase tracking-wider font-medium truncate"},gn={class:"flex items-baseline"},pn={class:"text-xl sm:text-2xl font-bold text-white tracking-tight"},yn={class:"text-gray-500 ml-1 text-[10px] sm:text-xs font-medium"},xn={key:0,class:"text-[11px] sm:text-[13px] space-y-0.5 text-right shrink-0"},wn={class:"flex items-center justify-end gap-1"},bn={class:"text-blue-400 font-medium"},vn={class:"flex items-center justify-end gap-1"},kn={class:"text-spider-green-400 font-medium"},_n={class:"flex items-center justify-end gap-1"},Mn={class:"text-red-400 font-medium"},Dn={key:1,class:"flex text-[11px] sm:text-[13px] shrink-0"},Tn={key:0,class:"space-y-0.5 text-right pr-2"},$n={class:"flex items-center justify-end gap-1"},On={class:"text-blue-400 font-semibold"},Pn={class:"flex items-center justify-end gap-1"},Sn={class:"text-spider-green-400 font-semibold"},Cn={class:"flex items-center justify-end gap-1"},En={class:"text-red-400 font-semibold"},Yn={key:1,class:"w-px bg-gray-600/50 mx-1"},Nn={key:2,class:"space-y-0.5 text-right pl-1"},Fn={class:"flex items-center justify-end gap-1"},Wn={class:"text-blue-400 font-semibold"},Hn={class:"flex items-center justify-end gap-1"},Ln={class:"text-spider-green-400 font-semibold"},In={class:"flex items-center justify-end gap-1"},qn={class:"text-red-400 font-semibold"},Rn=ct({__name:"SensorCard",props:{title:{},value:{},unit:{},icon:{},status:{},decimals:{default:1},stats:{},dayStats:{},nightStats:{}},setup(n){return(t,e)=>(c(),d("div",un,[n.status?(c(),d("div",{key:0,class:S(["absolute -top-4 -right-4 w-16 h-16 rounded-full blur-2xl opacity-30 pointer-events-none transition-opacity",{"bg-spider-green-500":n.status==="normal"||n.status==="optimal","bg-yellow-500":n.status==="high"||n.status==="warn-high","bg-blue-500":n.status==="low"||n.status==="warn-low"}])},null,2)):D("",!0),o("div",dn,[o("div",fn,[o("div",mn,[o("span",hn,x(n.title),1),n.status?(c(),d("span",{key:0,class:S(["w-1.5 h-1.5 rounded-full shrink-0 ring-2",{"bg-spider-green-400 ring-spider-green-400/30":n.status==="normal"||n.status==="optimal","bg-yellow-400 ring-yellow-400/30":n.status==="high"||n.status==="warn-high","bg-blue-400 ring-blue-400/30":n.status==="low"||n.status==="warn-low"}])},null,2)):D("",!0)]),o("div",gn,[o("span",pn,x(typeof n.value=="number"?n.value.toFixed(n.decimals):"--"),1),o("span",yn,x(n.unit),1)])]),n.stats&&!n.dayStats&&!n.nightStats?(c(),d("div",xn,[o("div",wn,[e[0]||(e[0]=o("span",{class:"text-gray-600"},"Min",-1)),o("span",bn,x(n.stats.min),1)]),o("div",vn,[e[1]||(e[1]=o("span",{class:"text-gray-600"},"Avg",-1)),o("span",kn,x(n.stats.avg),1)]),o("div",_n,[e[2]||(e[2]=o("span",{class:"text-gray-600"},"Max",-1)),o("span",Mn,x(n.stats.max),1)])])):D("",!0),n.dayStats||n.nightStats?(c(),d("div",Dn,[n.dayStats?(c(),d("div",Tn,[o("div",$n,[e[3]||(e[3]=o("span",{class:"text-yellow-500 font-medium"},"Day Min",-1)),o("span",On,x(n.dayStats.min),1)]),o("div",Pn,[e[4]||(e[4]=o("span",{class:"text-yellow-500 font-medium"},"Avg",-1)),o("span",Sn,x(n.dayStats.avg),1)]),o("div",Cn,[e[5]||(e[5]=o("span",{class:"text-yellow-500 font-medium"},"Max",-1)),o("span",En,x(n.dayStats.max),1)])])):D("",!0),n.dayStats&&n.nightStats?(c(),d("div",Yn)):D("",!0),n.nightStats?(c(),d("div",Nn,[o("div",Fn,[e[6]||(e[6]=o("span",{class:"text-indigo-400 font-medium"},"Night Min",-1)),o("span",Wn,x(n.nightStats.min),1)]),o("div",Hn,[e[7]||(e[7]=o("span",{class:"text-indigo-400 font-medium"},"Avg",-1)),o("span",Ln,x(n.nightStats.avg),1)]),o("div",In,[e[8]||(e[8]=o("span",{class:"text-indigo-400 font-medium"},"Max",-1)),o("span",qn,x(n.nightStats.max),1)])])):D("",!0)])):D("",!0)])]))}}),An=Object.assign(Rn,{__name:"SensorCard"});function jn(n,t){return c(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.75 3.104v5.714a2.25 2.25 0 0 1-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.301 24.301 0 0 1 4.5 0m0 0v5.714c0 .597.237 1.17.659 1.591L19.8 15.3M14.25 3.104c.251.023.501.05.75.082M19.8 15.3l-1.57.393A9.065 9.065 0 0 1 12 15a9.065 9.065 0 0 0-6.23-.693L5 14.5m14.8.8 1.402 1.402c1.232 1.232.65 3.318-1.067 3.611A48.309 48.309 0 0 1 12 21c-2.773 0-5.491-.235-8.135-.687-1.718-.293-2.3-2.379-1.067-3.61L5 14.5"})])}function Bn(n,t){return c(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"})])}const Qn={class:"flex items-center justify-between mb-2"},Vn={class:"flex items-center gap-2 min-w-0 flex-1"},Xn={class:"w-5 h-5 rounded bg-amber-500/20 flex items-center justify-center shrink-0"},Gn={class:"min-w-0 flex-1"},zn={key:0,class:"flex items-center gap-1"},Un=["onKeyup","onBlur"],Zn=["onClick"],Kn={class:"truncate"},Jn={class:"text-[9px] text-gray-500 font-mono shrink-0 ml-2"},ts={class:"grid grid-cols-3 gap-1.5"},es={class:"text-center"},ns={class:"text-base font-semibold text-white"},ss={class:"text-center"},rs={class:"text-base font-semibold text-white"},as={class:"text-center"},os={class:"text-base font-semibold text-amber-400"},is=ct({__name:"SoilSensorsPanel",props:{stacked:{type:Boolean}},setup(n){const t=n,e=zt(),s=j(null),r=j(""),i=O(()=>e.soilSensors.filter(_=>u(_)));function u(_){if(!_.lastSeen)return!1;const v=new Date(_.lastSeen).getTime();return Date.now()-v<600*1e3}function g(_){return e.soilSensorsCurrent[_]}function w(_,v=1){return _==null?"--":_.toFixed(v)}function y(_){s.value=_.id,r.value=_.name||""}function f(){s.value=null,r.value=""}async function m(_){if(s.value!==_)return;const v=r.value.trim();try{await e.updateSoilSensorName(_,v)}catch{}f()}return Dt(()=>{i.value.length===0&&e.fetchSoilSensors()}),(_,v)=>a(i).length>0?(c(),d("div",{key:0,class:S(["grid gap-2",t.stacked||a(i).length===1?"grid-cols-1":"grid-cols-2"])},[(c(!0),d(Z,null,tt(a(i),(p,$)=>(c(),d("div",{key:p.id,class:"p-2.5 rounded-xl bg-gradient-to-br from-amber-900/20 to-gray-900/40 border border-amber-500/20 backdrop-blur-md"},[o("div",Qn,[o("div",Vn,[o("div",Xn,[H(a(jn),{class:"w-3 h-3 text-amber-400"})]),o("div",Gn,[a(s)===p.id?(c(),d("div",zn,[Wt(o("input",{"onUpdate:modelValue":v[0]||(v[0]=b=>Qt(r)?r.value=b:null),onKeyup:[ne(b=>m(p.id),["enter"]),ne(f,["escape"])],onBlur:b=>m(p.id),class:"bg-gray-800 border border-gray-600 rounded px-1.5 py-0.5 text-base text-white w-full max-w-[120px]",placeholder:"Name",autofocus:""},null,40,Un),[[Bt,a(r)]])])):(c(),d("button",{key:1,onClick:b=>y(p),class:"text-base font-medium text-white hover:text-amber-300 truncate text-left transition-colors flex items-center gap-1 group",title:"Click to rename"},[o("span",Kn,x(p.name||`Sensor ${$+1}`),1),H(a(Bn),{class:"w-3 h-3 text-gray-500 group-hover:text-amber-300 shrink-0"})],8,Zn))])]),o("span",Jn,x(p.shortId),1)]),o("div",ts,[o("div",es,[v[2]||(v[2]=o("div",{class:"text-base text-gray-500 opacity-60 mb-0.5"},"Temp",-1)),o("div",ns,[xt(x(w(g(p.id)?.temp_soil,1)),1),v[1]||(v[1]=o("span",{class:"text-base text-gray-400 opacity-60"},"Â°C",-1))])]),o("div",ss,[v[4]||(v[4]=o("div",{class:"text-base text-gray-500 opacity-60 mb-0.5"},"Moisture",-1)),o("div",rs,[xt(x(w(g(p.id)?.humi_soil,1)),1),v[3]||(v[3]=o("span",{class:"text-base text-gray-400 opacity-60"},"%",-1))])]),o("div",as,[v[6]||(v[6]=o("div",{class:"text-base text-gray-500 opacity-60 mb-0.5"},"EC",-1)),o("div",os,[xt(x(w(g(p.id)?.ec_soil,2)),1),v[5]||(v[5]=o("span",{class:"text-base text-gray-400 opacity-60"},"mS",-1))])])])]))),128))],2)):D("",!0)}}),ls=Object.assign(is,{__name:"SoilSensorsPanel"}),cs={key:0,class:"absolute inset-0 bg-gradient-to-br from-spider-green-500/20 to-emerald-600/10 pointer-events-none"},us={key:1,class:"absolute -top-4 -right-4 w-16 h-16 rounded-full bg-spider-green-500/30 blur-xl pointer-events-none"},ds={class:"relative"},fs={class:"flex items-center justify-between mb-1.5"},ms={class:"font-bold text-sm truncate max-w-[80px]"},hs={class:"flex items-center justify-between text-xs"},gs=ct({__name:"SocketCard",props:{socket:{},state:{}},emits:["toggle"],setup(n,{emit:t}){const{getSocketDisplayName:e}=It(),s=Tt(),r=xe(),i=n,u=t,g=O(()=>`O${i.socket}`),w=O(()=>e(g.value,"short")),y=O(()=>s.wattage[g.value]?.watts||0),f={0:"Manual",1:"Time Slot",2:"Cycle",3:"Temp",4:"Humidity",5:"CO2",14:"Drip"},m={1:"T",2:"C",3:"Te",4:"H",5:"CO",14:"D"},_=O(()=>i.state?.isOn?"bg-gradient-to-br from-spider-green-600/80 to-spider-green-700/60 border-2 border-spider-green-500/60 text-white shadow-lg shadow-spider-green-500/20":"bg-gradient-to-br from-gray-700/60 to-gray-800/60 border-2 border-gray-600/50 text-gray-400 hover:border-gray-500/60 hover:from-gray-700/70 hover:to-gray-800/70"),v=O(()=>r.isSocketAiEnabled(g.value)),p=O(()=>v.value?"Trigger":f[i.state?.modeType]||"Manual"),$=O(()=>v.value?"Ai":m[i.state?.modeType]||"");function b(){i.state?.modeType===0&&!v.value&&u("toggle")}return(M,P)=>(c(),d("div",{class:S(["relative p-2.5 sm:p-3 rounded-xl transition-all cursor-pointer min-h-[52px] sm:min-h-[60px] overflow-hidden group",a(_)]),onClick:b},[n.state?.isOn?(c(),d("div",cs)):D("",!0),n.state?.isOn?(c(),d("div",us)):D("",!0),o("div",ds,[o("div",fs,[o("span",ms,x(a(w)),1),o("span",{class:S(["w-2.5 h-2.5 rounded-full shrink-0 ring-2 transition-all",n.state?.isOn?"bg-spider-green-400 ring-spider-green-400/40 shadow-lg shadow-spider-green-400/50":"bg-gray-500 ring-gray-500/30"])},null,2)]),o("div",hs,[o("span",{class:S([n.state?.isOn?"text-gray-200":"text-gray-500","font-medium"])},x(a(p)),3),a(y)>0?(c(),d("span",{key:0,class:S(["font-semibold",n.state?.isOn?"text-yellow-400":"text-gray-500"])},x(a(y))+"W",3)):D("",!0)])]),a($)?(c(),d("span",{key:2,class:S(["absolute -top-1.5 -right-1.5 w-5 h-5 rounded-full text-[9px] flex items-center justify-center font-bold shadow-lg",a(v)?"bg-gradient-to-br from-purple-500 to-purple-600 text-white shadow-purple-500/40":"bg-gradient-to-br from-blue-500 to-blue-600 text-white shadow-blue-500/40"])},x(a($)),3)):D("",!0)],2))}}),ps=Object.assign(gs,{__name:"SocketCard"}),ys={class:"relative p-3 sm:p-4 rounded-xl bg-gradient-to-br from-gray-800/60 to-gray-900/60 backdrop-blur-md border border-gray-700/50 overflow-hidden"},xs={class:"relative"},ws={class:"flex items-center justify-between mb-3"},bs={class:"font-semibold text-sm text-white"},vs={class:"flex items-center gap-2"},ks={class:"text-[10px] text-gray-400 uppercase tracking-wider font-medium"},_s={class:"relative h-2.5 bg-gray-700/60 rounded-full overflow-hidden"},Ms={class:"flex justify-between mt-2 text-xs"},Ds={class:"flex items-center gap-2"},Ts={key:0,class:"text-gray-500 text-[10px]"},$s={class:"flex items-center gap-2"},Os={key:0,class:"text-[10px] text-blue-400 font-medium"},Ps=ct({__name:"LightCard",props:{title:{},lightId:{},state:{}},emits:["toggle"],setup(n){const t=Tt(),e=pe(),s=n,r={0:"Manual",1:"Time Slot",2:"Cycle",12:"PPFD Auto"},i=O(()=>r[s.state?.modeType]||"Auto"),u=O(()=>{const m=t.lightWattage[s.lightId];return!m||!m.watts?0:s.state?.isOn&&s.state.mLevel>0?Math.round(m.watts*s.state.mLevel/100):m.watts}),g=O(()=>{const m=e.configs[s.lightId];if(!m)return null;if(m.timePeriod?.length){const _=m.timePeriod.find(v=>v.enabled);if(_?.brightness!==void 0)return _.brightness}return m.ppfdMaxBrightness!==void 0?m.ppfdMaxBrightness:null}),w=j(""),y=j(null);function f(){const m=e.configs[s.lightId];if(!m?.timePeriod?.length||s.state?.modeType===0){w.value="";return}const _=m.timePeriod.find(ft=>ft.enabled);if(!_){w.value="";return}const v=new Date,p=v.getHours()*3600+v.getMinutes()*60+v.getSeconds(),$=_.startTime??0,b=_.endTime??0;let M,P;($<=b?p>=$&&p<b:p>=$||p<b)?(M=b,P="OFF"):(M=$,P="ON");let L=M-p;L<0&&(L+=86400);const U=Math.floor(L/3600),G=Math.floor(L%3600/60),st=L%60;U>0?w.value=`${P} ${U}h ${G}m`:G>0?w.value=`${P} ${G}m ${st}s`:w.value=`${P} ${st}s`}return Dt(()=>{f(),y.value=Ve(f,1e3)}),Ie(()=>{y.value&&clearInterval(y.value)}),(m,_)=>(c(),d("div",ys,[n.state?.isOn?(c(),d("div",{key:0,class:S(["absolute -top-6 -right-6 w-24 h-24 rounded-full blur-2xl pointer-events-none",n.state.mLevel>50?"bg-yellow-500/40":"bg-yellow-500/20"])},null,2)):D("",!0),o("div",xs,[o("div",ws,[o("span",bs,x(n.title),1),o("div",vs,[o("span",ks,x(a(i)),1),o("span",{class:S(["w-2.5 h-2.5 rounded-full ring-2 transition-all",n.state?.isOn?"bg-yellow-400 ring-yellow-400/40 shadow-lg shadow-yellow-400/50":"bg-gray-500 ring-gray-500/30"])},null,2)])]),o("div",_s,[a(g)!==null&&n.state?.modeType!==0?(c(),d("div",{key:0,class:"absolute inset-y-0 left-0 rounded-full bg-gray-500/50 transition-all duration-300",style:rt({width:`${a(g)}%`})},null,4)):D("",!0),o("div",{class:S(["absolute inset-y-0 left-0 rounded-full transition-all duration-300",n.state?.isOn?"bg-gradient-to-r from-yellow-500 to-amber-400":"bg-gray-600"]),style:rt({width:`${n.state?.isOn?n.state.mLevel:0}%`})},null,6),n.state?.isOn&&n.state.mLevel>0?(c(),d("div",{key:1,class:"absolute inset-y-0 left-0 rounded-full bg-gradient-to-r from-yellow-400/50 to-transparent blur-sm",style:rt({width:`${n.state.mLevel}%`})},null,4)):D("",!0)]),o("div",Ms,[o("div",Ds,[o("span",{class:S(n.state?.isOn?"text-white font-semibold":"text-gray-500")},x(n.state?.isOn?`${n.state.mLevel}%`:"OFF"),3),a(g)!==null&&n.state?.modeType!==0?(c(),d("span",Ts,"/ "+x(a(g))+"%",1)):D("",!0),a(u)>0?(c(),d("span",{key:1,class:S(["font-semibold px-1.5 py-0.5 rounded-md",n.state?.isOn?"text-yellow-400 bg-yellow-400/10":"text-gray-500"])},x(a(u))+"W",3)):D("",!0)]),o("div",$s,[a(w)?(c(),d("span",Os,x(a(w)),1)):D("",!0),n.state?.modeType===0?(c(),d("button",{key:1,onClick:_[0]||(_[0]=v=>m.$emit("toggle")),class:S(["px-2.5 py-1 rounded-lg text-[10px] font-semibold uppercase tracking-wider transition-all",n.state?.isOn?"text-gray-400 hover:text-white hover:bg-gray-700/50":"text-spider-green-400 hover:bg-spider-green-500/20"])}," Toggle ",2)):D("",!0)])])])]))}}),Ss=Object.assign(Ps,{__name:"LightCard"});function Cs(n,t){return c(),d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{"fill-rule":"evenodd",d:"M6.75 2.25A.75.75 0 0 1 7.5 3v1.5h9V3A.75.75 0 0 1 18 3v1.5h.75a3 3 0 0 1 3 3v11.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V7.5a3 3 0 0 1 3-3H6V3a.75.75 0 0 1 .75-.75Zm13.5 9a1.5 1.5 0 0 0-1.5-1.5H5.25a1.5 1.5 0 0 0-1.5 1.5v7.5a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5v-7.5Z","clip-rule":"evenodd"})])}const Es={class:"relative"},Ys={key:0,class:"text-xs text-gray-500 py-4 text-center"},Ns={class:"flex items-center gap-3 mb-3 flex-wrap"},Fs={class:"flex items-center gap-2"},Ws={class:"w-7 h-7 rounded-lg bg-gradient-to-br from-yellow-500/30 to-amber-600/20 flex items-center justify-center"},Hs={class:"flex items-baseline gap-1"},Ls={class:"text-xl font-bold text-white"},Is={class:"text-xs text-gray-400"},qs={key:0,class:"text-[9px] text-yellow-500/80 px-1.5 py-0.5 rounded bg-yellow-500/10",title:"Estimated from available data"},Rs={key:1,class:"ml-auto flex items-baseline gap-1 px-2.5 py-1 rounded-lg bg-spider-green-500/10 border border-spider-green-500/30"},As={class:"text-sm font-bold text-spider-green-400"},js={key:0,class:"space-y-1.5 border-t border-gray-700/50 pt-3"},Bs={class:"flex items-center gap-2"},Qs={class:"text-gray-300 font-medium"},Vs={class:"flex items-center gap-3"},Xs={class:"text-gray-500"},Gs={class:"text-white font-semibold"},zs={key:0,class:"text-spider-green-400 font-medium"},Us={class:"flex items-center gap-2"},Zs={class:"text-gray-300 font-medium"},Ks={class:"flex items-center gap-3"},Js={class:"text-gray-500"},tr={class:"text-white font-semibold"},er={key:0,class:"text-spider-green-400 font-medium"},nr={key:0,class:"flex items-center justify-between text-[10px] sm:text-xs p-1.5 rounded-lg hover:bg-gray-800/40 transition-colors"},sr={class:"flex items-center gap-3"},rr={class:"text-gray-500"},ar={class:"text-white font-semibold"},or={key:0,class:"text-spider-green-400 font-medium"},ir=ct({__name:"PowerSummaryCard",setup(n){const t=Tt(),e=ye(),{getSocketDisplayName:s}=It(),r=j("24h"),i=j(!0);function u(y){if(y<60)return`${y}m`;const f=Math.floor(y/60),m=y%60;return m>0?`${f}h${m}m`:`${f}h`}function g(y){return y>=1e3?{value:(y/1e3).toFixed(2),unit:"MWh"}:y>=100?{value:y.toFixed(1),unit:"kWh"}:y>=10?{value:y.toFixed(1),unit:"kWh"}:{value:y.toFixed(2),unit:"kWh"}}async function w(){await t.fetchPowerStats(r.value)}return Dt(()=>{t.fetchWattage(),w()}),(y,f)=>(c(),d("div",Es,[a(t).powerStats?(c(),d(Z,{key:1},[o("div",Ns,[o("div",Fs,[o("div",Ws,[H(a(qt),{class:"w-4 h-4 text-yellow-400"})]),o("div",null,[f[3]||(f[3]=o("span",{class:"text-[10px] text-gray-500 uppercase tracking-wider font-medium block"},"Power",-1)),o("div",Hs,[o("span",Ls,x(g(a(t).powerStats.totals.kWh).value),1),o("span",Is,x(g(a(t).powerStats.totals.kWh).unit),1)])])]),Wt(o("select",{"onUpdate:modelValue":f[0]||(f[0]=m=>r.value=m),onChange:w,class:"bg-gray-800/60 border border-gray-600/50 rounded-lg px-2 py-1.5 text-[10px] text-gray-300 focus:border-yellow-500/50 focus:outline-none"},[...f[4]||(f[4]=[o("option",{value:"24h"},"24H",-1),o("option",{value:"7d"},"7D",-1),o("option",{value:"30d"},"30D",-1)])],544),[[qe,r.value]]),a(t).powerStats.extrapolated?(c(),d("span",qs,"~est")):D("",!0),a(t).powerStats.totals.cost>0?(c(),d("div",Rs,[o("span",As,x(a(t).powerStats.totals.cost.toFixed(2)),1),f[5]||(f[5]=o("span",{class:"text-[10px] text-gray-400"},"EUR",-1))])):D("",!0)]),i.value?(c(),d("div",js,[(c(!0),d(Z,null,tt(a(t).powerStats.lights.filter(m=>m.watts>0),m=>(c(),d("div",{key:m.socket,class:"flex items-center justify-between text-[10px] sm:text-xs p-1.5 rounded-lg hover:bg-gray-800/40 transition-colors"},[o("div",Bs,[f[6]||(f[6]=o("div",{class:"w-5 h-5 rounded bg-yellow-500/20 flex items-center justify-center"},[o("span",{class:"text-[10px]"},"ðŸ’¡")],-1)),o("span",Qs,x(m.socket==="light"?"Light 1":"Light 2"),1)]),o("div",Vs,[o("span",Xs,x(u(m.onTimeMinutes))+" @ "+x(m.avgLevel)+"%",1),o("span",Gs,x(g(m.kWh).value)+" "+x(g(m.kWh).unit),1),m.cost>0?(c(),d("span",zs,"â‚¬"+x(m.cost.toFixed(2)),1)):D("",!0)])]))),128)),(c(!0),d(Z,null,tt(a(t).powerStats.sockets.filter(m=>m.watts>0),m=>(c(),d("div",{key:m.socket,class:"flex items-center justify-between text-[10px] sm:text-xs p-1.5 rounded-lg hover:bg-gray-800/40 transition-colors"},[o("div",Us,[f[7]||(f[7]=o("div",{class:"w-5 h-5 rounded bg-blue-500/20 flex items-center justify-center"},[o("span",{class:"text-[10px]"},"ðŸ”Œ")],-1)),o("span",Zs,x(a(s)(m.socket,"short")),1)]),o("div",Ks,[o("span",Js,x(u(m.onTimeMinutes)),1),o("span",tr,x(g(m.kWh).value)+" "+x(g(m.kWh).unit),1),m.cost>0?(c(),d("span",er,"â‚¬"+x(m.cost.toFixed(2)),1)):D("",!0)])]))),128)),a(e).loaded&&a(t).powerStats.blower?(c(),d("div",nr,[f[8]||(f[8]=o("div",{class:"flex items-center gap-2"},[o("div",{class:"w-5 h-5 rounded bg-cyan-500/20 flex items-center justify-center"},[o("span",{class:"text-[10px]"},"ðŸŒ€")]),o("span",{class:"text-gray-300 font-medium"},"Blower")],-1)),o("div",sr,[o("span",rr,x(u(a(t).powerStats.blower.onTimeMinutes))+" @ "+x(a(t).powerStats.blower.avgLevel)+"%",1),o("span",ar,x(g(a(t).powerStats.blower.kWh).value)+" "+x(g(a(t).powerStats.blower.kWh).unit),1),a(t).powerStats.blower.cost>0?(c(),d("span",or,"â‚¬"+x(a(t).powerStats.blower.cost.toFixed(2)),1)):D("",!0)])])):D("",!0)])):D("",!0),o("button",{onClick:f[1]||(f[1]=m=>i.value=!i.value),class:"text-[10px] text-gray-500 hover:text-gray-300 mt-2 sm:hidden flex items-center gap-1 transition-colors"},[o("span",null,x(i.value?"Hide details":"Show details"),1),(c(),d("svg",{class:S(["w-3 h-3 transition-transform",i.value&&"rotate-180"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...f[9]||(f[9]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))])],64)):(c(),d("div",Ys,[...f[2]||(f[2]=[o("div",{class:"animate-pulse flex items-center justify-center gap-2"},[o("div",{class:"w-4 h-4 rounded-full bg-gray-700"}),o("span",null,"Loading power data...")],-1)])]))]))}}),lr=Object.assign(ir,{__name:"PowerSummaryCard"}),cr={class:"flex items-start justify-between gap-2 mb-2 sm:mb-3"},ur={class:"text-xs text-gray-400 flex items-center gap-1 shrink-0"},dr={key:0,class:"flex flex-wrap gap-x-3 gap-y-1 text-xs justify-end"},fr={class:"text-gray-400"},mr={class:"text-spider-green-400"},hr={key:0,class:"text-center py-4 text-gray-500 text-sm"},gr={key:1},pr={class:"flex"},yr={class:"w-[40px] sm:w-[60px] shrink-0 flex flex-col justify-between pr-1 sm:pr-2 py-1"},xr={class:"flex-1 relative"},wr={class:"relative flex flex-col gap-1 py-1"},br=["onMouseenter"],vr={class:"font-medium text-white mb-1"},kr={class:"space-y-0.5 text-gray-300"},_r={class:"flex items-center gap-2"},Mr={class:"flex items-center gap-2"},Dr={class:"flex items-center gap-2 pt-1 border-t border-gray-700 mt-1"},Tr={class:"text-spider-green-400 font-medium"},$r=ct({__name:"SocketTimeline",props:{events:{},syncRangeStart:{},syncRangeEnd:{}},setup(n){const{getSocketDisplayName:t}=It(),e=n,s=Ae({visible:!1,x:0,y:0,socket:"",startTime:"",endTime:"",duration:"",isActive:!1}),r={O1:"bg-green-500/80 hover:bg-green-400",O2:"bg-blue-500/80 hover:bg-blue-400",O3:"bg-orange-500/80 hover:bg-orange-400",O4:"bg-purple-500/80 hover:bg-purple-400",O5:"bg-yellow-500/80 hover:bg-yellow-400"};function i(v){return r[v]||"bg-gray-500/80 hover:bg-gray-400"}const u=O(()=>e.events?.sockets?e.events.sockets.filter(v=>v.events.length>0):[]),g=O(()=>{const v=e.syncRangeStart?new Date(e.syncRangeStart).getTime():e.events?.rangeStart?new Date(e.events.rangeStart).getTime():Date.now()-36e5,p=e.syncRangeEnd?new Date(e.syncRangeEnd).getTime():e.events?.rangeEnd?new Date(e.events.rangeEnd).getTime():Date.now();return{start:v,end:p,total:p-v}});function w(v){const{start:p,end:$,total:b}=g.value;if(b<=0)return{display:"none"};const M=new Date(v.start).getTime(),P=v.end?new Date(v.end).getTime():Date.now(),z=Math.max(M,p),L=Math.min(P,$);if(L<=p||z>=$)return{display:"none"};const U=(z-p)/b*100,G=(L-z)/b*100;return{left:`${U}%`,width:`${Math.max(G,.5)}%`}}function y(v,p,$){const b=v.target.getBoundingClientRect();s.x=b.left+b.width/2-80,s.y=b.top-95,s.x<10&&(s.x=10),s.x>window.innerWidth-170&&(s.x=window.innerWidth-170),s.y<10&&(s.y=b.bottom+10);const M=new Date($.start),P=$.end?new Date($.end):new Date,z=!$.end,L=P.getTime()-M.getTime(),U=Math.round(L/1e3);s.socket=p,s.startTime=m(M),s.endTime=z?"Activo ahora":m(P),s.duration=_(U),s.isActive=z,s.visible=!0}function f(){s.visible=!1}function m(v){return v.toLocaleString("es-ES",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}function _(v){if(v<60)return`${v}s`;if(v<3600){const b=Math.floor(v/60),M=v%60;return M>0?`${b}m ${M}s`:`${b}m`}const p=Math.floor(v/3600),$=Math.floor(v%3600/60);return $>0?`${p}h ${$}m`:`${p}h`}return(v,p)=>(c(),d("div",null,[o("div",cr,[o("h3",ur,[H(a(qt),{class:"w-3 h-3 text-yellow-400"}),p[0]||(p[0]=o("span",{class:"hidden sm:inline"},"Socket Activity",-1)),p[1]||(p[1]=o("span",{class:"sm:hidden"},"Sockets",-1))]),a(u).length>0?(c(),d("div",dr,[(c(!0),d(Z,null,tt(a(u),$=>(c(),d("span",{key:$.socket,class:"text-gray-500"},[o("span",fr,x(a(t)($.socket,"short"))+":",1),o("span",mr,x(_($.totalSeconds)),1)]))),128))])):D("",!0)]),a(u).length===0?(c(),d("div",hr," No socket activity in this time range ")):(c(),d("div",gr,[o("div",pr,[o("div",yr,[(c(!0),d(Z,null,tt(a(u),$=>(c(),d("div",{key:$.socket,class:"h-5 flex items-center justify-end text-[9px] text-gray-400 truncate"},x(a(t)($.socket,"short")),1))),128))]),o("div",xr,[o("div",wr,[(c(!0),d(Z,null,tt(a(u),$=>(c(),d("div",{key:$.socket,class:"h-5 bg-gray-900/50 rounded relative overflow-hidden"},[(c(!0),d(Z,null,tt($.events,(b,M)=>(c(),d("div",{key:M,class:S(["absolute h-full rounded-sm cursor-pointer transition-colors",i($.socket)]),style:rt(w(b)),onMouseenter:P=>y(P,$.socket,b),onMouseleave:f},null,46,br))),128))]))),128))])])])])),(c(),nt(Re,{to:"body"},[a(s).visible?(c(),d("div",{key:0,class:"fixed z-50 bg-gray-900 border border-gray-600 rounded-lg shadow-xl px-3 py-2 text-xs pointer-events-none",style:rt({left:a(s).x+"px",top:a(s).y+"px"})},[o("div",vr,x(a(t)(a(s).socket,"full")),1),o("div",kr,[o("div",_r,[p[2]||(p[2]=o("span",{class:"text-gray-500"},"Inicio:",-1)),o("span",null,x(a(s).startTime),1)]),o("div",Mr,[p[3]||(p[3]=o("span",{class:"text-gray-500"},"Fin:",-1)),o("span",{class:S(a(s).isActive?"text-spider-green-400":"")},x(a(s).endTime),3)]),o("div",Dr,[p[4]||(p[4]=o("span",{class:"text-gray-500"},"DuraciÃ³n:",-1)),o("span",Tr,x(a(s).duration),1)])])],4)):D("",!0)]))]))}}),Or=Object.assign($r,{__name:"SocketTimeline"}),we=6048e5,Pr=864e5,$t=6e4,Ot=36e5,Sr=1e3,ce=Symbol.for("constructDateFrom");function R(n,t){return typeof n=="function"?n(t):n&&typeof n=="object"&&ce in n?n[ce](t):n instanceof Date?new n.constructor(t):new Date(t)}function T(n,t){return R(t||n,n)}function Rt(n,t,e){const s=T(n,e?.in);return isNaN(t)?R(e?.in||n,NaN):(t&&s.setDate(s.getDate()+t),s)}function Ut(n,t,e){const s=T(n,e?.in);if(isNaN(t))return R(n,NaN);if(!t)return s;const r=s.getDate(),i=R(n,s.getTime());i.setMonth(s.getMonth()+t+1,0);const u=i.getDate();return r>=u?i:(s.setFullYear(i.getFullYear(),i.getMonth(),r),s)}function Zt(n,t,e){return R(n,+T(n)+t)}function Cr(n,t,e){return Zt(n,t*Ot)}let Er={};function ht(){return Er}function it(n,t){const e=ht(),s=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??e.weekStartsOn??e.locale?.options?.weekStartsOn??0,r=T(n,t?.in),i=r.getDay(),u=(i<s?7:0)+i-s;return r.setDate(r.getDate()-u),r.setHours(0,0,0,0),r}function wt(n,t){return it(n,{...t,weekStartsOn:1})}function be(n,t){const e=T(n,t?.in),s=e.getFullYear(),r=R(e,0);r.setFullYear(s+1,0,4),r.setHours(0,0,0,0);const i=wt(r),u=R(e,0);u.setFullYear(s,0,4),u.setHours(0,0,0,0);const g=wt(u);return e.getTime()>=i.getTime()?s+1:e.getTime()>=g.getTime()?s:s-1}function Ht(n){const t=T(n),e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),+n-+e}function gt(n,...t){const e=R.bind(null,t.find(s=>typeof s=="object"));return t.map(e)}function Vt(n,t){const e=T(n,t?.in);return e.setHours(0,0,0,0),e}function ve(n,t,e){const[s,r]=gt(e?.in,n,t),i=Vt(s),u=Vt(r),g=+i-Ht(i),w=+u-Ht(u);return Math.round((g-w)/Pr)}function Yr(n,t){const e=be(n,t),s=R(n,0);return s.setFullYear(e,0,4),s.setHours(0,0,0,0),wt(s)}function Nr(n,t,e){const s=T(n,e?.in);return s.setTime(s.getTime()+t*$t),s}function Fr(n,t,e){return Ut(n,t*3,e)}function Wr(n,t,e){return Zt(n,t*1e3)}function Hr(n,t,e){return Rt(n,t*7,e)}function Lr(n,t,e){return Ut(n,t*12,e)}function Mt(n,t){const e=+T(n)-+T(t);return e<0?-1:e>0?1:e}function Ir(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function ke(n){return!(!Ir(n)&&typeof n!="number"||isNaN(+T(n)))}function qr(n,t,e){const[s,r]=gt(e?.in,n,t),i=s.getFullYear()-r.getFullYear(),u=s.getMonth()-r.getMonth();return i*12+u}function Rr(n,t,e){const[s,r]=gt(e?.in,n,t);return s.getFullYear()-r.getFullYear()}function _e(n,t,e){const[s,r]=gt(e?.in,n,t),i=ue(s,r),u=Math.abs(ve(s,r));s.setDate(s.getDate()-i*u);const g=+(ue(s,r)===-i),w=i*(u-g);return w===0?0:w}function ue(n,t){const e=n.getFullYear()-t.getFullYear()||n.getMonth()-t.getMonth()||n.getDate()-t.getDate()||n.getHours()-t.getHours()||n.getMinutes()-t.getMinutes()||n.getSeconds()-t.getSeconds()||n.getMilliseconds()-t.getMilliseconds();return e<0?-1:e>0?1:e}function Pt(n){return t=>{const s=(n?Math[n]:Math.trunc)(t);return s===0?0:s}}function Ar(n,t,e){const[s,r]=gt(e?.in,n,t),i=(+s-+r)/Ot;return Pt(e?.roundingMethod)(i)}function Kt(n,t){return+T(n)-+T(t)}function jr(n,t,e){const s=Kt(n,t)/$t;return Pt(e?.roundingMethod)(s)}function Me(n,t){const e=T(n,t?.in);return e.setHours(23,59,59,999),e}function De(n,t){const e=T(n,t?.in),s=e.getMonth();return e.setFullYear(e.getFullYear(),s+1,0),e.setHours(23,59,59,999),e}function Br(n,t){const e=T(n,t?.in);return+Me(e,t)==+De(e,t)}function Te(n,t,e){const[s,r,i]=gt(e?.in,n,n,t),u=Mt(r,i),g=Math.abs(qr(r,i));if(g<1)return 0;r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-u*g);let w=Mt(r,i)===-u;Br(s)&&g===1&&Mt(s,i)===1&&(w=!1);const y=u*(g-+w);return y===0?0:y}function Qr(n,t,e){const s=Te(n,t,e)/3;return Pt(e?.roundingMethod)(s)}function Vr(n,t,e){const s=Kt(n,t)/1e3;return Pt(e?.roundingMethod)(s)}function Xr(n,t,e){const s=_e(n,t,e)/7;return Pt(e?.roundingMethod)(s)}function Gr(n,t,e){const[s,r]=gt(e?.in,n,t),i=Mt(s,r),u=Math.abs(Rr(s,r));s.setFullYear(1584),r.setFullYear(1584);const g=Mt(s,r)===-i,w=i*(u-+g);return w===0?0:w}function zr(n,t){const e=T(n,t?.in),s=e.getMonth(),r=s-s%3;return e.setMonth(r,1),e.setHours(0,0,0,0),e}function Ur(n,t){const e=T(n,t?.in);return e.setDate(1),e.setHours(0,0,0,0),e}function Zr(n,t){const e=T(n,t?.in),s=e.getFullYear();return e.setFullYear(s+1,0,0),e.setHours(23,59,59,999),e}function $e(n,t){const e=T(n,t?.in);return e.setFullYear(e.getFullYear(),0,1),e.setHours(0,0,0,0),e}function Kr(n,t){const e=T(n,t?.in);return e.setMinutes(59,59,999),e}function Jr(n,t){const e=ht(),s=e.weekStartsOn??e.locale?.options?.weekStartsOn??0,r=T(n,t?.in),i=r.getDay(),u=(i<s?-7:0)+6-(i-s);return r.setDate(r.getDate()+u),r.setHours(23,59,59,999),r}function ta(n,t){const e=T(n,t?.in);return e.setSeconds(59,999),e}function ea(n,t){const e=T(n,t?.in),s=e.getMonth(),r=s-s%3+3;return e.setMonth(r,0),e.setHours(23,59,59,999),e}function na(n,t){const e=T(n,t?.in);return e.setMilliseconds(999),e}const sa={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},ra=(n,t,e)=>{let s;const r=sa[n];return typeof r=="string"?s=r:t===1?s=r.one:s=r.other.replace("{{count}}",t.toString()),e?.addSuffix?e.comparison&&e.comparison>0?"in "+s:s+" ago":s};function At(n){return(t={})=>{const e=t.width?String(t.width):n.defaultWidth;return n.formats[e]||n.formats[n.defaultWidth]}}const aa={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},oa={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},ia={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},la={date:At({formats:aa,defaultWidth:"full"}),time:At({formats:oa,defaultWidth:"full"}),dateTime:At({formats:ia,defaultWidth:"full"})},ca={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},ua=(n,t,e,s)=>ca[n];function vt(n){return(t,e)=>{const s=e?.context?String(e.context):"standalone";let r;if(s==="formatting"&&n.formattingValues){const u=n.defaultFormattingWidth||n.defaultWidth,g=e?.width?String(e.width):u;r=n.formattingValues[g]||n.formattingValues[u]}else{const u=n.defaultWidth,g=e?.width?String(e.width):n.defaultWidth;r=n.values[g]||n.values[u]}const i=n.argumentCallback?n.argumentCallback(t):t;return r[i]}}const da={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},fa={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},ma={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},ha={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},ga={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},pa={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ya=(n,t)=>{const e=Number(n),s=e%100;if(s>20||s<10)switch(s%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"},xa={ordinalNumber:ya,era:vt({values:da,defaultWidth:"wide"}),quarter:vt({values:fa,defaultWidth:"wide",argumentCallback:n=>n-1}),month:vt({values:ma,defaultWidth:"wide"}),day:vt({values:ha,defaultWidth:"wide"}),dayPeriod:vt({values:ga,defaultWidth:"wide",formattingValues:pa,defaultFormattingWidth:"wide"})};function kt(n){return(t,e={})=>{const s=e.width,r=s&&n.matchPatterns[s]||n.matchPatterns[n.defaultMatchWidth],i=t.match(r);if(!i)return null;const u=i[0],g=s&&n.parsePatterns[s]||n.parsePatterns[n.defaultParseWidth],w=Array.isArray(g)?ba(g,m=>m.test(u)):wa(g,m=>m.test(u));let y;y=n.valueCallback?n.valueCallback(w):w,y=e.valueCallback?e.valueCallback(y):y;const f=t.slice(u.length);return{value:y,rest:f}}}function wa(n,t){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)&&t(n[e]))return e}function ba(n,t){for(let e=0;e<n.length;e++)if(t(n[e]))return e}function va(n){return(t,e={})=>{const s=t.match(n.matchPattern);if(!s)return null;const r=s[0],i=t.match(n.parsePattern);if(!i)return null;let u=n.valueCallback?n.valueCallback(i[0]):i[0];u=e.valueCallback?e.valueCallback(u):u;const g=t.slice(r.length);return{value:u,rest:g}}}const ka=/^(\d+)(th|st|nd|rd)?/i,_a=/\d+/i,Ma={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Da={any:[/^b/i,/^(a|c)/i]},Ta={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},$a={any:[/1/i,/2/i,/3/i,/4/i]},Oa={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Pa={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Sa={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Ca={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Ea={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Ya={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Na={ordinalNumber:va({matchPattern:ka,parsePattern:_a,valueCallback:n=>parseInt(n,10)}),era:kt({matchPatterns:Ma,defaultMatchWidth:"wide",parsePatterns:Da,defaultParseWidth:"any"}),quarter:kt({matchPatterns:Ta,defaultMatchWidth:"wide",parsePatterns:$a,defaultParseWidth:"any",valueCallback:n=>n+1}),month:kt({matchPatterns:Oa,defaultMatchWidth:"wide",parsePatterns:Pa,defaultParseWidth:"any"}),day:kt({matchPatterns:Sa,defaultMatchWidth:"wide",parsePatterns:Ca,defaultParseWidth:"any"}),dayPeriod:kt({matchPatterns:Ea,defaultMatchWidth:"any",parsePatterns:Ya,defaultParseWidth:"any"})},Oe={code:"en-US",formatDistance:ra,formatLong:la,formatRelative:ua,localize:xa,match:Na,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Fa(n,t){const e=T(n,t?.in);return ve(e,$e(e))+1}function Pe(n,t){const e=T(n,t?.in),s=+wt(e)-+Yr(e);return Math.round(s/we)+1}function Jt(n,t){const e=T(n,t?.in),s=e.getFullYear(),r=ht(),i=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,u=R(t?.in||n,0);u.setFullYear(s+1,0,i),u.setHours(0,0,0,0);const g=it(u,t),w=R(t?.in||n,0);w.setFullYear(s,0,i),w.setHours(0,0,0,0);const y=it(w,t);return+e>=+g?s+1:+e>=+y?s:s-1}function Wa(n,t){const e=ht(),s=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??e.firstWeekContainsDate??e.locale?.options?.firstWeekContainsDate??1,r=Jt(n,t),i=R(t?.in||n,0);return i.setFullYear(r,0,s),i.setHours(0,0,0,0),it(i,t)}function Se(n,t){const e=T(n,t?.in),s=+it(e,t)-+Wa(e,t);return Math.round(s/we)+1}function N(n,t){const e=n<0?"-":"",s=Math.abs(n).toString().padStart(t,"0");return e+s}const dt={y(n,t){const e=n.getFullYear(),s=e>0?e:1-e;return N(t==="yy"?s%100:s,t.length)},M(n,t){const e=n.getMonth();return t==="M"?String(e+1):N(e+1,2)},d(n,t){return N(n.getDate(),t.length)},a(n,t){const e=n.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return e.toUpperCase();case"aaa":return e;case"aaaaa":return e[0];default:return e==="am"?"a.m.":"p.m."}},h(n,t){return N(n.getHours()%12||12,t.length)},H(n,t){return N(n.getHours(),t.length)},m(n,t){return N(n.getMinutes(),t.length)},s(n,t){return N(n.getSeconds(),t.length)},S(n,t){const e=t.length,s=n.getMilliseconds(),r=Math.trunc(s*Math.pow(10,e-3));return N(r,t.length)}},yt={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},de={G:function(n,t,e){const s=n.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return e.era(s,{width:"abbreviated"});case"GGGGG":return e.era(s,{width:"narrow"});default:return e.era(s,{width:"wide"})}},y:function(n,t,e){if(t==="yo"){const s=n.getFullYear(),r=s>0?s:1-s;return e.ordinalNumber(r,{unit:"year"})}return dt.y(n,t)},Y:function(n,t,e,s){const r=Jt(n,s),i=r>0?r:1-r;if(t==="YY"){const u=i%100;return N(u,2)}return t==="Yo"?e.ordinalNumber(i,{unit:"year"}):N(i,t.length)},R:function(n,t){const e=be(n);return N(e,t.length)},u:function(n,t){const e=n.getFullYear();return N(e,t.length)},Q:function(n,t,e){const s=Math.ceil((n.getMonth()+1)/3);switch(t){case"Q":return String(s);case"QQ":return N(s,2);case"Qo":return e.ordinalNumber(s,{unit:"quarter"});case"QQQ":return e.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return e.quarter(s,{width:"narrow",context:"formatting"});default:return e.quarter(s,{width:"wide",context:"formatting"})}},q:function(n,t,e){const s=Math.ceil((n.getMonth()+1)/3);switch(t){case"q":return String(s);case"qq":return N(s,2);case"qo":return e.ordinalNumber(s,{unit:"quarter"});case"qqq":return e.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return e.quarter(s,{width:"narrow",context:"standalone"});default:return e.quarter(s,{width:"wide",context:"standalone"})}},M:function(n,t,e){const s=n.getMonth();switch(t){case"M":case"MM":return dt.M(n,t);case"Mo":return e.ordinalNumber(s+1,{unit:"month"});case"MMM":return e.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return e.month(s,{width:"narrow",context:"formatting"});default:return e.month(s,{width:"wide",context:"formatting"})}},L:function(n,t,e){const s=n.getMonth();switch(t){case"L":return String(s+1);case"LL":return N(s+1,2);case"Lo":return e.ordinalNumber(s+1,{unit:"month"});case"LLL":return e.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return e.month(s,{width:"narrow",context:"standalone"});default:return e.month(s,{width:"wide",context:"standalone"})}},w:function(n,t,e,s){const r=Se(n,s);return t==="wo"?e.ordinalNumber(r,{unit:"week"}):N(r,t.length)},I:function(n,t,e){const s=Pe(n);return t==="Io"?e.ordinalNumber(s,{unit:"week"}):N(s,t.length)},d:function(n,t,e){return t==="do"?e.ordinalNumber(n.getDate(),{unit:"date"}):dt.d(n,t)},D:function(n,t,e){const s=Fa(n);return t==="Do"?e.ordinalNumber(s,{unit:"dayOfYear"}):N(s,t.length)},E:function(n,t,e){const s=n.getDay();switch(t){case"E":case"EE":case"EEE":return e.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return e.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return e.day(s,{width:"short",context:"formatting"});default:return e.day(s,{width:"wide",context:"formatting"})}},e:function(n,t,e,s){const r=n.getDay(),i=(r-s.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return N(i,2);case"eo":return e.ordinalNumber(i,{unit:"day"});case"eee":return e.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return e.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return e.day(r,{width:"short",context:"formatting"});default:return e.day(r,{width:"wide",context:"formatting"})}},c:function(n,t,e,s){const r=n.getDay(),i=(r-s.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return N(i,t.length);case"co":return e.ordinalNumber(i,{unit:"day"});case"ccc":return e.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return e.day(r,{width:"narrow",context:"standalone"});case"cccccc":return e.day(r,{width:"short",context:"standalone"});default:return e.day(r,{width:"wide",context:"standalone"})}},i:function(n,t,e){const s=n.getDay(),r=s===0?7:s;switch(t){case"i":return String(r);case"ii":return N(r,t.length);case"io":return e.ordinalNumber(r,{unit:"day"});case"iii":return e.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return e.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return e.day(s,{width:"short",context:"formatting"});default:return e.day(s,{width:"wide",context:"formatting"})}},a:function(n,t,e){const r=n.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return e.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return e.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return e.dayPeriod(r,{width:"narrow",context:"formatting"});default:return e.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(n,t,e){const s=n.getHours();let r;switch(s===12?r=yt.noon:s===0?r=yt.midnight:r=s/12>=1?"pm":"am",t){case"b":case"bb":return e.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return e.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return e.dayPeriod(r,{width:"narrow",context:"formatting"});default:return e.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(n,t,e){const s=n.getHours();let r;switch(s>=17?r=yt.evening:s>=12?r=yt.afternoon:s>=4?r=yt.morning:r=yt.night,t){case"B":case"BB":case"BBB":return e.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return e.dayPeriod(r,{width:"narrow",context:"formatting"});default:return e.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(n,t,e){if(t==="ho"){let s=n.getHours()%12;return s===0&&(s=12),e.ordinalNumber(s,{unit:"hour"})}return dt.h(n,t)},H:function(n,t,e){return t==="Ho"?e.ordinalNumber(n.getHours(),{unit:"hour"}):dt.H(n,t)},K:function(n,t,e){const s=n.getHours()%12;return t==="Ko"?e.ordinalNumber(s,{unit:"hour"}):N(s,t.length)},k:function(n,t,e){let s=n.getHours();return s===0&&(s=24),t==="ko"?e.ordinalNumber(s,{unit:"hour"}):N(s,t.length)},m:function(n,t,e){return t==="mo"?e.ordinalNumber(n.getMinutes(),{unit:"minute"}):dt.m(n,t)},s:function(n,t,e){return t==="so"?e.ordinalNumber(n.getSeconds(),{unit:"second"}):dt.s(n,t)},S:function(n,t){return dt.S(n,t)},X:function(n,t,e){const s=n.getTimezoneOffset();if(s===0)return"Z";switch(t){case"X":return me(s);case"XXXX":case"XX":return mt(s);default:return mt(s,":")}},x:function(n,t,e){const s=n.getTimezoneOffset();switch(t){case"x":return me(s);case"xxxx":case"xx":return mt(s);default:return mt(s,":")}},O:function(n,t,e){const s=n.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+fe(s,":");default:return"GMT"+mt(s,":")}},z:function(n,t,e){const s=n.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+fe(s,":");default:return"GMT"+mt(s,":")}},t:function(n,t,e){const s=Math.trunc(+n/1e3);return N(s,t.length)},T:function(n,t,e){return N(+n,t.length)}};function fe(n,t=""){const e=n>0?"-":"+",s=Math.abs(n),r=Math.trunc(s/60),i=s%60;return i===0?e+String(r):e+String(r)+t+N(i,2)}function me(n,t){return n%60===0?(n>0?"-":"+")+N(Math.abs(n)/60,2):mt(n,t)}function mt(n,t=""){const e=n>0?"-":"+",s=Math.abs(n),r=N(Math.trunc(s/60),2),i=N(s%60,2);return e+r+t+i}const he=(n,t)=>{switch(n){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},Ce=(n,t)=>{switch(n){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},Ha=(n,t)=>{const e=n.match(/(P+)(p+)?/)||[],s=e[1],r=e[2];if(!r)return he(n,t);let i;switch(s){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",he(s,t)).replace("{{time}}",Ce(r,t))},Xt={p:Ce,P:Ha},La=/^D+$/,Ia=/^Y+$/,qa=["D","DD","YY","YYYY"];function Ee(n){return La.test(n)}function Ye(n){return Ia.test(n)}function Gt(n,t,e){const s=Ra(n,t,e);if(qa.includes(n))throw new RangeError(s)}function Ra(n,t,e){const s=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${t}\`) for formatting ${s} to the input \`${e}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Aa=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ja=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ba=/^'([^]*?)'?$/,Qa=/''/g,Va=/[a-zA-Z]/;function Xa(n,t,e){const s=ht(),r=e?.locale??s.locale??Oe,i=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,u=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??s.weekStartsOn??s.locale?.options?.weekStartsOn??0,g=T(n,e?.in);if(!ke(g))throw new RangeError("Invalid time value");let w=t.match(ja).map(f=>{const m=f[0];if(m==="p"||m==="P"){const _=Xt[m];return _(f,r.formatLong)}return f}).join("").match(Aa).map(f=>{if(f==="''")return{isToken:!1,value:"'"};const m=f[0];if(m==="'")return{isToken:!1,value:Ga(f)};if(de[m])return{isToken:!0,value:f};if(m.match(Va))throw new RangeError("Format string contains an unescaped latin alphabet character `"+m+"`");return{isToken:!1,value:f}});r.localize.preprocessor&&(w=r.localize.preprocessor(g,w));const y={firstWeekContainsDate:i,weekStartsOn:u,locale:r};return w.map(f=>{if(!f.isToken)return f.value;const m=f.value;(!e?.useAdditionalWeekYearTokens&&Ye(m)||!e?.useAdditionalDayOfYearTokens&&Ee(m))&&Gt(m,t,String(n));const _=de[m[0]];return _(g,m,r.localize,y)}).join("")}function Ga(n){const t=n.match(Ba);return t?t[1].replace(Qa,"'"):n}function za(){return Object.assign({},ht())}function Ua(n,t){const e=T(n,t?.in).getDay();return e===0?7:e}function Za(n,t){const e=Ka(t)?new t(0):R(t,0);return e.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),e.setHours(n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()),e}function Ka(n){return typeof n=="function"&&n.prototype?.constructor===n}const Ja=10;class Ne{subPriority=0;validate(t,e){return!0}}class to extends Ne{constructor(t,e,s,r,i){super(),this.value=t,this.validateValue=e,this.setValue=s,this.priority=r,i&&(this.subPriority=i)}validate(t,e){return this.validateValue(t,this.value,e)}set(t,e,s){return this.setValue(t,e,this.value,s)}}class eo extends Ne{priority=Ja;subPriority=-1;constructor(t,e){super(),this.context=t||(s=>R(e,s))}set(t,e){return e.timestampIsSet?t:R(t,Za(t,this.context))}}class E{run(t,e,s,r){const i=this.parse(t,e,s,r);return i?{setter:new to(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}validate(t,e,s){return!0}}class no extends E{priority=140;parse(t,e,s){switch(e){case"G":case"GG":case"GGG":return s.era(t,{width:"abbreviated"})||s.era(t,{width:"narrow"});case"GGGGG":return s.era(t,{width:"narrow"});default:return s.era(t,{width:"wide"})||s.era(t,{width:"abbreviated"})||s.era(t,{width:"narrow"})}}set(t,e,s){return e.era=s,t.setFullYear(s,0,1),t.setHours(0,0,0,0),t}incompatibleTokens=["R","u","t","T"]}const B={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},at={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Q(n,t){return n&&{value:t(n.value),rest:n.rest}}function I(n,t){const e=t.match(n);return e?{value:parseInt(e[0],10),rest:t.slice(e[0].length)}:null}function ot(n,t){const e=t.match(n);if(!e)return null;if(e[0]==="Z")return{value:0,rest:t.slice(1)};const s=e[1]==="+"?1:-1,r=e[2]?parseInt(e[2],10):0,i=e[3]?parseInt(e[3],10):0,u=e[5]?parseInt(e[5],10):0;return{value:s*(r*Ot+i*$t+u*Sr),rest:t.slice(e[0].length)}}function Fe(n){return I(B.anyDigitsSigned,n)}function A(n,t){switch(n){case 1:return I(B.singleDigit,t);case 2:return I(B.twoDigits,t);case 3:return I(B.threeDigits,t);case 4:return I(B.fourDigits,t);default:return I(new RegExp("^\\d{1,"+n+"}"),t)}}function Lt(n,t){switch(n){case 1:return I(B.singleDigitSigned,t);case 2:return I(B.twoDigitsSigned,t);case 3:return I(B.threeDigitsSigned,t);case 4:return I(B.fourDigitsSigned,t);default:return I(new RegExp("^-?\\d{1,"+n+"}"),t)}}function te(n){switch(n){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function We(n,t){const e=t>0,s=e?t:1-t;let r;if(s<=50)r=n||100;else{const i=s+50,u=Math.trunc(i/100)*100,g=n>=i%100;r=n+u-(g?100:0)}return e?r:1-r}function He(n){return n%400===0||n%4===0&&n%100!==0}class so extends E{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(t,e,s){const r=i=>({year:i,isTwoDigitYear:e==="yy"});switch(e){case"y":return Q(A(4,t),r);case"yo":return Q(s.ordinalNumber(t,{unit:"year"}),r);default:return Q(A(e.length,t),r)}}validate(t,e){return e.isTwoDigitYear||e.year>0}set(t,e,s){const r=t.getFullYear();if(s.isTwoDigitYear){const u=We(s.year,r);return t.setFullYear(u,0,1),t.setHours(0,0,0,0),t}const i=!("era"in e)||e.era===1?s.year:1-s.year;return t.setFullYear(i,0,1),t.setHours(0,0,0,0),t}}class ro extends E{priority=130;parse(t,e,s){const r=i=>({year:i,isTwoDigitYear:e==="YY"});switch(e){case"Y":return Q(A(4,t),r);case"Yo":return Q(s.ordinalNumber(t,{unit:"year"}),r);default:return Q(A(e.length,t),r)}}validate(t,e){return e.isTwoDigitYear||e.year>0}set(t,e,s,r){const i=Jt(t,r);if(s.isTwoDigitYear){const g=We(s.year,i);return t.setFullYear(g,0,r.firstWeekContainsDate),t.setHours(0,0,0,0),it(t,r)}const u=!("era"in e)||e.era===1?s.year:1-s.year;return t.setFullYear(u,0,r.firstWeekContainsDate),t.setHours(0,0,0,0),it(t,r)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]}class ao extends E{priority=130;parse(t,e){return Lt(e==="R"?4:e.length,t)}set(t,e,s){const r=R(t,0);return r.setFullYear(s,0,4),r.setHours(0,0,0,0),wt(r)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]}class oo extends E{priority=130;parse(t,e){return Lt(e==="u"?4:e.length,t)}set(t,e,s){return t.setFullYear(s,0,1),t.setHours(0,0,0,0),t}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]}class io extends E{priority=120;parse(t,e,s){switch(e){case"Q":case"QQ":return A(e.length,t);case"Qo":return s.ordinalNumber(t,{unit:"quarter"});case"QQQ":return s.quarter(t,{width:"abbreviated",context:"formatting"})||s.quarter(t,{width:"narrow",context:"formatting"});case"QQQQQ":return s.quarter(t,{width:"narrow",context:"formatting"});default:return s.quarter(t,{width:"wide",context:"formatting"})||s.quarter(t,{width:"abbreviated",context:"formatting"})||s.quarter(t,{width:"narrow",context:"formatting"})}}validate(t,e){return e>=1&&e<=4}set(t,e,s){return t.setMonth((s-1)*3,1),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]}class lo extends E{priority=120;parse(t,e,s){switch(e){case"q":case"qq":return A(e.length,t);case"qo":return s.ordinalNumber(t,{unit:"quarter"});case"qqq":return s.quarter(t,{width:"abbreviated",context:"standalone"})||s.quarter(t,{width:"narrow",context:"standalone"});case"qqqqq":return s.quarter(t,{width:"narrow",context:"standalone"});default:return s.quarter(t,{width:"wide",context:"standalone"})||s.quarter(t,{width:"abbreviated",context:"standalone"})||s.quarter(t,{width:"narrow",context:"standalone"})}}validate(t,e){return e>=1&&e<=4}set(t,e,s){return t.setMonth((s-1)*3,1),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]}class co extends E{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(t,e,s){const r=i=>i-1;switch(e){case"M":return Q(I(B.month,t),r);case"MM":return Q(A(2,t),r);case"Mo":return Q(s.ordinalNumber(t,{unit:"month"}),r);case"MMM":return s.month(t,{width:"abbreviated",context:"formatting"})||s.month(t,{width:"narrow",context:"formatting"});case"MMMMM":return s.month(t,{width:"narrow",context:"formatting"});default:return s.month(t,{width:"wide",context:"formatting"})||s.month(t,{width:"abbreviated",context:"formatting"})||s.month(t,{width:"narrow",context:"formatting"})}}validate(t,e){return e>=0&&e<=11}set(t,e,s){return t.setMonth(s,1),t.setHours(0,0,0,0),t}}class uo extends E{priority=110;parse(t,e,s){const r=i=>i-1;switch(e){case"L":return Q(I(B.month,t),r);case"LL":return Q(A(2,t),r);case"Lo":return Q(s.ordinalNumber(t,{unit:"month"}),r);case"LLL":return s.month(t,{width:"abbreviated",context:"standalone"})||s.month(t,{width:"narrow",context:"standalone"});case"LLLLL":return s.month(t,{width:"narrow",context:"standalone"});default:return s.month(t,{width:"wide",context:"standalone"})||s.month(t,{width:"abbreviated",context:"standalone"})||s.month(t,{width:"narrow",context:"standalone"})}}validate(t,e){return e>=0&&e<=11}set(t,e,s){return t.setMonth(s,1),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]}function fo(n,t,e){const s=T(n,e?.in),r=Se(s,e)-t;return s.setDate(s.getDate()-r*7),T(s,e?.in)}class mo extends E{priority=100;parse(t,e,s){switch(e){case"w":return I(B.week,t);case"wo":return s.ordinalNumber(t,{unit:"week"});default:return A(e.length,t)}}validate(t,e){return e>=1&&e<=53}set(t,e,s,r){return it(fo(t,s,r),r)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]}function ho(n,t,e){const s=T(n,e?.in),r=Pe(s,e)-t;return s.setDate(s.getDate()-r*7),s}class go extends E{priority=100;parse(t,e,s){switch(e){case"I":return I(B.week,t);case"Io":return s.ordinalNumber(t,{unit:"week"});default:return A(e.length,t)}}validate(t,e){return e>=1&&e<=53}set(t,e,s){return wt(ho(t,s))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]}const po=[31,28,31,30,31,30,31,31,30,31,30,31],yo=[31,29,31,30,31,30,31,31,30,31,30,31];class xo extends E{priority=90;subPriority=1;parse(t,e,s){switch(e){case"d":return I(B.date,t);case"do":return s.ordinalNumber(t,{unit:"date"});default:return A(e.length,t)}}validate(t,e){const s=t.getFullYear(),r=He(s),i=t.getMonth();return r?e>=1&&e<=yo[i]:e>=1&&e<=po[i]}set(t,e,s){return t.setDate(s),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]}class wo extends E{priority=90;subpriority=1;parse(t,e,s){switch(e){case"D":case"DD":return I(B.dayOfYear,t);case"Do":return s.ordinalNumber(t,{unit:"date"});default:return A(e.length,t)}}validate(t,e){const s=t.getFullYear();return He(s)?e>=1&&e<=366:e>=1&&e<=365}set(t,e,s){return t.setMonth(0,s),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]}function ee(n,t,e){const s=ht(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??s.weekStartsOn??s.locale?.options?.weekStartsOn??0,i=T(n,e?.in),u=i.getDay(),w=(t%7+7)%7,y=7-r,f=t<0||t>6?t-(u+y)%7:(w+y)%7-(u+y)%7;return Rt(i,f,e)}class bo extends E{priority=90;parse(t,e,s){switch(e){case"E":case"EE":case"EEE":return s.day(t,{width:"abbreviated",context:"formatting"})||s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"});case"EEEEE":return s.day(t,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"});default:return s.day(t,{width:"wide",context:"formatting"})||s.day(t,{width:"abbreviated",context:"formatting"})||s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"})}}validate(t,e){return e>=0&&e<=6}set(t,e,s,r){return t=ee(t,s,r),t.setHours(0,0,0,0),t}incompatibleTokens=["D","i","e","c","t","T"]}class vo extends E{priority=90;parse(t,e,s,r){const i=u=>{const g=Math.floor((u-1)/7)*7;return(u+r.weekStartsOn+6)%7+g};switch(e){case"e":case"ee":return Q(A(e.length,t),i);case"eo":return Q(s.ordinalNumber(t,{unit:"day"}),i);case"eee":return s.day(t,{width:"abbreviated",context:"formatting"})||s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"});case"eeeee":return s.day(t,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"});default:return s.day(t,{width:"wide",context:"formatting"})||s.day(t,{width:"abbreviated",context:"formatting"})||s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"})}}validate(t,e){return e>=0&&e<=6}set(t,e,s,r){return t=ee(t,s,r),t.setHours(0,0,0,0),t}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]}class ko extends E{priority=90;parse(t,e,s,r){const i=u=>{const g=Math.floor((u-1)/7)*7;return(u+r.weekStartsOn+6)%7+g};switch(e){case"c":case"cc":return Q(A(e.length,t),i);case"co":return Q(s.ordinalNumber(t,{unit:"day"}),i);case"ccc":return s.day(t,{width:"abbreviated",context:"standalone"})||s.day(t,{width:"short",context:"standalone"})||s.day(t,{width:"narrow",context:"standalone"});case"ccccc":return s.day(t,{width:"narrow",context:"standalone"});case"cccccc":return s.day(t,{width:"short",context:"standalone"})||s.day(t,{width:"narrow",context:"standalone"});default:return s.day(t,{width:"wide",context:"standalone"})||s.day(t,{width:"abbreviated",context:"standalone"})||s.day(t,{width:"short",context:"standalone"})||s.day(t,{width:"narrow",context:"standalone"})}}validate(t,e){return e>=0&&e<=6}set(t,e,s,r){return t=ee(t,s,r),t.setHours(0,0,0,0),t}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]}function _o(n,t,e){const s=T(n,e?.in),r=Ua(s,e),i=t-r;return Rt(s,i,e)}class Mo extends E{priority=90;parse(t,e,s){const r=i=>i===0?7:i;switch(e){case"i":case"ii":return A(e.length,t);case"io":return s.ordinalNumber(t,{unit:"day"});case"iii":return Q(s.day(t,{width:"abbreviated",context:"formatting"})||s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"}),r);case"iiiii":return Q(s.day(t,{width:"narrow",context:"formatting"}),r);case"iiiiii":return Q(s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"}),r);default:return Q(s.day(t,{width:"wide",context:"formatting"})||s.day(t,{width:"abbreviated",context:"formatting"})||s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"}),r)}}validate(t,e){return e>=1&&e<=7}set(t,e,s){return t=_o(t,s),t.setHours(0,0,0,0),t}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]}class Do extends E{priority=80;parse(t,e,s){switch(e){case"a":case"aa":case"aaa":return s.dayPeriod(t,{width:"abbreviated",context:"formatting"})||s.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaaa":return s.dayPeriod(t,{width:"narrow",context:"formatting"});default:return s.dayPeriod(t,{width:"wide",context:"formatting"})||s.dayPeriod(t,{width:"abbreviated",context:"formatting"})||s.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,e,s){return t.setHours(te(s),0,0,0),t}incompatibleTokens=["b","B","H","k","t","T"]}class To extends E{priority=80;parse(t,e,s){switch(e){case"b":case"bb":case"bbb":return s.dayPeriod(t,{width:"abbreviated",context:"formatting"})||s.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbbb":return s.dayPeriod(t,{width:"narrow",context:"formatting"});default:return s.dayPeriod(t,{width:"wide",context:"formatting"})||s.dayPeriod(t,{width:"abbreviated",context:"formatting"})||s.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,e,s){return t.setHours(te(s),0,0,0),t}incompatibleTokens=["a","B","H","k","t","T"]}class $o extends E{priority=80;parse(t,e,s){switch(e){case"B":case"BB":case"BBB":return s.dayPeriod(t,{width:"abbreviated",context:"formatting"})||s.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBBB":return s.dayPeriod(t,{width:"narrow",context:"formatting"});default:return s.dayPeriod(t,{width:"wide",context:"formatting"})||s.dayPeriod(t,{width:"abbreviated",context:"formatting"})||s.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,e,s){return t.setHours(te(s),0,0,0),t}incompatibleTokens=["a","b","t","T"]}class Oo extends E{priority=70;parse(t,e,s){switch(e){case"h":return I(B.hour12h,t);case"ho":return s.ordinalNumber(t,{unit:"hour"});default:return A(e.length,t)}}validate(t,e){return e>=1&&e<=12}set(t,e,s){const r=t.getHours()>=12;return r&&s<12?t.setHours(s+12,0,0,0):!r&&s===12?t.setHours(0,0,0,0):t.setHours(s,0,0,0),t}incompatibleTokens=["H","K","k","t","T"]}class Po extends E{priority=70;parse(t,e,s){switch(e){case"H":return I(B.hour23h,t);case"Ho":return s.ordinalNumber(t,{unit:"hour"});default:return A(e.length,t)}}validate(t,e){return e>=0&&e<=23}set(t,e,s){return t.setHours(s,0,0,0),t}incompatibleTokens=["a","b","h","K","k","t","T"]}class So extends E{priority=70;parse(t,e,s){switch(e){case"K":return I(B.hour11h,t);case"Ko":return s.ordinalNumber(t,{unit:"hour"});default:return A(e.length,t)}}validate(t,e){return e>=0&&e<=11}set(t,e,s){return t.getHours()>=12&&s<12?t.setHours(s+12,0,0,0):t.setHours(s,0,0,0),t}incompatibleTokens=["h","H","k","t","T"]}class Co extends E{priority=70;parse(t,e,s){switch(e){case"k":return I(B.hour24h,t);case"ko":return s.ordinalNumber(t,{unit:"hour"});default:return A(e.length,t)}}validate(t,e){return e>=1&&e<=24}set(t,e,s){const r=s<=24?s%24:s;return t.setHours(r,0,0,0),t}incompatibleTokens=["a","b","h","H","K","t","T"]}class Eo extends E{priority=60;parse(t,e,s){switch(e){case"m":return I(B.minute,t);case"mo":return s.ordinalNumber(t,{unit:"minute"});default:return A(e.length,t)}}validate(t,e){return e>=0&&e<=59}set(t,e,s){return t.setMinutes(s,0,0),t}incompatibleTokens=["t","T"]}class Yo extends E{priority=50;parse(t,e,s){switch(e){case"s":return I(B.second,t);case"so":return s.ordinalNumber(t,{unit:"second"});default:return A(e.length,t)}}validate(t,e){return e>=0&&e<=59}set(t,e,s){return t.setSeconds(s,0),t}incompatibleTokens=["t","T"]}class No extends E{priority=30;parse(t,e){const s=r=>Math.trunc(r*Math.pow(10,-e.length+3));return Q(A(e.length,t),s)}set(t,e,s){return t.setMilliseconds(s),t}incompatibleTokens=["t","T"]}class Fo extends E{priority=10;parse(t,e){switch(e){case"X":return ot(at.basicOptionalMinutes,t);case"XX":return ot(at.basic,t);case"XXXX":return ot(at.basicOptionalSeconds,t);case"XXXXX":return ot(at.extendedOptionalSeconds,t);default:return ot(at.extended,t)}}set(t,e,s){return e.timestampIsSet?t:R(t,t.getTime()-Ht(t)-s)}incompatibleTokens=["t","T","x"]}class Wo extends E{priority=10;parse(t,e){switch(e){case"x":return ot(at.basicOptionalMinutes,t);case"xx":return ot(at.basic,t);case"xxxx":return ot(at.basicOptionalSeconds,t);case"xxxxx":return ot(at.extendedOptionalSeconds,t);default:return ot(at.extended,t)}}set(t,e,s){return e.timestampIsSet?t:R(t,t.getTime()-Ht(t)-s)}incompatibleTokens=["t","T","X"]}class Ho extends E{priority=40;parse(t){return Fe(t)}set(t,e,s){return[R(t,s*1e3),{timestampIsSet:!0}]}incompatibleTokens="*"}class Lo extends E{priority=20;parse(t){return Fe(t)}set(t,e,s){return[R(t,s),{timestampIsSet:!0}]}incompatibleTokens="*"}const Io={G:new no,y:new so,Y:new ro,R:new ao,u:new oo,Q:new io,q:new lo,M:new co,L:new uo,w:new mo,I:new go,d:new xo,D:new wo,E:new bo,e:new vo,c:new ko,i:new Mo,a:new Do,b:new To,B:new $o,h:new Oo,H:new Po,K:new So,k:new Co,m:new Eo,s:new Yo,S:new No,X:new Fo,x:new Wo,t:new Ho,T:new Lo},qo=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ro=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ao=/^'([^]*?)'?$/,jo=/''/g,Bo=/\S/,Qo=/[a-zA-Z]/;function Vo(n,t,e,s){const r=()=>R(s?.in||e,NaN),i=za(),u=s?.locale??i.locale??Oe,g=s?.firstWeekContainsDate??s?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,w=s?.weekStartsOn??s?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0;if(!t)return n?r():T(e,s?.in);const y={firstWeekContainsDate:g,weekStartsOn:w,locale:u},f=[new eo(s?.in,e)],m=t.match(Ro).map(b=>{const M=b[0];if(M in Xt){const P=Xt[M];return P(b,u.formatLong)}return b}).join("").match(qo),_=[];for(let b of m){!s?.useAdditionalWeekYearTokens&&Ye(b)&&Gt(b,t,n),!s?.useAdditionalDayOfYearTokens&&Ee(b)&&Gt(b,t,n);const M=b[0],P=Io[M];if(P){const{incompatibleTokens:z}=P;if(Array.isArray(z)){const U=_.find(G=>z.includes(G.token)||G.token===M);if(U)throw new RangeError(`The format string mustn't contain \`${U.fullToken}\` and \`${b}\` at the same time`)}else if(P.incompatibleTokens==="*"&&_.length>0)throw new RangeError(`The format string mustn't contain \`${b}\` and any other token at the same time`);_.push({token:M,fullToken:b});const L=P.run(n,b,u.match,y);if(!L)return r();f.push(L.setter),n=L.rest}else{if(M.match(Qo))throw new RangeError("Format string contains an unescaped latin alphabet character `"+M+"`");if(b==="''"?b="'":M==="'"&&(b=Xo(b)),n.indexOf(b)===0)n=n.slice(b.length);else return r()}}if(n.length>0&&Bo.test(n))return r();const v=f.map(b=>b.priority).sort((b,M)=>M-b).filter((b,M,P)=>P.indexOf(b)===M).map(b=>f.filter(M=>M.priority===b).sort((M,P)=>P.subPriority-M.subPriority)).map(b=>b[0]);let p=T(e,s?.in);if(isNaN(+p))return r();const $={};for(const b of v){if(!b.validate(p,y))return r();const M=b.set(p,$,y);Array.isArray(M)?(p=M[0],Object.assign($,M[1])):p=M}return p}function Xo(n){return n.match(Ao)[1].replace(jo,"'")}function Go(n,t){const e=T(n,t?.in);return e.setMinutes(0,0,0),e}function zo(n,t){const e=T(n,t?.in);return e.setSeconds(0,0),e}function Uo(n,t){const e=T(n,t?.in);return e.setMilliseconds(0),e}function Zo(n,t){const e=()=>R(t?.in,NaN),s=t?.additionalDigits??2,r=ei(n);let i;if(r.date){const y=ni(r.date,s);i=si(y.restDateString,y.year)}if(!i||isNaN(+i))return e();const u=+i;let g=0,w;if(r.time&&(g=ri(r.time),isNaN(g)))return e();if(r.timezone){if(w=ai(r.timezone),isNaN(w))return e()}else{const y=new Date(u+g),f=T(0,t?.in);return f.setFullYear(y.getUTCFullYear(),y.getUTCMonth(),y.getUTCDate()),f.setHours(y.getUTCHours(),y.getUTCMinutes(),y.getUTCSeconds(),y.getUTCMilliseconds()),f}return T(u+g+w,t?.in)}const Nt={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Ko=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Jo=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,ti=/^([+-])(\d{2})(?::?(\d{2}))?$/;function ei(n){const t={},e=n.split(Nt.dateTimeDelimiter);let s;if(e.length>2)return t;if(/:/.test(e[0])?s=e[0]:(t.date=e[0],s=e[1],Nt.timeZoneDelimiter.test(t.date)&&(t.date=n.split(Nt.timeZoneDelimiter)[0],s=n.substr(t.date.length,n.length))),s){const r=Nt.timezone.exec(s);r?(t.time=s.replace(r[1],""),t.timezone=r[1]):t.time=s}return t}function ni(n,t){const e=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),s=n.match(e);if(!s)return{year:NaN,restDateString:""};const r=s[1]?parseInt(s[1]):null,i=s[2]?parseInt(s[2]):null;return{year:i===null?r:i*100,restDateString:n.slice((s[1]||s[2]).length)}}function si(n,t){if(t===null)return new Date(NaN);const e=n.match(Ko);if(!e)return new Date(NaN);const s=!!e[4],r=_t(e[1]),i=_t(e[2])-1,u=_t(e[3]),g=_t(e[4]),w=_t(e[5])-1;if(s)return ui(t,g,w)?oi(t,g,w):new Date(NaN);{const y=new Date(0);return!li(t,i,u)||!ci(t,r)?new Date(NaN):(y.setUTCFullYear(t,i,Math.max(r,u)),y)}}function _t(n){return n?parseInt(n):1}function ri(n){const t=n.match(Jo);if(!t)return NaN;const e=jt(t[1]),s=jt(t[2]),r=jt(t[3]);return di(e,s,r)?e*Ot+s*$t+r*1e3:NaN}function jt(n){return n&&parseFloat(n.replace(",","."))||0}function ai(n){if(n==="Z")return 0;const t=n.match(ti);if(!t)return 0;const e=t[1]==="+"?-1:1,s=parseInt(t[2]),r=t[3]&&parseInt(t[3])||0;return fi(s,r)?e*(s*Ot+r*$t):NaN}function oi(n,t,e){const s=new Date(0);s.setUTCFullYear(n,0,4);const r=s.getUTCDay()||7,i=(t-1)*7+e+1-r;return s.setUTCDate(s.getUTCDate()+i),s}const ii=[31,null,31,30,31,30,31,31,30,31,30,31];function Le(n){return n%400===0||n%4===0&&n%100!==0}function li(n,t,e){return t>=0&&t<=11&&e>=1&&e<=(ii[t]||(Le(n)?29:28))}function ci(n,t){return t>=1&&t<=(Le(n)?366:365)}function ui(n,t,e){return t>=1&&t<=53&&e>=0&&e<=6}function di(n,t,e){return n===24?t===0&&e===0:e>=0&&e<60&&t>=0&&t<60&&n>=0&&n<25}function fi(n,t){return t>=0&&t<=59}const mi={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};Xe._date.override({_id:"date-fns",formats:function(){return mi},parse:function(n,t){if(n===null||typeof n>"u")return null;const e=typeof n;return e==="number"||n instanceof Date?n=T(n):e==="string"&&(typeof t=="string"?n=Vo(n,t,new Date,this.options):n=Zo(n,this.options)),ke(n)?n.getTime():null},format:function(n,t){return Xa(n,t,this.options)},add:function(n,t,e){switch(e){case"millisecond":return Zt(n,t);case"second":return Wr(n,t);case"minute":return Nr(n,t);case"hour":return Cr(n,t);case"day":return Rt(n,t);case"week":return Hr(n,t);case"month":return Ut(n,t);case"quarter":return Fr(n,t);case"year":return Lr(n,t);default:return n}},diff:function(n,t,e){switch(e){case"millisecond":return Kt(n,t);case"second":return Vr(n,t);case"minute":return jr(n,t);case"hour":return Ar(n,t);case"day":return _e(n,t);case"week":return Xr(n,t);case"month":return Te(n,t);case"quarter":return Qr(n,t);case"year":return Gr(n,t);default:return 0}},startOf:function(n,t,e){switch(t){case"second":return Uo(n);case"minute":return zo(n);case"hour":return Go(n);case"day":return Vt(n);case"week":return it(n);case"isoWeek":return it(n,{weekStartsOn:+e});case"month":return Ur(n);case"quarter":return zr(n);case"year":return $e(n);default:return n}},endOf:function(n,t){switch(t){case"second":return na(n);case"minute":return ta(n);case"hour":return Kr(n);case"day":return Me(n);case"week":return Jr(n);case"month":return De(n);case"quarter":return ea(n);case"year":return Zr(n);default:return n}}});const hi={class:"text-base text-gray-400 mb-1 flex items-center gap-1"},gi={class:"h-32 sm:h-40"},pi={key:1,class:"flex items-center justify-center h-full text-gray-500 text-base"},yi=ct({__name:"SensorChart",props:{title:{},icon:{},iconColor:{},data:{},color:{},emptyMessage:{},yOptions:{},yAxisWidth:{},stepped:{type:[Boolean,String]},timeMin:{},timeMax:{}},setup(n){Ge.register(ze,Ue,Ze,Ke,Je,tn,en,nn);const t=n,e=j(null),s=se("chartsCrosshairX",j(null)),r=se("chartsContainerEl",j(null));re(s,y=>{const f=e.value?.chart;if(!f||!f.chartArea)return;if(y===null){f.setActiveElements([]),f.tooltip?.setActiveElements([],{x:0,y:0}),f.update("none");return}const m=f.canvas,_=r.value?.getBoundingClientRect(),v=m.getBoundingClientRect();if(!_)return;const p=y-(v.left-_.left),{left:$,right:b}=f.chartArea;if(p<$||p>b){f.setActiveElements([]),f.tooltip?.setActiveElements([],{x:0,y:0}),f.update("none");return}const M=f.getDatasetMeta(0);if(!M||!M.data||M.data.length===0)return;let P=0,z=1/0;for(let G=0;G<M.data.length;G++){const st=Math.abs(M.data[G].x-p);st<z&&(z=st,P=G)}const L=M.data[P],U=[{datasetIndex:0,index:P}];f.setActiveElements(U),f.tooltip?.setActiveElements(U,{x:L.x,y:L.y}),f.update("none")});const i=O(()=>t.data&&t.data.length>0),u=O(()=>{const y=t.yAxisWidth?parseInt(t.yAxisWidth,10):void 0;return{responsive:!0,maintainAspectRatio:!1,animation:!1,events:["mousemove"],interaction:{mode:"index",intersect:!1},plugins:{legend:{display:!1},tooltip:{backgroundColor:"#1f2937",borderColor:"#374151",borderWidth:1}},scales:{x:{type:"time",time:{displayFormats:{minute:"HH:mm",hour:"HH:mm",day:"dd/MM HH:mm"}},...t.timeMin?{min:t.timeMin}:{},...t.timeMax?{max:t.timeMax}:{},grid:{color:"#374151"},ticks:{color:"#9ca3af",maxTicksLimit:8,font:{size:9}}},y:{grid:{color:"#374151"},ticks:{color:"#9ca3af",font:{size:9}},...t.yOptions,...y?{afterFit:f=>{f.width=y}}:{}}}}}),g=Be({datasets:[]});let w="";return re(()=>t.data,y=>{if(!y||y.length===0)return;const f=`${y.length}:${y[0].timestamp}:${y[y.length-1].timestamp}`;f!==w&&(w=f,g.value={datasets:[{label:t.title,data:y.map(m=>({x:new Date(m.timestamp).getTime(),y:m.value})),borderColor:t.color,backgroundColor:t.color+"1A",fill:!0,tension:t.stepped?0:.3,stepped:t.stepped||!1,pointRadius:0}]})},{immediate:!0}),(y,f)=>(c(),d("div",null,[o("h3",hi,[(c(),nt(je(n.icon),{class:S(["w-3 h-3",n.iconColor])},null,8,["class"])),xt(" "+x(n.title),1)]),o("div",gi,[a(i)?(c(),nt(a(sn),{key:0,ref_key:"chartRef",ref:e,data:g.value,options:a(u)},null,8,["data","options"])):(c(),d("div",pi,x(n.emptyMessage||"No data available"),1))])]))}}),xi=Object.assign(yi,{__name:"SensorChart"}),wi={class:"rounded-2xl bg-gradient-to-br from-gray-800/60 to-gray-900/60 backdrop-blur-md border border-gray-700/50 relative"},bi={class:"flex items-center justify-between p-4 pb-3 border-b border-gray-700/50 relative overflow-hidden"},vi={class:"text-base font-semibold text-white flex items-center gap-2 shrink-0"},ki={class:"w-7 h-7 rounded-lg bg-gradient-to-br from-spider-green-500/30 to-emerald-600/20 flex items-center justify-center"},_i={class:"flex gap-1 flex-wrap justify-end ml-2"},Mi=["onClick"],Di={key:0,class:"px-4 py-3 border-b border-gray-700/50 bg-gray-800/30"},Ti={class:"flex flex-col sm:flex-row gap-3 sm:items-center"},$i={class:"flex items-center gap-2 flex-1 min-w-0"},Oi={class:"flex items-center gap-2 flex-1 min-w-0"},Pi={class:"lg:sticky lg:-top-6 z-20 bg-gradient-to-b from-gray-800/95 to-gray-900/95 px-4 py-3 border-b border-gray-700/50 shadow-lg shadow-gray-900/50"},Si=ct({__name:"ChartsSection",setup(n){const t=zt(),e=Tt(),s=j(null),r=j(null);ae("chartsCrosshairX",r),ae("chartsContainerEl",s);function i(k){if(!s.value)return;const Y=s.value.getBoundingClientRect();r.value=k.clientX-Y.left}const u=[{value:"1h",label:"1H",hours:1},{value:"4h",label:"4H",hours:4},{value:"6h",label:"6H",hours:6},{value:"12h",label:"12H",hours:12},{value:"24h",label:"24H",hours:24},{value:"48h",label:"48H",hours:48},{value:"7d",label:"7D",hours:168},{value:"30d",label:"30D",hours:720},{value:"60d",label:"60D",hours:1440},{value:"90d",label:"90D",hours:2160}],g=j({oldestTimestamp:null}),w=j(!1),y=j(""),f=j(""),m=j(!1),_=O(()=>{if(!g.value.oldestTimestamp)return u.slice(0,5);const k=new Date(g.value.oldestTimestamp).getTime(),K=(Date.now()-k)/(1e3*60*60);return u.filter(l=>l.hours<=K+1)});async function v(){try{const k=await $fetch("/api/sensors/oldest");g.value=k}catch{}}function p(k){m.value=!1,w.value=!1,t.fetchHistory(k),e.fetchEvents(k)}function $(){if(!y.value||!f.value)return;const k=new Date(y.value).toISOString(),Y=new Date(f.value).toISOString();m.value=!0,t.fetchHistoryCustomRange(k,Y),e.fetchEventsCustomRange(k,Y)}const b=O(()=>t.history.map(k=>({timestamp:k.timestamp,value:k.temp}))),M=O(()=>t.history.map(k=>({timestamp:k.timestamp,value:k.humi}))),P=O(()=>t.history.map(k=>({timestamp:k.timestamp,value:k.co2}))),z=O(()=>t.history.map(k=>({timestamp:k.timestamp,value:k.vpd}))),L=O(()=>t.blowerHistory),U={min:0,max:100,ticks:{callback:k=>`${k}%`}},G=O(()=>t.fanHistory),st={min:0,max:10,ticks:{stepSize:1}},ft={ticks:{callback:k=>k.toFixed(1)}},pt=O(()=>t.soilSensors.map((k,Y)=>({id:k.id,label:k.name||`Sensor ${Y+1}`})));function ut(k){return(t.soilSensorsHistory[k]||[]).map(K=>({timestamp:K.timestamp,value:K.temp_soil}))}function St(k){return(t.soilSensorsHistory[k]||[]).map(K=>({timestamp:K.timestamp,value:K.humi_soil}))}function Ct(k){return(t.soilSensorsHistory[k]||[]).map(K=>({timestamp:K.timestamp,value:K.ec_soil}))}const Et=O(()=>{const k=t.history;return!k||k.length===0?{start:void 0,end:void 0}:{start:k[0].timestamp,end:k[k.length-1].timestamp}}),V=O(()=>{const k=t.history;return!k||k.length===0?{min:void 0,max:void 0}:{min:new Date(k[0].timestamp).getTime(),max:new Date(k[k.length-1].timestamp).getTime()}});return Dt(async()=>{await v(),t.soilSensors.length===0&&await t.fetchSoilSensors();const k=t.selectedRange||"4h";t.fetchHistory(k),e.fetchEvents(k)}),(k,Y)=>{const K=Or,l=xi;return c(),d("div",wi,[o("div",bi,[Y[5]||(Y[5]=o("div",{class:"absolute -top-6 -left-6 w-24 h-24 rounded-full blur-2xl pointer-events-none bg-spider-green-500/30"},null,-1)),o("h2",vi,[o("div",ki,[H(a(rn),{class:"w-4 h-4 text-spider-green-400"})]),Y[4]||(Y[4]=o("span",null,"Charts",-1))]),o("div",_i,[(c(!0),d(Z,null,tt(a(_),h=>(c(),d("button",{key:h.value,onClick:C=>p(h.value),class:S(["px-2.5 py-1.5 rounded-lg text-xs font-medium transition-all",a(t).selectedRange===h.value?"bg-gradient-to-r from-spider-green-500 to-spider-green-600 text-white shadow-lg shadow-spider-green-500/30":"bg-gray-800/60 text-gray-400 hover:bg-gray-700/60 hover:text-gray-300"])},x(h.label),11,Mi))),128)),o("button",{onClick:Y[0]||(Y[0]=h=>w.value=!a(w)),class:S(["px-2 py-1.5 rounded-lg text-xs transition-all",a(m)?"bg-gradient-to-r from-spider-green-500 to-spider-green-600 text-white shadow-lg shadow-spider-green-500/30":"bg-gray-800/60 text-gray-400 hover:bg-gray-700/60 hover:text-gray-300"])},[H(a(Cs),{class:"w-3.5 h-3.5"})],2)])]),a(w)?(c(),d("div",Di,[o("div",Ti,[o("div",$i,[Y[6]||(Y[6]=o("label",{class:"text-xs text-gray-400 shrink-0 font-medium"},"From:",-1)),Wt(o("input",{type:"datetime-local","onUpdate:modelValue":Y[1]||(Y[1]=h=>Qt(y)?y.value=h:null),class:"flex-1 min-w-0 bg-gray-900/60 border border-gray-600/50 rounded-lg px-3 py-2 text-xs text-gray-300 focus:border-spider-green-500/50 focus:outline-none"},null,512),[[Bt,a(y)]])]),o("div",Oi,[Y[7]||(Y[7]=o("label",{class:"text-xs text-gray-400 shrink-0 font-medium"},"To:",-1)),Wt(o("input",{type:"datetime-local","onUpdate:modelValue":Y[2]||(Y[2]=h=>Qt(f)?f.value=h:null),class:"flex-1 min-w-0 bg-gray-900/60 border border-gray-600/50 rounded-lg px-3 py-2 text-xs text-gray-300 focus:border-spider-green-500/50 focus:outline-none"},null,512),[[Bt,a(f)]])]),o("button",{onClick:$,class:"px-4 py-2 bg-gradient-to-r from-spider-green-500 to-spider-green-600 text-white rounded-lg text-xs font-semibold hover:from-spider-green-400 hover:to-spider-green-500 shadow-lg shadow-spider-green-500/20 transition-all shrink-0"}," Apply ")])])):D("",!0),o("div",Pi,[H(K,{events:a(e).events,"sync-range-start":a(Et).start,"sync-range-end":a(Et).end},null,8,["events","sync-range-start","sync-range-end"])]),o("div",{ref_key:"chartsContainer",ref:s,class:"px-4 py-4 space-y-4 relative",onMousemove:i,onMouseleave:Y[3]||(Y[3]=h=>r.value=null)},[o("div",{class:S(["absolute top-0 bottom-0 w-px bg-spider-green-400/50 pointer-events-none z-10",a(r)!==null?"opacity-100":"opacity-0"]),style:rt({left:(a(r)??0)+"px"})},null,6),a(L).length>0?(c(),nt(l,{key:0,title:"Blower Power Level",icon:a(oe),"icon-color":"text-cyan-400",data:a(L),color:"#06b6d4","y-options":U,"empty-message":"No blower data available","y-axis-width":"50px",stepped:"after","time-min":a(V).min,"time-max":a(V).max},null,8,["icon","data","time-min","time-max"])):D("",!0),a(G).length>0?(c(),nt(l,{key:1,title:"Fan Gear Level",icon:a(oe),"icon-color":"text-teal-400",data:a(G),color:"#14b8a6","y-options":st,"empty-message":"No fan data available","y-axis-width":"50px",stepped:"after","time-min":a(V).min,"time-max":a(V).max},null,8,["icon","data","time-min","time-max"])):D("",!0),H(l,{title:"Temperature",icon:a(ie),"icon-color":"text-green-400",data:a(b),color:"#22c55e","empty-message":"No data available","y-axis-width":"50px","time-min":a(V).min,"time-max":a(V).max},null,8,["icon","data","time-min","time-max"]),H(l,{title:"Humidity",icon:a(le),"icon-color":"text-blue-400",data:a(M),color:"#3b82f6","empty-message":"No data available","y-axis-width":"50px","time-min":a(V).min,"time-max":a(V).max},null,8,["icon","data","time-min","time-max"]),H(l,{title:"VPD (Vapor Pressure Deficit)",icon:a(on),"icon-color":"text-purple-400",data:a(z),color:"#a855f7","y-options":ft,"empty-message":"No data available","y-axis-width":"50px","time-min":a(V).min,"time-max":a(V).max},null,8,["icon","data","time-min","time-max"]),(c(!0),d(Z,null,tt(a(pt),h=>(c(),nt(l,{key:`temp-${h.id}`,title:`Soil Temperature - ${h.label}`,icon:a(ie),"icon-color":"text-orange-400",data:ut(h.id),color:"#f97316","empty-message":"No soil data available","y-axis-width":"50px","time-min":a(V).min,"time-max":a(V).max},null,8,["title","icon","data","time-min","time-max"]))),128)),(c(!0),d(Z,null,tt(a(pt),h=>(c(),nt(l,{key:`moisture-${h.id}`,title:`Soil Moisture - ${h.label}`,icon:a(le),"icon-color":"text-yellow-400",data:St(h.id),color:"#eab308","empty-message":"No soil data available","y-axis-width":"50px","time-min":a(V).min,"time-max":a(V).max},null,8,["title","icon","data","time-min","time-max"]))),128)),(c(!0),d(Z,null,tt(a(pt),h=>(c(),nt(l,{key:`ec-${h.id}`,title:`Soil EC - ${h.label}`,icon:a(qt),"icon-color":"text-cyan-400",data:Ct(h.id),color:"#06b6d4","empty-message":"No soil data available","y-axis-width":"50px","time-min":a(V).min,"time-max":a(V).max},null,8,["title","icon","data","time-min","time-max"]))),128)),a(t).hasCo2Sensor?(c(),nt(l,{key:2,title:"CO2",icon:a(ln),"icon-color":"text-amber-400",data:a(P),color:"#f59e0b","empty-message":"No data available","y-axis-width":"50px","time-min":a(V).min,"time-max":a(V).max},null,8,["icon","data","time-min","time-max"])):D("",!0)],544)])}}}),Ci=Object.assign(Si,{__name:"ChartsSection"}),Ei={class:"space-y-4 sm:space-y-5 lg:space-y-6 p-2 sm:p-4"},Yi={class:"grid grid-cols-12 gap-2 sm:gap-4 lg:gap-5"},Ni={key:0,class:"col-span-12 lg:col-span-4 flex flex-col gap-2 lg:gap-0 lg:justify-between"},Fi={key:0,class:"p-2.5 rounded-xl bg-gradient-to-br from-teal-900/40 to-gray-900/40 border border-teal-500/30 backdrop-blur-md"},Wi={class:"flex items-center justify-between mb-1.5"},Hi={class:"text-[9px] text-gray-500 font-medium"},Li={class:"h-2 bg-gray-800/60 rounded-full relative overflow-hidden"},Ii={class:"flex items-center justify-between mt-1.5"},qi={class:"text-[8px] text-gray-500 font-medium"},Ri={class:"text-[8px] text-gray-500"},Ai={class:"col-span-6 lg:col-span-2 flex flex-col gap-2 lg:gap-0 lg:justify-between"},ji={key:0,class:"p-2.5 rounded-xl bg-gradient-to-br from-teal-900/40 to-gray-900/40 border border-teal-500/30 backdrop-blur-md"},Bi={class:"flex items-center justify-between mb-1.5"},Qi={class:"text-[9px] text-gray-500 font-medium"},Vi={class:"h-2 bg-gray-800/60 rounded-full relative overflow-hidden"},Xi={class:"flex items-center justify-between mt-1.5"},Gi={class:"text-[8px] text-gray-500 font-medium"},zi={class:"text-[8px] text-gray-500"},Ui={class:"col-span-6 lg:col-span-2"},Zi={class:"text-sm font-semibold text-white mb-3 flex items-center gap-2 relative"},Ki={class:"w-7 h-7 rounded-lg bg-gradient-to-br from-yellow-500/30 to-amber-600/20 flex items-center justify-center"},Ji={key:0,class:"text-center py-6 text-gray-500"},tl={key:1,class:"text-center py-6 text-gray-500"},el={key:2,class:"grid grid-cols-2 xs:grid-cols-3 sm:grid-cols-4 lg:grid-cols-5 gap-2 sm:gap-3 overflow-visible"},nl={class:"flex-1 min-w-0 flex flex-col gap-3"},sl={class:"text-xs text-gray-400 flex items-center gap-2 font-medium"},rl={class:"w-7 h-7 rounded-lg bg-gradient-to-br from-yellow-500/30 to-amber-600/20 flex items-center justify-center"},al={key:0,class:"text-center py-3 text-gray-500 text-xs"},ol={key:1,class:"text-center py-3 text-gray-500 text-xs"},il={key:2,class:"flex gap-3 flex-wrap"},ll={key:3,class:"relative p-3 rounded-xl bg-gradient-to-br from-gray-800/60 to-gray-900/60 backdrop-blur-md border border-gray-700/50 overflow-hidden"},cl={key:0,class:"absolute -top-8 -left-8 w-32 h-32 rounded-full blur-3xl pointer-events-none bg-cyan-500/20"},ul={class:"relative flex items-center gap-4"},dl={class:"relative w-14 h-14 rounded-xl bg-gradient-to-br from-cyan-500/20 to-blue-600/10 flex items-center justify-center shrink-0"},fl={class:"flex-1 min-w-0"},ml={class:"flex items-center gap-2 mb-1.5"},hl={key:0,class:"text-[9px] text-amber-400 font-medium"},gl={class:"flex items-center gap-3"},pl={class:"flex-1 h-2 bg-gray-700/60 rounded-full overflow-hidden"},yl={class:"flex-1 min-w-0 hidden sm:block"},xl={key:2,class:"col-span-12 lg:col-span-2 lg:relative"},wl={class:"rounded-2xl bg-gradient-to-br from-gray-800/60 to-gray-900/60 backdrop-blur-md border border-gray-700/50 p-3 sm:p-4 flex flex-col lg:absolute lg:inset-0 overflow-hidden relative"},bl={class:"flex-1 min-h-0 flex flex-col"},vl={key:0,class:"text-gray-600 text-center py-6"},kl={class:"flex items-center gap-2"},_l={class:"text-gray-300 truncate font-medium"},Ml={class:"text-gray-600 shrink-0 ml-auto"},Dl={key:0,class:"mt-0.5 ml-9"},Tl={class:"text-purple-400 truncate text-[9px] font-medium"},$l={class:"col-span-12 sm:hidden"},Ol={class:"rounded-2xl bg-gradient-to-br from-gray-800/60 to-gray-900/60 backdrop-blur-md border border-gray-700/50 p-3"},Ft=8,ge=2.8,Pl=62,Sl=ct({__name:"index",setup(n){const t=zt(),e=Tt(),s=pe(),r=ye(),i=xe(),{getSocketDisplayName:u}=It(),g=j(!0),w=j(!1),y=O(()=>w.value?e.log:e.log.slice(0,Ft)),f=O(()=>{const l=s.configs.light;if(!l?.timePeriod?.length)return null;const h=l.timePeriod.find(q=>q.enabled);if(!h)return null;const C=new Date,W=C.getHours()*3600+C.getMinutes()*60+C.getSeconds(),F=h.startTime??0,J=h.endTime??0,Yt=F<=J?W>=F&&W<J:W>=F||W<J,et=new Date(C);et.setHours(0,0,0,0);const X=864e5;if(Yt){let q;W>=F?q=new Date(et.getTime()+F*1e3):q=new Date(et.getTime()-X+F*1e3);const bt=q;let lt;return F<=J?lt=new Date(et.getTime()-X+J*1e3):W>=F?lt=new Date(et.getTime()-X+J*1e3):lt=new Date(et.getTime()-2*X+J*1e3),{dayStart:q,dayEnd:null,nightStart:lt,nightEnd:bt,isCurrentlyDay:!0}}else{let q;W>=J?q=new Date(et.getTime()+J*1e3):q=new Date(et.getTime()-X+J*1e3);const bt=q;let lt;return F<=J?W>=J?lt=new Date(et.getTime()+F*1e3):lt=new Date(et.getTime()-X+F*1e3):lt=new Date(et.getTime()-X+F*1e3),{dayStart:lt,dayEnd:bt,nightStart:q,nightEnd:null,isCurrentlyDay:!1}}}),m=j(null),_=j(null);async function v(){if(!f.value){try{const l=new Date(Date.now()-864e5).toISOString(),h=await $fetch("/api/sensors/period-stats",{query:{since:l}});h&&!h.error&&(m.value=h,_.value=null)}catch{}return}try{const l=f.value,h={since:l.dayStart.toISOString()};l.dayEnd&&(h.until=l.dayEnd.toISOString());const C={since:l.nightStart.toISOString()};l.nightEnd&&(C.until=l.nightEnd.toISOString());const[W,F]=await Promise.all([$fetch("/api/sensors/period-stats",{query:h}),$fetch("/api/sensors/period-stats",{query:C})]);W&&!W.error&&(m.value=W),F&&!F.error&&(_.value=F)}catch{}}const p=j(null);async function $(){try{const l=await $fetch("/api/settings/vpd");l?.enabled?p.value={enabled:!0,targetMin:l.targetMin,targetMax:l.targetMax,mode:l.mode,phase:l.phase,roles:l.roles}:p.value=null}catch{}}function b(l){return new Date(l).toLocaleString("es-ES",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}const M=O(()=>{const l=m.value?.temp;return l?{min:`${l.min?.toFixed(1)||"--"}Â°`,avg:`${l.avg?.toFixed(1)||"--"}Â°`,max:`${l.max?.toFixed(1)||"--"}Â°`}:null}),P=O(()=>{const l=m.value?.humi;return l?{min:`${l.min?.toFixed(1)||"--"}%`,avg:`${l.avg?.toFixed(1)||"--"}%`,max:`${l.max?.toFixed(1)||"--"}%`}:null}),z=O(()=>{const l=m.value?.vpd;return l?{min:l.min?.toFixed(2)||"--",avg:l.avg?.toFixed(2)||"--",max:l.max?.toFixed(2)||"--"}:null}),L=O(()=>{const l=_.value?.temp;return l?{min:`${l.min?.toFixed(1)||"--"}Â°`,avg:`${l.avg?.toFixed(1)||"--"}Â°`,max:`${l.max?.toFixed(1)||"--"}Â°`}:null}),U=O(()=>{const l=_.value?.humi;return l?{min:`${l.min?.toFixed(1)||"--"}%`,avg:`${l.avg?.toFixed(1)||"--"}%`,max:`${l.max?.toFixed(1)||"--"}%`}:null}),G=O(()=>{const l=_.value?.vpd;return l?{min:l.min?.toFixed(2)||"--",avg:l.avg?.toFixed(2)||"--",max:l.max?.toFixed(2)||"--"}:null});function st(l){return .6108*Math.exp(17.27*l/(l+237.3))}const ft=O(()=>{const l=t.current?.temp,h=t.current?.humi;if(l==null||h===void 0||h===null)return null;const C=l-ge,W=st(C),F=st(l)*(h/100);return W-F}),pt=O(()=>{const l=ft.value;if(l!==null)return l<.4?"low":l<.8?"warn-low":l<=1.2?"optimal":l<=1.6?"warn-high":"high"});function ut(l,h){const C=l-ge,W=st(C),F=st(l)*(h/100);return W-F}const St=O(()=>{const l=m.value?.temp,h=m.value?.humi;if(!l||!h)return null;const C=l.min!==void 0&&h.max!==void 0?ut(l.min,h.max):null,W=l.avg!==void 0&&h.avg!==void 0?ut(l.avg,h.avg):null,F=l.max!==void 0&&h.min!==void 0?ut(l.max,h.min):null;return{min:C?.toFixed(2)||"--",avg:W?.toFixed(2)||"--",max:F?.toFixed(2)||"--"}}),Ct=O(()=>{const l=_.value?.temp,h=_.value?.humi;if(!l||!h)return null;const C=l.min!==void 0&&h.max!==void 0?ut(l.min,h.max):null,W=l.avg!==void 0&&h.avg!==void 0?ut(l.avg,h.avg):null,F=l.max!==void 0&&h.min!==void 0?ut(l.max,h.min):null;return{min:C?.toFixed(2)||"--",avg:W?.toFixed(2)||"--",max:F?.toFixed(2)||"--"}}),Et=O(()=>r.on?Math.round(Pl*r.level/100):0),V=O(()=>{const l=Object.entries(e.states);return l.sort((h,C)=>{const W=parseInt(h[0].replace("O","")),F=parseInt(C[0].replace("O",""));return W-F}),Object.fromEntries(l)}),k=O(()=>t.soilSensors.length),Y=O(()=>{const l={};for(const[h,C]of Object.entries(s.states))h==="light"&&e.isLight1Disabled||h==="light2"&&e.isLight2Disabled||(l[h]=C);return l});async function K(){await s.fetchStates(),await Promise.all([t.fetchCurrent(),t.fetchHistory(t.selectedRange||"24h"),v(),e.fetchStates(),e.fetchLog(),e.fetchWattage(),i.fetchSocketAiModes(),$()])}return Dt(async()=>{try{const l=await $fetch("/api/devices/capabilities");g.value=l.capabilities.hasOutlets}catch{}await K()}),(l,h)=>{const C=An,W=ls,F=ps,J=Ss,Yt=lr,et=Ci;return c(),d("div",Ei,[o("div",Yi,[a(k)<3?(c(),d("div",Ni,[H(C,{title:"Temperature",value:a(t).current?.temp,unit:"C",status:a(t).temperatureStatus,"day-stats":a(M),"night-stats":a(L)},null,8,["value","status","day-stats","night-stats"]),H(C,{title:"Humidity",value:a(t).current?.humi,unit:"%",status:a(t).humidityStatus,"day-stats":a(P),"night-stats":a(U)},null,8,["value","status","day-stats","night-stats"]),H(C,{title:"Air VPD",value:a(t).current?.vpd,unit:"kPa",status:a(t).vpdStatus,decimals:2,"day-stats":a(z),"night-stats":a(G)},null,8,["value","status","day-stats","night-stats"]),H(C,{title:"Leaf VPD",value:a(ft),unit:"kPa",status:a(pt),decimals:2,"day-stats":a(St),"night-stats":a(Ct)},null,8,["value","status","day-stats","night-stats"]),a(p)?.enabled&&a(p).targetMin>0?(c(),d("div",Fi,[o("div",Wi,[h[2]||(h[2]=o("span",{class:"text-[9px] text-teal-400 font-semibold uppercase tracking-wider"},"VPD Control",-1)),o("span",Hi,x(a(p).targetMin)+"-"+x(a(p).targetMax)+" kPa",1)]),o("div",Li,[o("div",{class:"absolute h-full bg-gradient-to-r from-teal-600/60 to-teal-500/40 rounded-full",style:rt({left:`${a(p).targetMin/2.5*100}%`,width:`${(a(p).targetMax-a(p).targetMin)/2.5*100}%`})},null,4),a(t).current?.vpd?(c(),d("div",{key:0,class:S(["absolute h-full w-1.5 rounded-full -translate-x-1/2 shadow-lg",a(t).current.vpd>=a(p).targetMin&&a(t).current.vpd<=a(p).targetMax?"bg-teal-400 shadow-teal-400/50":"bg-red-400 shadow-red-400/50"]),style:rt({left:`${Math.min(a(t).current.vpd/2.5*100,100)}%`})},null,6)):D("",!0)]),o("div",Ii,[o("span",qi,x(a(p).mode==="grow_phase"&&a(p).phase?a(p).phase:"manual"),1),o("span",Ri,x(a(p).roles?.length||0)+" devices",1)])])):D("",!0),a(t).hasCo2Sensor?(c(),nt(C,{key:1,title:"CO2",value:a(t).current?.co2,unit:"ppm"},null,8,["value"])):D("",!0),H(W)])):(c(),d(Z,{key:1},[o("div",Ai,[H(C,{title:"Temperature",value:a(t).current?.temp,unit:"C",status:a(t).temperatureStatus,"day-stats":a(M),"night-stats":a(L)},null,8,["value","status","day-stats","night-stats"]),H(C,{title:"Humidity",value:a(t).current?.humi,unit:"%",status:a(t).humidityStatus,"day-stats":a(P),"night-stats":a(U)},null,8,["value","status","day-stats","night-stats"]),H(C,{title:"Air VPD",value:a(t).current?.vpd,unit:"kPa",status:a(t).vpdStatus,decimals:2,"day-stats":a(z),"night-stats":a(G)},null,8,["value","status","day-stats","night-stats"]),H(C,{title:"Leaf VPD",value:a(ft),unit:"kPa",status:a(pt),decimals:2,"day-stats":a(St),"night-stats":a(Ct)},null,8,["value","status","day-stats","night-stats"]),a(p)?.enabled&&a(p).targetMin>0?(c(),d("div",ji,[o("div",Bi,[h[3]||(h[3]=o("span",{class:"text-[9px] text-teal-400 font-semibold uppercase tracking-wider"},"VPD Control",-1)),o("span",Qi,x(a(p).targetMin)+"-"+x(a(p).targetMax)+" kPa",1)]),o("div",Vi,[o("div",{class:"absolute h-full bg-gradient-to-r from-teal-600/60 to-teal-500/40 rounded-full",style:rt({left:`${a(p).targetMin/2.5*100}%`,width:`${(a(p).targetMax-a(p).targetMin)/2.5*100}%`})},null,4),a(t).current?.vpd?(c(),d("div",{key:0,class:S(["absolute h-full w-1.5 rounded-full -translate-x-1/2 shadow-lg",a(t).current.vpd>=a(p).targetMin&&a(t).current.vpd<=a(p).targetMax?"bg-teal-400 shadow-teal-400/50":"bg-red-400 shadow-red-400/50"]),style:rt({left:`${Math.min(a(t).current.vpd/2.5*100,100)}%`})},null,6)):D("",!0)]),o("div",Xi,[o("span",Gi,x(a(p).mode==="grow_phase"&&a(p).phase?a(p).phase:"manual"),1),o("span",zi,x(a(p).roles?.length||0)+" devices",1)])])):D("",!0),a(t).hasCo2Sensor?(c(),nt(C,{key:1,title:"CO2",value:a(t).current?.co2,unit:"ppm"},null,8,["value"])):D("",!0)]),o("div",Ui,[H(W,{stacked:""})])],64)),o("div",{class:S([a(g)?"lg:col-span-6":"lg:col-span-8","col-span-12 rounded-2xl bg-gradient-to-br from-gray-800/60 to-gray-900/60 backdrop-blur-md border border-gray-700/50 p-3 sm:p-4 flex flex-col overflow-hidden relative"])},[h[9]||(h[9]=o("div",{class:"absolute -top-6 -left-6 w-24 h-24 rounded-full blur-2xl pointer-events-none bg-yellow-500/30"},null,-1)),a(g)?(c(),d(Z,{key:0},[o("h2",Zi,[o("div",Ki,[H(a(qt),{class:"w-4 h-4 text-yellow-400"})]),h[4]||(h[4]=xt(" Sockets ",-1))]),a(e).loading?(c(),d("div",Ji,[...h[5]||(h[5]=[o("div",{class:"animate-pulse"},"Loading...",-1)])])):Object.keys(a(e).states).length===0?(c(),d("div",tl," No socket data available ")):(c(),d("div",el,[(c(!0),d(Z,null,tt(a(V),(X,q)=>(c(),nt(F,{key:q,socket:parseInt(q.replace("O","")),state:X,onToggle:bt=>a(e).toggleSocket(q)},null,8,["socket","state","onToggle"]))),128))]))],64)):D("",!0),o("div",{class:S([a(g)?"mt-4 border-t border-gray-700/50 pt-4":"","flex-1 min-h-0 flex gap-4"])},[o("div",nl,[o("h3",sl,[o("div",rl,[H(a(an),{class:"w-4 h-4 text-yellow-400"})]),h[6]||(h[6]=xt(" Lights ",-1))]),a(s).loading?(c(),d("div",al," Loading... ")):Object.keys(a(s).states).length===0?(c(),d("div",ol," No light data ")):(c(),d("div",il,[(c(!0),d(Z,null,tt(a(Y),(X,q)=>(c(),nt(J,{key:q,title:q==="light"?"Light 1":"Light 2","light-id":q,state:X,class:"flex-1 min-w-[140px]",onToggle:bt=>a(s).toggleLight(q)},null,8,["title","light-id","state","onToggle"]))),128))])),a(r).loaded?(c(),d("div",ll,[a(r).on?(c(),d("div",cl)):D("",!0),o("div",ul,[o("div",dl,[(c(),d("svg",{class:S(["w-10 h-10 transition-all duration-300",a(r).on?"text-cyan-400 blower-spin":"text-gray-500"]),viewBox:"0 0 512 512",fill:"currentColor"},[...h[7]||(h[7]=[o("path",{d:"M258.6 0c-1.7 0-3.4 .1-5.1 .5C168 17 115.6 102.3 130.5 189.3c2.9 17 8.4 32.9 15.9 47.4L32 224H29.4C13.2 224 0 237.2 0 253.4c0 1.7 .1 3.4 .5 5.1C17 344 102.3 396.4 189.3 381.5c17-2.9 32.9-8.4 47.4-15.9L224 480v2.6c0 16.2 13.2 29.4 29.4 29.4c1.7 0 3.4-.1 5.1-.5C344 495 396.4 409.7 381.5 322.7c-2.9-17-8.4-32.9-15.9-47.4L480 288h2.6c16.2 0 29.4-13.2 29.4-29.4c0-1.7-.1-3.4-.5-5.1C495 168 409.7 115.6 322.7 130.5c-17 2.9-32.9 8.4-47.4 15.9L288 32V29.4C288 13.2 274.8 0 258.6 0zM256 224a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"},null,-1)])],2))]),o("div",fl,[o("div",ml,[h[8]||(h[8]=o("span",{class:"text-sm font-semibold text-white"},"Blower",-1)),o("span",{class:S(["px-1.5 py-0.5 rounded text-[9px] font-bold uppercase tracking-wide",a(r).on?"bg-cyan-500/20 text-cyan-400":"bg-gray-700/50 text-gray-500"])},x(a(r).on?"ON":"OFF"),3),a(r).on&&a(r).closeCO2?(c(),d("span",hl," CO2 Closed ")):D("",!0),o("span",{class:S(["ml-auto text-sm font-semibold",a(r).on?"text-yellow-400":"text-gray-600"])},x(a(Et))+"W ",3)]),o("div",gl,[o("div",pl,[o("div",{class:S(["h-full rounded-full transition-all duration-500",a(r).on?"bg-gradient-to-r from-cyan-500 to-cyan-400":"bg-gray-600"]),style:rt({width:`${a(r).on?a(r).level:0}%`})},null,6)]),o("span",{class:S(["text-sm font-bold w-12 text-right",a(r).on?"text-cyan-400":"text-gray-500"])},x(a(r).on?`${a(r).level}%`:"0%"),3)])])])])):D("",!0)]),o("div",yl,[H(Yt)])],2)],2),a(g)?(c(),d("div",xl,[o("div",wl,[h[11]||(h[11]=Qe('<div class="absolute -top-6 -left-6 w-24 h-24 rounded-full blur-2xl pointer-events-none bg-purple-500/30" data-v-48a21929></div><h2 class="text-sm font-semibold text-white mb-3 flex items-center gap-2 relative" data-v-48a21929><div class="w-6 h-6 rounded-lg bg-gradient-to-br from-purple-500/30 to-indigo-600/20 flex items-center justify-center" data-v-48a21929><svg class="w-3 h-3 text-purple-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-48a21929><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" data-v-48a21929></path></svg></div> Event Log </h2>',2)),o("div",bl,[a(e).log.length===0?(c(),d("div",vl,[...h[10]||(h[10]=[o("div",{class:"w-10 h-10 mx-auto mb-2 rounded-xl bg-gray-800/50 flex items-center justify-center"},[o("svg",{class:"w-5 h-5 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1),o("p",{class:"text-xs"},"No events",-1)])])):D("",!0),o("div",{class:S([a(w)?"flex-1 overflow-y-auto scrollbar-thin":"","space-y-1 text-[10px] sm:text-[11px]"])},[(c(!0),d(Z,null,tt(a(y),(X,q)=>(c(),d("div",{key:q,class:"py-1.5 rounded-lg hover:bg-gray-800/40 transition-colors"},[o("div",kl,[o("span",{class:S(["shrink-0 px-1.5 py-0.5 rounded text-[9px] font-bold uppercase",X.action==="on"?"text-spider-green-400 bg-spider-green-400/10":"text-red-400 bg-red-400/10"])},x(X.action==="on"?"ON":"OFF"),3),o("span",_l,x(a(u)(X.socket,"short")),1),o("span",Ml,x(b(X.timestamp)),1)]),X.source==="trigger"?(c(),d("div",Dl,[o("span",Tl,x(X.flowName||"trigger"),1)])):D("",!0)]))),128))],2),a(e).log.length>Ft&&!a(w)?(c(),d("button",{key:1,onClick:h[0]||(h[0]=X=>w.value=!0),class:"mt-2 text-[10px] text-gray-500 hover:text-purple-400 transition-colors text-center py-1"}," Ver mÃ¡s ("+x(a(e).log.length-Ft)+" eventos) ",1)):D("",!0),a(w)&&a(e).log.length>Ft?(c(),d("button",{key:2,onClick:h[1]||(h[1]=X=>w.value=!1),class:"mt-2 text-[10px] text-gray-500 hover:text-purple-400 transition-colors text-center py-1 shrink-0"}," Ver menos ")):D("",!0)])])])):D("",!0),o("div",$l,[o("div",Ol,[H(Yt)])])]),H(et)])}}}),Bl=cn(Sl,[["__scopeId","data-v-48a21929"]]);export{Bl as default};
