import{Z as r,J as c}from"./LgMdrHNb.js";const v=r("devices",{state:()=>({devices:{},loading:!1,loaded:!1}),getters:{allDevices:e=>Object.values(e.devices),getDevicesByType:e=>i=>Object.values(e.devices).filter(t=>t.deviceType===i),ps5Devices:e=>Object.values(e.devices).filter(i=>i.deviceType==="PS5"),lcDevices:e=>Object.values(e.devices).filter(i=>i.deviceType==="LC"),cbDevices:e=>Object.values(e.devices).filter(i=>i.deviceType==="CB"),primaryDevices:e=>Object.values(e.devices).filter(i=>i.deviceType==="PS5"||i.deviceType==="CB"),getDisplayName:e=>i=>{const t=e.devices[i];return t?t.customName||n(t.deviceType):i},getSignalBars:()=>e=>e>=-50?4:e>=-60?3:e>=-70?2:e>=-80?1:0,getSignalLabel:()=>e=>e>=-50?"Excellent":e>=-60?"Good":e>=-70?"Fair":e>=-80?"Weak":"Poor"},actions:{async fetchDevices(){this.loaded||(this.loading=!0);try{const e=await $fetch("/api/devices");if(e?.devices){for(const i of e.devices)this.devices[i.mac]=i;this.loaded=!0}}catch{}finally{this.loading=!1}},async updateDeviceName(e,i){try{const{getAuthHeaders:t}=c(),s=await $fetch(`/api/devices/${e}`,{method:"PUT",headers:t(),body:{customName:i}});return s&&(this.devices[e]=s),s}catch(t){throw t}},updateDevice(e,i){this.devices[e]?this.devices[e]={...this.devices[e],...i}:this.devices[e]={mac:e,deviceType:i.deviceType||"UNKNOWN",connected:i.connected??!0,lastSeen:i.lastSeen??Date.now(),wifiRssi:i.wifiRssi??0,...i}},updateWifi(e,i){this.devices[e]&&(this.devices[e].wifiRssi=i,this.devices[e].lastSeen=Date.now(),this.devices[e].connected=!0)}}});function n(e){switch(e){case"PS5":return"Power Strip";case"CB":return"Control Box";case"LC":return"Light Controller";default:return e}}export{v as u};
