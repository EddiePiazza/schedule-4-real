import{ap as m,W as p,k as y,$ as f,J as k}from"./DmxtK6KT.js";const h="$s";function d(...t){const s=typeof t[t.length-1]=="string"?t.pop():void 0;typeof t[0]!="string"&&t.unshift(s);const[a,o]=t;if(!a||typeof a!="string")throw new TypeError("[nuxt] [useState] key must be a string: "+a);if(o!==void 0&&typeof o!="function")throw new Error("[nuxt] [useState] init must be a function: "+o);const r=h+a,i=m(),u=p(i.payload.state,r);if(u.value===void 0&&o){const e=o();if(y(e))return i.payload.state[r]=e,e;u.value=e}return u}function S(){const t=d("socket-names",()=>({})),s=d("socket-names-loaded",()=>!1),a=d("socket-names-loading",()=>!1);async function o(){if(!a.value){a.value=!0;try{const e=await $fetch("/api/socket-names");t.value=e||{},s.value=!0}catch{}finally{a.value=!1}}}async function r(e,c){try{const{getAuthHeaders:n}=k();await $fetch("/api/socket-names",{method:"POST",headers:n(),body:{socket:e,name:c}}),t.value[e]=c}catch(n){throw n}}function i(e,c="full"){const n=e.replace("O",""),l=t.value[e];switch(c){case"name-only":return l||`Socket ${n}`;case"short":return l||`S${n}`;default:return l?`${l} (Socket ${n})`:`Socket ${n}`}}function u(e){return`Socket ${e.replace("O","")}`}return s.value||(a.value=!1,o()),{socketNames:f(t),loaded:f(s),loading:f(a),fetchSocketNames:o,saveSocketName:r,getSocketDisplayName:i,getSocketLabel:u}}export{S as u};
