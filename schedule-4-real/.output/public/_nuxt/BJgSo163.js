import{c as S,a as Z,o as D,l as m}from"./DgvDcRgy.js";import{e as _}from"./DeWKhNcH.js";function T(i,c){return D(),S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[Z("path",{"fill-rule":"evenodd",d:"M11.622 1.602a.75.75 0 0 1 .756 0l2.25 1.313a.75.75 0 0 1-.756 1.295L12 3.118 10.128 4.21a.75.75 0 1 1-.756-1.295l2.25-1.313ZM5.898 5.81a.75.75 0 0 1-.27 1.025l-1.14.665 1.14.665a.75.75 0 1 1-.756 1.295L3.75 8.806v.944a.75.75 0 0 1-1.5 0V7.5a.75.75 0 0 1 .372-.648l2.25-1.312a.75.75 0 0 1 1.026.27Zm12.204 0a.75.75 0 0 1 1.026-.27l2.25 1.312a.75.75 0 0 1 .372.648v2.25a.75.75 0 0 1-1.5 0v-.944l-1.122.654a.75.75 0 1 1-.756-1.295l1.14-.665-1.14-.665a.75.75 0 0 1-.27-1.025Zm-9 5.25a.75.75 0 0 1 1.026-.27L12 11.882l1.872-1.092a.75.75 0 1 1 .756 1.295l-1.878 1.096V15a.75.75 0 0 1-1.5 0v-1.82l-1.878-1.095a.75.75 0 0 1-.27-1.025ZM3 13.5a.75.75 0 0 1 .75.75v1.82l1.878 1.095a.75.75 0 1 1-.756 1.295l-2.25-1.312a.75.75 0 0 1-.372-.648v-2.25A.75.75 0 0 1 3 13.5Zm18 0a.75.75 0 0 1 .75.75v2.25a.75.75 0 0 1-.372.648l-2.25 1.312a.75.75 0 1 1-.756-1.295l1.878-1.096V14.25a.75.75 0 0 1 .75-.75Zm-9 5.25a.75.75 0 0 1 .75.75v.944l1.122-.654a.75.75 0 1 1 .756 1.295l-2.25 1.313a.75.75 0 0 1-.756 0l-2.25-1.313a.75.75 0 1 1 .756-1.295l1.122.654V19.5a.75.75 0 0 1 .75-.75Z","clip-rule":"evenodd"})])}const B={isPublic:!0,inviteOnly:!1,publicName:"",publicDescription:"",password:""},L={isPublic:!1,inviteOnly:!0,publicName:"",publicDescription:"",password:""};function d(i){return i==="big_room"?{...B}:{...L}}const r=m({}),s=m({});let u=!1,f=null;function V(){async function i(){try{const t=await $fetch("/api/room3d/room-settings");if(t?.rooms){const a={};for(const[n,o]of Object.entries(t.rooms)){const l=d(n);a[n]={...l,...o}}r.value=a}u=!0}catch{}}async function c(){try{const t=await $fetch("/api/room3d/room-links");s.value=t||{}}catch{}}function e(t){return r.value[t]||d(t)}function p(t){return e(t).isPublic}function v(t){return e(t).inviteOnly}function h(t){return e(t).publicName}function b(t){return e(t).publicDescription}function w(t){return e(t).password}function y(t){return!!e(t).password}async function g(t,a,n){const o=e(t),l={...o,...a};r.value={...r.value,[t]:l};try{await $fetch("/api/room3d/room-settings",{method:"POST",headers:n,body:{roomId:t,...a,system:_.value}})}catch(O){throw r.value={...r.value,[t]:o},O}}async function P(t,a,n){const o=await $fetch("/api/room3d/room-links",{method:"POST",headers:n,body:{envId:t,code:a}});return s.value={...s.value,[o.envId]:o.code},o}return u||(u=!0,f=i(),c()),{roomSettings:r,roomCodes:s,isPublic:p,isInviteOnly:v,getPublicName:h,getPublicDescription:b,getPassword:w,hasPassword:y,getSettings:e,fetchSettings:i,fetchCodes:c,updateRoom:g,saveCode:P,ready:f||Promise.resolve()}}export{T as r,V as u};
