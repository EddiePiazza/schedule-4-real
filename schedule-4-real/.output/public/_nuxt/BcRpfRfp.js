import{a3 as cl,o as a,c as l,a as e,$ as Ji,C as Re,l as W,m as U,J as Ue,e as Pe,A as He,q as Te,h as t,b as I,t as c,F as Q,r as le,x as pe,B as _t,d as ce,f as j,i as ye,v as $e,n as V,I as Ve,E as yt,w as je,M as ed,G as Ke,g as ot,T as Qe,H as td,p as Ft,k as We,y as sd,W as Ao,a4 as ul,a5 as pl,a6 as ms,D as ln,a7 as gl,z as nd,a8 as Be,a9 as Do,K as fl,aa as Ct,a0 as gn,V as Mo,ab as ml,ac as hl,ad as od,P as mr,ae as Oo,af as bl,ag as rd,Y as ad,Z as ld,s as dt,j as jn}from"./CrOvi5ql.js";import{a as Je,r as Ys}from"./Dz-tZIKD.js";import{r as ze}from"./DLeZR4-D.js";import{b as wt,r as hr,a as Js}from"./Cy3V24HR.js";import{r as id,b as ct,c as _s,a as Us,G as dd}from"./BVUotoKX.js";import{r as fn,a as St,b as br,u as cd,c as ud,d as pd}from"./F_BWUYta.js";import{r as Mt,a as pt,d as gd,e as fd,c as en,b as As}from"./BNsxpt_W.js";import{r as mn}from"./DKNUl-jY.js";import{r as st}from"./CHpsBT05.js";import{r as Tt}from"./9CnbiGX4.js";import{r as hn,a as lt}from"./Cc7Ca6Qt.js";import{r as Ne}from"./DAUAQgeF.js";import{r as os}from"./CQFNeBSk.js";import{aI as nt,aG as md,V as Le,f as tt,R as bn,S as hd,a as Zs,O as Lo,aJ as vl,j as Wt,n as xl,aK as bd,g as ws,i as yl,Q as zs,aL as vd,W as _l,aM as xd,s as yd,aD as _d,p as wd,q as wl,aN as kd,r as ts,aO as $d,h as Cn,M as Cd,w as Vt,b as qt,aP as Sd,aw as vr,aa as Pd,ai as Ed,c as jo,ae as kl,aQ as $l,e as xr,ad as Ht,d as Rt,T as Bt,Y as Td,J as Ad,ax as Dd,ay as yr,a3 as Md}from"./B-1bL4-x.js";import{r as ut}from"./DrMtWeIT.js";import{_ as Pt}from"./DlAUqK2U.js";import{r as hs}from"./BLB10YUZ.js";import{r as Ot}from"./CWjXTmTM.js";import{r as ks}from"./C7n6PzI9.js";import{r as Xt}from"./C0E292J0.js";import{c as Od,_ as Cl}from"./9dOeXmI9.js";import{u as Io}from"./CeYmwSpz.js";import{b as Ro,a as Sn,c as Ld,u as Sl}from"./CL8zVUiS.js";import{r as io}from"./j1zCby7Q.js";import{u as Pl}from"./sm5j8f8j.js";import{_ as jd}from"./kVEvyfi8.js";import{r as Bs}from"./BeMZGlXN.js";import{C as Id,u as Rd}from"./B_Qh0Dli.js";import{r as El}from"./DXygS-hN.js";import{R as Tl,B as Al,L as Dl,D as Fd}from"./CqYR4YeN.js";import{C as Fo,R as Ml,e as Ol,L as Ll,P as No,a as Bo,B as jl,p as Il,b as Vo,c as Uo,i as zo,A as Nd}from"./CqYFChgv.js";import{u as Bd,c as Vd,d as Ud,_ as Ds,P as Ms}from"./CZvMPnKY.js";import{r as zd}from"./Dki5py_8.js";var Hd=Object.create,Rl=Object.defineProperty,Gd=Object.getOwnPropertyDescriptor,Ho=Object.getOwnPropertyNames,Wd=Object.getPrototypeOf,qd=Object.prototype.hasOwnProperty,Kd=(s,n)=>function(){return s&&(n=(0,s[Ho(s)[0]])(s=0)),n},Yd=(s,n)=>function(){return n||(0,s[Ho(s)[0]])((n={exports:{}}).exports,n),n.exports},Zd=(s,n,r,o)=>{if(n&&typeof n=="object"||typeof n=="function")for(let i of Ho(n))!qd.call(s,i)&&i!==r&&Rl(s,i,{get:()=>n[i],enumerable:!(o=Gd(n,i))||o.enumerable});return s},Xd=(s,n,r)=>(r=s!=null?Hd(Wd(s)):{},Zd(Rl(r,"default",{value:s,enumerable:!0}),s)),Xs=Kd({"../../node_modules/.pnpm/tsup@8.4.0_@microsoft+api-extractor@7.51.1_@types+node@22.13.14__jiti@2.4.2_postcss@8.5_96eb05a9d65343021e53791dd83f3773/node_modules/tsup/assets/esm_shims.js"(){}}),Qd=Yd({"../../node_modules/.pnpm/rfdc@1.4.1/node_modules/rfdc/index.js"(s,n){Xs(),n.exports=o;function r(d){return d instanceof Buffer?Buffer.from(d):new d.constructor(d.buffer.slice(),d.byteOffset,d.length)}function o(d){if(d=d||{},d.circles)return i(d);const g=new Map;if(g.set(Date,_=>new Date(_)),g.set(Map,(_,C)=>new Map(m(Array.from(_),C))),g.set(Set,(_,C)=>new Set(m(Array.from(_),C))),d.constructorHandlers)for(const _ of d.constructorHandlers)g.set(_[0],_[1]);let f=null;return d.proto?x:b;function m(_,C){const k=Object.keys(_),p=new Array(k.length);for(let T=0;T<k.length;T++){const M=k[T],P=_[M];typeof P!="object"||P===null?p[M]=P:P.constructor!==Object&&(f=g.get(P.constructor))?p[M]=f(P,C):ArrayBuffer.isView(P)?p[M]=r(P):p[M]=C(P)}return p}function b(_){if(typeof _!="object"||_===null)return _;if(Array.isArray(_))return m(_,b);if(_.constructor!==Object&&(f=g.get(_.constructor)))return f(_,b);const C={};for(const k in _){if(Object.hasOwnProperty.call(_,k)===!1)continue;const p=_[k];typeof p!="object"||p===null?C[k]=p:p.constructor!==Object&&(f=g.get(p.constructor))?C[k]=f(p,b):ArrayBuffer.isView(p)?C[k]=r(p):C[k]=b(p)}return C}function x(_){if(typeof _!="object"||_===null)return _;if(Array.isArray(_))return m(_,x);if(_.constructor!==Object&&(f=g.get(_.constructor)))return f(_,x);const C={};for(const k in _){const p=_[k];typeof p!="object"||p===null?C[k]=p:p.constructor!==Object&&(f=g.get(p.constructor))?C[k]=f(p,x):ArrayBuffer.isView(p)?C[k]=r(p):C[k]=x(p)}return C}}function i(d){const g=[],f=[],m=new Map;if(m.set(Date,k=>new Date(k)),m.set(Map,(k,p)=>new Map(x(Array.from(k),p))),m.set(Set,(k,p)=>new Set(x(Array.from(k),p))),d.constructorHandlers)for(const k of d.constructorHandlers)m.set(k[0],k[1]);let b=null;return d.proto?C:_;function x(k,p){const T=Object.keys(k),M=new Array(T.length);for(let P=0;P<T.length;P++){const w=T[P],$=k[w];if(typeof $!="object"||$===null)M[w]=$;else if($.constructor!==Object&&(b=m.get($.constructor)))M[w]=b($,p);else if(ArrayBuffer.isView($))M[w]=r($);else{const S=g.indexOf($);S!==-1?M[w]=f[S]:M[w]=p($)}}return M}function _(k){if(typeof k!="object"||k===null)return k;if(Array.isArray(k))return x(k,_);if(k.constructor!==Object&&(b=m.get(k.constructor)))return b(k,_);const p={};g.push(k),f.push(p);for(const T in k){if(Object.hasOwnProperty.call(k,T)===!1)continue;const M=k[T];if(typeof M!="object"||M===null)p[T]=M;else if(M.constructor!==Object&&(b=m.get(M.constructor)))p[T]=b(M,_);else if(ArrayBuffer.isView(M))p[T]=r(M);else{const P=g.indexOf(M);P!==-1?p[T]=f[P]:p[T]=_(M)}}return g.pop(),f.pop(),p}function C(k){if(typeof k!="object"||k===null)return k;if(Array.isArray(k))return x(k,C);if(k.constructor!==Object&&(b=m.get(k.constructor)))return b(k,C);const p={};g.push(k),f.push(p);for(const T in k){const M=k[T];if(typeof M!="object"||M===null)p[T]=M;else if(M.constructor!==Object&&(b=m.get(M.constructor)))p[T]=b(M,C);else if(ArrayBuffer.isView(M))p[T]=r(M);else{const P=g.indexOf(M);P!==-1?p[T]=f[P]:p[T]=C(M)}}return g.pop(),f.pop(),p}}}});Xs();Xs();Xs();var Fl=typeof navigator<"u",Se=typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof global<"u"?global:{};typeof Se.chrome<"u"&&Se.chrome.devtools;Fl&&(Se.self,Se.top);var _r;typeof navigator<"u"&&((_r=navigator.userAgent)==null||_r.toLowerCase().includes("electron"));Xs();var Jd=Xd(Qd()),e0=/(?:^|[-_/])(\w)/g;function t0(s,n){return n?n.toUpperCase():""}function s0(s){return s&&`${s}`.replace(e0,t0)}function n0(s,n){let r=s.replace(/^[a-z]:/i,"").replace(/\\/g,"/");r.endsWith(`index${n}`)&&(r=r.replace(`/index${n}`,n));const o=r.lastIndexOf("/"),i=r.substring(o+1);{const d=i.lastIndexOf(n);return i.substring(0,d)}}var wr=(0,Jd.default)({circles:!0});const o0={trailing:!0};function bs(s,n=25,r={}){if(r={...o0,...r},!Number.isFinite(n))throw new TypeError("Expected `wait` to be a finite number");let o,i,d=[],g,f;const m=(b,x)=>(g=r0(s,b,x),g.finally(()=>{if(g=null,r.trailing&&f&&!i){const _=m(b,f);return f=null,_}}),g);return function(...b){return g?(r.trailing&&(f=b),g):new Promise(x=>{const _=!i&&r.leading;clearTimeout(i),i=setTimeout(()=>{i=null;const C=r.leading?o:m(this,b);for(const k of d)k(C);d=[]},n),_?(o=m(this,b),x(o)):d.push(x)})}}async function r0(s,n,r){return await s.apply(n,r)}var a0=Object.create,Nl=Object.defineProperty,l0=Object.getOwnPropertyDescriptor,Go=Object.getOwnPropertyNames,i0=Object.getPrototypeOf,d0=Object.prototype.hasOwnProperty,c0=(s,n)=>function(){return s&&(n=(0,s[Go(s)[0]])(s=0)),n},Bl=(s,n)=>function(){return n||(0,s[Go(s)[0]])((n={exports:{}}).exports,n),n.exports},u0=(s,n,r,o)=>{if(n&&typeof n=="object"||typeof n=="function")for(let i of Go(n))!d0.call(s,i)&&i!==r&&Nl(s,i,{get:()=>n[i],enumerable:!(o=l0(n,i))||o.enumerable});return s},p0=(s,n,r)=>(r=s!=null?a0(i0(s)):{},u0(Nl(r,"default",{value:s,enumerable:!0}),s)),xe=c0({"../../node_modules/.pnpm/tsup@8.4.0_@microsoft+api-extractor@7.51.1_@types+node@22.13.14__jiti@2.4.2_postcss@8.5_96eb05a9d65343021e53791dd83f3773/node_modules/tsup/assets/esm_shims.js"(){}}),g0=Bl({"../../node_modules/.pnpm/speakingurl@14.0.1/node_modules/speakingurl/lib/speakingurl.js"(s,n){xe(),(function(r){var o={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"Ae",Å:"A",Æ:"AE",Ç:"C",È:"E",É:"E",Ê:"E",Ë:"E",Ì:"I",Í:"I",Î:"I",Ï:"I",Ð:"D",Ñ:"N",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"Oe",Ő:"O",Ø:"O",Ù:"U",Ú:"U",Û:"U",Ü:"Ue",Ű:"U",Ý:"Y",Þ:"TH",ß:"ss",à:"a",á:"a",â:"a",ã:"a",ä:"ae",å:"a",æ:"ae",ç:"c",è:"e",é:"e",ê:"e",ë:"e",ì:"i",í:"i",î:"i",ï:"i",ð:"d",ñ:"n",ò:"o",ó:"o",ô:"o",õ:"o",ö:"oe",ő:"o",ø:"o",ù:"u",ú:"u",û:"u",ü:"ue",ű:"u",ý:"y",þ:"th",ÿ:"y","ẞ":"SS",ا:"a",أ:"a",إ:"i",آ:"aa",ؤ:"u",ئ:"e",ء:"a",ب:"b",ت:"t",ث:"th",ج:"j",ح:"h",خ:"kh",د:"d",ذ:"th",ر:"r",ز:"z",س:"s",ش:"sh",ص:"s",ض:"dh",ط:"t",ظ:"z",ع:"a",غ:"gh",ف:"f",ق:"q",ك:"k",ل:"l",م:"m",ن:"n",ه:"h",و:"w",ي:"y",ى:"a",ة:"h",ﻻ:"la",ﻷ:"laa",ﻹ:"lai",ﻵ:"laa",گ:"g",چ:"ch",پ:"p",ژ:"zh",ک:"k",ی:"y","َ":"a","ً":"an","ِ":"e","ٍ":"en","ُ":"u","ٌ":"on","ْ":"","٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","۰":"0","۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9",က:"k",ခ:"kh",ဂ:"g",ဃ:"ga",င:"ng",စ:"s",ဆ:"sa",ဇ:"z","စျ":"za",ည:"ny",ဋ:"t",ဌ:"ta",ဍ:"d",ဎ:"da",ဏ:"na",တ:"t",ထ:"ta",ဒ:"d",ဓ:"da",န:"n",ပ:"p",ဖ:"pa",ဗ:"b",ဘ:"ba",မ:"m",ယ:"y",ရ:"ya",လ:"l",ဝ:"w",သ:"th",ဟ:"h",ဠ:"la",အ:"a","ြ":"y","ျ":"ya","ွ":"w","ြွ":"yw","ျွ":"ywa","ှ":"h",ဧ:"e","၏":"-e",ဣ:"i",ဤ:"-i",ဉ:"u",ဦ:"-u",ဩ:"aw","သြော":"aw",ဪ:"aw","၀":"0","၁":"1","၂":"2","၃":"3","၄":"4","၅":"5","၆":"6","၇":"7","၈":"8","၉":"9","္":"","့":"","း":"",č:"c",ď:"d",ě:"e",ň:"n",ř:"r",š:"s",ť:"t",ů:"u",ž:"z",Č:"C",Ď:"D",Ě:"E",Ň:"N",Ř:"R",Š:"S",Ť:"T",Ů:"U",Ž:"Z",ހ:"h",ށ:"sh",ނ:"n",ރ:"r",ބ:"b",ޅ:"lh",ކ:"k",އ:"a",ވ:"v",މ:"m",ފ:"f",ދ:"dh",ތ:"th",ލ:"l",ގ:"g",ޏ:"gn",ސ:"s",ޑ:"d",ޒ:"z",ޓ:"t",ޔ:"y",ޕ:"p",ޖ:"j",ޗ:"ch",ޘ:"tt",ޙ:"hh",ޚ:"kh",ޛ:"th",ޜ:"z",ޝ:"sh",ޞ:"s",ޟ:"d",ޠ:"t",ޡ:"z",ޢ:"a",ޣ:"gh",ޤ:"q",ޥ:"w","ަ":"a","ާ":"aa","ި":"i","ީ":"ee","ު":"u","ޫ":"oo","ެ":"e","ޭ":"ey","ޮ":"o","ޯ":"oa","ް":"",ა:"a",ბ:"b",გ:"g",დ:"d",ე:"e",ვ:"v",ზ:"z",თ:"t",ი:"i",კ:"k",ლ:"l",მ:"m",ნ:"n",ო:"o",პ:"p",ჟ:"zh",რ:"r",ს:"s",ტ:"t",უ:"u",ფ:"p",ქ:"k",ღ:"gh",ყ:"q",შ:"sh",ჩ:"ch",ც:"ts",ძ:"dz",წ:"ts",ჭ:"ch",ხ:"kh",ჯ:"j",ჰ:"h",α:"a",β:"v",γ:"g",δ:"d",ε:"e",ζ:"z",η:"i",θ:"th",ι:"i",κ:"k",λ:"l",μ:"m",ν:"n",ξ:"ks",ο:"o",π:"p",ρ:"r",σ:"s",τ:"t",υ:"y",φ:"f",χ:"x",ψ:"ps",ω:"o",ά:"a",έ:"e",ί:"i",ό:"o",ύ:"y",ή:"i",ώ:"o",ς:"s",ϊ:"i",ΰ:"y",ϋ:"y",ΐ:"i",Α:"A",Β:"B",Γ:"G",Δ:"D",Ε:"E",Ζ:"Z",Η:"I",Θ:"TH",Ι:"I",Κ:"K",Λ:"L",Μ:"M",Ν:"N",Ξ:"KS",Ο:"O",Π:"P",Ρ:"R",Σ:"S",Τ:"T",Υ:"Y",Φ:"F",Χ:"X",Ψ:"PS",Ω:"O",Ά:"A",Έ:"E",Ί:"I",Ό:"O",Ύ:"Y",Ή:"I",Ώ:"O",Ϊ:"I",Ϋ:"Y",ā:"a",ē:"e",ģ:"g",ī:"i",ķ:"k",ļ:"l",ņ:"n",ū:"u",Ā:"A",Ē:"E",Ģ:"G",Ī:"I",Ķ:"k",Ļ:"L",Ņ:"N",Ū:"U",Ќ:"Kj",ќ:"kj",Љ:"Lj",љ:"lj",Њ:"Nj",њ:"nj",Тс:"Ts",тс:"ts",ą:"a",ć:"c",ę:"e",ł:"l",ń:"n",ś:"s",ź:"z",ż:"z",Ą:"A",Ć:"C",Ę:"E",Ł:"L",Ń:"N",Ś:"S",Ź:"Z",Ż:"Z",Є:"Ye",І:"I",Ї:"Yi",Ґ:"G",є:"ye",і:"i",ї:"yi",ґ:"g",ă:"a",Ă:"A",ș:"s",Ș:"S",ț:"t",Ț:"T",ţ:"t",Ţ:"T",а:"a",б:"b",в:"v",г:"g",д:"d",е:"e",ё:"yo",ж:"zh",з:"z",и:"i",й:"i",к:"k",л:"l",м:"m",н:"n",о:"o",п:"p",р:"r",с:"s",т:"t",у:"u",ф:"f",х:"kh",ц:"c",ч:"ch",ш:"sh",щ:"sh",ъ:"",ы:"y",ь:"",э:"e",ю:"yu",я:"ya",А:"A",Б:"B",В:"V",Г:"G",Д:"D",Е:"E",Ё:"Yo",Ж:"Zh",З:"Z",И:"I",Й:"I",К:"K",Л:"L",М:"M",Н:"N",О:"O",П:"P",Р:"R",С:"S",Т:"T",У:"U",Ф:"F",Х:"Kh",Ц:"C",Ч:"Ch",Ш:"Sh",Щ:"Sh",Ъ:"",Ы:"Y",Ь:"",Э:"E",Ю:"Yu",Я:"Ya",ђ:"dj",ј:"j",ћ:"c",џ:"dz",Ђ:"Dj",Ј:"j",Ћ:"C",Џ:"Dz",ľ:"l",ĺ:"l",ŕ:"r",Ľ:"L",Ĺ:"L",Ŕ:"R",ş:"s",Ş:"S",ı:"i",İ:"I",ğ:"g",Ğ:"G",ả:"a",Ả:"A",ẳ:"a",Ẳ:"A",ẩ:"a",Ẩ:"A",đ:"d",Đ:"D",ẹ:"e",Ẹ:"E",ẽ:"e",Ẽ:"E",ẻ:"e",Ẻ:"E",ế:"e",Ế:"E",ề:"e",Ề:"E",ệ:"e",Ệ:"E",ễ:"e",Ễ:"E",ể:"e",Ể:"E",ỏ:"o",ọ:"o",Ọ:"o",ố:"o",Ố:"O",ồ:"o",Ồ:"O",ổ:"o",Ổ:"O",ộ:"o",Ộ:"O",ỗ:"o",Ỗ:"O",ơ:"o",Ơ:"O",ớ:"o",Ớ:"O",ờ:"o",Ờ:"O",ợ:"o",Ợ:"O",ỡ:"o",Ỡ:"O",Ở:"o",ở:"o",ị:"i",Ị:"I",ĩ:"i",Ĩ:"I",ỉ:"i",Ỉ:"i",ủ:"u",Ủ:"U",ụ:"u",Ụ:"U",ũ:"u",Ũ:"U",ư:"u",Ư:"U",ứ:"u",Ứ:"U",ừ:"u",Ừ:"U",ự:"u",Ự:"U",ữ:"u",Ữ:"U",ử:"u",Ử:"ư",ỷ:"y",Ỷ:"y",ỳ:"y",Ỳ:"Y",ỵ:"y",Ỵ:"Y",ỹ:"y",Ỹ:"Y",ạ:"a",Ạ:"A",ấ:"a",Ấ:"A",ầ:"a",Ầ:"A",ậ:"a",Ậ:"A",ẫ:"a",Ẫ:"A",ắ:"a",Ắ:"A",ằ:"a",Ằ:"A",ặ:"a",Ặ:"A",ẵ:"a",Ẵ:"A","⓪":"0","①":"1","②":"2","③":"3","④":"4","⑤":"5","⑥":"6","⑦":"7","⑧":"8","⑨":"9","⑩":"10","⑪":"11","⑫":"12","⑬":"13","⑭":"14","⑮":"15","⑯":"16","⑰":"17","⑱":"18","⑲":"18","⑳":"18","⓵":"1","⓶":"2","⓷":"3","⓸":"4","⓹":"5","⓺":"6","⓻":"7","⓼":"8","⓽":"9","⓾":"10","⓿":"0","⓫":"11","⓬":"12","⓭":"13","⓮":"14","⓯":"15","⓰":"16","⓱":"17","⓲":"18","⓳":"19","⓴":"20","Ⓐ":"A","Ⓑ":"B","Ⓒ":"C","Ⓓ":"D","Ⓔ":"E","Ⓕ":"F","Ⓖ":"G","Ⓗ":"H","Ⓘ":"I","Ⓙ":"J","Ⓚ":"K","Ⓛ":"L","Ⓜ":"M","Ⓝ":"N","Ⓞ":"O","Ⓟ":"P","Ⓠ":"Q","Ⓡ":"R","Ⓢ":"S","Ⓣ":"T","Ⓤ":"U","Ⓥ":"V","Ⓦ":"W","Ⓧ":"X","Ⓨ":"Y","Ⓩ":"Z","ⓐ":"a","ⓑ":"b","ⓒ":"c","ⓓ":"d","ⓔ":"e","ⓕ":"f","ⓖ":"g","ⓗ":"h","ⓘ":"i","ⓙ":"j","ⓚ":"k","ⓛ":"l","ⓜ":"m","ⓝ":"n","ⓞ":"o","ⓟ":"p","ⓠ":"q","ⓡ":"r","ⓢ":"s","ⓣ":"t","ⓤ":"u","ⓦ":"v","ⓥ":"w","ⓧ":"x","ⓨ":"y","ⓩ":"z","“":'"',"”":'"',"‘":"'","’":"'","∂":"d",ƒ:"f","™":"(TM)","©":"(C)",œ:"oe",Œ:"OE","®":"(R)","†":"+","℠":"(SM)","…":"...","˚":"o",º:"o",ª:"a","•":"*","၊":",","။":".",$:"USD","€":"EUR","₢":"BRN","₣":"FRF","£":"GBP","₤":"ITL","₦":"NGN","₧":"ESP","₩":"KRW","₪":"ILS","₫":"VND","₭":"LAK","₮":"MNT","₯":"GRD","₱":"ARS","₲":"PYG","₳":"ARA","₴":"UAH","₵":"GHS","¢":"cent","¥":"CNY",元:"CNY",円:"YEN","﷼":"IRR","₠":"EWE","฿":"THB","₨":"INR","₹":"INR","₰":"PF","₺":"TRY","؋":"AFN","₼":"AZN",лв:"BGN","៛":"KHR","₡":"CRC","₸":"KZT",ден:"MKD",zł:"PLN","₽":"RUB","₾":"GEL"},i=["်","ް"],d={"ာ":"a","ါ":"a","ေ":"e","ဲ":"e","ိ":"i","ီ":"i","ို":"o","ု":"u","ူ":"u","ေါင်":"aung","ော":"aw","ော်":"aw","ေါ":"aw","ေါ်":"aw","်":"်","က်":"et","ိုက်":"aik","ောက်":"auk","င်":"in","ိုင်":"aing","ောင်":"aung","စ်":"it","ည်":"i","တ်":"at","ိတ်":"eik","ုတ်":"ok","ွတ်":"ut","ေတ်":"it","ဒ်":"d","ိုဒ်":"ok","ုဒ်":"ait","န်":"an","ာန်":"an","ိန်":"ein","ုန်":"on","ွန်":"un","ပ်":"at","ိပ်":"eik","ုပ်":"ok","ွပ်":"ut","န်ုပ်":"nub","မ်":"an","ိမ်":"ein","ုမ်":"on","ွမ်":"un","ယ်":"e","ိုလ်":"ol","ဉ်":"in","ံ":"an","ိံ":"ein","ုံ":"on","ައް":"ah","ަށް":"ah"},g={en:{},az:{ç:"c",ə:"e",ğ:"g",ı:"i",ö:"o",ş:"s",ü:"u",Ç:"C",Ə:"E",Ğ:"G",İ:"I",Ö:"O",Ş:"S",Ü:"U"},cs:{č:"c",ď:"d",ě:"e",ň:"n",ř:"r",š:"s",ť:"t",ů:"u",ž:"z",Č:"C",Ď:"D",Ě:"E",Ň:"N",Ř:"R",Š:"S",Ť:"T",Ů:"U",Ž:"Z"},fi:{ä:"a",Ä:"A",ö:"o",Ö:"O"},hu:{ä:"a",Ä:"A",ö:"o",Ö:"O",ü:"u",Ü:"U",ű:"u",Ű:"U"},lt:{ą:"a",č:"c",ę:"e",ė:"e",į:"i",š:"s",ų:"u",ū:"u",ž:"z",Ą:"A",Č:"C",Ę:"E",Ė:"E",Į:"I",Š:"S",Ų:"U",Ū:"U"},lv:{ā:"a",č:"c",ē:"e",ģ:"g",ī:"i",ķ:"k",ļ:"l",ņ:"n",š:"s",ū:"u",ž:"z",Ā:"A",Č:"C",Ē:"E",Ģ:"G",Ī:"i",Ķ:"k",Ļ:"L",Ņ:"N",Š:"S",Ū:"u",Ž:"Z"},pl:{ą:"a",ć:"c",ę:"e",ł:"l",ń:"n",ó:"o",ś:"s",ź:"z",ż:"z",Ą:"A",Ć:"C",Ę:"e",Ł:"L",Ń:"N",Ó:"O",Ś:"S",Ź:"Z",Ż:"Z"},sv:{ä:"a",Ä:"A",ö:"o",Ö:"O"},sk:{ä:"a",Ä:"A"},sr:{љ:"lj",њ:"nj",Љ:"Lj",Њ:"Nj",đ:"dj",Đ:"Dj"},tr:{Ü:"U",Ö:"O",ü:"u",ö:"o"}},f={ar:{"∆":"delta","∞":"la-nihaya","♥":"hob","&":"wa","|":"aw","<":"aqal-men",">":"akbar-men","∑":"majmou","¤":"omla"},az:{},ca:{"∆":"delta","∞":"infinit","♥":"amor","&":"i","|":"o","<":"menys que",">":"mes que","∑":"suma dels","¤":"moneda"},cs:{"∆":"delta","∞":"nekonecno","♥":"laska","&":"a","|":"nebo","<":"mensi nez",">":"vetsi nez","∑":"soucet","¤":"mena"},de:{"∆":"delta","∞":"unendlich","♥":"Liebe","&":"und","|":"oder","<":"kleiner als",">":"groesser als","∑":"Summe von","¤":"Waehrung"},dv:{"∆":"delta","∞":"kolunulaa","♥":"loabi","&":"aai","|":"noonee","<":"ah vure kuda",">":"ah vure bodu","∑":"jumula","¤":"faisaa"},en:{"∆":"delta","∞":"infinity","♥":"love","&":"and","|":"or","<":"less than",">":"greater than","∑":"sum","¤":"currency"},es:{"∆":"delta","∞":"infinito","♥":"amor","&":"y","|":"u","<":"menos que",">":"mas que","∑":"suma de los","¤":"moneda"},fa:{"∆":"delta","∞":"bi-nahayat","♥":"eshgh","&":"va","|":"ya","<":"kamtar-az",">":"bishtar-az","∑":"majmooe","¤":"vahed"},fi:{"∆":"delta","∞":"aarettomyys","♥":"rakkaus","&":"ja","|":"tai","<":"pienempi kuin",">":"suurempi kuin","∑":"summa","¤":"valuutta"},fr:{"∆":"delta","∞":"infiniment","♥":"Amour","&":"et","|":"ou","<":"moins que",">":"superieure a","∑":"somme des","¤":"monnaie"},ge:{"∆":"delta","∞":"usasruloba","♥":"siqvaruli","&":"da","|":"an","<":"naklebi",">":"meti","∑":"jami","¤":"valuta"},gr:{},hu:{"∆":"delta","∞":"vegtelen","♥":"szerelem","&":"es","|":"vagy","<":"kisebb mint",">":"nagyobb mint","∑":"szumma","¤":"penznem"},it:{"∆":"delta","∞":"infinito","♥":"amore","&":"e","|":"o","<":"minore di",">":"maggiore di","∑":"somma","¤":"moneta"},lt:{"∆":"delta","∞":"begalybe","♥":"meile","&":"ir","|":"ar","<":"maziau nei",">":"daugiau nei","∑":"suma","¤":"valiuta"},lv:{"∆":"delta","∞":"bezgaliba","♥":"milestiba","&":"un","|":"vai","<":"mazak neka",">":"lielaks neka","∑":"summa","¤":"valuta"},my:{"∆":"kwahkhyaet","∞":"asaonasme","♥":"akhyait","&":"nhin","|":"tho","<":"ngethaw",">":"kyithaw","∑":"paungld","¤":"ngwekye"},mk:{},nl:{"∆":"delta","∞":"oneindig","♥":"liefde","&":"en","|":"of","<":"kleiner dan",">":"groter dan","∑":"som","¤":"valuta"},pl:{"∆":"delta","∞":"nieskonczonosc","♥":"milosc","&":"i","|":"lub","<":"mniejsze niz",">":"wieksze niz","∑":"suma","¤":"waluta"},pt:{"∆":"delta","∞":"infinito","♥":"amor","&":"e","|":"ou","<":"menor que",">":"maior que","∑":"soma","¤":"moeda"},ro:{"∆":"delta","∞":"infinit","♥":"dragoste","&":"si","|":"sau","<":"mai mic ca",">":"mai mare ca","∑":"suma","¤":"valuta"},ru:{"∆":"delta","∞":"beskonechno","♥":"lubov","&":"i","|":"ili","<":"menshe",">":"bolshe","∑":"summa","¤":"valjuta"},sk:{"∆":"delta","∞":"nekonecno","♥":"laska","&":"a","|":"alebo","<":"menej ako",">":"viac ako","∑":"sucet","¤":"mena"},sr:{},tr:{"∆":"delta","∞":"sonsuzluk","♥":"ask","&":"ve","|":"veya","<":"kucuktur",">":"buyuktur","∑":"toplam","¤":"para birimi"},uk:{"∆":"delta","∞":"bezkinechnist","♥":"lubov","&":"i","|":"abo","<":"menshe",">":"bilshe","∑":"suma","¤":"valjuta"},vn:{"∆":"delta","∞":"vo cuc","♥":"yeu","&":"va","|":"hoac","<":"nho hon",">":"lon hon","∑":"tong","¤":"tien te"}},m=[";","?",":","@","&","=","+","$",",","/"].join(""),b=[";","?",":","@","&","=","+","$",","].join(""),x=[".","!","~","*","'","(",")"].join(""),_=function(M,P){var w="-",$="",S="",A=!0,y={},h,u,v,D,z,G,B,O,R,X,oe,we,re,E,L="";if(typeof M!="string")return"";if(typeof P=="string"&&(w=P),B=f.en,O=g.en,typeof P=="object"){h=P.maintainCase||!1,y=P.custom&&typeof P.custom=="object"?P.custom:y,v=+P.truncate>1&&P.truncate||!1,D=P.uric||!1,z=P.uricNoSlash||!1,G=P.mark||!1,A=!(P.symbols===!1||P.lang===!1),w=P.separator||w,D&&(L+=m),z&&(L+=b),G&&(L+=x),B=P.lang&&f[P.lang]&&A?f[P.lang]:A?f.en:{},O=P.lang&&g[P.lang]?g[P.lang]:P.lang===!1||P.lang===!0?{}:g.en,P.titleCase&&typeof P.titleCase.length=="number"&&Array.prototype.toString.call(P.titleCase)?(P.titleCase.forEach(function(F){y[F+""]=F+""}),u=!0):u=!!P.titleCase,P.custom&&typeof P.custom.length=="number"&&Array.prototype.toString.call(P.custom)&&P.custom.forEach(function(F){y[F+""]=F+""}),Object.keys(y).forEach(function(F){var be;F.length>1?be=new RegExp("\\b"+k(F)+"\\b","gi"):be=new RegExp(k(F),"gi"),M=M.replace(be,y[F])});for(oe in y)L+=oe}for(L+=w,L=k(L),M=M.replace(/(^\s+|\s+$)/g,""),re=!1,E=!1,X=0,we=M.length;X<we;X++)oe=M[X],p(oe,y)?re=!1:O[oe]?(oe=re&&O[oe].match(/[A-Za-z0-9]/)?" "+O[oe]:O[oe],re=!1):oe in o?(X+1<we&&i.indexOf(M[X+1])>=0?(S+=oe,oe=""):E===!0?(oe=d[S]+o[oe],S=""):oe=re&&o[oe].match(/[A-Za-z0-9]/)?" "+o[oe]:o[oe],re=!1,E=!1):oe in d?(S+=oe,oe="",X===we-1&&(oe=d[S]),E=!0):B[oe]&&!(D&&m.indexOf(oe)!==-1)&&!(z&&b.indexOf(oe)!==-1)?(oe=re||$.substr(-1).match(/[A-Za-z0-9]/)?w+B[oe]:B[oe],oe+=M[X+1]!==void 0&&M[X+1].match(/[A-Za-z0-9]/)?w:"",re=!0):(E===!0?(oe=d[S]+oe,S="",E=!1):re&&(/[A-Za-z0-9]/.test(oe)||$.substr(-1).match(/A-Za-z0-9]/))&&(oe=" "+oe),re=!1),$+=oe.replace(new RegExp("[^\\w\\s"+L+"_-]","g"),w);return u&&($=$.replace(/(\w)(\S*)/g,function(F,be,ie){var de=be.toUpperCase()+(ie!==null?ie:"");return Object.keys(y).indexOf(de.toLowerCase())<0?de:de.toLowerCase()})),$=$.replace(/\s+/g,w).replace(new RegExp("\\"+w+"+","g"),w).replace(new RegExp("(^\\"+w+"+|\\"+w+"+$)","g"),""),v&&$.length>v&&(R=$.charAt(v)===w,$=$.slice(0,v),R||($=$.slice(0,$.lastIndexOf(w)))),!h&&!u&&($=$.toLowerCase()),$},C=function(M){return function(w){return _(w,M)}},k=function(M){return M.replace(/[-\\^$*+?.()|[\]{}\/]/g,"\\$&")},p=function(T,M){for(var P in M)if(M[P]===T)return!0};if(typeof n<"u"&&n.exports)n.exports=_,n.exports.createSlug=C;else if(typeof define<"u"&&define.amd)define([],function(){return _});else try{if(r.getSlug||r.createSlug)throw"speakingurl: globals exists /(getSlug|createSlug)/";r.getSlug=_,r.createSlug=C}catch{}})(s)}}),f0=Bl({"../../node_modules/.pnpm/speakingurl@14.0.1/node_modules/speakingurl/index.js"(s,n){xe(),n.exports=g0()}});xe();xe();xe();xe();xe();xe();xe();xe();function m0(s){var n;const r=s.name||s._componentTag||s.__VUE_DEVTOOLS_COMPONENT_GUSSED_NAME__||s.__name;return r==="index"&&((n=s.__file)!=null&&n.endsWith("index.vue"))?"":r}function h0(s){const n=s.__file;if(n)return s0(n0(n,".vue"))}function kr(s,n){return s.type.__VUE_DEVTOOLS_COMPONENT_GUSSED_NAME__=n,n}function Wo(s){if(s.__VUE_DEVTOOLS_NEXT_APP_RECORD__)return s.__VUE_DEVTOOLS_NEXT_APP_RECORD__;if(s.root)return s.appContext.app.__VUE_DEVTOOLS_NEXT_APP_RECORD__}function Vl(s){var n,r;const o=(n=s.subTree)==null?void 0:n.type,i=Wo(s);return i?((r=i?.types)==null?void 0:r.Fragment)===o:!1}function Pn(s){var n,r,o;const i=m0(s?.type||{});if(i)return i;if(s?.root===s)return"Root";for(const g in(r=(n=s.parent)==null?void 0:n.type)==null?void 0:r.components)if(s.parent.type.components[g]===s?.type)return kr(s,g);for(const g in(o=s.appContext)==null?void 0:o.components)if(s.appContext.components[g]===s?.type)return kr(s,g);const d=h0(s?.type||{});return d||"Anonymous Component"}function b0(s){var n,r,o;const i=(o=(r=(n=s?.appContext)==null?void 0:n.app)==null?void 0:r.__VUE_DEVTOOLS_NEXT_APP_RECORD_ID__)!=null?o:0,d=s===s?.root?"root":s.uid;return`${i}:${d}`}function co(s,n){return n=n||`${s.id}:root`,s.instanceMap.get(n)||s.instanceMap.get(":root")}function v0(){const s={top:0,bottom:0,left:0,right:0,get width(){return s.right-s.left},get height(){return s.bottom-s.top}};return s}var tn;function x0(s){return tn||(tn=document.createRange()),tn.selectNode(s),tn.getBoundingClientRect()}function y0(s){const n=v0();if(!s.children)return n;for(let r=0,o=s.children.length;r<o;r++){const i=s.children[r];let d;if(i.component)d=ns(i.component);else if(i.el){const g=i.el;g.nodeType===1||g.getBoundingClientRect?d=g.getBoundingClientRect():g.nodeType===3&&g.data.trim()&&(d=x0(g))}d&&_0(n,d)}return n}function _0(s,n){return(!s.top||n.top<s.top)&&(s.top=n.top),(!s.bottom||n.bottom>s.bottom)&&(s.bottom=n.bottom),(!s.left||n.left<s.left)&&(s.left=n.left),(!s.right||n.right>s.right)&&(s.right=n.right),s}var $r={top:0,left:0,right:0,bottom:0,width:0,height:0};function ns(s){const n=s.subTree.el;return typeof window>"u"?$r:Vl(s)?y0(s.subTree):n?.nodeType===1?n?.getBoundingClientRect():s.subTree.component?ns(s.subTree.component):$r}xe();function qo(s){return Vl(s)?w0(s.subTree):s.subTree?[s.subTree.el]:[]}function w0(s){if(!s.children)return[];const n=[];return s.children.forEach(r=>{r.component?n.push(...qo(r.component)):r?.el&&n.push(r.el)}),n}var Ul="__vue-devtools-component-inspector__",zl="__vue-devtools-component-inspector__card__",Hl="__vue-devtools-component-inspector__name__",Gl="__vue-devtools-component-inspector__indicator__",Wl={display:"block",zIndex:2147483640,position:"fixed",backgroundColor:"#42b88325",border:"1px solid #42b88350",borderRadius:"5px",transition:"all 0.1s ease-in",pointerEvents:"none"},k0={fontFamily:"Arial, Helvetica, sans-serif",padding:"5px 8px",borderRadius:"4px",textAlign:"left",position:"absolute",left:0,color:"#e9e9e9",fontSize:"14px",fontWeight:600,lineHeight:"24px",backgroundColor:"#42b883",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px -1px rgba(0, 0, 0, 0.1)"},$0={display:"inline-block",fontWeight:400,fontStyle:"normal",fontSize:"12px",opacity:.7};function $s(){return document.getElementById(Ul)}function C0(){return document.getElementById(zl)}function S0(){return document.getElementById(Gl)}function P0(){return document.getElementById(Hl)}function Ko(s){return{left:`${Math.round(s.left*100)/100}px`,top:`${Math.round(s.top*100)/100}px`,width:`${Math.round(s.width*100)/100}px`,height:`${Math.round(s.height*100)/100}px`}}function Yo(s){var n;const r=document.createElement("div");r.id=(n=s.elementId)!=null?n:Ul,Object.assign(r.style,{...Wl,...Ko(s.bounds),...s.style});const o=document.createElement("span");o.id=zl,Object.assign(o.style,{...k0,top:s.bounds.top<35?0:"-35px"});const i=document.createElement("span");i.id=Hl,i.innerHTML=`&lt;${s.name}&gt;&nbsp;&nbsp;`;const d=document.createElement("i");return d.id=Gl,d.innerHTML=`${Math.round(s.bounds.width*100)/100} x ${Math.round(s.bounds.height*100)/100}`,Object.assign(d.style,$0),o.appendChild(i),o.appendChild(d),r.appendChild(o),document.body.appendChild(r),r}function Zo(s){const n=$s(),r=C0(),o=P0(),i=S0();n&&(Object.assign(n.style,{...Wl,...Ko(s.bounds)}),Object.assign(r.style,{top:s.bounds.top<35?0:"-35px"}),o.innerHTML=`&lt;${s.name}&gt;&nbsp;&nbsp;`,i.innerHTML=`${Math.round(s.bounds.width*100)/100} x ${Math.round(s.bounds.height*100)/100}`)}function E0(s){const n=ns(s);if(!n.width&&!n.height)return;const r=Pn(s);$s()?Zo({bounds:n,name:r}):Yo({bounds:n,name:r})}function ql(){const s=$s();s&&(s.style.display="none")}var uo=null;function po(s){const n=s.target;if(n){const r=n.__vueParentComponent;if(r&&(uo=r,r.vnode.el)){const i=ns(r),d=Pn(r);$s()?Zo({bounds:i,name:d}):Yo({bounds:i,name:d})}}}function T0(s,n){if(s.preventDefault(),s.stopPropagation(),uo){const r=b0(uo);n(r)}}var vn=null;function A0(){ql(),window.removeEventListener("mouseover",po),window.removeEventListener("click",vn,!0),vn=null}function D0(){return window.addEventListener("mouseover",po),new Promise(s=>{function n(r){r.preventDefault(),r.stopPropagation(),T0(r,o=>{window.removeEventListener("click",n,!0),vn=null,window.removeEventListener("mouseover",po);const i=$s();i&&(i.style.display="none"),s(JSON.stringify({id:o}))})}vn=n,window.addEventListener("click",n,!0)})}function M0(s){const n=co(mt.value,s.id);if(n){const[r]=qo(n);if(typeof r.scrollIntoView=="function")r.scrollIntoView({behavior:"smooth"});else{const o=ns(n),i=document.createElement("div"),d={...Ko(o),position:"absolute"};Object.assign(i.style,d),document.body.appendChild(i),i.scrollIntoView({behavior:"smooth"}),setTimeout(()=>{document.body.removeChild(i)},2e3)}setTimeout(()=>{const o=ns(n);if(o.width||o.height){const i=Pn(n),d=$s();d?Zo({...s,name:i,bounds:o}):Yo({...s,name:i,bounds:o}),setTimeout(()=>{d&&(d.style.display="none")},1500)}},1200)}}xe();var Cr,Sr;(Sr=(Cr=Se).__VUE_DEVTOOLS_COMPONENT_INSPECTOR_ENABLED__)!=null||(Cr.__VUE_DEVTOOLS_COMPONENT_INSPECTOR_ENABLED__=!0);function O0(s){let n=0;const r=setInterval(()=>{Se.__VUE_INSPECTOR__&&(clearInterval(r),n+=30,s()),n>=5e3&&clearInterval(r)},30)}function L0(){const s=Se.__VUE_INSPECTOR__,n=s.openInEditor;s.openInEditor=async(...r)=>{s.disable(),n(...r)}}function j0(){return new Promise(s=>{function n(){L0(),s(Se.__VUE_INSPECTOR__)}Se.__VUE_INSPECTOR__?n():O0(()=>{n()})})}xe();xe();function I0(s){return!!(s&&s.__v_isReadonly)}function Kl(s){return I0(s)?Kl(s.__v_raw):!!(s&&s.__v_isReactive)}function In(s){return!!(s&&s.__v_isRef===!0)}function Ns(s){const n=s&&s.__v_raw;return n?Ns(n):s}var R0=class{constructor(){this.refEditor=new F0}set(s,n,r,o){const i=Array.isArray(n)?n:n.split(".");for(;i.length>1;){const f=i.shift();s instanceof Map?s=s.get(f):s instanceof Set?s=Array.from(s.values())[f]:s=s[f],this.refEditor.isRef(s)&&(s=this.refEditor.get(s))}const d=i[0],g=this.refEditor.get(s)[d];o?o(s,d,r):this.refEditor.isRef(g)?this.refEditor.set(g,r):s[d]=r}get(s,n){const r=Array.isArray(n)?n:n.split(".");for(let o=0;o<r.length;o++)if(s instanceof Map?s=s.get(r[o]):s=s[r[o]],this.refEditor.isRef(s)&&(s=this.refEditor.get(s)),!s)return;return s}has(s,n,r=!1){if(typeof s>"u")return!1;const o=Array.isArray(n)?n.slice():n.split("."),i=r?2:1;for(;s&&o.length>i;){const d=o.shift();s=s[d],this.refEditor.isRef(s)&&(s=this.refEditor.get(s))}return s!=null&&Object.prototype.hasOwnProperty.call(s,o[0])}createDefaultSetCallback(s){return(n,r,o)=>{if((s.remove||s.newKey)&&(Array.isArray(n)?n.splice(r,1):Ns(n)instanceof Map?n.delete(r):Ns(n)instanceof Set?n.delete(Array.from(n.values())[r]):Reflect.deleteProperty(n,r)),!s.remove){const i=n[s.newKey||r];this.refEditor.isRef(i)?this.refEditor.set(i,o):Ns(n)instanceof Map?n.set(s.newKey||r,o):Ns(n)instanceof Set?n.add(o):n[s.newKey||r]=o}}}},F0=class{set(s,n){if(In(s))s.value=n;else{if(s instanceof Set&&Array.isArray(n)){s.clear(),n.forEach(i=>s.add(i));return}const r=Object.keys(n);if(s instanceof Map){const i=new Set(s.keys());r.forEach(d=>{s.set(d,Reflect.get(n,d)),i.delete(d)}),i.forEach(d=>s.delete(d));return}const o=new Set(Object.keys(s));r.forEach(i=>{Reflect.set(s,i,Reflect.get(n,i)),o.delete(i)}),o.forEach(i=>Reflect.deleteProperty(s,i))}}get(s){return In(s)?s.value:s}isRef(s){return In(s)||Kl(s)}};xe();xe();xe();var N0="__VUE_DEVTOOLS_KIT_TIMELINE_LAYERS_STATE__";function B0(){if(typeof window>"u"||!Fl||typeof localStorage>"u"||localStorage===null)return{recordingState:!1,mouseEventEnabled:!1,keyboardEventEnabled:!1,componentEventEnabled:!1,performanceEventEnabled:!1,selected:""};const s=typeof localStorage.getItem<"u"?localStorage.getItem(N0):null;return s?JSON.parse(s):{recordingState:!1,mouseEventEnabled:!1,keyboardEventEnabled:!1,componentEventEnabled:!1,performanceEventEnabled:!1,selected:""}}xe();xe();xe();var Pr,Er;(Er=(Pr=Se).__VUE_DEVTOOLS_KIT_TIMELINE_LAYERS)!=null||(Pr.__VUE_DEVTOOLS_KIT_TIMELINE_LAYERS=[]);var V0=new Proxy(Se.__VUE_DEVTOOLS_KIT_TIMELINE_LAYERS,{get(s,n,r){return Reflect.get(s,n,r)}});function U0(s,n){at.timelineLayersState[n.id]=!1,V0.push({...s,descriptorId:n.id,appRecord:Wo(n.app)})}var Tr,Ar;(Ar=(Tr=Se).__VUE_DEVTOOLS_KIT_INSPECTOR__)!=null||(Tr.__VUE_DEVTOOLS_KIT_INSPECTOR__=[]);var Xo=new Proxy(Se.__VUE_DEVTOOLS_KIT_INSPECTOR__,{get(s,n,r){return Reflect.get(s,n,r)}}),Yl=bs(()=>{Cs.hooks.callHook("sendInspectorToClient",Zl())});function z0(s,n){var r,o;Xo.push({options:s,descriptor:n,treeFilterPlaceholder:(r=s.treeFilterPlaceholder)!=null?r:"Search tree...",stateFilterPlaceholder:(o=s.stateFilterPlaceholder)!=null?o:"Search state...",treeFilter:"",selectedNodeId:"",appRecord:Wo(n.app)}),Yl()}function Zl(){return Xo.filter(s=>s.descriptor.app===mt.value.app).filter(s=>s.descriptor.id!=="components").map(s=>{var n;const r=s.descriptor,o=s.options;return{id:o.id,label:o.label,logo:r.logo,icon:`custom-ic-baseline-${(n=o?.icon)==null?void 0:n.replace(/_/g,"-")}`,packageName:r.packageName,homepage:r.homepage,pluginId:r.id}})}function dn(s,n){return Xo.find(r=>r.options.id===s&&(n?r.descriptor.app===n:!0))}function H0(){const s=cl();s.hook("addInspector",({inspector:o,plugin:i})=>{z0(o,i.descriptor)});const n=bs(async({inspectorId:o,plugin:i})=>{var d;if(!o||!((d=i?.descriptor)!=null&&d.app)||at.highPerfModeEnabled)return;const g=dn(o,i.descriptor.app),f={app:i.descriptor.app,inspectorId:o,filter:g?.treeFilter||"",rootNodes:[]};await new Promise(m=>{s.callHookWith(async b=>{await Promise.all(b.map(x=>x(f))),m()},"getInspectorTree")}),s.callHookWith(async m=>{await Promise.all(m.map(b=>b({inspectorId:o,rootNodes:f.rootNodes})))},"sendInspectorTreeToClient")},120);s.hook("sendInspectorTree",n);const r=bs(async({inspectorId:o,plugin:i})=>{var d;if(!o||!((d=i?.descriptor)!=null&&d.app)||at.highPerfModeEnabled)return;const g=dn(o,i.descriptor.app),f={app:i.descriptor.app,inspectorId:o,nodeId:g?.selectedNodeId||"",state:null},m={currentTab:`custom-inspector:${o}`};f.nodeId&&await new Promise(b=>{s.callHookWith(async x=>{await Promise.all(x.map(_=>_(f,m))),b()},"getInspectorState")}),s.callHookWith(async b=>{await Promise.all(b.map(x=>x({inspectorId:o,nodeId:f.nodeId,state:f.state})))},"sendInspectorStateToClient")},120);return s.hook("sendInspectorState",r),s.hook("customInspectorSelectNode",({inspectorId:o,nodeId:i,plugin:d})=>{const g=dn(o,d.descriptor.app);g&&(g.selectedNodeId=i)}),s.hook("timelineLayerAdded",({options:o,plugin:i})=>{U0(o,i.descriptor)}),s.hook("timelineEventAdded",({options:o,plugin:i})=>{var d;const g=["performance","component-event","keyboard","mouse"];at.highPerfModeEnabled||!((d=at.timelineLayersState)!=null&&d[i.descriptor.id])&&!g.includes(o.layerId)||s.callHookWith(async f=>{await Promise.all(f.map(m=>m(o)))},"sendTimelineEventToClient")}),s.hook("getComponentInstances",async({app:o})=>{const i=o.__VUE_DEVTOOLS_NEXT_APP_RECORD__;if(!i)return null;const d=i.id.toString();return[...i.instanceMap].filter(([f])=>f.split(":")[0]===d).map(([,f])=>f)}),s.hook("getComponentBounds",async({instance:o})=>ns(o)),s.hook("getComponentName",({instance:o})=>Pn(o)),s.hook("componentHighlight",({uid:o})=>{const i=mt.value.instanceMap.get(o);i&&E0(i)}),s.hook("componentUnhighlight",()=>{ql()}),s}var Dr,Mr;(Mr=(Dr=Se).__VUE_DEVTOOLS_KIT_APP_RECORDS__)!=null||(Dr.__VUE_DEVTOOLS_KIT_APP_RECORDS__=[]);var Or,Lr;(Lr=(Or=Se).__VUE_DEVTOOLS_KIT_ACTIVE_APP_RECORD__)!=null||(Or.__VUE_DEVTOOLS_KIT_ACTIVE_APP_RECORD__={});var jr,Ir;(Ir=(jr=Se).__VUE_DEVTOOLS_KIT_ACTIVE_APP_RECORD_ID__)!=null||(jr.__VUE_DEVTOOLS_KIT_ACTIVE_APP_RECORD_ID__="");var Rr,Fr;(Fr=(Rr=Se).__VUE_DEVTOOLS_KIT_CUSTOM_TABS__)!=null||(Rr.__VUE_DEVTOOLS_KIT_CUSTOM_TABS__=[]);var Nr,Br;(Br=(Nr=Se).__VUE_DEVTOOLS_KIT_CUSTOM_COMMANDS__)!=null||(Nr.__VUE_DEVTOOLS_KIT_CUSTOM_COMMANDS__=[]);var es="__VUE_DEVTOOLS_KIT_GLOBAL_STATE__";function G0(){return{connected:!1,clientConnected:!1,vitePluginDetected:!0,appRecords:[],activeAppRecordId:"",tabs:[],commands:[],highPerfModeEnabled:!0,devtoolsClientDetected:{},perfUniqueGroupId:0,timelineLayersState:B0()}}var Vr,Ur;(Ur=(Vr=Se)[es])!=null||(Vr[es]=G0());var W0=bs(s=>{Cs.hooks.callHook("devtoolsStateUpdated",{state:s})});bs((s,n)=>{Cs.hooks.callHook("devtoolsConnectedUpdated",{state:s,oldState:n})});var En=new Proxy(Se.__VUE_DEVTOOLS_KIT_APP_RECORDS__,{get(s,n,r){return n==="value"?Se.__VUE_DEVTOOLS_KIT_APP_RECORDS__:Se.__VUE_DEVTOOLS_KIT_APP_RECORDS__[n]}}),mt=new Proxy(Se.__VUE_DEVTOOLS_KIT_ACTIVE_APP_RECORD__,{get(s,n,r){return n==="value"?Se.__VUE_DEVTOOLS_KIT_ACTIVE_APP_RECORD__:n==="id"?Se.__VUE_DEVTOOLS_KIT_ACTIVE_APP_RECORD_ID__:Se.__VUE_DEVTOOLS_KIT_ACTIVE_APP_RECORD__[n]}});function Xl(){W0({...Se[es],appRecords:En.value,activeAppRecordId:mt.id,tabs:Se.__VUE_DEVTOOLS_KIT_CUSTOM_TABS__,commands:Se.__VUE_DEVTOOLS_KIT_CUSTOM_COMMANDS__})}function q0(s){Se.__VUE_DEVTOOLS_KIT_ACTIVE_APP_RECORD__=s,Xl()}function K0(s){Se.__VUE_DEVTOOLS_KIT_ACTIVE_APP_RECORD_ID__=s,Xl()}var at=new Proxy(Se[es],{get(s,n){return n==="appRecords"?En:n==="activeAppRecordId"?mt.id:n==="tabs"?Se.__VUE_DEVTOOLS_KIT_CUSTOM_TABS__:n==="commands"?Se.__VUE_DEVTOOLS_KIT_CUSTOM_COMMANDS__:Se[es][n]},deleteProperty(s,n){return delete s[n],!0},set(s,n,r){return{...Se[es]},s[n]=r,Se[es][n]=r,!0}});function Y0(s={}){var n,r,o;const{file:i,host:d,baseUrl:g=window.location.origin,line:f=0,column:m=0}=s;if(i){if(d==="chrome-extension"){const b=i.replace(/\\/g,"\\\\"),x=(r=(n=window.VUE_DEVTOOLS_CONFIG)==null?void 0:n.openInEditorHost)!=null?r:"/";fetch(`${x}__open-in-editor?file=${encodeURI(i)}`).then(_=>{if(!_.ok){const C=`Opening component ${b} failed`}})}else if(at.vitePluginDetected){const b=(o=Se.__VUE_DEVTOOLS_OPEN_IN_EDITOR_BASE_URL__)!=null?o:g;Se.__VUE_INSPECTOR__.openInEditor(b,i,f,m)}}}xe();xe();xe();xe();xe();var zr,Hr;(Hr=(zr=Se).__VUE_DEVTOOLS_KIT_PLUGIN_BUFFER__)!=null||(zr.__VUE_DEVTOOLS_KIT_PLUGIN_BUFFER__=[]);var Qo=new Proxy(Se.__VUE_DEVTOOLS_KIT_PLUGIN_BUFFER__,{get(s,n,r){return Reflect.get(s,n,r)}});function go(s){const n={};return Object.keys(s).forEach(r=>{n[r]=s[r].defaultValue}),n}function Jo(s){return`__VUE_DEVTOOLS_NEXT_PLUGIN_SETTINGS__${s}__`}function Z0(s){var n,r,o;const i=(r=(n=Qo.find(d=>{var g;return d[0].id===s&&!!((g=d[0])!=null&&g.settings)}))==null?void 0:n[0])!=null?r:null;return(o=i?.settings)!=null?o:null}function Ql(s,n){var r,o,i;const d=Jo(s);if(d){const g=localStorage.getItem(d);if(g)return JSON.parse(g)}if(s){const g=(o=(r=Qo.find(f=>f[0].id===s))==null?void 0:r[0])!=null?o:null;return go((i=g?.settings)!=null?i:{})}return go(n)}function X0(s,n){const r=Jo(s);localStorage.getItem(r)||localStorage.setItem(r,JSON.stringify(go(n)))}function Q0(s,n,r){const o=Jo(s),i=localStorage.getItem(o),d=JSON.parse(i||"{}"),g={...d,[n]:r};localStorage.setItem(o,JSON.stringify(g)),Cs.hooks.callHookWith(f=>{f.forEach(m=>m({pluginId:s,key:n,oldValue:d[n],newValue:r,settings:g}))},"setPluginSettings")}xe();xe();xe();xe();xe();xe();xe();xe();xe();xe();xe();var Gr,Wr,$t=(Wr=(Gr=Se).__VUE_DEVTOOLS_HOOK)!=null?Wr:Gr.__VUE_DEVTOOLS_HOOK=cl(),J0={vueAppInit(s){$t.hook("app:init",s)},vueAppUnmount(s){$t.hook("app:unmount",s)},vueAppConnected(s){$t.hook("app:connected",s)},componentAdded(s){return $t.hook("component:added",s)},componentEmit(s){return $t.hook("component:emit",s)},componentUpdated(s){return $t.hook("component:updated",s)},componentRemoved(s){return $t.hook("component:removed",s)},setupDevtoolsPlugin(s){$t.hook("devtools-plugin:setup",s)},perfStart(s){return $t.hook("perf:start",s)},perfEnd(s){return $t.hook("perf:end",s)}},Jl={on:J0,setupDevToolsPlugin(s,n){return $t.callHook("devtools-plugin:setup",s,n)}},ec=class{constructor({plugin:s,ctx:n}){this.hooks=n.hooks,this.plugin=s}get on(){return{visitComponentTree:s=>{this.hooks.hook("visitComponentTree",s)},inspectComponent:s=>{this.hooks.hook("inspectComponent",s)},editComponentState:s=>{this.hooks.hook("editComponentState",s)},getInspectorTree:s=>{this.hooks.hook("getInspectorTree",s)},getInspectorState:s=>{this.hooks.hook("getInspectorState",s)},editInspectorState:s=>{this.hooks.hook("editInspectorState",s)},inspectTimelineEvent:s=>{this.hooks.hook("inspectTimelineEvent",s)},timelineCleared:s=>{this.hooks.hook("timelineCleared",s)},setPluginSettings:s=>{this.hooks.hook("setPluginSettings",s)}}}notifyComponentUpdate(s){var n;if(at.highPerfModeEnabled)return;const r=Zl().find(o=>o.packageName===this.plugin.descriptor.packageName);if(r?.id){if(s){const o=[s.appContext.app,s.uid,(n=s.parent)==null?void 0:n.uid,s];$t.callHook("component:updated",...o)}else $t.callHook("component:updated");this.hooks.callHook("sendInspectorState",{inspectorId:r.id,plugin:this.plugin})}}addInspector(s){this.hooks.callHook("addInspector",{inspector:s,plugin:this.plugin}),this.plugin.descriptor.settings&&X0(s.id,this.plugin.descriptor.settings)}sendInspectorTree(s){at.highPerfModeEnabled||this.hooks.callHook("sendInspectorTree",{inspectorId:s,plugin:this.plugin})}sendInspectorState(s){at.highPerfModeEnabled||this.hooks.callHook("sendInspectorState",{inspectorId:s,plugin:this.plugin})}selectInspectorNode(s,n){this.hooks.callHook("customInspectorSelectNode",{inspectorId:s,nodeId:n,plugin:this.plugin})}visitComponentTree(s){return this.hooks.callHook("visitComponentTree",s)}now(){return at.highPerfModeEnabled?0:Date.now()}addTimelineLayer(s){this.hooks.callHook("timelineLayerAdded",{options:s,plugin:this.plugin})}addTimelineEvent(s){at.highPerfModeEnabled||this.hooks.callHook("timelineEventAdded",{options:s,plugin:this.plugin})}getSettings(s){return Ql(s??this.plugin.descriptor.id,this.plugin.descriptor.settings)}getComponentInstances(s){return this.hooks.callHook("getComponentInstances",{app:s})}getComponentBounds(s){return this.hooks.callHook("getComponentBounds",{instance:s})}getComponentName(s){return this.hooks.callHook("getComponentName",{instance:s})}highlightElement(s){const n=s.__VUE_DEVTOOLS_NEXT_UID__;return this.hooks.callHook("componentHighlight",{uid:n})}unhighlightElement(){return this.hooks.callHook("componentUnhighlight")}},tc=ec;xe();xe();xe();xe();var sc="__vue_devtool_undefined__",nc="__vue_devtool_infinity__",oc="__vue_devtool_negative_infinity__",rc="__vue_devtool_nan__";xe();xe();var ac={[sc]:"undefined",[rc]:"NaN",[nc]:"Infinity",[oc]:"-Infinity"};Object.entries(ac).reduce((s,[n,r])=>(s[r]=n,s),{});xe();xe();xe();xe();xe();var qr,Kr;(Kr=(qr=Se).__VUE_DEVTOOLS_KIT__REGISTERED_PLUGIN_APPS__)!=null||(qr.__VUE_DEVTOOLS_KIT__REGISTERED_PLUGIN_APPS__=new Set);function lc(s,n){return Jl.setupDevToolsPlugin(s,n)}function ic(s,n){const[r,o]=s;if(r.app!==n)return;const i=new tc({plugin:{setupFn:o,descriptor:r},ctx:Cs});r.packageName==="vuex"&&i.on.editInspectorState(d=>{i.sendInspectorState(d.inspectorId)}),o(i)}function ei(s,n){Se.__VUE_DEVTOOLS_KIT__REGISTERED_PLUGIN_APPS__.has(s)||at.highPerfModeEnabled&&!n?.inspectingComponent||(Se.__VUE_DEVTOOLS_KIT__REGISTERED_PLUGIN_APPS__.add(s),Qo.forEach(r=>{ic(r,s)}))}xe();xe();var Hs="__VUE_DEVTOOLS_ROUTER__",vs="__VUE_DEVTOOLS_ROUTER_INFO__",Yr,Zr;(Zr=(Yr=Se)[vs])!=null||(Yr[vs]={currentRoute:null,routes:[]});var Xr,Qr;(Qr=(Xr=Se)[Hs])!=null||(Xr[Hs]={});new Proxy(Se[vs],{get(s,n){return Se[vs][n]}});new Proxy(Se[Hs],{get(s,n){if(n==="value")return Se[Hs]}});function dc(s){const n=new Map;return(s?.getRoutes()||[]).filter(r=>!n.has(r.path)&&n.set(r.path,1))}function er(s){return s.map(n=>{let{path:r,name:o,children:i,meta:d}=n;return i?.length&&(i=er(i)),{path:r,name:o,children:i,meta:d}})}function cc(s){if(s){const{fullPath:n,hash:r,href:o,path:i,name:d,matched:g,params:f,query:m}=s;return{fullPath:n,hash:r,href:o,path:i,name:d,params:f,query:m,matched:er(g)}}return s}function uc(s,n){function r(){var o;const i=(o=s.app)==null?void 0:o.config.globalProperties.$router,d=cc(i?.currentRoute.value),g=er(dc(i)),f=console.warn;console.warn=()=>{},Se[vs]={currentRoute:d?wr(d):{},routes:wr(g)},Se[Hs]=i,console.warn=f}r(),Jl.on.componentUpdated(bs(()=>{var o;((o=n.value)==null?void 0:o.app)===s.app&&(r(),!at.highPerfModeEnabled&&Cs.hooks.callHook("routerInfoUpdated",{state:Se[vs]}))},200))}function pc(s){return{async getInspectorTree(n){const r={...n,app:mt.value.app,rootNodes:[]};return await new Promise(o=>{s.callHookWith(async i=>{await Promise.all(i.map(d=>d(r))),o()},"getInspectorTree")}),r.rootNodes},async getInspectorState(n){const r={...n,app:mt.value.app,state:null},o={currentTab:`custom-inspector:${n.inspectorId}`};return await new Promise(i=>{s.callHookWith(async d=>{await Promise.all(d.map(g=>g(r,o))),i()},"getInspectorState")}),r.state},editInspectorState(n){const r=new R0,o={...n,app:mt.value.app,set:(i,d=n.path,g=n.state.value,f)=>{r.set(i,d,g,f||r.createDefaultSetCallback(n.state))}};s.callHookWith(i=>{i.forEach(d=>d(o))},"editInspectorState")},sendInspectorState(n){const r=dn(n);s.callHook("sendInspectorState",{inspectorId:n,plugin:{descriptor:r.descriptor,setupFn:()=>({})}})},inspectComponentInspector(){return D0()},cancelInspectComponentInspector(){return A0()},getComponentRenderCode(n){const r=co(mt.value,n);if(r)return typeof r?.type!="function"?r.render.toString():r.type.toString()},scrollToComponent(n){return M0({id:n})},openInEditor:Y0,getVueInspector:j0,toggleApp(n,r){const o=En.value.find(i=>i.id===n);o&&(K0(n),q0(o),uc(o,mt),Yl(),ei(o.app,r))},inspectDOM(n){const r=co(mt.value,n);if(r){const[o]=qo(r);o&&(Se.__VUE_DEVTOOLS_INSPECT_DOM_TARGET__=o)}},updatePluginSettings(n,r,o){Q0(n,r,o)},getPluginSettings(n){return{options:Z0(n),values:Ql(n)}}}}xe();var Jr,ea;(ea=(Jr=Se).__VUE_DEVTOOLS_ENV__)!=null||(Jr.__VUE_DEVTOOLS_ENV__={vitePluginDetected:!1});var ta=H0(),sa,na;(na=(sa=Se).__VUE_DEVTOOLS_KIT_CONTEXT__)!=null||(sa.__VUE_DEVTOOLS_KIT_CONTEXT__={hooks:ta,get state(){return{...at,activeAppRecordId:mt.id,activeAppRecord:mt.value,appRecords:En.value}},api:pc(ta)});var Cs=Se.__VUE_DEVTOOLS_KIT_CONTEXT__;xe();p0(f0());var oa,ra;(ra=(oa=Se).__VUE_DEVTOOLS_NEXT_APP_RECORD_INFO__)!=null||(oa.__VUE_DEVTOOLS_NEXT_APP_RECORD_INFO__={id:0,appIds:new Set});xe();xe();function gc(s){at.highPerfModeEnabled=s??!at.highPerfModeEnabled,!s&&mt.value&&ei(mt.value.app)}xe();xe();xe();function fc(s){at.devtoolsClientDetected={...at.devtoolsClientDetected,...s};const n=Object.values(at.devtoolsClientDetected).some(Boolean);gc(!n)}var aa,la;(la=(aa=Se).__VUE_DEVTOOLS_UPDATE_CLIENT_DETECTED__)!=null||(aa.__VUE_DEVTOOLS_UPDATE_CLIENT_DETECTED__=fc);xe();xe();xe();xe();xe();xe();xe();var mc=class{constructor(){this.keyToValue=new Map,this.valueToKey=new Map}set(s,n){this.keyToValue.set(s,n),this.valueToKey.set(n,s)}getByKey(s){return this.keyToValue.get(s)}getByValue(s){return this.valueToKey.get(s)}clear(){this.keyToValue.clear(),this.valueToKey.clear()}},ti=class{constructor(s){this.generateIdentifier=s,this.kv=new mc}register(s,n){this.kv.getByValue(s)||(n||(n=this.generateIdentifier(s)),this.kv.set(n,s))}clear(){this.kv.clear()}getIdentifier(s){return this.kv.getByValue(s)}getValue(s){return this.kv.getByKey(s)}},hc=class extends ti{constructor(){super(s=>s.name),this.classToAllowedProps=new Map}register(s,n){typeof n=="object"?(n.allowProps&&this.classToAllowedProps.set(s,n.allowProps),super.register(s,n.identifier)):super.register(s,n)}getAllowedProps(s){return this.classToAllowedProps.get(s)}};xe();xe();function bc(s){if("values"in Object)return Object.values(s);const n=[];for(const r in s)s.hasOwnProperty(r)&&n.push(s[r]);return n}function vc(s,n){const r=bc(s);if("find"in r)return r.find(n);const o=r;for(let i=0;i<o.length;i++){const d=o[i];if(n(d))return d}}function xs(s,n){Object.entries(s).forEach(([r,o])=>n(o,r))}function cn(s,n){return s.indexOf(n)!==-1}function ia(s,n){for(let r=0;r<s.length;r++){const o=s[r];if(n(o))return o}}var xc=class{constructor(){this.transfomers={}}register(s){this.transfomers[s.name]=s}findApplicable(s){return vc(this.transfomers,n=>n.isApplicable(s))}findByName(s){return this.transfomers[s]}};xe();xe();var yc=s=>Object.prototype.toString.call(s).slice(8,-1),si=s=>typeof s>"u",_c=s=>s===null,Gs=s=>typeof s!="object"||s===null||s===Object.prototype?!1:Object.getPrototypeOf(s)===null?!0:Object.getPrototypeOf(s)===Object.prototype,fo=s=>Gs(s)&&Object.keys(s).length===0,Kt=s=>Array.isArray(s),wc=s=>typeof s=="string",kc=s=>typeof s=="number"&&!isNaN(s),$c=s=>typeof s=="boolean",Cc=s=>s instanceof RegExp,Ws=s=>s instanceof Map,qs=s=>s instanceof Set,ni=s=>yc(s)==="Symbol",Sc=s=>s instanceof Date&&!isNaN(s.valueOf()),Pc=s=>s instanceof Error,da=s=>typeof s=="number"&&isNaN(s),Ec=s=>$c(s)||_c(s)||si(s)||kc(s)||wc(s)||ni(s),Tc=s=>typeof s=="bigint",Ac=s=>s===1/0||s===-1/0,Dc=s=>ArrayBuffer.isView(s)&&!(s instanceof DataView),Mc=s=>s instanceof URL;xe();var oi=s=>s.replace(/\./g,"\\."),Rn=s=>s.map(String).map(oi).join("."),Vs=s=>{const n=[];let r="";for(let i=0;i<s.length;i++){let d=s.charAt(i);if(d==="\\"&&s.charAt(i+1)==="."){r+=".",i++;continue}if(d==="."){n.push(r),r="";continue}r+=d}const o=r;return n.push(o),n};xe();function Dt(s,n,r,o){return{isApplicable:s,annotation:n,transform:r,untransform:o}}var ri=[Dt(si,"undefined",()=>null,()=>{}),Dt(Tc,"bigint",s=>s.toString(),s=>typeof BigInt<"u"?BigInt(s):s),Dt(Sc,"Date",s=>s.toISOString(),s=>new Date(s)),Dt(Pc,"Error",(s,n)=>{const r={name:s.name,message:s.message};return n.allowedErrorProps.forEach(o=>{r[o]=s[o]}),r},(s,n)=>{const r=new Error(s.message);return r.name=s.name,r.stack=s.stack,n.allowedErrorProps.forEach(o=>{r[o]=s[o]}),r}),Dt(Cc,"regexp",s=>""+s,s=>{const n=s.slice(1,s.lastIndexOf("/")),r=s.slice(s.lastIndexOf("/")+1);return new RegExp(n,r)}),Dt(qs,"set",s=>[...s.values()],s=>new Set(s)),Dt(Ws,"map",s=>[...s.entries()],s=>new Map(s)),Dt(s=>da(s)||Ac(s),"number",s=>da(s)?"NaN":s>0?"Infinity":"-Infinity",Number),Dt(s=>s===0&&1/s===-1/0,"number",()=>"-0",Number),Dt(Mc,"URL",s=>s.toString(),s=>new URL(s))];function Tn(s,n,r,o){return{isApplicable:s,annotation:n,transform:r,untransform:o}}var ai=Tn((s,n)=>ni(s)?!!n.symbolRegistry.getIdentifier(s):!1,(s,n)=>["symbol",n.symbolRegistry.getIdentifier(s)],s=>s.description,(s,n,r)=>{const o=r.symbolRegistry.getValue(n[1]);if(!o)throw new Error("Trying to deserialize unknown symbol");return o}),Oc=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,Uint8ClampedArray].reduce((s,n)=>(s[n.name]=n,s),{}),li=Tn(Dc,s=>["typed-array",s.constructor.name],s=>[...s],(s,n)=>{const r=Oc[n[1]];if(!r)throw new Error("Trying to deserialize unknown typed array");return new r(s)});function ii(s,n){return s?.constructor?!!n.classRegistry.getIdentifier(s.constructor):!1}var di=Tn(ii,(s,n)=>["class",n.classRegistry.getIdentifier(s.constructor)],(s,n)=>{const r=n.classRegistry.getAllowedProps(s.constructor);if(!r)return{...s};const o={};return r.forEach(i=>{o[i]=s[i]}),o},(s,n,r)=>{const o=r.classRegistry.getValue(n[1]);if(!o)throw new Error(`Trying to deserialize unknown class '${n[1]}' - check https://github.com/blitz-js/superjson/issues/116#issuecomment-773996564`);return Object.assign(Object.create(o.prototype),s)}),ci=Tn((s,n)=>!!n.customTransformerRegistry.findApplicable(s),(s,n)=>["custom",n.customTransformerRegistry.findApplicable(s).name],(s,n)=>n.customTransformerRegistry.findApplicable(s).serialize(s),(s,n,r)=>{const o=r.customTransformerRegistry.findByName(n[1]);if(!o)throw new Error("Trying to deserialize unknown custom value");return o.deserialize(s)}),Lc=[di,ai,ci,li],ca=(s,n)=>{const r=ia(Lc,i=>i.isApplicable(s,n));if(r)return{value:r.transform(s,n),type:r.annotation(s,n)};const o=ia(ri,i=>i.isApplicable(s,n));if(o)return{value:o.transform(s,n),type:o.annotation}},ui={};ri.forEach(s=>{ui[s.annotation]=s});var jc=(s,n,r)=>{if(Kt(n))switch(n[0]){case"symbol":return ai.untransform(s,n,r);case"class":return di.untransform(s,n,r);case"custom":return ci.untransform(s,n,r);case"typed-array":return li.untransform(s,n,r);default:throw new Error("Unknown transformation: "+n)}else{const o=ui[n];if(!o)throw new Error("Unknown transformation: "+n);return o.untransform(s,r)}};xe();var cs=(s,n)=>{if(n>s.size)throw new Error("index out of bounds");const r=s.keys();for(;n>0;)r.next(),n--;return r.next().value};function pi(s){if(cn(s,"__proto__"))throw new Error("__proto__ is not allowed as a property");if(cn(s,"prototype"))throw new Error("prototype is not allowed as a property");if(cn(s,"constructor"))throw new Error("constructor is not allowed as a property")}var Ic=(s,n)=>{pi(n);for(let r=0;r<n.length;r++){const o=n[r];if(qs(s))s=cs(s,+o);else if(Ws(s)){const i=+o,d=+n[++r]==0?"key":"value",g=cs(s,i);switch(d){case"key":s=g;break;case"value":s=s.get(g);break}}else s=s[o]}return s},mo=(s,n,r)=>{if(pi(n),n.length===0)return r(s);let o=s;for(let d=0;d<n.length-1;d++){const g=n[d];if(Kt(o)){const f=+g;o=o[f]}else if(Gs(o))o=o[g];else if(qs(o)){const f=+g;o=cs(o,f)}else if(Ws(o)){if(d===n.length-2)break;const m=+g,b=+n[++d]==0?"key":"value",x=cs(o,m);switch(b){case"key":o=x;break;case"value":o=o.get(x);break}}}const i=n[n.length-1];if(Kt(o)?o[+i]=r(o[+i]):Gs(o)&&(o[i]=r(o[i])),qs(o)){const d=cs(o,+i),g=r(d);d!==g&&(o.delete(d),o.add(g))}if(Ws(o)){const d=+n[n.length-2],g=cs(o,d);switch(+i==0?"key":"value"){case"key":{const m=r(g);o.set(m,o.get(g)),m!==g&&o.delete(g);break}case"value":{o.set(g,r(o.get(g)));break}}}return s};function ho(s,n,r=[]){if(!s)return;if(!Kt(s)){xs(s,(d,g)=>ho(d,n,[...r,...Vs(g)]));return}const[o,i]=s;i&&xs(i,(d,g)=>{ho(d,n,[...r,...Vs(g)])}),n(o,r)}function Rc(s,n,r){return ho(n,(o,i)=>{s=mo(s,i,d=>jc(d,o,r))}),s}function Fc(s,n){function r(o,i){const d=Ic(s,Vs(i));o.map(Vs).forEach(g=>{s=mo(s,g,()=>d)})}if(Kt(n)){const[o,i]=n;o.forEach(d=>{s=mo(s,Vs(d),()=>s)}),i&&xs(i,r)}else xs(n,r);return s}var Nc=(s,n)=>Gs(s)||Kt(s)||Ws(s)||qs(s)||ii(s,n);function Bc(s,n,r){const o=r.get(s);o?o.push(n):r.set(s,[n])}function Vc(s,n){const r={};let o;return s.forEach(i=>{if(i.length<=1)return;n||(i=i.map(f=>f.map(String)).sort((f,m)=>f.length-m.length));const[d,...g]=i;d.length===0?o=g.map(Rn):r[Rn(d)]=g.map(Rn)}),o?fo(r)?[o]:[o,r]:fo(r)?void 0:r}var gi=(s,n,r,o,i=[],d=[],g=new Map)=>{var f;const m=Ec(s);if(!m){Bc(s,i,n);const p=g.get(s);if(p)return o?{transformedValue:null}:p}if(!Nc(s,r)){const p=ca(s,r),T=p?{transformedValue:p.value,annotations:[p.type]}:{transformedValue:s};return m||g.set(s,T),T}if(cn(d,s))return{transformedValue:null};const b=ca(s,r),x=(f=b?.value)!=null?f:s,_=Kt(x)?[]:{},C={};xs(x,(p,T)=>{if(T==="__proto__"||T==="constructor"||T==="prototype")throw new Error(`Detected property ${T}. This is a prototype pollution risk, please remove it from your object.`);const M=gi(p,n,r,o,[...i,T],[...d,s],g);_[T]=M.transformedValue,Kt(M.annotations)?C[T]=M.annotations:Gs(M.annotations)&&xs(M.annotations,(P,w)=>{C[oi(T)+"."+w]=P})});const k=fo(C)?{transformedValue:_,annotations:b?[b.type]:void 0}:{transformedValue:_,annotations:b?[b.type,C]:C};return m||g.set(s,k),k};xe();xe();function fi(s){return Object.prototype.toString.call(s).slice(8,-1)}function ua(s){return fi(s)==="Array"}function Uc(s){if(fi(s)!=="Object")return!1;const n=Object.getPrototypeOf(s);return!!n&&n.constructor===Object&&n===Object.prototype}function zc(s,n,r,o,i){const d={}.propertyIsEnumerable.call(o,n)?"enumerable":"nonenumerable";d==="enumerable"&&(s[n]=r),i&&d==="nonenumerable"&&Object.defineProperty(s,n,{value:r,enumerable:!1,writable:!0,configurable:!0})}function bo(s,n={}){if(ua(s))return s.map(i=>bo(i,n));if(!Uc(s))return s;const r=Object.getOwnPropertyNames(s),o=Object.getOwnPropertySymbols(s);return[...r,...o].reduce((i,d)=>{if(ua(n.props)&&!n.props.includes(d))return i;const g=s[d],f=bo(g,n);return zc(i,d,f,s,n.nonenumerable),i},{})}var Ye=class{constructor({dedupe:s=!1}={}){this.classRegistry=new hc,this.symbolRegistry=new ti(n=>{var r;return(r=n.description)!=null?r:""}),this.customTransformerRegistry=new xc,this.allowedErrorProps=[],this.dedupe=s}serialize(s){const n=new Map,r=gi(s,n,this,this.dedupe),o={json:r.transformedValue};r.annotations&&(o.meta={...o.meta,values:r.annotations});const i=Vc(n,this.dedupe);return i&&(o.meta={...o.meta,referentialEqualities:i}),o}deserialize(s){const{json:n,meta:r}=s;let o=bo(n);return r?.values&&(o=Rc(o,r.values,this)),r?.referentialEqualities&&(o=Fc(o,r.referentialEqualities)),o}stringify(s){return JSON.stringify(this.serialize(s))}parse(s){return this.deserialize(JSON.parse(s))}registerClass(s,n){this.classRegistry.register(s,n)}registerSymbol(s,n){this.symbolRegistry.register(s,n)}registerCustom(s,n){this.customTransformerRegistry.register({name:n,...s})}allowErrorProps(...s){this.allowedErrorProps.push(...s)}};Ye.defaultInstance=new Ye;Ye.serialize=Ye.defaultInstance.serialize.bind(Ye.defaultInstance);Ye.deserialize=Ye.defaultInstance.deserialize.bind(Ye.defaultInstance);Ye.stringify=Ye.defaultInstance.stringify.bind(Ye.defaultInstance);Ye.parse=Ye.defaultInstance.parse.bind(Ye.defaultInstance);Ye.registerClass=Ye.defaultInstance.registerClass.bind(Ye.defaultInstance);Ye.registerSymbol=Ye.defaultInstance.registerSymbol.bind(Ye.defaultInstance);Ye.registerCustom=Ye.defaultInstance.registerCustom.bind(Ye.defaultInstance);Ye.allowErrorProps=Ye.defaultInstance.allowErrorProps.bind(Ye.defaultInstance);xe();xe();xe();xe();xe();xe();xe();xe();xe();xe();xe();xe();xe();xe();xe();xe();xe();xe();xe();xe();xe();xe();xe();var pa,ga;(ga=(pa=Se).__VUE_DEVTOOLS_KIT_MESSAGE_CHANNELS__)!=null||(pa.__VUE_DEVTOOLS_KIT_MESSAGE_CHANNELS__=[]);var fa,ma;(ma=(fa=Se).__VUE_DEVTOOLS_KIT_RPC_CLIENT__)!=null||(fa.__VUE_DEVTOOLS_KIT_RPC_CLIENT__=null);var ha,ba;(ba=(ha=Se).__VUE_DEVTOOLS_KIT_RPC_SERVER__)!=null||(ha.__VUE_DEVTOOLS_KIT_RPC_SERVER__=null);var va,xa;(xa=(va=Se).__VUE_DEVTOOLS_KIT_VITE_RPC_CLIENT__)!=null||(va.__VUE_DEVTOOLS_KIT_VITE_RPC_CLIENT__=null);var ya,_a;(_a=(ya=Se).__VUE_DEVTOOLS_KIT_VITE_RPC_SERVER__)!=null||(ya.__VUE_DEVTOOLS_KIT_VITE_RPC_SERVER__=null);var wa,ka;(ka=(wa=Se).__VUE_DEVTOOLS_KIT_BROADCAST_RPC_SERVER__)!=null||(wa.__VUE_DEVTOOLS_KIT_BROADCAST_RPC_SERVER__=null);xe();xe();xe();xe();xe();xe();xe();function Hc(s,n){return a(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"})])}function Gc(s,n){return a(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function Wc(s,n){return a(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})])}function tr(s,n){return a(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{d:"M11.7 2.805a.75.75 0 0 1 .6 0A60.65 60.65 0 0 1 22.83 8.72a.75.75 0 0 1-.231 1.337 49.948 49.948 0 0 0-9.902 3.912l-.003.002c-.114.06-.227.119-.34.18a.75.75 0 0 1-.707 0A50.88 50.88 0 0 0 7.5 12.173v-.224c0-.131.067-.248.172-.311a54.615 54.615 0 0 1 4.653-2.52.75.75 0 0 0-.65-1.352 56.123 56.123 0 0 0-4.78 2.589 1.858 1.858 0 0 0-.859 1.228 49.803 49.803 0 0 0-4.634-1.527.75.75 0 0 1-.231-1.337A60.653 60.653 0 0 1 11.7 2.805Z"}),e("path",{d:"M13.06 15.473a48.45 48.45 0 0 1 7.666-3.282c.134 1.414.22 2.843.255 4.284a.75.75 0 0 1-.46.711 47.87 47.87 0 0 0-8.105 4.342.75.75 0 0 1-.832 0 47.87 47.87 0 0 0-8.104-4.342.75.75 0 0 1-.461-.71c.035-1.442.121-2.87.255-4.286.921.304 1.83.634 2.726.99v1.27a1.5 1.5 0 0 0-.14 2.508c-.09.38-.222.753-.397 1.11.452.213.901.434 1.346.66a6.727 6.727 0 0 0 .551-1.607 1.5 1.5 0 0 0 .14-2.67v-.645a48.549 48.549 0 0 1 3.44 1.667 2.25 2.25 0 0 0 2.12 0Z"}),e("path",{d:"M4.462 19.462c.42-.419.753-.89 1-1.395.453.214.902.435 1.347.662a6.742 6.742 0 0 1-1.286 1.794.75.75 0 0 1-1.06-1.06Z"})])}function An(s,n){return a(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{d:"M3.375 3C2.339 3 1.5 3.84 1.5 4.875v.75c0 1.036.84 1.875 1.875 1.875h17.25c1.035 0 1.875-.84 1.875-1.875v-.75C22.5 3.839 21.66 3 20.625 3H3.375Z"}),e("path",{"fill-rule":"evenodd",d:"m3.087 9 .54 9.176A3 3 0 0 0 6.62 21h10.757a3 3 0 0 0 2.995-2.824L20.913 9H3.087Zm6.163 3.75A.75.75 0 0 1 10 12h4a.75.75 0 0 1 0 1.5h-4a.75.75 0 0 1-.75-.75Z","clip-rule":"evenodd"})])}function mi(s,n){return a(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M12 2.25a.75.75 0 0 1 .75.75v16.19l6.22-6.22a.75.75 0 1 1 1.06 1.06l-7.5 7.5a.75.75 0 0 1-1.06 0l-7.5-7.5a.75.75 0 1 1 1.06-1.06l6.22 6.22V3a.75.75 0 0 1 .75-.75Z","clip-rule":"evenodd"})])}function qc(s,n){return a(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M11.03 3.97a.75.75 0 0 1 0 1.06l-6.22 6.22H21a.75.75 0 0 1 0 1.5H4.81l6.22 6.22a.75.75 0 1 1-1.06 1.06l-7.5-7.5a.75.75 0 0 1 0-1.06l7.5-7.5a.75.75 0 0 1 1.06 0Z","clip-rule":"evenodd"})])}function hi(s,n){return a(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M15.22 6.268a.75.75 0 0 1 .968-.431l5.942 2.28a.75.75 0 0 1 .431.97l-2.28 5.94a.75.75 0 1 1-1.4-.537l1.63-4.251-1.086.484a11.2 11.2 0 0 0-5.45 5.173.75.75 0 0 1-1.199.19L9 12.312l-6.22 6.22a.75.75 0 0 1-1.06-1.061l6.75-6.75a.75.75 0 0 1 1.06 0l3.606 3.606a12.695 12.695 0 0 1 5.68-4.974l1.086-.483-4.251-1.632a.75.75 0 0 1-.432-.97Z","clip-rule":"evenodd"})])}function vo(s,n){return a(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M11.47 2.47a.75.75 0 0 1 1.06 0l7.5 7.5a.75.75 0 1 1-1.06 1.06l-6.22-6.22V21a.75.75 0 0 1-1.5 0V4.81l-6.22 6.22a.75.75 0 1 1-1.06-1.06l7.5-7.5Z","clip-rule":"evenodd"})])}function Kc(s,n){return a(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M15.97 2.47a.75.75 0 0 1 1.06 0l4.5 4.5a.75.75 0 0 1 0 1.06l-4.5 4.5a.75.75 0 1 1-1.06-1.06l3.22-3.22H7.5a.75.75 0 0 1 0-1.5h11.69l-3.22-3.22a.75.75 0 0 1 0-1.06Zm-7.94 9a.75.75 0 0 1 0 1.06l-3.22 3.22H16.5a.75.75 0 0 1 0 1.5H4.81l3.22 3.22a.75.75 0 1 1-1.06 1.06l-4.5-4.5a.75.75 0 0 1 0-1.06l4.5-4.5a.75.75 0 0 1 1.06 0Z","clip-rule":"evenodd"})])}function Yc(s,n){return a(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M6.97 2.47a.75.75 0 0 1 1.06 0l4.5 4.5a.75.75 0 0 1-1.06 1.06L8.25 4.81V16.5a.75.75 0 0 1-1.5 0V4.81L3.53 8.03a.75.75 0 0 1-1.06-1.06l4.5-4.5Zm9.53 4.28a.75.75 0 0 1 .75.75v11.69l3.22-3.22a.75.75 0 1 1 1.06 1.06l-4.5 4.5a.75.75 0 0 1-1.06 0l-4.5-4.5a.75.75 0 1 1 1.06-1.06l3.22 3.22V7.5a.75.75 0 0 1 .75-.75Z","clip-rule":"evenodd"})])}function sr(s,n){return a(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M5.25 9a6.75 6.75 0 0 1 13.5 0v.75c0 2.123.8 4.057 2.118 5.52a.75.75 0 0 1-.297 1.206c-1.544.57-3.16.99-4.831 1.243a3.75 3.75 0 1 1-7.48 0 24.585 24.585 0 0 1-4.831-1.244.75.75 0 0 1-.298-1.205A8.217 8.217 0 0 0 5.25 9.75V9Zm4.502 8.9a2.25 2.25 0 1 0 4.496 0 25.057 25.057 0 0 1-4.496 0Z","clip-rule":"evenodd"})])}function nr(s,n){return a(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M3 2.25a.75.75 0 0 0 0 1.5v16.5h-.75a.75.75 0 0 0 0 1.5H15v-18a.75.75 0 0 0 0-1.5H3ZM6.75 19.5v-2.25a.75.75 0 0 1 .75-.75h3a.75.75 0 0 1 .75.75v2.25a.75.75 0 0 1-.75.75h-3a.75.75 0 0 1-.75-.75ZM6 6.75A.75.75 0 0 1 6.75 6h.75a.75.75 0 0 1 0 1.5h-.75A.75.75 0 0 1 6 6.75ZM6.75 9a.75.75 0 0 0 0 1.5h.75a.75.75 0 0 0 0-1.5h-.75ZM6 12.75a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 0 1.5h-.75a.75.75 0 0 1-.75-.75ZM10.5 6a.75.75 0 0 0 0 1.5h.75a.75.75 0 0 0 0-1.5h-.75Zm-.75 3.75A.75.75 0 0 1 10.5 9h.75a.75.75 0 0 1 0 1.5h-.75a.75.75 0 0 1-.75-.75ZM10.5 12a.75.75 0 0 0 0 1.5h.75a.75.75 0 0 0 0-1.5h-.75ZM16.5 6.75v15h5.25a.75.75 0 0 0 0-1.5H21v-12a.75.75 0 0 0 0-1.5h-4.5Zm1.5 4.5a.75.75 0 0 1 .75-.75h.008a.75.75 0 0 1 .75.75v.008a.75.75 0 0 1-.75.75h-.008a.75.75 0 0 1-.75-.75v-.008Zm.75 2.25a.75.75 0 0 0-.75.75v.008c0 .414.336.75.75.75h.008a.75.75 0 0 0 .75-.75v-.008a.75.75 0 0 0-.75-.75h-.008ZM18 17.25a.75.75 0 0 1 .75-.75h.008a.75.75 0 0 1 .75.75v.008a.75.75 0 0 1-.75.75h-.008a.75.75 0 0 1-.75-.75v-.008Z","clip-rule":"evenodd"})])}function Gt(s,n){return a(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M12.53 16.28a.75.75 0 0 1-1.06 0l-7.5-7.5a.75.75 0 0 1 1.06-1.06L12 14.69l6.97-6.97a.75.75 0 1 1 1.06 1.06l-7.5 7.5Z","clip-rule":"evenodd"})])}function or(s,n){return a(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M7.502 6h7.128A3.375 3.375 0 0 1 18 9.375v9.375a3 3 0 0 0 3-3V6.108c0-1.505-1.125-2.811-2.664-2.94a48.972 48.972 0 0 0-.673-.05A3 3 0 0 0 15 1.5h-1.5a3 3 0 0 0-2.663 1.618c-.225.015-.45.032-.673.05C8.662 3.295 7.554 4.542 7.502 6ZM13.5 3A1.5 1.5 0 0 0 12 4.5h4.5A1.5 1.5 0 0 0 15 3h-1.5Z","clip-rule":"evenodd"}),e("path",{"fill-rule":"evenodd",d:"M3 9.375C3 8.339 3.84 7.5 4.875 7.5h9.75c1.036 0 1.875.84 1.875 1.875v11.25c0 1.035-.84 1.875-1.875 1.875h-9.75A1.875 1.875 0 0 1 3 20.625V9.375Zm9.586 4.594a.75.75 0 0 0-1.172-.938l-2.476 3.096-.908-.907a.75.75 0 0 0-1.06 1.06l1.5 1.5a.75.75 0 0 0 1.116-.062l3-3.75Z","clip-rule":"evenodd"})])}function Dn(s,n){return a(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M7.502 6h7.128A3.375 3.375 0 0 1 18 9.375v9.375a3 3 0 0 0 3-3V6.108c0-1.505-1.125-2.811-2.664-2.94a48.972 48.972 0 0 0-.673-.05A3 3 0 0 0 15 1.5h-1.5a3 3 0 0 0-2.663 1.618c-.225.015-.45.032-.673.05C8.662 3.295 7.554 4.542 7.502 6ZM13.5 3A1.5 1.5 0 0 0 12 4.5h4.5A1.5 1.5 0 0 0 15 3h-1.5Z","clip-rule":"evenodd"}),e("path",{"fill-rule":"evenodd",d:"M3 9.375C3 8.339 3.84 7.5 4.875 7.5h9.75c1.036 0 1.875.84 1.875 1.875v11.25c0 1.035-.84 1.875-1.875 1.875h-9.75A1.875 1.875 0 0 1 3 20.625V9.375ZM6 12a.75.75 0 0 1 .75-.75h.008a.75.75 0 0 1 .75.75v.008a.75.75 0 0 1-.75.75H6.75a.75.75 0 0 1-.75-.75V12Zm2.25 0a.75.75 0 0 1 .75-.75h3.75a.75.75 0 0 1 0 1.5H9a.75.75 0 0 1-.75-.75ZM6 15a.75.75 0 0 1 .75-.75h.008a.75.75 0 0 1 .75.75v.008a.75.75 0 0 1-.75.75H6.75a.75.75 0 0 1-.75-.75V15Zm2.25 0a.75.75 0 0 1 .75-.75h3.75a.75.75 0 0 1 0 1.5H9a.75.75 0 0 1-.75-.75ZM6 18a.75.75 0 0 1 .75-.75h.008a.75.75 0 0 1 .75.75v.008a.75.75 0 0 1-.75.75H6.75a.75.75 0 0 1-.75-.75V18Zm2.25 0a.75.75 0 0 1 .75-.75h3.75a.75.75 0 0 1 0 1.5H9a.75.75 0 0 1-.75-.75Z","clip-rule":"evenodd"})])}function $a(s,n){return a(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M5.625 1.5H9a3.75 3.75 0 0 1 3.75 3.75v1.875c0 1.036.84 1.875 1.875 1.875H16.5a3.75 3.75 0 0 1 3.75 3.75v7.875c0 1.035-.84 1.875-1.875 1.875H5.625a1.875 1.875 0 0 1-1.875-1.875V3.375c0-1.036.84-1.875 1.875-1.875Zm5.845 17.03a.75.75 0 0 0 1.06 0l3-3a.75.75 0 1 0-1.06-1.06l-1.72 1.72V12a.75.75 0 0 0-1.5 0v4.19l-1.72-1.72a.75.75 0 0 0-1.06 1.06l3 3Z","clip-rule":"evenodd"}),e("path",{d:"M14.25 5.25a5.23 5.23 0 0 0-1.279-3.434 9.768 9.768 0 0 1 6.963 6.963A5.23 5.23 0 0 0 16.5 7.5h-1.875a.375.375 0 0 1-.375-.375V5.25Z"})])}function Fn(s,n){return a(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M16.098 2.598a3.75 3.75 0 1 1 3.622 6.275l-1.72.46V12a.75.75 0 0 1-.22.53l-.75.75a.75.75 0 0 1-1.06 0l-.97-.97-7.94 7.94a2.56 2.56 0 0 1-1.81.75 1.06 1.06 0 0 0-.75.31l-.97.97a.75.75 0 0 1-1.06 0l-.75-.75a.75.75 0 0 1 0-1.06l.97-.97a1.06 1.06 0 0 0 .31-.75c0-.68.27-1.33.75-1.81L11.69 9l-.97-.97a.75.75 0 0 1 0-1.06l.75-.75A.75.75 0 0 1 12 6h2.666l.461-1.72c.165-.617.49-1.2.971-1.682Zm-3.348 7.463L4.81 18a1.06 1.06 0 0 0-.31.75c0 .318-.06.63-.172.922a2.56 2.56 0 0 1 .922-.172c.281 0 .551-.112.75-.31l7.94-7.94-1.19-1.19Z","clip-rule":"evenodd"})])}function bi(s,n){return a(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{d:"M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"}),e("path",{"fill-rule":"evenodd",d:"M1.323 11.447C2.811 6.976 7.028 3.75 12.001 3.75c4.97 0 9.185 3.223 10.675 7.69.12.362.12.752 0 1.113-1.487 4.471-5.705 7.697-10.677 7.697-4.97 0-9.186-3.223-10.675-7.69a1.762 1.762 0 0 1 0-1.113ZM17.25 12a5.25 5.25 0 1 1-10.5 0 5.25 5.25 0 0 1 10.5 0Z","clip-rule":"evenodd"})])}function sn(s,n){return a(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M1.5 5.625c0-1.036.84-1.875 1.875-1.875h17.25c1.035 0 1.875.84 1.875 1.875v12.75c0 1.035-.84 1.875-1.875 1.875H3.375A1.875 1.875 0 0 1 1.5 18.375V5.625Zm1.5 0v1.5c0 .207.168.375.375.375h1.5a.375.375 0 0 0 .375-.375v-1.5a.375.375 0 0 0-.375-.375h-1.5A.375.375 0 0 0 3 5.625Zm16.125-.375a.375.375 0 0 0-.375.375v1.5c0 .207.168.375.375.375h1.5A.375.375 0 0 0 21 7.125v-1.5a.375.375 0 0 0-.375-.375h-1.5ZM21 9.375A.375.375 0 0 0 20.625 9h-1.5a.375.375 0 0 0-.375.375v1.5c0 .207.168.375.375.375h1.5a.375.375 0 0 0 .375-.375v-1.5Zm0 3.75a.375.375 0 0 0-.375-.375h-1.5a.375.375 0 0 0-.375.375v1.5c0 .207.168.375.375.375h1.5a.375.375 0 0 0 .375-.375v-1.5Zm0 3.75a.375.375 0 0 0-.375-.375h-1.5a.375.375 0 0 0-.375.375v1.5c0 .207.168.375.375.375h1.5a.375.375 0 0 0 .375-.375v-1.5ZM4.875 18.75a.375.375 0 0 0 .375-.375v-1.5a.375.375 0 0 0-.375-.375h-1.5a.375.375 0 0 0-.375.375v1.5c0 .207.168.375.375.375h1.5ZM3.375 15h1.5a.375.375 0 0 0 .375-.375v-1.5a.375.375 0 0 0-.375-.375h-1.5a.375.375 0 0 0-.375.375v1.5c0 .207.168.375.375.375Zm0-3.75h1.5a.375.375 0 0 0 .375-.375v-1.5A.375.375 0 0 0 4.875 9h-1.5A.375.375 0 0 0 3 9.375v1.5c0 .207.168.375.375.375Zm4.125 0a.75.75 0 0 0 0 1.5h9a.75.75 0 0 0 0-1.5h-9Z","clip-rule":"evenodd"})])}function Zc(s,n){return a(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{d:"M19.5 21a3 3 0 0 0 3-3v-4.5a3 3 0 0 0-3-3h-15a3 3 0 0 0-3 3V18a3 3 0 0 0 3 3h15ZM1.5 10.146V6a3 3 0 0 1 3-3h5.379a2.25 2.25 0 0 1 1.59.659l2.122 2.121c.14.141.331.22.53.22H19.5a3 3 0 0 1 3 3v1.146A4.483 4.483 0 0 0 19.5 9h-15a4.483 4.483 0 0 0-3 1.146Z"})])}function Xc(s,n){return a(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{d:"M5.055 7.06C3.805 6.347 2.25 7.25 2.25 8.69v8.122c0 1.44 1.555 2.343 2.805 1.628L12 14.471v2.34c0 1.44 1.555 2.343 2.805 1.628l7.108-4.061c1.26-.72 1.26-2.536 0-3.256l-7.108-4.061C13.555 6.346 12 7.249 12 8.689v2.34L5.055 7.061Z"})])}function At(s,n){return a(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{d:"m11.645 20.91-.007-.003-.022-.012a15.247 15.247 0 0 1-.383-.218 25.18 25.18 0 0 1-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0 1 12 5.052 5.5 5.5 0 0 1 16.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 0 1-4.244 3.17 15.247 15.247 0 0 1-.383.219l-.022.012-.007.004-.003.001a.752.752 0 0 1-.704 0l-.003-.001Z"})])}function Mn(s,n){return a(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M2.625 6.75a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0Zm4.875 0A.75.75 0 0 1 8.25 6h12a.75.75 0 0 1 0 1.5h-12a.75.75 0 0 1-.75-.75ZM2.625 12a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0ZM7.5 12a.75.75 0 0 1 .75-.75h12a.75.75 0 0 1 0 1.5h-12A.75.75 0 0 1 7.5 12Zm-4.875 5.25a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0Zm4.875 0a.75.75 0 0 1 .75-.75h12a.75.75 0 0 1 0 1.5h-12a.75.75 0 0 1-.75-.75Z","clip-rule":"evenodd"})])}function Qc(s,n){return a(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M9.528 1.718a.75.75 0 0 1 .162.819A8.97 8.97 0 0 0 9 6a9 9 0 0 0 9 9 8.97 8.97 0 0 0 3.463-.69.75.75 0 0 1 .981.98 10.503 10.503 0 0 1-9.694 6.46c-5.799 0-10.5-4.7-10.5-10.5 0-4.368 2.667-8.112 6.46-9.694a.75.75 0 0 1 .818.162Z","clip-rule":"evenodd"})])}function Jc(s,n){return a(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M20.599 1.5c-.376 0-.743.111-1.055.32l-5.08 3.385a18.747 18.747 0 0 0-3.471 2.987 10.04 10.04 0 0 1 4.815 4.815 18.748 18.748 0 0 0 2.987-3.472l3.386-5.079A1.902 1.902 0 0 0 20.599 1.5Zm-8.3 14.025a18.76 18.76 0 0 0 1.896-1.207 8.026 8.026 0 0 0-4.513-4.513A18.75 18.75 0 0 0 8.475 11.7l-.278.5a5.26 5.26 0 0 1 3.601 3.602l.502-.278ZM6.75 13.5A3.75 3.75 0 0 0 3 17.25a1.5 1.5 0 0 1-1.601 1.497.75.75 0 0 0-.7 1.123 5.25 5.25 0 0 0 9.8-2.62 3.75 3.75 0 0 0-3.75-3.75Z","clip-rule":"evenodd"})])}function On(s,n){return a(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{d:"M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712ZM19.513 8.199l-3.712-3.712-12.15 12.15a5.25 5.25 0 0 0-1.32 2.214l-.8 2.685a.75.75 0 0 0 .933.933l2.685-.8a5.25 5.25 0 0 0 2.214-1.32L19.513 8.2Z"})])}function vi(s,n){return a(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M4.5 5.653c0-1.427 1.529-2.33 2.779-1.643l11.54 6.347c1.295.712 1.295 2.573 0 3.286L7.28 19.99c-1.25.687-2.779-.217-2.779-1.643V5.653Z","clip-rule":"evenodd"})])}function ds(s,n){return a(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M8.128 9.155a3.751 3.751 0 1 1 .713-1.321l1.136.656a.75.75 0 0 1 .222 1.104l-.006.007a.75.75 0 0 1-1.032.157 1.421 1.421 0 0 0-.113-.072l-.92-.531Zm-4.827-3.53a2.25 2.25 0 0 1 3.994 2.063.756.756 0 0 0-.122.23 2.25 2.25 0 0 1-3.872-2.293ZM13.348 8.272a5.073 5.073 0 0 0-3.428 3.57 5.08 5.08 0 0 0-.165 1.202 1.415 1.415 0 0 1-.707 1.201l-.96.554a3.751 3.751 0 1 0 .734 1.309l13.729-7.926a.75.75 0 0 0-.181-1.374l-.803-.215a5.25 5.25 0 0 0-2.894.05l-5.325 1.629Zm-9.223 7.03a2.25 2.25 0 1 0 2.25 3.897 2.25 2.25 0 0 0-2.25-3.897ZM12 12.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z","clip-rule":"evenodd"}),e("path",{d:"M16.372 12.615a.75.75 0 0 1 .75 0l5.43 3.135a.75.75 0 0 1-.182 1.374l-.802.215a5.25 5.25 0 0 1-2.894-.051l-5.147-1.574a.75.75 0 0 1-.156-1.367l3-1.732Z"})])}function xo(s,n){return a(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M15.75 4.5a3 3 0 1 1 .825 2.066l-8.421 4.679a3.002 3.002 0 0 1 0 1.51l8.421 4.679a3 3 0 1 1-.729 1.31l-8.421-4.678a3 3 0 1 1 0-4.132l8.421-4.679a3 3 0 0 1-.096-.755Z","clip-rule":"evenodd"})])}function xn(s,n){return a(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M3 6a3 3 0 0 1 3-3h2.25a3 3 0 0 1 3 3v2.25a3 3 0 0 1-3 3H6a3 3 0 0 1-3-3V6Zm9.75 0a3 3 0 0 1 3-3H18a3 3 0 0 1 3 3v2.25a3 3 0 0 1-3 3h-2.25a3 3 0 0 1-3-3V6ZM3 15.75a3 3 0 0 1 3-3h2.25a3 3 0 0 1 3 3V18a3 3 0 0 1-3 3H6a3 3 0 0 1-3-3v-2.25Zm9.75 0a3 3 0 0 1 3-3H18a3 3 0 0 1 3 3V18a3 3 0 0 1-3 3h-2.25a3 3 0 0 1-3-3v-2.25Z","clip-rule":"evenodd"})])}function ss(s,n){return a(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M5.166 2.621v.858c-1.035.148-2.059.33-3.071.543a.75.75 0 0 0-.584.859 6.753 6.753 0 0 0 6.138 5.6 6.73 6.73 0 0 0 2.743 1.346A6.707 6.707 0 0 1 9.279 15H8.54c-1.036 0-1.875.84-1.875 1.875V19.5h-.75a2.25 2.25 0 0 0-2.25 2.25c0 .414.336.75.75.75h15a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-2.25-2.25h-.75v-2.625c0-1.036-.84-1.875-1.875-1.875h-.739a6.706 6.706 0 0 1-1.112-3.173 6.73 6.73 0 0 0 2.743-1.347 6.753 6.753 0 0 0 6.139-5.6.75.75 0 0 0-.585-.858 47.077 47.077 0 0 0-3.07-.543V2.62a.75.75 0 0 0-.658-.744 49.22 49.22 0 0 0-6.093-.377c-2.063 0-4.096.128-6.093.377a.75.75 0 0 0-.657.744Zm0 2.629c0 1.196.312 2.32.857 3.294A5.266 5.266 0 0 1 3.16 5.337a45.6 45.6 0 0 1 2.006-.343v.256Zm13.5 0v-.256c.674.1 1.343.214 2.006.343a5.265 5.265 0 0 1-2.863 3.207 6.72 6.72 0 0 0 .857-3.294Z","clip-rule":"evenodd"})])}function xi(s,n){return a(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{d:"M4.5 4.5a3 3 0 0 0-3 3v9a3 3 0 0 0 3 3h8.25a3 3 0 0 0 3-3v-9a3 3 0 0 0-3-3H4.5ZM19.94 18.75l-2.69-2.69V7.94l2.69-2.69c.944-.945 2.56-.276 2.56 1.06v11.38c0 1.336-1.616 2.005-2.56 1.06Z"})])}const Nn=["germinating","seedling","early_veg","mid_veg","late_veg","pre_flower","early_flower","mid_flower","late_flower","flush","harvest","drying","curing","archived","culled"],Fe={germinating:{label:"Germination",shortLabel:"Germination",color:"amber-400",bgColor:"amber-500/20",icon:"🌱",order:1,minDays:1,maxDays:7,observationFrequency:1},seedling:{label:"Seedling",shortLabel:"Seedling",color:"lime-400",bgColor:"lime-500/20",icon:"🌿",order:2,minDays:7,maxDays:21,observationFrequency:2},early_veg:{label:"Early Veg",shortLabel:"Early Veg",color:"green-400",bgColor:"green-500/20",icon:"🪴",order:3,minDays:7,maxDays:21,observationFrequency:3},mid_veg:{label:"Mid Veg",shortLabel:"Mid Veg",color:"green-500",bgColor:"green-600/20",icon:"🪴",order:4,minDays:14,maxDays:28,observationFrequency:3},late_veg:{label:"Late Veg",shortLabel:"Late Veg",color:"emerald-400",bgColor:"emerald-500/20",icon:"🌳",order:5,minDays:7,maxDays:21,observationFrequency:4},pre_flower:{label:"Pre-Flower",shortLabel:"Pre-Flower",color:"purple-400",bgColor:"purple-500/20",icon:"🌸",order:6,minDays:7,maxDays:14,observationFrequency:2},early_flower:{label:"Early Flower",shortLabel:"Early Flower",color:"purple-500",bgColor:"purple-600/20",icon:"💮",order:7,minDays:14,maxDays:21,observationFrequency:2},mid_flower:{label:"Mid Flower",shortLabel:"Mid Flower",color:"pink-400",bgColor:"pink-500/20",icon:"🌺",order:8,minDays:14,maxDays:28,observationFrequency:2},late_flower:{label:"Late Flower",shortLabel:"Late Flower",color:"pink-500",bgColor:"pink-600/20",icon:"🌷",order:9,minDays:7,maxDays:21,observationFrequency:2},flush:{label:"Flush",shortLabel:"Flush",color:"yellow-400",bgColor:"yellow-500/20",icon:"💧",order:10,minDays:7,maxDays:14,observationFrequency:1},harvest:{label:"Harvest",shortLabel:"Harvest",color:"orange-400",bgColor:"orange-500/20",icon:"✂️",order:11,minDays:1,maxDays:3,observationFrequency:1},drying:{label:"Drying",shortLabel:"Drying",color:"amber-500",bgColor:"amber-600/20",icon:"🍂",order:12,minDays:7,maxDays:14,observationFrequency:1},curing:{label:"Curing",shortLabel:"Curing",color:"amber-600",bgColor:"amber-700/20",icon:"🫙",order:13,minDays:14,maxDays:60,observationFrequency:7},archived:{label:"Archived",shortLabel:"Archived",color:"gray-400",bgColor:"gray-500/20",icon:"📦",order:14,observationFrequency:0},culled:{label:"Culled",shortLabel:"Culled",color:"red-400",bgColor:"red-500/20",icon:"❌",order:15,observationFrequency:0}},yo={active:{label:"Active",color:"spider-green-400",bgColor:"spider-green-500/20",icon:"✓",description:"Normal progression"},watch:{label:"Watch",color:"yellow-400",bgColor:"yellow-500/20",icon:"👁",description:"Needs attention"},warning:{label:"Warning",color:"orange-400",bgColor:"orange-500/20",icon:"⚠",description:"May be culled soon"},cull_candidate:{label:"Cull Candidate",color:"red-400",bgColor:"red-500/20",icon:"✗",description:"Marked for removal"},keeper:{label:"Keeper",color:"purple-400",bgColor:"purple-500/20",icon:"★",description:"Elite selection"}},rt=Ji("lab",()=>{const s=Re([]),n=Re([]),r=Re([]),o=Re([]),i=Re(null),d=Re(null),g=Re([]),f=Re([]),m=Re([]),b=Re([]),x=Re([]),_=Re([]),C=Re([]),k=Re(null),p=W("dashboard"),T=W({}),M=W("cards"),P=W(!1),w=W(!1),$=W(null),S=U(()=>s.value.filter(ae=>!["archived","culled"].includes(ae.status))),A=U(()=>{const ae={};for(const fe of S.value)ae[fe.status]||(ae[fe.status]=[]),ae[fe.status].push(fe);return ae}),y=U(()=>{let ae=[...s.value];const fe=T.value;if(fe.stage&&(ae=ae.filter(_e=>_e.status===fe.stage)),fe.strain_id&&(ae=ae.filter(_e=>_e.strain_id===fe.strain_id)),fe.selection_status&&(ae=ae.filter(_e=>_e.selection_status===fe.selection_status)),fe.search){const _e=fe.search.toLowerCase();ae=ae.filter(De=>De.plant_code.toLowerCase().includes(_e)||De.pheno_label?.toLowerCase().includes(_e)||De.strain_name?.toLowerCase().includes(_e))}return ae}),h=U(()=>o.value.filter(ae=>!ae.acknowledged)),u=U(()=>o.value.filter(ae=>ae.level==="urgent"&&!ae.resolved)),v=U(()=>[...S.value].filter(ae=>ae.final_score&&ae.final_score>0).sort((ae,fe)=>(fe.final_score||0)-(ae.final_score||0)).slice(0,5)),D=U(()=>{const ae={};for(const fe of n.value)ae[fe.id]=fe;return ae});async function z(){P.value=!0;try{const[ae,fe,_e,De]=await Promise.all([$fetch("/api/lab/dashboard"),$fetch("/api/lab/plants?status=active&limit=50"),$fetch("/api/lab/notifications?unread=true"),$fetch("/api/lab/strains")]);i.value={total_plants:ae.active_plants||0,active_plants:ae.active_plants||0,by_stage:ae.status_distribution||{},by_selection:{},keepers:ae.keepers_count||0,avg_score:0,top_score:ae.top_performers?.[0]?.final_score||0,pending_observations:0,alerts_count:ae.unread_notifications||0},s.value=fe,o.value=ae.urgent_alerts||_e||[],n.value=De}catch{}finally{P.value=!1}}async function G(ae){P.value=!0;try{const fe=new URLSearchParams;ae?.stage&&fe.set("stage",ae.stage),ae?.strain_id&&fe.set("strain_id",ae.strain_id),ae?.selection_status&&fe.set("selection_status",ae.selection_status),ae?.search&&fe.set("search",ae.search);const _e=await $fetch(`/api/lab/plants?${fe}`);s.value=_e}catch{}finally{P.value=!1}}async function B(ae){try{const fe=await $fetch(`/api/lab/plants/${ae}`);d.value=fe,g.value=fe.observations||[],f.value=fe.scores?[fe.scores]:[]}catch{}}async function O(ae){try{return(await $fetch(`/api/lab/plants/${ae}`)).scores||null}catch{return null}}async function R(ae){w.value=!0;try{const{getAuthHeaders:fe}=Ue(),_e=await $fetch("/api/lab/plants",{method:"POST",headers:fe(),body:ae});return s.value=[...s.value,_e],_e}catch(fe){throw fe}finally{w.value=!1}}async function X(ae,fe){w.value=!0;try{const{getAuthHeaders:_e}=Ue(),De=await $fetch(`/api/lab/plants/${ae}`,{method:"PUT",headers:_e(),body:fe}),et=s.value.findIndex(se=>se.id===ae);if(et>=0){const se=[...s.value];se[et]=De,s.value=se}return d.value?.id===ae&&(d.value=De),De}catch(_e){throw _e}finally{w.value=!1}}async function oe(){try{const ae=await $fetch("/api/lab/strains");n.value=ae}catch{}}async function we(ae){w.value=!0;try{const{getAuthHeaders:fe}=Ue(),_e=await $fetch("/api/lab/strains",{method:"POST",headers:fe(),body:ae});return n.value=[...n.value,_e],_e}catch(fe){throw fe}finally{w.value=!1}}async function re(ae,fe){w.value=!0;try{const{getAuthHeaders:_e}=Ue(),De=await $fetch(`/api/lab/strains/${ae}`,{method:"PUT",headers:_e(),body:fe}),et=n.value.findIndex(se=>se.id===ae);if(et>=0){const se=[...n.value];se[et]=De,n.value=se}return De}catch(_e){throw _e}finally{w.value=!1}}async function E(ae){w.value=!0;try{const{getAuthHeaders:fe}=Ue();await $fetch(`/api/lab/plants/${ae}`,{method:"DELETE",headers:fe()}),s.value=s.value.filter(_e=>_e.id!==ae),d.value?.id===ae&&ue()}catch(fe){throw fe}finally{w.value=!1}}async function L(ae){w.value=!0;try{const{getAuthHeaders:fe}=Ue();await $fetch(`/api/lab/strains/${ae}`,{method:"DELETE",headers:fe()}),n.value=n.value.filter(_e=>_e.id!==ae)}catch(fe){throw fe}finally{w.value=!1}}async function F(ae=50){try{const fe=await $fetch(`/api/lab/observations?limit=${ae}`);return m.value=fe,fe}catch{return[]}}async function be(ae,fe){w.value=!0;try{const{getAuthHeaders:_e}=Ue(),De=await $fetch("/api/lab/observations",{method:"POST",headers:_e(),body:{...fe,plant_id:ae}});return d.value?.id===ae&&(g.value=[De,...g.value]),F(),De}catch(_e){throw _e}finally{w.value=!1}}async function ie(ae,fe){w.value=!0;try{const{getAuthHeaders:_e}=Ue(),De=await $fetch(`/api/lab/observations/${ae}`,{method:"PUT",headers:_e(),body:fe}),et=g.value.findIndex(se=>se.id===ae);if(et>=0){const se=[...g.value];se[et]=De,g.value=se}return F(),De}catch(_e){throw _e}finally{w.value=!1}}async function de(ae){w.value=!0;try{const{getAuthHeaders:fe}=Ue();await $fetch(`/api/lab/observations/${ae}`,{method:"DELETE",headers:fe()}),g.value=g.value.filter(_e=>_e.id!==ae),F()}catch(fe){throw fe}finally{w.value=!1}}async function te(ae,fe,_e){w.value=!0;try{const{getAuthHeaders:De}=Ue(),et=await $fetch(`/api/lab/plants/${ae}/stage`,{method:"POST",headers:De(),body:{stage:fe,transition_data:_e}}),se=s.value.findIndex(ke=>ke.id===ae);if(se>=0){const ke=[...s.value];ke[se]=et,s.value=ke}return d.value?.id===ae&&(d.value=et),et}catch(De){throw De}finally{w.value=!1}}async function K(ae){try{const{getAuthHeaders:fe}=Ue();await $fetch("/api/lab/notifications",{method:"POST",headers:fe(),body:{action:"acknowledge",id:ae}});const _e=o.value.map(De=>De.id===ae?{...De,acknowledged:!0}:De);o.value=_e}catch{}}function ue(){d.value=null,g.value=[],f.value=[]}function N(ae){T.value=ae}function H(){T.value={}}function Y(ae){$.value=ae}function me(){$.value=null}async function J(){try{const ae=await $fetch("/api/lab/breeding-projects");b.value=ae}catch{}}async function Z(ae){w.value=!0;try{const{getAuthHeaders:fe}=Ue(),_e=await $fetch("/api/lab/breeding-projects",{method:"POST",headers:fe(),body:ae}),De={id:_e.id,name:ae.name||"",code:_e.code,project_type:ae.project_type||"line_creation",status:ae.status||"active",primary_goal:ae.primary_goal,target_traits:ae.target_traits||[],traits_to_avoid:ae.traits_to_avoid||[],female_strain_id:ae.female_strain_id,male_strain_id:ae.male_strain_id,female_plant_id:ae.female_plant_id,male_plant_id:ae.male_plant_id,started_at:ae.started_at||new Date().toISOString().split("T")[0],female_strain_name:ae.female_strain_id?D.value[ae.female_strain_id]?.name||ae.female_strain_id:void 0,male_strain_name:ae.male_strain_id?D.value[ae.male_strain_id]?.name||ae.male_strain_id:void 0};return b.value=[...b.value,De],J(),{id:_e.id}}catch{return null}finally{w.value=!1}}async function q(ae,fe){w.value=!0;try{const{getAuthHeaders:_e}=Ue();return await $fetch(`/api/lab/breeding-projects/${ae}`,{method:"PUT",headers:_e(),body:fe}),await J(),!0}catch{return!1}finally{w.value=!1}}async function ee(){try{const ae=await $fetch("/api/lab/pollen");x.value=ae}catch{}}async function ne(ae){w.value=!0;try{const{getAuthHeaders:fe}=Ue(),_e=await $fetch("/api/lab/pollen",{method:"POST",headers:fe(),body:ae}),De=ae.collection_date||new Date().toISOString().split("T")[0],et=ae.storage_method||"refrigerated",se=ae.viability_at_collection||90,ke=ae.strain_id?D.value[ae.strain_id]?.name||ae.strain_id:"Unknown",Me={id:_e.id,batch_code:_e.batch_code,strain_id:ae.strain_id,male_plant_id:ae.male_plant_id,collection_date:De,storage_method:et,viability_at_collection:se,current_viability:se,status:ae.status||"available",notes:ae.notes,strain_name:ke,strainName:ke,batchCode:_e.batch_code,collectionDate:De,storageMethod:et,viability:se};return x.value=[...x.value,Me],ee(),{id:_e.id}}catch{return null}finally{w.value=!1}}async function Ce(ae,fe){w.value=!0;try{const{getAuthHeaders:_e}=Ue();return await $fetch(`/api/lab/pollen/${ae}`,{method:"PUT",headers:_e(),body:fe}),await ee(),!0}catch{return!1}finally{w.value=!1}}async function Ee(){try{const ae=await $fetch("/api/lab/harvests");_.value=ae}catch{}}async function he(ae){w.value=!0;try{const{getAuthHeaders:fe}=Ue(),_e=await $fetch("/api/lab/harvests",{method:"POST",headers:fe(),body:ae});return await Ee(),_e}catch(fe){throw fe}finally{w.value=!1}}async function ge(ae,fe){w.value=!0;try{const{getAuthHeaders:_e}=Ue(),De=await $fetch(`/api/lab/harvests/${ae}`,{method:"PUT",headers:_e(),body:fe});return await Ee(),De}catch(_e){throw _e}finally{w.value=!1}}async function ve(ae){w.value=!0;try{const{getAuthHeaders:fe}=Ue();await $fetch(`/api/lab/harvests/${ae}`,{method:"DELETE",headers:fe()}),_.value=_.value.filter(_e=>_e.id!==ae)}catch(fe){throw fe}finally{w.value=!1}}async function Ie(ae){w.value=!0;try{const{getAuthHeaders:fe}=Ue();await $fetch(`/api/lab/breeding-projects/${ae}`,{method:"DELETE",headers:fe()}),b.value=b.value.filter(_e=>_e.id!==ae)}catch(fe){throw fe}finally{w.value=!1}}async function Ze(ae){w.value=!0;try{const{getAuthHeaders:fe}=Ue();await $fetch(`/api/lab/pollen/${ae}`,{method:"DELETE",headers:fe()}),x.value=x.value.filter(_e=>_e.id!==ae)}catch(fe){throw fe}finally{w.value=!1}}async function ht(ae,fe){w.value=!0;try{const{getAuthHeaders:_e}=Ue(),De=await $fetch("/api/lab/scores",{method:"POST",headers:_e(),body:{plant_id:ae,...fe}});return await B(ae),De}catch(_e){throw _e}finally{w.value=!1}}async function Zt(){try{const ae=await $fetch("/api/lab/rooms");if(C.value=ae,k.value){const fe=ae.find(_e=>_e.id===k.value.id);k.value=fe||null}}catch{}}async function as(ae){w.value=!0;try{const{getAuthHeaders:fe}=Ue(),_e=await $fetch("/api/lab/rooms",{method:"POST",headers:fe(),body:ae});return await Zt(),_e}catch(fe){throw fe}finally{w.value=!1}}async function Xe(ae,fe){w.value=!0;try{const{getAuthHeaders:_e}=Ue(),De=await $fetch(`/api/lab/rooms/${ae}`,{method:"PUT",headers:_e(),body:fe}),et=C.value.findIndex(se=>se.id===ae);if(et>=0){const se=[...C.value];se[et]=De,C.value=se}return k.value?.id===ae&&(k.value=De),De}catch(_e){throw _e}finally{w.value=!1}}async function kt(ae){w.value=!0;try{const{getAuthHeaders:fe}=Ue();await $fetch(`/api/lab/rooms/${ae}`,{method:"DELETE",headers:fe()}),C.value=C.value.filter(_e=>_e.id!==ae),k.value?.id===ae&&(k.value=null)}catch(fe){throw fe}finally{w.value=!1}}function gt(ae){k.value=ae}return{plants:s,strains:n,seedBatches:r,notifications:o,dashboardStats:i,currentPlant:d,currentPlantObservations:g,currentPlantScores:f,allObservations:m,breedingProjects:b,pollenInventory:x,harvests:_,rooms:C,currentRoom:k,activeTab:p,plantsFilter:T,plantsView:M,loading:P,saving:w,plantIdForObservation:$,activePlants:S,plantsByStage:A,filteredPlants:y,unreadNotifications:h,urgentAlerts:u,topPerformers:v,strainsMap:D,fetchDashboard:z,fetchPlants:G,fetchPlant:B,fetchPlantScores:O,createPlant:R,updatePlant:X,deletePlant:E,fetchStrains:oe,createStrain:we,updateStrain:re,deleteStrain:L,fetchAllObservations:F,createObservation:be,updateObservation:ie,deleteObservation:de,changeStage:te,acknowledgeNotification:K,clearCurrentPlant:ue,setFilter:N,clearFilters:H,setCurrentPlantForObservation:Y,clearPlantForObservation:me,fetchBreedingProjects:J,createBreedingProject:Z,updateBreedingProject:q,fetchPollenInventory:ee,createPollenRecord:ne,updatePollenRecord:Ce,fetchHarvests:Ee,createHarvest:he,updateHarvest:ge,deleteHarvest:ve,deleteBreedingProject:Ie,deletePollenRecord:Ze,submitScore:ht,fetchRooms:Zt,createRoom:as,updateRoom:Xe,deleteRoom:kt,selectRoom:gt}}),eu={class:"fixed top-0 right-0 bottom-0 left-0 desktop:left-[var(--sidebar-width,256px)] z-50 flex flex-col bg-gradient-to-br from-gray-900 via-gray-900 to-gray-800 overflow-hidden"},tu={class:"h-1.5 bg-gray-800"},su={class:"flex-1 overflow-y-auto"},nu={class:"min-h-full flex flex-col"},ou={class:"px-4 sm:px-8 lg:px-16 pt-6 sm:pt-10"},ru={class:"max-w-5xl mx-auto"},au={class:"flex items-center justify-between mb-6"},lu={class:"flex items-center gap-3"},iu={class:"w-10 h-10 sm:w-12 sm:h-12 rounded-2xl bg-gradient-to-br from-spider-green-500 to-emerald-600 flex items-center justify-center shadow-lg shadow-spider-green-500/30"},du={class:"text-sm sm:text-base font-medium text-white"},cu={class:"hidden sm:flex items-center gap-2"},uu={class:"text-center mb-8 sm:mb-10"},pu={class:"text-xl sm:text-3xl lg:text-4xl font-bold text-white mb-2 sm:mb-3"},gu={class:"text-sm sm:text-base lg:text-lg text-gray-400 max-w-2xl mx-auto"},fu={class:"flex-1 px-4 sm:px-8 lg:px-16 pb-32"},mu={class:"max-w-5xl mx-auto"},hu={key:0,class:"space-y-6"},bu={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},vu=["onClick"],xu={class:"flex items-start gap-4"},yu={class:"text-2xl sm:text-3xl"},_u={class:"flex-1 min-w-0"},wu={class:"text-base sm:text-lg font-semibold text-white mb-1 flex items-center gap-2"},ku={key:0,class:"px-1.5 py-0.5 bg-amber-500/20 text-amber-400 text-[10px] font-medium rounded"},$u={class:"text-xs sm:text-sm text-gray-400 leading-relaxed"},Cu={key:0,class:"mt-4 pt-4 border-t border-spider-green-500/30"},Su={class:"flex items-start gap-2 text-xs text-spider-green-300"},Pu={class:"p-5 sm:p-6 rounded-2xl bg-amber-500/10 border border-amber-500/30"},Eu={class:"flex items-start gap-4"},Tu={key:1,class:"space-y-6"},Au={class:"p-5 rounded-2xl bg-purple-500/10 border border-purple-500/30"},Du={class:"flex items-start gap-4"},Mu={class:"text-base font-medium text-purple-300 mb-2"},Ou={class:"text-sm text-purple-200/80 leading-relaxed"},Lu={key:0,class:"space-y-4"},ju={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},Iu=["onClick"],Ru={class:"flex items-center gap-3"},Fu={class:"w-10 h-10 rounded-lg bg-purple-500/20 flex items-center justify-center"},Nu={class:"flex-1 min-w-0"},Bu={class:"font-medium text-white truncate"},Vu={class:"text-xs text-gray-500"},Uu={key:0},zu={key:0,class:"text-purple-400"},Hu={key:0,class:"mt-3 pt-3 border-t border-purple-500/30"},Gu={class:"flex items-center justify-between"},Wu={class:"text-xs text-gray-400"},qu={class:"flex items-center gap-2"},Ku=["onClick"],Yu={class:"w-8 text-center text-white font-medium"},Zu=["onClick"],Xu={key:1,class:"flex items-center gap-4"},Qu={class:"space-y-4"},Ju={class:"flex items-center justify-between mb-4"},ep={class:"text-sm font-medium text-gray-300 flex items-center gap-2"},tp=["onClick"],sp={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},np=["onUpdate:modelValue"],op={class:"block text-xs font-medium text-gray-400 mb-1.5"},rp={class:"flex items-center gap-3"},ap=["onClick"],lp=["onUpdate:modelValue"],ip=["onClick"],dp={key:0,class:"mt-4"},cp={class:"flex flex-wrap gap-2"},up=["onClick"],pp={class:"p-4 rounded-xl bg-gray-800/30 flex items-center justify-between"},gp={class:"text-sm text-gray-400"},fp={key:0,class:"text-xs text-spider-green-400"},mp={key:2,class:"space-y-6"},hp={class:"p-5 rounded-2xl bg-spider-green-500/10 border border-spider-green-500/30"},bp={class:"flex items-start gap-4"},vp={class:"text-base font-medium text-spider-green-300 mb-2"},xp={class:"text-sm text-spider-green-200/80 leading-relaxed"},yp={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},_p={class:"space-y-5"},wp={class:"block text-sm font-medium text-gray-300 mb-2"},kp={class:"mt-1.5 flex items-center justify-between"},$p={class:"text-xs text-gray-500"},Cp={key:0,class:"text-xs text-spider-green-400 font-medium"},Sp={class:"flex items-center justify-between mb-2"},Pp={key:0,class:"text-xs text-amber-400 flex items-center gap-1"},Ep={key:0,class:"mb-3 p-3 rounded-xl bg-spider-green-500/10 border border-spider-green-500/30"},Tp={class:"flex items-center gap-3"},Ap={class:"w-10 h-10 rounded-lg bg-spider-green-500/20 flex items-center justify-center"},Dp={class:"text-xl"},Mp={class:"flex-1"},Op={class:"text-sm text-white font-medium"},Lp={class:"grid grid-cols-2 sm:grid-cols-4 gap-2"},jp=["onClick"],Ip={key:0,class:"absolute -top-2 -right-2 w-5 h-5 bg-amber-500 rounded-full flex items-center justify-center"},Rp={class:"text-xl mb-1"},Fp={class:"text-[11px] font-medium text-gray-300"},Np={class:"grid grid-cols-2 sm:grid-cols-3 gap-2"},Bp=["onClick"],Vp={class:"space-y-5"},Up={class:"grid grid-cols-3 gap-2"},zp=["onClick"],Hp={class:"text-sm font-medium text-white"},Gp={class:"text-[10px] text-gray-500"},Wp={class:"flex items-center gap-3"},qp={class:"mt-1.5 text-xs text-gray-500"},Kp={key:0},Yp={class:"space-y-2"},Zp=["onClick"],Xp={class:"text-xl"},Qp={class:"text-sm font-medium text-white"},Jp={class:"text-xs text-gray-400"},eg={key:1},tg={class:"space-y-2"},sg=["onClick"],ng={class:"text-xl"},og={class:"text-sm font-medium text-white"},rg={class:"text-xs text-gray-400"},ag={class:"p-5 rounded-2xl bg-gray-800/30 border border-gray-700/50"},lg={class:"text-sm font-medium text-gray-300 mb-3 flex items-center gap-2"},ig={class:"grid grid-cols-1 sm:grid-cols-2 gap-2 text-sm text-gray-400"},dg={key:3,class:"space-y-6"},cg={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},ug={class:"p-5 rounded-2xl bg-gradient-to-br from-spider-green-500/20 to-emerald-500/20 border border-spider-green-500/30"},pg={class:"flex items-center gap-3 mb-3"},gg={class:"w-10 h-10 rounded-xl bg-spider-green-500/30 flex items-center justify-center"},fg={class:"text-xl"},mg={class:"text-base font-bold text-white"},hg={class:"p-5 rounded-2xl bg-gradient-to-br from-purple-500/20 to-purple-600/20 border border-purple-500/30"},bg={class:"flex items-center gap-3 mb-3"},vg={class:"w-10 h-10 rounded-xl bg-purple-500/30 flex items-center justify-center"},xg={class:"text-base font-bold text-white"},yg={class:"text-xs text-gray-400 space-y-1"},_g={class:"text-purple-400"},wg={class:"p-5 rounded-2xl bg-gradient-to-br from-green-500/20 to-emerald-500/20 border border-green-500/30"},kg={class:"flex items-center gap-3 mb-3"},$g={class:"w-10 h-10 rounded-xl bg-green-500/30 flex items-center justify-center"},Cg={class:"text-base font-bold text-white"},Sg={class:"text-xs text-gray-400 space-y-1"},Pg={class:"flex justify-between"},Eg={class:"text-green-400"},Tg={class:"flex justify-between"},Ag={class:"text-green-400 font-mono"},Dg={class:"p-5 rounded-2xl bg-gray-800/50 border border-gray-700/50"},Mg={class:"text-lg font-semibold text-white mb-4 flex items-center gap-2"},Og={class:"space-y-3"},Lg={class:"flex items-center justify-between mb-2"},jg={class:"font-medium text-white"},Ig={class:"text-xs px-2 py-1 rounded-full bg-purple-500/20 text-purple-300"},Rg={class:"flex flex-wrap gap-2"},Fg={class:"p-5 rounded-2xl bg-blue-500/10 border border-blue-500/30"},Ng={class:"space-y-3 text-sm text-blue-200/80"},Bg={class:"flex items-start gap-3"},Vg={class:"shrink-0 px-4 sm:px-8 lg:px-16 py-4 sm:py-6 bg-gray-900/95 backdrop-blur-xl border-t border-gray-800"},Ug={class:"max-w-5xl mx-auto flex items-center justify-between"},zg={key:1},Hg={class:"flex items-center gap-3 sm:gap-4"},Gg={class:"flex sm:hidden items-center gap-1.5"},Wg=["disabled"],qg=["disabled"],Os=4,Kg=Pe({__name:"LabOnboardingWizard",emits:["complete","skip"],setup(s,{emit:n}){const r=n,o=rt(),i=W(1),d=W(!1),g=W(null),f=[{id:"seeds_basic",emoji:"🌱",title:"Plant Seeds",description:"Start tracking plants from seed. Perfect for your first grow or regular cultivation.",hint:"The wizard will help you add your strains and create individual plant records to track from germination.",bgClass:"bg-gradient-to-br from-green-500/30 to-emerald-500/30",activeBg:"bg-gradient-to-br from-green-500/50 to-emerald-500/50",popular:!0,setupTitle:"Seed Planting Setup",setupDescription:"Configure your grow space and how you want to track your plants.",setupHint:"Ready to track from germination",tips:["Label your pots/containers with plant codes","Log observations every 2-3 days","Take photos regularly to track progress","Environment data is captured automatically"],nextSteps:"Use the dashboard to monitor all your plants and log daily observations"},{id:"pheno_seeds",emoji:"🔬",title:"Pheno Hunt (Seeds)",description:"Compare multiple plants of the same strain to find your best phenotype (keeper).",hint:"Track multiple plants from seeds, score them on various criteria, and identify your keeper phenotypes.",bgClass:"bg-gradient-to-br from-amber-500/30 to-orange-500/30",activeBg:"bg-gradient-to-br from-amber-500/50 to-orange-500/50",popular:!0,setupTitle:"Pheno Hunt Configuration",setupDescription:"Set up your pheno hunt to compare and score multiple phenotypes.",setupHint:"Ready to find your keeper",tips:["Keep detailed notes on each phenotype","Score plants using the evaluation system","Take clones of promising phenos before flowering","Compare side-by-side in the Pheno Hunt section"],nextSteps:"Score your plants as they grow to identify your best performers (keepers)"},{id:"pheno_clones",emoji:"✂️",title:"Pheno Hunt (Clones)",description:"Track clones from a mother plant to find the best performing cuts.",hint:"Compare clones taken from the same mother to evaluate consistency and select the best performers.",bgClass:"bg-gradient-to-br from-teal-500/30 to-cyan-500/30",activeBg:"bg-gradient-to-br from-teal-500/50 to-cyan-500/50",popular:!1,setupTitle:"Clone Tracking Setup",setupDescription:"Set up tracking for clones from your mother plant(s).",setupHint:"Ready to evaluate clones",tips:["Note which position on the mother each clone came from","Track rooting time for each clone","Compare growth rates between clones","Identify which cuts perform best"],nextSteps:"Track each clone through its lifecycle and compare performance in Pheno Hunt"},{id:"mother_management",emoji:"👑",title:"Mother Plants",description:"Manage mother plants for ongoing clone production.",hint:"Track mother plant health, clone production schedule, and maintain your genetic library.",bgClass:"bg-gradient-to-br from-purple-500/30 to-violet-500/30",activeBg:"bg-gradient-to-br from-purple-500/50 to-violet-500/50",popular:!1,setupTitle:"Mother Plant Setup",setupDescription:"Configure your mother plant management and clone production tracking.",setupHint:"Ready to maintain mothers",tips:["Keep mothers in 18/6 light cycle","Log clone production with dates","Track mother plant health carefully","Plan clone batches in advance"],nextSteps:"Use the Breeding section to track clone production from your mothers"},{id:"breeding_feminize",emoji:"🧬",title:"Create Feminized Seeds",description:"Reverse a female plant to create pollen and produce feminized seeds.",hint:"Use STS or colloidal silver to reverse a female plant, then pollinate other females to create S1 or crosses.",bgClass:"bg-gradient-to-br from-pink-500/30 to-rose-500/30",activeBg:"bg-gradient-to-br from-pink-500/50 to-rose-500/50",popular:!1,setupTitle:"Feminized Breeding Setup",setupDescription:"Set up your feminized seed production project with reversal tracking.",setupHint:"Ready to create feminized seeds",tips:["Start reversal treatment 2 weeks before flip","Isolate reversed plant to prevent unwanted pollination","Document pollen production timeline","Track which females you pollinate"],nextSteps:"Track your reversal progress and pollination in the Breeding section"},{id:"breeding_cross",emoji:"💕",title:"Create a Cross",description:"Cross two strains to create new genetics (F1 hybrids).",hint:"Track a breeding project from parent selection through seed production.",bgClass:"bg-gradient-to-br from-red-500/30 to-pink-500/30",activeBg:"bg-gradient-to-br from-red-500/50 to-pink-500/50",popular:!1,setupTitle:"Breeding Cross Setup",setupDescription:"Set up your breeding project to create new genetics.",setupHint:"Ready to create new genetics",tips:["Select parents with complementary traits","Document the traits you want to combine","Track pollen collection and storage","Plan your F1 pheno hunt"],nextSteps:"Document your breeding project in the Breeding section"}],m=W([]),b=W([]),x=U(()=>{const J=m.value.map(q=>{const ee=o.strains.find(ne=>ne.id===q.id);return{id:q.id,name:ee?.name||"",quantity:q.quantity,seed_type:ee?.seed_type||"feminized",isExisting:!0}}),Z=b.value.map(q=>({...q,isExisting:!1}));return[...J,...Z]});function _(J){return m.value.some(Z=>Z.id===J)}function C(J){return m.value.find(q=>q.id===J)?.quantity||1}function k(J){const Z=m.value.findIndex(q=>q.id===J.id);Z>=0?m.value.splice(Z,1):m.value.push({id:J.id,quantity:3})}function p(J,Z){const q=m.value.find(ee=>ee.id===J);q&&(q.quantity=Math.max(1,Math.min(50,q.quantity+Z)))}function T(){b.value.push({name:"",quantity:3,seed_type:"feminized"})}function M(J){b.value.splice(J,1)}const P=U(()=>m.value.length+b.value.filter(J=>J.name.trim()).length),w=W({startDate:new Date().toISOString().split("T")[0],initialStage:"germinating",medium:"soil",tentSize:"120x120",codePrefix:"P",reversalMethod:"sts",motherPurpose:"clones"}),$=[{value:"feminized",label:"Feminized",icon:"♀️"},{value:"regular",label:"Regular",icon:"⚥"},{value:"autoflower",label:"Auto",icon:"⏱️"}],S=[{value:"soil",label:"🌍 Soil"},{value:"coco",label:"🥥 Coco"},{value:"hydro",label:"💧 Hydro"},{value:"dwc",label:"🫧 DWC"},{value:"aero",label:"💨 Aero"}],A=[{value:"60x60",label:"60×60",hint:"1-2 plants"},{value:"80x80",label:"80×80",hint:"2-4 plants"},{value:"100x100",label:"100×100",hint:"4-6 plants"},{value:"120x120",label:"120×120",hint:"6-9 plants"},{value:"150x150",label:"150×150",hint:"9-12 plants"},{value:"custom",label:"Other",hint:"Custom size"}],y=[{value:"sts",label:"STS (Silver Thiosulfate)",icon:"🧪",hint:"Most reliable, spray every 3-5 days"},{value:"colloidal",label:"Colloidal Silver",icon:"💎",hint:"Spray daily, gentler method"}],h=[{value:"clones",label:"Clone Production",icon:"✂️",hint:"Regular clone harvesting"},{value:"preservation",label:"Genetic Preservation",icon:"🧊",hint:"Keeping genetics alive long-term"},{value:"breeding",label:"Breeding Stock",icon:"🧬",hint:"Future breeding projects"}],u=U(()=>f.find(J=>J.id===g.value)),v=U(()=>i.value/Os*100),D=U(()=>{const J=["Choose Goal","Add Strains","Setup Details","Review"];return`Step ${i.value}: ${J[i.value-1]}`}),z=U(()=>({1:{title:"What do you want to achieve?",subtitle:"Choose your cultivation goal and the wizard will guide you through the setup.",icon:Je},2:{title:"Add Your Strains",subtitle:G.value.strainSubtitle,icon:Mt},3:{title:"Setup Details",subtitle:"Configure your grow space and tracking preferences.",icon:hn},4:{title:"Ready to Start!",subtitle:"Review your setup and create your plants.",icon:br}})[i.value]),G=U(()=>({seeds_basic:{strainTitle:"What strains are you planting?",strainDescription:"Add each strain variety you're growing and how many seeds of each.",strainSubtitle:"Add the strains you'll be growing and how many plants of each."},pheno_seeds:{strainTitle:"Which strain are you pheno hunting?",strainDescription:"Add the strain(s) you want to hunt phenotypes from. Multiple plants of the same strain will be compared.",strainSubtitle:"Add strains and quantities for your pheno hunt. You'll score and compare each plant."},pheno_clones:{strainTitle:"What strain are the clones from?",strainDescription:"Add the strain of your mother plant and how many clones you're tracking.",strainSubtitle:"Add the mother strain and number of clones to track."},mother_management:{strainTitle:"What strains are your mothers?",strainDescription:"Add each mother plant strain you'll be maintaining.",strainSubtitle:"Add your mother plant strains. Each will be tracked individually."},breeding_feminize:{strainTitle:"What strain are you feminizing?",strainDescription:"Add the strain you want to create feminized seeds from.",strainSubtitle:"Add the strain you'll reverse to create feminized seeds."},breeding_cross:{strainTitle:"What strains are you crossing?",strainDescription:"Add both parent strains for your cross.",strainSubtitle:"Add the parent strains for your breeding cross."}})[g.value||"seeds_basic"]),B=U(()=>["seeds_basic","pheno_seeds","breeding_cross"].includes(g.value||"")),O=U(()=>g.value==="pheno_clones"?"Number of clones":g.value==="mother_management"?"Number of mothers":"Number of seeds/plants"),R=U(()=>g.value==="pheno_clones"?"clone":g.value==="mother_management"?"mother":"plant"),X=U(()=>x.value.reduce((J,Z)=>J+(Z.quantity||0),0)),oe=U(()=>{const J=[{value:"germinating",label:"Germinating",icon:"🌰"},{value:"seedling",label:"Seedling",icon:"🌱"},{value:"early_veg",label:"Early Veg",icon:"🌿"},{value:"mid_veg",label:"Mid Veg",icon:"🪴"}];return g.value==="pheno_clones"?[{value:"seedling",label:"Rooting",icon:"🌱"},{value:"early_veg",label:"Rooted",icon:"🌿"},{value:"mid_veg",label:"Veg",icon:"🪴"}]:g.value==="mother_management"?[{value:"early_veg",label:"Young",icon:"🌿"},{value:"mid_veg",label:"Mature",icon:"🪴"},{value:"late_veg",label:"Established",icon:"🌳"}]:J}),we=U(()=>g.value==="pheno_clones"?"When did you take the cuttings?":g.value==="mother_management"?"When did you start the mothers?":"When did you start germination?"),re=U(()=>g.value==="pheno_clones"?"The date you cut the clones from the mother":g.value==="mother_management"?"When the mother plants were started or obtained":"The date you first put seeds in water or soil"),E=U(()=>{if(!w.value.startDate)return 0;const J=new Date(w.value.startDate);return Math.floor((new Date().getTime()-J.getTime())/(1e3*60*60*24))}),L=U(()=>{const J=E.value,Z=g.value==="pheno_clones";return J<=0?Z?"seedling":"germinating":J<=7&&!Z?"germinating":J<=14?"seedling":J<=28?"early_veg":J<=42?"mid_veg":J<=56?"late_veg":J<=63?"pre_flower":J<=77?"early_flower":J<=91?"mid_flower":J<=105?"late_flower":J<=112?"flush":"harvest"}),F=U(()=>oe.value.find(J=>J.value===L.value)||{label:L.value,icon:"🌱"});He(()=>w.value.startDate,(J,Z)=>{J!==Z&&E.value>0&&(w.value.initialStage=L.value)});const be=U(()=>["breeding_feminize","breeding_cross"].includes(g.value||"")),ie=U(()=>g.value==="mother_management"),de=U(()=>{if(i.value===1)return g.value!==null;if(i.value===2){const J=m.value.length>0,Z=b.value.some(ee=>ee.name.trim().length>0),q=b.value.every(ee=>ee.name.trim().length>0||b.value.length===0);return(J||Z)&&q&&X.value>0}return i.value===3,!0});function te(J){g.value=J,m.value=[],b.value=[],J==="pheno_clones"?w.value.initialStage="seedling":J==="mother_management"?w.value.initialStage="mid_veg":w.value.initialStage="germinating"}function K(){de.value&&i.value<Os&&i.value++}function ue(){i.value>1&&i.value--}function N(J){return Fe[J]?.label||J}function H(J){return $.find(Z=>Z.value===J)?.label||J}function Y(J,Z){return`${w.value.codePrefix||(J.name?J.name.substring(0,2).toUpperCase():"P")}${String(Z).padStart(3,"0")}`}async function me(){d.value=!0;try{let J="",Z="",q=1;const ee=g.value==="pheno_clones";for(const ne of m.value){const Ce=o.strains.find(Ee=>Ee.id===ne.id);if(Ce){J||(J=ne.id);for(let Ee=0;Ee<ne.quantity;Ee++){const he=ee?void 0:`#${q}`,ge=await o.createPlant({strain_id:ne.id,plant_code:Y({name:Ce.name},q),pheno_label:he,origin_type:ee?"clone":"seed",status:w.value.initialStage,date_started:w.value.startDate,grow_medium:w.value.medium});Z||(Z=ge.id),q++}}}for(const ne of b.value){if(!ne.name.trim())continue;const Ce=await o.createStrain({name:ne.name,seed_type:ne.seed_type,indica_ratio:50});J||(J=Ce.id);for(let Ee=0;Ee<ne.quantity;Ee++){const he=ee?void 0:`#${q}`,ge=await o.createPlant({strain_id:Ce.id,plant_code:Y(ne,q),pheno_label:he,origin_type:ee?"clone":"seed",status:w.value.initialStage,date_started:w.value.startDate,grow_medium:w.value.medium});Z||(Z=ge.id),q++}}r("complete",{strainId:J,plantId:Z})}catch{}finally{d.value=!1}}return(J,Z)=>(a(),l("div",eu,[e("div",tu,[e("div",{class:"h-full bg-gradient-to-r from-spider-green-500 to-emerald-400 transition-all duration-700 ease-out",style:Te({width:`${t(v)}%`})},null,4)]),e("div",su,[e("div",nu,[e("div",ou,[e("div",ru,[e("div",au,[e("div",lu,[e("div",iu,[I(t(Je),{class:"w-5 h-5 sm:w-6 sm:h-6 text-white"})]),e("div",null,[Z[3]||(Z[3]=e("p",{class:"text-xs sm:text-sm text-gray-400"},"Laboratory Setup",-1)),e("p",du,c(t(D)),1)])]),e("div",cu,[(a(),l(Q,null,le(Os,q=>e("div",{key:q,class:V(["h-2 rounded-full transition-all duration-500",q===t(i)?"w-8 bg-spider-green-500":q<t(i)?"w-2 bg-spider-green-500":"w-2 bg-gray-700"])},null,2)),64))]),e("button",{onClick:Z[0]||(Z[0]=q=>J.$emit("skip")),class:"p-2 rounded-xl hover:bg-gray-800 text-gray-400 hover:text-white transition-colors",title:"Skip onboarding"},[I(t(ze),{class:"w-5 h-5"})])]),e("div",uu,[(a(),pe(_t(t(z).icon),{class:"w-14 h-14 sm:w-16 sm:h-16 mx-auto mb-4 text-spider-green-400 opacity-80"})),e("h1",pu,c(t(z).title),1),e("p",gu,c(t(z).subtitle),1)])])]),e("div",fu,[e("div",mu,[t(i)===1?(a(),l("div",hu,[e("div",bu,[(a(),l(Q,null,le(f,q=>e("button",{key:q.id,onClick:ee=>te(q.id),class:V(["group p-5 sm:p-6 rounded-2xl border-2 text-left transition-all duration-300",t(g)===q.id?"border-spider-green-500 bg-spider-green-500/20 shadow-lg shadow-spider-green-500/20 scale-[1.02]":"border-gray-700 bg-gray-800/50 hover:border-gray-600 hover:bg-gray-800/70"])},[e("div",xu,[e("div",{class:V(["w-12 h-12 sm:w-14 sm:h-14 rounded-xl flex items-center justify-center shrink-0 transition-all",t(g)===q.id?q.activeBg:q.bgClass])},[e("span",yu,c(q.emoji),1)],2),e("div",_u,[e("h3",wu,[ce(c(q.title)+" ",1),q.popular?(a(),l("span",ku," POPULAR ")):j("",!0)]),e("p",$u,c(q.description),1)])]),t(g)===q.id?(a(),l("div",Cu,[e("div",Su,[I(t(wt),{class:"w-4 h-4 shrink-0 mt-0.5"}),e("span",null,c(q.hint),1)])])):j("",!0)],10,vu)),64))]),e("div",Pu,[e("div",Eu,[I(t(id),{class:"w-6 h-6 text-amber-400 shrink-0 mt-0.5"}),Z[4]||(Z[4]=e("div",null,[e("h4",{class:"text-base font-medium text-amber-300 mb-2"},"Not sure which to choose?"),e("p",{class:"text-sm text-amber-200/80 leading-relaxed mb-3"},[ce(" If you're just starting out, choose "),e("strong",null,'"Plant Seeds"'),ce(" for a simple grow, or "),e("strong",null,'"Pheno Hunt"'),ce(" if you want to compare multiple plants to find your best performer (keeper). ")]),e("p",{class:"text-xs text-amber-200/60"}," You can always add more plants, start breeding projects, or manage mothers later from the Laboratory. ")],-1))])])])):j("",!0),t(i)===2?(a(),l("div",Tu,[e("div",Au,[e("div",Du,[I(t(fn),{class:"w-6 h-6 text-purple-400 shrink-0 mt-0.5"}),e("div",null,[e("h4",Mu,c(t(G).strainTitle),1),e("p",Ou,c(t(G).strainDescription),1)])])]),t(o).strains.length>0?(a(),l("div",Lu,[Z[5]||(Z[5]=e("div",{class:"flex items-center justify-between"},[e("h4",{class:"text-lg font-semibold text-white"},"Your Strains"),e("span",{class:"text-xs text-gray-500"},"Select existing or create new below")],-1)),e("div",ju,[(a(!0),l(Q,null,le(t(o).strains,q=>(a(),l("button",{key:q.id,onClick:ee=>k(q),class:V(["p-4 rounded-xl border-2 text-left transition-all",_(q.id)?"border-purple-500 bg-purple-500/20":"border-gray-700 bg-gray-800/50 hover:border-gray-600"])},[e("div",Ru,[e("div",Fu,[I(t(Mt),{class:"w-5 h-5 text-purple-400"})]),e("div",Nu,[e("p",Bu,c(q.name),1),e("p",Vu,[ce(c(q.seed_type||"Unknown")+" ",1),q.breeder?(a(),l("span",Uu," · "+c(q.breeder),1)):j("",!0)])]),_(q.id)?(a(),l("div",zu,[I(t(St),{class:"w-6 h-6"})])):j("",!0)]),_(q.id)?(a(),l("div",Hu,[e("div",Gu,[e("span",Wu,c(t(O)),1),e("div",qu,[e("button",{onClick:Ve(ee=>p(q.id,-1),["stop"]),class:"w-8 h-8 rounded-lg bg-gray-700 hover:bg-gray-600 text-gray-300 flex items-center justify-center"},[I(t(mn),{class:"w-3 h-3"})],8,Ku),e("span",Yu,c(C(q.id)),1),e("button",{onClick:Ve(ee=>p(q.id,1),["stop"]),class:"w-8 h-8 rounded-lg bg-gray-700 hover:bg-gray-600 text-gray-300 flex items-center justify-center"},[I(t(st),{class:"w-3 h-3"})],8,Zu)])])])):j("",!0)],10,Iu))),128))])])):j("",!0),t(o).strains.length>0?(a(),l("div",Xu,[...Z[6]||(Z[6]=[e("div",{class:"flex-1 h-px bg-gray-700"},null,-1),e("span",{class:"text-sm text-gray-500"},"or create new strains",-1),e("div",{class:"flex-1 h-px bg-gray-700"},null,-1)])])):j("",!0),e("div",Qu,[(a(!0),l(Q,null,le(t(b),(q,ee)=>(a(),l("div",{key:"new-"+ee,class:"p-5 rounded-2xl bg-gray-800/50 border border-gray-700"},[e("div",Ju,[e("h4",ep,[Z[7]||(Z[7]=e("span",{class:"px-2 py-0.5 rounded bg-spider-green-500/20 text-spider-green-400 text-xs"},"NEW",-1)),ce(" Strain "+c(ee+1),1)]),e("button",{onClick:ne=>M(ee),class:"p-1.5 rounded-lg hover:bg-gray-700 text-gray-500 hover:text-red-400 transition-colors"},[I(t(Tt),{class:"w-4 h-4"})],8,tp)]),e("div",sp,[e("div",null,[Z[8]||(Z[8]=e("label",{class:"block text-xs font-medium text-gray-400 mb-1.5"},[ce(" Name "),e("span",{class:"text-red-400"},"*")],-1)),ye(e("input",{"onUpdate:modelValue":ne=>q.name=ne,type:"text",placeholder:"e.g., GMO, Zkittlez, Blue Dream...",class:"w-full px-4 py-3 bg-gray-900/50 border border-gray-600 rounded-xl text-white placeholder-gray-500 focus:border-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-500/20"},null,8,np),[[$e,q.name]])]),e("div",null,[e("label",op,c(t(O)),1),e("div",rp,[e("button",{onClick:ne=>q.quantity=Math.max(1,q.quantity-1),class:"w-10 h-10 rounded-xl bg-gray-700 hover:bg-gray-600 text-gray-300 flex items-center justify-center transition-colors"},[I(t(mn),{class:"w-4 h-4"})],8,ap),ye(e("input",{"onUpdate:modelValue":ne=>q.quantity=ne,type:"number",min:"1",max:"50",class:"w-20 text-center px-3 py-2.5 bg-gray-900/50 border border-gray-600 rounded-xl text-white text-lg font-medium focus:border-purple-500 focus:outline-none"},null,8,lp),[[$e,q.quantity,void 0,{number:!0}]]),e("button",{onClick:ne=>q.quantity=Math.min(50,q.quantity+1),class:"w-10 h-10 rounded-xl bg-gray-700 hover:bg-gray-600 text-gray-300 flex items-center justify-center transition-colors"},[I(t(st),{class:"w-4 h-4"})],8,ip)])])]),t(B)?(a(),l("div",dp,[Z[9]||(Z[9]=e("label",{class:"block text-xs font-medium text-gray-400 mb-2"},"Seed Type",-1)),e("div",cp,[(a(),l(Q,null,le($,ne=>e("button",{key:ne.value,onClick:Ce=>q.seed_type=ne.value,class:V(["px-4 py-2 rounded-xl text-sm font-medium transition-all",q.seed_type===ne.value?"bg-purple-500/30 text-purple-300 border border-purple-500":"bg-gray-700/50 text-gray-400 border border-gray-600 hover:border-gray-500"])},c(ne.icon)+" "+c(ne.label),11,up)),64))])])):j("",!0)]))),128))]),e("button",{onClick:T,class:"w-full p-4 rounded-xl border-2 border-dashed border-gray-600 hover:border-purple-500/50 text-gray-400 hover:text-purple-400 transition-colors flex items-center justify-center gap-2"},[I(t(st),{class:"w-5 h-5"}),Z[10]||(Z[10]=ce(" Create New Strain ",-1))]),e("div",pp,[e("span",gp," Total: "+c(t(P))+" strain(s), "+c(t(X))+" "+c(t(R))+"(s) ",1),t(X)>0?(a(),l("span",fp,c(t(u)?.setupHint),1)):j("",!0)])])):j("",!0),t(i)===3?(a(),l("div",mp,[e("div",hp,[e("div",bp,[I(t(hn),{class:"w-6 h-6 text-spider-green-400 shrink-0 mt-0.5"}),e("div",null,[e("h4",vp,c(t(u)?.setupTitle),1),e("p",xp,c(t(u)?.setupDescription),1)])])]),e("div",yp,[e("div",_p,[e("div",null,[e("label",wp,c(t(we)),1),ye(e("input",{"onUpdate:modelValue":Z[1]||(Z[1]=q=>t(w).startDate=q),type:"date",class:"w-full px-4 py-3.5 bg-gray-800/50 border border-gray-600 rounded-xl text-white focus:border-spider-green-500 focus:outline-none"},null,512),[[$e,t(w).startDate]]),e("div",kp,[e("p",$p,c(t(re)),1),t(E)>0?(a(),l("p",Cp,c(t(E))+" days ago ",1)):j("",!0)])]),e("div",null,[e("div",Sp,[Z[12]||(Z[12]=e("label",{class:"block text-sm font-medium text-gray-300"},"Current Stage",-1)),t(E)>7?(a(),l("span",Pp,[I(t(Ne),{class:"w-3.5 h-3.5"}),Z[11]||(Z[11]=ce(" Auto-calculated from date ",-1))])):j("",!0)]),t(E)>7?(a(),l("div",Ep,[e("div",Tp,[e("div",Ap,[e("span",Dp,c(t(F).icon),1)]),e("div",Mp,[e("p",Op,[ce(" Based on "+c(t(E))+" days, your plants are likely in ",1),e("strong",null,c(t(F).label),1)]),Z[13]||(Z[13]=e("p",{class:"text-xs text-gray-400"},"You can change this if your plants are at a different stage",-1))])])])):j("",!0),e("div",Lp,[(a(!0),l(Q,null,le(t(oe),q=>(a(),l("button",{key:q.value,onClick:ee=>t(w).initialStage=q.value,class:V(["p-3 rounded-xl border-2 transition-all text-center relative",t(w).initialStage===q.value?"border-spider-green-500 bg-spider-green-500/20":"border-gray-600 bg-gray-800/30 hover:border-gray-500",q.value===t(L)&&t(w).initialStage!==q.value?"ring-2 ring-amber-500/50 ring-offset-2 ring-offset-gray-900":""])},[q.value===t(L)&&t(w).initialStage!==q.value?(a(),l("div",Ip,[I(t(Ne),{class:"w-3 h-3 text-white"})])):j("",!0),e("div",Rp,c(q.icon),1),e("div",Fp,c(q.label),1)],10,jp))),128))])]),e("div",null,[Z[14]||(Z[14]=e("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Growing Medium",-1)),e("div",Np,[(a(),l(Q,null,le(S,q=>e("button",{key:q.value,onClick:ee=>t(w).medium=q.value,class:V(["px-4 py-2.5 rounded-xl text-sm font-medium transition-all",t(w).medium===q.value?"bg-spider-green-500/30 text-spider-green-300 border border-spider-green-500":"bg-gray-700/50 text-gray-400 border border-gray-600 hover:border-gray-500"])},c(q.label),11,Bp)),64))])])]),e("div",Vp,[e("div",null,[Z[15]||(Z[15]=e("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Grow Space Size",-1)),e("div",Up,[(a(),l(Q,null,le(A,q=>e("button",{key:q.value,onClick:ee=>t(w).tentSize=q.value,class:V(["p-3 rounded-xl border-2 transition-all text-center",t(w).tentSize===q.value?"border-spider-green-500 bg-spider-green-500/20":"border-gray-600 bg-gray-800/30 hover:border-gray-500"])},[e("div",Hp,c(q.label),1),e("div",Gp,c(q.hint),1)],10,zp)),64))])]),e("div",null,[Z[18]||(Z[18]=e("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Plant Code Pattern",-1)),e("div",Wp,[ye(e("input",{"onUpdate:modelValue":Z[2]||(Z[2]=q=>t(w).codePrefix=q),type:"text",placeholder:"P",maxlength:"4",class:"w-20 px-3 py-3 bg-gray-800/50 border border-gray-600 rounded-xl text-white font-mono text-center focus:border-spider-green-500 focus:outline-none"},null,512),[[$e,t(w).codePrefix]]),Z[16]||(Z[16]=e("span",{class:"text-gray-500"},"+",-1)),Z[17]||(Z[17]=e("span",{class:"text-gray-400 font-mono"},"001, 002, 003...",-1))]),e("p",qp," Preview: "+c(t(w).codePrefix||"P")+"001, "+c(t(w).codePrefix||"P")+"002, etc. ",1)]),t(be)?(a(),l("div",Kp,[Z[19]||(Z[19]=e("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Reversal Method",-1)),e("div",Yp,[(a(),l(Q,null,le(y,q=>e("button",{key:q.value,onClick:ee=>t(w).reversalMethod=q.value,class:V(["w-full p-3 rounded-xl border-2 transition-all text-left flex items-center gap-3",t(w).reversalMethod===q.value?"border-pink-500 bg-pink-500/20":"border-gray-600 bg-gray-800/30 hover:border-gray-500"])},[e("span",Xp,c(q.icon),1),e("div",null,[e("div",Qp,c(q.label),1),e("div",Jp,c(q.hint),1)])],10,Zp)),64))])])):j("",!0),t(ie)?(a(),l("div",eg,[Z[20]||(Z[20]=e("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Mother Plant Purpose",-1)),e("div",tg,[(a(),l(Q,null,le(h,q=>e("button",{key:q.value,onClick:ee=>t(w).motherPurpose=q.value,class:V(["w-full p-3 rounded-xl border-2 transition-all text-left flex items-center gap-3",t(w).motherPurpose===q.value?"border-teal-500 bg-teal-500/20":"border-gray-600 bg-gray-800/30 hover:border-gray-500"])},[e("span",ng,c(q.icon),1),e("div",null,[e("div",og,c(q.label),1),e("div",rg,c(q.hint),1)])],10,sg)),64))])])):j("",!0)])]),e("div",ag,[e("h4",lg,[I(t(Ne),{class:"w-4 h-4 text-amber-400"}),ce(" Tips for "+c(t(u)?.title),1)]),e("ul",ig,[(a(!0),l(Q,null,le(t(u)?.tips,q=>(a(),l("li",{key:q,class:"flex items-start gap-2"},[I(t(St),{class:"w-4 h-4 text-spider-green-400 shrink-0 mt-0.5"}),e("span",null,c(q),1)]))),128))])])])):j("",!0),t(i)===4?(a(),l("div",dg,[e("div",cg,[e("div",ug,[e("div",pg,[e("div",gg,[e("span",fg,c(t(u)?.emoji),1)]),e("div",null,[Z[21]||(Z[21]=e("p",{class:"text-xs text-spider-green-400 uppercase tracking-wide"},"Your Goal",-1)),e("p",mg,c(t(u)?.title),1)])])]),e("div",hg,[e("div",bg,[e("div",vg,[I(t(Mt),{class:"w-5 h-5 text-purple-400"})]),e("div",null,[Z[22]||(Z[22]=e("p",{class:"text-xs text-purple-400 uppercase tracking-wide"},"Strains",-1)),e("p",xg,c(t(x).length)+" varieties",1)])]),e("div",yg,[(a(!0),l(Q,null,le(t(x),q=>(a(),l("div",{key:q.name,class:"flex justify-between"},[e("span",null,c(q.name||"Unnamed"),1),e("span",_g,"× "+c(q.quantity),1)]))),128))])]),e("div",wg,[e("div",kg,[e("div",$g,[I(t(Ne),{class:"w-5 h-5 text-green-400"})]),e("div",null,[Z[23]||(Z[23]=e("p",{class:"text-xs text-green-400 uppercase tracking-wide"},"Plants",-1)),e("p",Cg,c(t(X))+" total",1)])]),e("div",Sg,[e("div",Pg,[Z[24]||(Z[24]=e("span",null,"Starting stage",-1)),e("span",Eg,c(N(t(w).initialStage)),1)]),e("div",Tg,[Z[25]||(Z[25]=e("span",null,"Code pattern",-1)),e("span",Ag,c(t(w).codePrefix||"P")+"001",1)])])])]),e("div",Dg,[e("h4",Mg,[I(t(br),{class:"w-5 h-5 text-spider-green-400"}),Z[26]||(Z[26]=ce(" What we'll create for you ",-1))]),e("div",Og,[(a(!0),l(Q,null,le(t(x),(q,ee)=>(a(),l("div",{key:ee,class:"p-4 rounded-xl bg-gray-800/50"},[e("div",Lg,[e("span",jg,c(q.name||"Strain "+(ee+1)),1),e("span",Ig,c(H(q.seed_type)),1)]),e("div",Rg,[(a(!0),l(Q,null,le(q.quantity,ne=>(a(),l("span",{key:ne,class:"px-2 py-1 text-xs rounded-lg bg-spider-green-500/20 text-spider-green-300 font-mono"},c(Y(q,ne)),1))),128))])]))),128))])]),e("div",Fg,[Z[30]||(Z[30]=e("h4",{class:"text-base font-medium text-blue-300 mb-3"},"What happens next?",-1)),e("div",Ng,[Z[28]||(Z[28]=e("div",{class:"flex items-start gap-3"},[e("div",{class:"w-6 h-6 rounded-full bg-blue-500/30 flex items-center justify-center text-xs font-bold text-blue-300 shrink-0"},"1"),e("span",null,"Your strains and plants will be created instantly")],-1)),Z[29]||(Z[29]=e("div",{class:"flex items-start gap-3"},[e("div",{class:"w-6 h-6 rounded-full bg-blue-500/30 flex items-center justify-center text-xs font-bold text-blue-300 shrink-0"},"2"),e("span",null,"Start logging observations to track growth and health")],-1)),e("div",Bg,[Z[27]||(Z[27]=e("div",{class:"w-6 h-6 rounded-full bg-blue-500/30 flex items-center justify-center text-xs font-bold text-blue-300 shrink-0"},"3",-1)),e("span",null,c(t(u)?.nextSteps),1)])])])])):j("",!0)])])])]),e("div",Vg,[e("div",Ug,[t(i)>1?(a(),l("button",{key:0,onClick:ue,class:"flex items-center gap-2 px-4 sm:px-6 py-3 text-gray-400 hover:text-white transition-colors"},[I(t(os),{class:"w-5 h-5"}),Z[31]||(Z[31]=e("span",{class:"hidden sm:inline"},"Back",-1))])):(a(),l("div",zg)),e("div",Hg,[e("div",Gg,[(a(),l(Q,null,le(Os,q=>e("div",{key:q,class:V(["w-2 h-2 rounded-full transition-all",q<=t(i)?"bg-spider-green-500":"bg-gray-700"])},null,2)),64))]),t(i)<Os?(a(),l("button",{key:0,onClick:K,disabled:!t(de),class:V(["flex items-center gap-2 px-6 sm:px-8 py-3 sm:py-4 rounded-xl font-medium text-base sm:text-lg transition-all",t(de)?"bg-spider-green-600 hover:bg-spider-green-500 text-white shadow-lg shadow-spider-green-500/30":"bg-gray-700 text-gray-500 cursor-not-allowed"])},[Z[32]||(Z[32]=ce(" Continue ",-1)),I(t(nt),{class:"w-5 h-5"})],10,Wg)):(a(),l("button",{key:1,onClick:me,disabled:t(d),class:"flex items-center gap-2 px-6 sm:px-8 py-3 sm:py-4 rounded-xl font-medium text-base sm:text-lg bg-gradient-to-r from-spider-green-600 to-emerald-500 hover:from-spider-green-500 hover:to-emerald-400 text-white transition-all shadow-lg shadow-spider-green-500/30 disabled:opacity-50"},[t(d)?(a(),pe(t(ut),{key:1,class:"w-5 h-5 animate-spin"})):(a(),pe(t(Ne),{key:0,class:"w-5 h-5"})),ce(" "+c(t(d)?"Creating...":"Start Growing!"),1)],8,qg))])])])]))}}),Yg=Object.assign(Pt(Kg,[["__scopeId","data-v-3906ef49"]]),{__name:"LabOnboardingWizard"}),Zg={class:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-spider-green-600/20 via-emerald-600/10 to-gray-800/50 border border-spider-green-500/30 p-6 lg:p-8"},Xg={class:"relative"},Qg={class:"flex items-start gap-4 lg:gap-6"},Jg={class:"w-14 h-14 lg:w-16 lg:h-16 rounded-2xl bg-gradient-to-br from-spider-green-500 to-emerald-600 flex items-center justify-center shadow-lg shadow-spider-green-500/30 shrink-0"},ef={class:"flex-1"},tf=Pe({__name:"LabWelcomeBanner",emits:["start"],setup(s,{emit:n}){const r=n;return(o,i)=>(a(),l("div",Zg,[i[3]||(i[3]=e("div",{class:"absolute -top-20 -right-20 w-40 h-40 bg-spider-green-500/10 rounded-full blur-3xl"},null,-1)),i[4]||(i[4]=e("div",{class:"absolute -bottom-10 -left-10 w-32 h-32 bg-emerald-500/10 rounded-full blur-3xl"},null,-1)),e("div",Xg,[e("div",Qg,[e("div",Jg,[I(t(Ne),{class:"w-7 h-7 lg:w-8 lg:h-8 text-white"})]),e("div",ef,[i[2]||(i[2]=yt('<h2 class="text-lg lg:text-xl font-bold text-white mb-1">Welcome to the Laboratory! 🌱</h2><p class="text-sm text-gray-300 mb-4 max-w-xl"> Track your plants from seed to harvest, score phenotypes, and build your personal strain library. The system guides you through each growth stage with smart recommendations. </p><div class="grid grid-cols-1 sm:grid-cols-3 gap-3 mb-6"><div class="flex items-center gap-2 p-2 rounded-lg bg-gray-800/50"><div class="w-6 h-6 rounded-full bg-spider-green-600/50 flex items-center justify-center text-xs font-bold text-spider-green-300">1</div><span class="text-xs text-gray-300">Add a strain</span></div><div class="flex items-center gap-2 p-2 rounded-lg bg-gray-800/50"><div class="w-6 h-6 rounded-full bg-spider-green-600/50 flex items-center justify-center text-xs font-bold text-spider-green-300">2</div><span class="text-xs text-gray-300">Start a plant</span></div><div class="flex items-center gap-2 p-2 rounded-lg bg-gray-800/50"><div class="w-6 h-6 rounded-full bg-spider-green-600/50 flex items-center justify-center text-xs font-bold text-spider-green-300">3</div><span class="text-xs text-gray-300">Log observations</span></div></div>',3)),e("button",{onClick:i[0]||(i[0]=d=>r("start")),class:"inline-flex items-center gap-2 px-5 py-2.5 rounded-xl bg-gradient-to-r from-spider-green-600 to-spider-green-500 hover:from-spider-green-500 hover:to-spider-green-400 text-white font-medium text-sm shadow-lg shadow-spider-green-500/25 transition-all duration-300 hover:shadow-spider-green-500/40 hover:scale-105"},[I(t(st),{class:"w-5 h-5"}),i[1]||(i[1]=ce(" Start Your First Plant ",-1))])])])])]))}}),sf=Object.assign(tf,{__name:"LabWelcomeBanner"}),nf={class:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-spider-green-600/20 via-emerald-600/10 to-gray-800/50 border border-spider-green-500/30"},of={class:"flex items-center gap-3"},rf={class:"w-10 h-10 rounded-xl bg-gradient-to-br from-spider-green-500 to-emerald-600 flex items-center justify-center shadow-lg shadow-spider-green-500/30"},af={class:"flex items-center gap-2"},lf={class:"px-2 py-0.5 rounded-full bg-spider-green-500/20 text-[10px] font-medium text-spider-green-300"},df={class:"flex items-center gap-2"},cf={class:"overflow-hidden"},uf={class:"px-4 lg:px-6 pb-4 lg:pb-6"},pf={class:"mb-4"},gf={class:"relative h-2 rounded-full bg-gray-800/80 overflow-hidden"},ff={class:"grid grid-cols-1 sm:grid-cols-3 gap-3"},mf={class:"flex items-start gap-3"},hf={key:1,class:"text-sm font-bold"},bf={class:"text-xs text-gray-500 mt-0.5"},vf={class:"flex items-start gap-3"},xf={key:1,class:"text-sm font-bold"},yf={class:"text-xs text-gray-500 mt-0.5"},_f={class:"flex items-start gap-3"},wf={key:1,class:"text-sm font-bold"},kf={class:"text-xs text-gray-500 mt-0.5"},$f={class:"mt-4 text-xs text-gray-500 text-center"},Cf=Pe({__name:"LabDashboardOnboarding",emits:["dismiss","action"],setup(s,{emit:n}){const r=n,o=rt(),i=W(!1),d=U(()=>o.strains.length>0),g=U(()=>o.plants.length>0),f=U(()=>o.allObservations.length>0),m=U(()=>{let x=0;return d.value&&x++,g.value&&x++,f.value&&x++,x}),b=U(()=>m.value/3*100);return(x,_)=>(a(),l("div",nf,[_[8]||(_[8]=e("div",{class:"absolute -top-20 -right-20 w-40 h-40 bg-spider-green-500/10 rounded-full blur-3xl pointer-events-none"},null,-1)),e("div",{class:"flex items-center justify-between px-4 lg:px-6 py-3 cursor-pointer hover:bg-spider-green-500/5 transition-colors",onClick:_[1]||(_[1]=C=>i.value=!t(i))},[e("div",of,[e("div",rf,[I(t(tr),{class:"w-5 h-5 text-white"})]),e("div",null,[e("div",af,[_[5]||(_[5]=e("h3",{class:"text-sm font-semibold text-white"},"Getting Started",-1)),e("span",lf,c(t(m))+"/3 complete ",1)]),_[6]||(_[6]=e("p",{class:"text-xs text-gray-400"},"Complete these steps to set up your Laboratory",-1))])]),e("div",df,[e("button",{onClick:_[0]||(_[0]=Ve(C=>r("dismiss"),["stop"])),class:"p-1.5 rounded-lg hover:bg-gray-700/50 text-gray-500 hover:text-white transition-colors",title:"Dismiss"},[I(t(ze),{class:"w-4 h-4"})]),I(t(Gt),{class:V(["w-5 h-5 text-gray-400 transition-transform duration-300",t(i)&&"-rotate-90"])},null,8,["class"])])]),I(Ke,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 max-h-0","enter-to-class":"opacity-100 max-h-96","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"opacity-100 max-h-96","leave-to-class":"opacity-0 max-h-0"},{default:je(()=>[ye(e("div",cf,[e("div",uf,[e("div",pf,[e("div",gf,[e("div",{class:"absolute inset-y-0 left-0 rounded-full bg-gradient-to-r from-spider-green-500 to-emerald-400 transition-all duration-500",style:Te({width:`${t(b)}%`})},null,4)])]),e("div",ff,[e("div",{class:V(["relative p-4 rounded-xl border-2 transition-all",t(d)?"bg-spider-green-500/10 border-spider-green-500/50":"bg-gray-800/40 border-gray-700/50 hover:border-purple-500/50 cursor-pointer"]),onClick:_[2]||(_[2]=C=>!t(d)&&r("action","new-strain"))},[e("div",mf,[e("div",{class:V(["w-8 h-8 rounded-lg flex items-center justify-center shrink-0",t(d)?"bg-spider-green-500 text-white":"bg-purple-500 text-white"])},[t(d)?(a(),pe(t(lt),{key:0,class:"w-4 h-4"})):(a(),l("span",hf,"1"))],2),e("div",null,[e("h4",{class:V(["text-sm font-medium",t(d)?"text-spider-green-300":"text-white"])}," Add a Strain ",2),e("p",bf,c(t(d)?"Complete!":"Your genetics catalog"),1)])])],2),e("div",{class:V(["relative p-4 rounded-xl border-2 transition-all",t(g)?"bg-spider-green-500/10 border-spider-green-500/50":t(d)?"bg-gray-800/40 border-spider-green-500/50 hover:border-spider-green-400/70 cursor-pointer":"bg-gray-800/20 border-gray-700/30 opacity-60"]),onClick:_[3]||(_[3]=C=>t(d)&&!t(g)&&r("action","new-plant"))},[e("div",vf,[e("div",{class:V(["w-8 h-8 rounded-lg flex items-center justify-center shrink-0",t(g)||t(d)?"bg-spider-green-500 text-white":"bg-gray-600 text-gray-400"])},[t(g)?(a(),pe(t(lt),{key:0,class:"w-4 h-4"})):(a(),l("span",xf,"2"))],2),e("div",null,[e("h4",{class:V(["text-sm font-medium",t(g)?"text-spider-green-300":t(d)?"text-white":"text-gray-500"])}," Create a Plant ",2),e("p",yf,c(t(g)?"Complete!":"From seed or clone"),1)])])],2),e("div",{class:V(["relative p-4 rounded-xl border-2 transition-all",t(f)?"bg-spider-green-500/10 border-spider-green-500/50":t(g)?"bg-gray-800/40 border-blue-500/50 hover:border-blue-400/70 cursor-pointer":"bg-gray-800/20 border-gray-700/30 opacity-60"]),onClick:_[4]||(_[4]=C=>t(g)&&!t(f)&&r("action","new-observation"))},[e("div",_f,[e("div",{class:V(["w-8 h-8 rounded-lg flex items-center justify-center shrink-0",t(f)?"bg-spider-green-500 text-white":t(g)?"bg-blue-500 text-white":"bg-gray-600 text-gray-400"])},[t(f)?(a(),pe(t(lt),{key:0,class:"w-4 h-4"})):(a(),l("span",wf,"3"))],2),e("div",null,[e("h4",{class:V(["text-sm font-medium",t(f)?"text-spider-green-300":t(g)?"text-white":"text-gray-500"])}," Log Observation ",2),e("p",kf,c(t(f)?"Complete!":"Track plant progress"),1)])])],2)]),e("p",$f,[I(t(wt),{class:"w-3.5 h-3.5 inline-block mr-1 text-yellow-400"}),_[7]||(_[7]=ce(" Click a step to get started. You can dismiss this guide anytime. ",-1))])])],512),[[ed,!t(i)]])]),_:1})]))}}),Sf=Object.assign(Cf,{__name:"LabDashboardOnboarding"}),Pf={class:"flex items-center gap-2 w-24 lg:w-32 shrink-0"},Ef={class:"text-base"},Tf={class:"text-xs font-medium text-gray-300 truncate"},Af={class:"flex-1 h-6 bg-gray-700/30 rounded-full overflow-hidden relative"},Df={class:"absolute inset-0 flex items-center px-3"},Mf={class:"text-xs font-bold text-white drop-shadow-sm"},Of={class:"text-xs text-gray-500 w-10 text-right"},Lf=Pe({__name:"LabStageBar",props:{stage:{},count:{},total:{},plants:{}},emits:["click"],setup(s,{emit:n}){const r=s,o=n,i=U(()=>Fe[r.stage]),d=U(()=>r.total===0?0:Math.round(r.count/r.total*100)),g=U(()=>({"amber-400":"bg-gradient-to-r from-amber-500 to-amber-400","lime-400":"bg-gradient-to-r from-lime-500 to-lime-400","green-400":"bg-gradient-to-r from-green-500 to-green-400","green-500":"bg-gradient-to-r from-green-600 to-green-500","emerald-400":"bg-gradient-to-r from-emerald-500 to-emerald-400","purple-400":"bg-gradient-to-r from-purple-500 to-purple-400","purple-500":"bg-gradient-to-r from-purple-600 to-purple-500","pink-400":"bg-gradient-to-r from-pink-500 to-pink-400","pink-500":"bg-gradient-to-r from-pink-600 to-pink-500","yellow-400":"bg-gradient-to-r from-yellow-500 to-yellow-400","orange-400":"bg-gradient-to-r from-orange-500 to-orange-400","amber-500":"bg-gradient-to-r from-amber-600 to-amber-500","amber-600":"bg-gradient-to-r from-amber-700 to-amber-600","gray-400":"bg-gradient-to-r from-gray-500 to-gray-400","red-400":"bg-gradient-to-r from-red-500 to-red-400"})[i.value.color]||"bg-gradient-to-r from-gray-500 to-gray-400");return(f,m)=>(a(),l("button",{onClick:m[0]||(m[0]=b=>o("click")),class:"group w-full flex items-center gap-3 p-2 rounded-xl hover:bg-gray-700/30 transition-all duration-200"},[e("div",Pf,[e("span",Ef,c(t(i).icon),1),e("span",Tf,c(t(i).shortLabel),1)]),e("div",Af,[e("div",{class:V(["h-full rounded-full transition-all duration-500",t(g)]),style:Te({width:`${t(d)}%`})},null,6),e("div",Df,[e("span",Mf,c(s.count),1)])]),e("span",Of,c(t(d))+"%",1),I(t(nt),{class:"w-4 h-4 text-gray-600 group-hover:text-gray-400 transition-colors"})]))}}),jf=Object.assign(Lf,{__name:"LabStageBar"}),Ut={EXCELLENT:90,GREAT:80,GOOD:70,FAIR:60};function If(s){const n=s??0;return n>=Ut.EXCELLENT?"text-spider-green-400":n>=Ut.GREAT?"text-green-400":n>=Ut.GOOD?"text-lime-400":n>=Ut.FAIR?"text-yellow-400":"text-orange-400"}function Rf(s){const n=s??0;return n>=Ut.EXCELLENT?"bg-gradient-to-r from-spider-green-500/30 to-emerald-600/30":n>=Ut.GREAT?"bg-gradient-to-r from-green-500/30 to-emerald-600/30":n>=Ut.GOOD?"bg-gradient-to-r from-lime-500/30 to-green-600/30":n>=Ut.FAIR?"bg-gradient-to-r from-yellow-500/30 to-amber-600/30":"bg-gradient-to-r from-orange-500/30 to-red-600/30"}const Ca={active:{text:"text-gray-400",bg:"bg-gray-500/20",ring:"ring-gray-400/30",label:"Active"},watch:{text:"text-blue-400",bg:"bg-blue-500/20",ring:"ring-blue-400/30",label:"Watch"},warning:{text:"text-yellow-400",bg:"bg-yellow-500/20",ring:"ring-yellow-400/30",label:"Warning"},cull_candidate:{text:"text-red-400",bg:"bg-red-500/20",ring:"ring-red-400/30",label:"Cull"},keeper:{text:"text-spider-green-400",bg:"bg-spider-green-500/20",ring:"ring-spider-green-400/30",label:"Keeper"}};function Ff(s){return Ca[s||"active"]||Ca.active}function Nf(s){return Fe[s]||Fe.seedling}const Bf={key:0,class:"absolute inset-0 bg-gradient-to-br from-spider-green-500/10 to-transparent pointer-events-none"},Vf={class:"absolute top-3 right-3 z-10"},Uf=["title"],zf={class:"p-4"},Hf={class:"mb-3"},Gf={class:"text-sm font-semibold text-white group-hover:text-spider-green-400 transition-colors"},Wf={class:"text-xs text-gray-400 truncate"},qf={class:"flex items-center justify-between"},Kf={key:0,class:"flex items-center gap-1.5"},Yf={key:1,class:"text-xs text-gray-500"},Zf={class:"mt-3 pt-3 border-t border-gray-700/50 flex items-center justify-between text-xs"},Xf={class:"text-gray-500"},Qf=["title"],Jf={class:"flex-1 min-w-0"},em={class:"text-xs font-medium text-white truncate group-hover:text-spider-green-400 transition-colors"},tm={class:"text-[10px] text-gray-500 truncate"},sm={class:"flex-1 min-w-0"},nm={class:"flex items-center gap-2"},om={class:"text-sm font-semibold text-white group-hover:text-spider-green-400 transition-colors"},rm={key:0,class:"text-[10px] font-medium px-1.5 py-0.5 rounded-full bg-spider-green-500/20 text-spider-green-400"},am={class:"text-xs text-gray-400"},lm={key:1,class:"text-right"},im={key:1,class:"text-xs text-gray-500"},dm={class:"text-xs text-gray-500 text-right w-16"},cm={class:"text-xs font-medium text-gray-300 group-hover:text-white flex-1 truncate"},um=Pe({__name:"LabPlantDisplay",props:{plant:{},variant:{default:"card"},showScore:{type:Boolean,default:!0},showSex:{type:Boolean,default:!0}},emits:["click"],setup(s){const n=s,r=U(()=>n.plant.is_keeper||n.plant.selection_status==="keeper"),o=U(()=>If(n.plant.final_score)),i=U(()=>Rf(n.plant.final_score)),d=U(()=>Nf(n.plant.status)),g=U(()=>Ff(n.plant.selection_status)),f=U(()=>{if(!n.plant.date_started)return"-";const b=new Date(n.plant.date_started),_=Math.floor((new Date().getTime()-b.getTime())/(1e3*60*60*24));return _<7?`${_}d`:`${Math.floor(_/7)}w`}),m=U(()=>{switch(n.plant.sex){case"female":return"bg-pink-500/20 text-pink-400";case"male":return"bg-blue-500/20 text-blue-400";case"hermaphrodite":return"bg-yellow-500/20 text-yellow-400";default:return"bg-gray-500/20 text-gray-400"}});return(b,x)=>s.variant==="card"?(a(),l("div",{key:0,onClick:x[0]||(x[0]=_=>b.$emit("click",s.plant)),class:V(["group relative rounded-2xl overflow-hidden cursor-pointer transition-all duration-300 hover:scale-[1.02]",[r.value?"ring-2 ring-spider-green-400/50 shadow-lg shadow-spider-green-500/20":"ring-1 ring-gray-700/50","bg-gradient-to-br from-gray-800/60 to-gray-900/60 backdrop-blur-md"]])},[r.value?(a(),l("div",Bf)):j("",!0),e("div",Vf,[e("div",{class:V(["w-3 h-3 rounded-full ring-2 ring-offset-1 ring-offset-gray-900",[d.value.bgColor,d.value.color.replace("text-","ring-")]]),title:d.value.label},null,10,Uf)]),e("div",zf,[e("div",Hf,[e("h4",Gf,c(s.plant.plant_code),1),e("p",Wf,c(s.plant.strain_name||"Unknown strain"),1)]),e("div",qf,[s.plant.final_score?(a(),l("div",Kf,[e("div",{class:V(["w-8 h-8 rounded-lg flex items-center justify-center",i.value])},[e("span",{class:V(["text-xs font-bold",o.value])},c(Math.round(s.plant.final_score)),3)],2)])):(a(),l("div",Yf,"Not scored")),e("span",{class:V(["text-[10px] font-medium px-2 py-0.5 rounded-full",[g.value.text,g.value.bg]])},c(g.value.label),3)]),e("div",Zf,[e("span",{class:V(d.value.color)},c(d.value.shortLabel),3),e("span",Xf,c(f.value),1)])])],2)):s.variant==="mini"?(a(),l("div",{key:1,onClick:x[1]||(x[1]=_=>b.$emit("click",s.plant)),class:"group flex items-center gap-3 p-2.5 rounded-xl cursor-pointer transition-all bg-gray-800/40 hover:bg-gray-700/40 border border-gray-700/30 hover:border-gray-600/50"},[e("div",{class:V(["w-2.5 h-2.5 rounded-full shrink-0",d.value.bgColor]),title:d.value.label},null,10,Qf),e("div",Jf,[e("p",em,c(s.plant.plant_code),1),e("p",tm,c(s.plant.strain_name||"Unknown"),1)]),s.plant.final_score?(a(),l("div",{key:0,class:V(["text-xs font-semibold",o.value])},c(Math.round(s.plant.final_score)),3)):j("",!0)])):s.variant==="row"?(a(),l("div",{key:2,onClick:x[2]||(x[2]=_=>b.$emit("click",s.plant)),class:"group flex items-center gap-4 p-3 rounded-xl cursor-pointer transition-all bg-gray-800/30 hover:bg-gray-700/40 border border-gray-700/30 hover:border-gray-600/50"},[e("div",{class:V(["w-10 h-10 rounded-xl flex items-center justify-center shrink-0",d.value.bgColor])},[e("span",{class:V(["text-xs font-bold",d.value.color])},c(d.value.shortLabel),3)],2),e("div",sm,[e("div",nm,[e("h4",om,c(s.plant.plant_code),1),r.value?(a(),l("span",rm," Keeper ")):j("",!0)]),e("p",am,c(s.plant.strain_name||"Unknown strain"),1)]),s.showSex&&s.plant.sex!=="unknown"?(a(),l("div",{key:0,class:V(["text-xs px-2 py-1 rounded-lg",m.value])},c(s.plant.sex),3)):j("",!0),s.showScore?(a(),l("div",lm,[s.plant.final_score?(a(),l("div",{key:0,class:V(["text-lg font-bold",o.value])},c(Math.round(s.plant.final_score)),3)):(a(),l("div",im,"-"))])):j("",!0),e("div",dm,c(f.value),1),I(t(nt),{class:"w-4 h-4 text-gray-600 group-hover:text-gray-400 shrink-0"})])):s.variant==="mini-row"?(a(),l("div",{key:3,onClick:x[3]||(x[3]=_=>b.$emit("click",s.plant)),class:"group flex items-center gap-2 py-2 px-3 rounded-lg cursor-pointer transition-all hover:bg-gray-800/40"},[e("div",{class:V(["w-2 h-2 rounded-full shrink-0",d.value.bgColor])},null,2),e("span",cm,c(s.plant.plant_code),1),s.plant.final_score?(a(),l("span",{key:0,class:V(["text-xs font-semibold",o.value])},c(Math.round(s.plant.final_score)),3)):j("",!0)])):j("",!0)}}),pm=Object.assign(um,{__name:"LabPlantDisplay"}),gm={class:"flex-1 min-w-0"},fm={class:"text-xs font-medium text-white truncate"},mm={class:"text-[10px] text-gray-500 truncate"},hm={class:"text-right shrink-0"},bm=Pe({__name:"LabRankingItem",props:{plant:{},rank:{}},emits:["click"],setup(s,{emit:n}){const r=s,o=n,i=U(()=>r.rank===1?"🥇":r.rank===2?"🥈":r.rank===3?"🥉":r.rank),d=U(()=>r.rank===1?"bg-gradient-to-br from-yellow-500/30 to-amber-500/30":r.rank===2?"bg-gradient-to-br from-gray-400/30 to-gray-500/30":r.rank===3?"bg-gradient-to-br from-amber-600/30 to-amber-700/30":"bg-gray-700/50 text-gray-400"),g=U(()=>{const f=r.plant.final_score||0;return f>=90?"text-spider-green-400":f>=80?"text-green-400":f>=70?"text-lime-400":"text-yellow-400"});return(f,m)=>(a(),l("button",{onClick:m[0]||(m[0]=b=>o("click")),class:"group w-full flex items-center gap-2 p-2 rounded-xl hover:bg-gray-700/30 transition-all duration-200 text-left"},[e("div",{class:V(["w-7 h-7 rounded-lg flex items-center justify-center text-xs font-bold shrink-0",t(d)])},c(t(i)),3),e("div",gm,[e("p",fm,c(s.plant.plant_code),1),e("p",mm,c(s.plant.strain_name),1)]),e("div",hm,[e("span",{class:V(["text-sm font-bold",t(g)])},c((s.plant.final_score||0).toFixed(1)),3)])]))}}),vm=Object.assign(bm,{__name:"LabRankingItem"}),xm={class:"flex-1 min-w-0"},ym={class:"text-xs font-medium text-gray-200 truncate"},_m={class:"text-[10px] text-gray-400 line-clamp-2"},wm={class:"flex items-center gap-2 mt-1"},km={key:0,class:"text-[10px] text-spider-green-400"},$m={class:"text-[10px] text-gray-500"},Cm=Pe({__name:"LabAlertItem",props:{alert:{}},emits:["click","dismiss"],setup(s,{emit:n}){const r=s,o=n,i=U(()=>{switch(r.alert.level){case"urgent":return"bg-red-500 animate-pulse";case"important":return"bg-yellow-500";case"reminder":return"bg-blue-500";default:return"bg-gray-500"}}),d=U(()=>{const g=new Date,f=new Date(r.alert.timestamp),m=g.getTime()-f.getTime(),b=Math.floor(m/6e4);if(b<1)return"Just now";if(b<60)return`${b}m ago`;const x=Math.floor(b/60);return x<24?`${x}h ago`:`${Math.floor(x/24)}d ago`});return(g,f)=>(a(),l("div",{onClick:f[1]||(f[1]=m=>o("click")),class:V(["group flex items-start gap-2 p-2 rounded-xl cursor-pointer transition-all duration-200","hover:bg-gray-700/30",!s.alert.acknowledged&&"bg-gray-700/20"])},[e("div",{class:V(["w-2 h-2 rounded-full mt-1.5 shrink-0",t(i)])},null,2),e("div",xm,[e("p",ym,c(s.alert.title),1),e("p",_m,c(s.alert.message),1),e("div",wm,[s.alert.plant_code?(a(),l("span",km,c(s.alert.plant_code),1)):j("",!0),e("span",$m,c(t(d)),1)])]),s.alert.acknowledged?j("",!0):(a(),l("button",{key:0,onClick:f[0]||(f[0]=Ve(m=>o("dismiss"),["stop"])),class:"p-1 rounded-lg opacity-0 group-hover:opacity-100 hover:bg-gray-600/50 text-gray-500 hover:text-gray-300 transition-all"},[I(t(ze),{class:"w-3.5 h-3.5"})]))],2))}}),Sm=Object.assign(Cm,{__name:"LabAlertItem"}),Pm={class:"flex items-start gap-2"},Em={class:"text-[10px] text-gray-400 mt-0.5"},Tm=Pe({__name:"LabTipCard",props:{tip:{}},setup(s){const n=s,r=U(()=>{switch(n.tip.type){case"tip":return wt;case"info":return fn;case"reminder":return sr;default:return fn}}),o=U(()=>{switch(n.tip.type){case"tip":return"bg-yellow-500/10";case"info":return"bg-blue-500/10";case"reminder":return"bg-purple-500/10";default:return"bg-gray-500/10"}}),i=U(()=>{switch(n.tip.type){case"tip":return"border-yellow-500/20";case"info":return"border-blue-500/20";case"reminder":return"border-purple-500/20";default:return"border-gray-500/20"}}),d=U(()=>{switch(n.tip.type){case"tip":return"text-yellow-400";case"info":return"text-blue-400";case"reminder":return"text-purple-400";default:return"text-gray-400"}}),g=U(()=>{switch(n.tip.type){case"tip":return"text-yellow-300";case"info":return"text-blue-300";case"reminder":return"text-purple-300";default:return"text-gray-300"}});return(f,m)=>(a(),l("div",{class:V(["p-2.5 rounded-xl border transition-all duration-200",t(o),t(i)])},[e("div",Pm,[(a(),pe(_t(t(r)),{class:V(["w-4 h-4 shrink-0 mt-0.5",t(d)])},null,8,["class"])),e("div",null,[e("p",{class:V(["text-xs font-medium",t(g)])},c(s.tip.title),3),e("p",Em,c(s.tip.text),1)])])],2))}}),Am=Object.assign(Tm,{__name:"LabTipCard"}),Dm={class:"space-y-4"},Mm={class:"relative p-4 rounded-2xl bg-gradient-to-br from-purple-900/40 to-indigo-900/40 border border-purple-500/30 backdrop-blur-md overflow-hidden"},Om={class:"absolute inset-0 overflow-hidden pointer-events-none"},Lm={class:"relative"},jm={class:"flex items-center justify-between mb-3"},Im={class:"flex items-center gap-3"},Rm={class:"relative"},Fm={class:"w-14 h-14 rounded-2xl bg-gradient-to-br from-purple-500 to-indigo-600 flex items-center justify-center shadow-lg shadow-purple-500/30 transition-transform hover:scale-110 hover:rotate-3"},Nm={class:"text-2xl font-black text-white"},Bm={key:0,class:"absolute inset-0 rounded-2xl bg-purple-400 animate-ping opacity-50"},Vm={class:"text-xs text-purple-300/80 uppercase tracking-wider font-medium"},Um={class:"text-lg font-bold text-white"},zm={class:"text-right"},Hm={class:"text-2xl font-black text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-400"},Gm={class:"text-xs text-gray-400"},Wm={class:"relative h-4 rounded-full bg-gray-800/80 overflow-hidden"},qm={class:"absolute inset-0 flex items-center justify-center text-[10px] font-bold text-white drop-shadow"},Km={class:"grid grid-cols-3 gap-3"},Ym={class:"relative p-3 rounded-xl bg-gradient-to-br from-orange-900/30 to-red-900/30 border border-orange-500/30 overflow-hidden group hover:scale-105 transition-transform"},Zm={class:"flex items-center gap-2 mb-2"},Xm={class:"w-8 h-8 rounded-lg bg-gradient-to-br from-orange-500 to-red-500 flex items-center justify-center"},Qm={class:"text-xl font-black text-orange-400"},Jm={class:"absolute -bottom-4 -right-4 w-16 h-16 opacity-20 group-hover:opacity-40 transition-opacity"},eh={class:"relative p-3 rounded-xl bg-gradient-to-br from-emerald-900/30 to-green-900/30 border border-emerald-500/30 overflow-hidden group hover:scale-105 transition-transform"},th={class:"flex items-center gap-2 mb-2"},sh={class:"w-8 h-8 rounded-lg bg-gradient-to-br from-emerald-500 to-green-500 flex items-center justify-center"},nh={class:"text-xl font-black text-emerald-400"},oh={class:"relative p-3 rounded-xl bg-gradient-to-br from-yellow-900/30 to-amber-900/30 border border-yellow-500/30 overflow-hidden group hover:scale-105 transition-transform"},rh={class:"flex items-center gap-2 mb-2"},ah={class:"w-8 h-8 rounded-lg bg-gradient-to-br from-yellow-500 to-amber-500 flex items-center justify-center"},lh={class:"text-xl font-black text-yellow-400"},ih={class:"p-4 rounded-2xl bg-gray-800/40 border border-gray-700/50 backdrop-blur-md"},dh={class:"flex items-center justify-between mb-3"},ch={class:"text-sm font-semibold text-white flex items-center gap-2"},uh={class:"grid grid-cols-4 sm:grid-cols-6 gap-2"},ph=["title"],gh={class:"drop-shadow-lg"},fh={key:0,class:"absolute -top-1 -right-1 w-3 h-3 rounded-full bg-red-500 animate-pulse"},mh={key:1,class:"absolute inset-0 flex items-center justify-center bg-black/40 rounded-xl"},hh={class:"p-4 rounded-2xl bg-gradient-to-br from-blue-900/30 to-cyan-900/30 border border-blue-500/30 backdrop-blur-md"},bh={class:"flex items-center justify-between mb-3"},vh={class:"text-sm font-semibold text-white flex items-center gap-2"},xh={class:"text-[10px] px-2 py-0.5 rounded-full bg-blue-500/20 text-blue-300"},yh={class:"space-y-2"},_h={class:"flex-1 min-w-0"},wh={class:"text-[10px] text-gray-500"},kh={class:"flex items-center gap-1 px-2 py-1 rounded-lg bg-purple-500/20 shrink-0"},$h={class:"text-[10px] font-bold text-purple-300"},Ch=Pe({__name:"LabGamification",setup(s){const n=rt(),r=U(()=>n.plants.length),o=U(()=>n.plants.filter(P=>P.is_keeper).length),i=U(()=>{if(n.allObservations.length===0)return 0;const P=[...new Set(n.allObservations.map(y=>new Date(y.observed_at).toDateString()))].map(y=>new Date(y)).sort((y,h)=>h.getTime()-y.getTime());if(P.length===0)return 0;const w=new Date;w.setHours(0,0,0,0);const $=new Date(w);$.setDate($.getDate()-1);const S=P[0];if(S.setHours(0,0,0,0),S.getTime()<$.getTime())return 0;let A=1;for(let y=1;y<P.length;y++){const h=P[y];h.setHours(0,0,0,0);const u=P[y-1];if(u.setHours(0,0,0,0),(u.getTime()-h.getTime())/(1e3*60*60*24)===1)A++;else break}return A}),d=U(()=>{let P=0;return P+=n.plants.length*50,P+=n.allObservations.length*20,P+=o.value*200,P+=n.strains.length*30,P}),g=U(()=>Math.floor(d.value/500)+1),f=U(()=>g.value*500),m=U(()=>d.value%500/500*100),b=W(0);He(d,P=>{const w=b.value,$=P-w,S=1e3,A=Date.now(),y=()=>{const h=Date.now()-A,u=Math.min(h/S,1);b.value=Math.round(w+$*x(u)),u<1&&requestAnimationFrame(y)};y()},{immediate:!0});function x(P){return 1-Math.pow(1-P,4)}const _=W(!1),C=U(()=>{const P=["Seedling","Sprout","Grower","Cultivator","Expert","Master","Legend"];return P[Math.min(g.value-1,P.length-1)]});function k(P){return["top-4 left-8","top-12 right-12","bottom-6 left-1/4","top-1/3 right-1/4","bottom-4 right-8","top-8 left-1/2"][P-1]||""}const p=U(()=>[{id:1,icon:"🌱",name:"First Plant",unlocked:n.plants.length>=1,new:!1},{id:2,icon:"🔬",name:"Observer",unlocked:n.allObservations.length>=5,new:n.allObservations.length===5},{id:3,icon:"⭐",name:"Keeper Finder",unlocked:o.value>=1,new:!1},{id:4,icon:"🌿",name:"Garden Starter",unlocked:n.plants.length>=5,new:!1},{id:5,icon:"🏆",name:"Score Master",unlocked:n.topPerformers.length>=3,new:!1},{id:6,icon:"🧬",name:"Strain Collector",unlocked:n.strains.length>=3,new:!1},{id:7,icon:"📸",name:"Photographer",unlocked:!1,new:!1},{id:8,icon:"🔥",name:"Hot Streak",unlocked:i.value>=7,new:!1}].slice(0,8)),T=U(()=>[{id:1,title:"Log an observation",description:"Check on your plants and record their progress",xp:25,completed:n.allObservations.some(w=>{const $=new Date(w.observed_at).toDateString(),S=new Date().toDateString();return $===S})},{id:2,title:"Review dashboard",description:"Visit your grow dashboard",xp:10,completed:!0},{id:3,title:"Check environment",description:"Monitor your grow room conditions",xp:15,completed:!1}]),M=U(()=>T.value.filter(P=>P.completed).length);return(P,w)=>(a(),l("div",Dm,[e("div",Mm,[e("div",Om,[(a(),l(Q,null,le(6,$=>e("div",{key:$,class:V(["absolute w-1 h-1 rounded-full bg-purple-400/40 animate-pulse",k($)])},null,2)),64))]),e("div",Lm,[e("div",jm,[e("div",Im,[e("div",Rm,[e("div",Fm,[e("span",Nm,c(t(g)),1)]),t(_)?(a(),l("div",Bm)):j("",!0)]),e("div",null,[e("p",Vm,c(t(C)),1),e("p",Um,"Level "+c(t(g))+" Grower",1)])]),e("div",zm,[e("p",Hm,c(t(b).toLocaleString()),1),e("p",Gm,"/ "+c(t(f).toLocaleString())+" XP",1)])]),e("div",Wm,[e("div",{class:"absolute inset-y-0 left-0 rounded-full bg-gradient-to-r from-purple-500 via-pink-500 to-purple-400 transition-all duration-1000 ease-out",style:Te({width:`${t(m)}%`})},[...w[0]||(w[0]=[e("div",{class:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent animate-shimmer"},null,-1)])],4),e("span",qm,c(Math.round(t(m)))+"% to Level "+c(t(g)+1),1)])])]),e("div",Km,[e("div",Ym,[e("div",Zm,[e("div",Xm,[I(t(hr),{class:"w-4 h-4 text-white"})]),e("span",Qm,c(t(i)),1)]),w[1]||(w[1]=e("p",{class:"text-[10px] text-gray-400 uppercase tracking-wider"},"Day Streak",-1)),e("div",Jm,[I(t(hr),{class:"w-full h-full text-orange-500 animate-pulse"})])]),e("div",eh,[e("div",th,[e("div",sh,[I(t(Ne),{class:"w-4 h-4 text-white"})]),e("span",nh,c(t(r)),1)]),w[2]||(w[2]=e("p",{class:"text-[10px] text-gray-400 uppercase tracking-wider"},"Plants Grown",-1))]),e("div",oh,[e("div",rh,[e("div",ah,[I(t(ct),{class:"w-4 h-4 text-white"})]),e("span",lh,c(t(o)),1)]),w[3]||(w[3]=e("p",{class:"text-[10px] text-gray-400 uppercase tracking-wider"},"Keepers Found",-1))])]),e("div",ih,[e("div",dh,[e("h3",ch,[I(t(ss),{class:"w-4 h-4 text-amber-400"}),w[4]||(w[4]=ce(" Recent Achievements ",-1))]),w[5]||(w[5]=e("button",{class:"text-[10px] text-gray-400 hover:text-white transition-colors"}," View All ",-1))]),e("div",uh,[(a(!0),l(Q,null,le(t(p),$=>(a(),l("div",{key:$.id,title:$.name,class:V(["relative aspect-square rounded-xl flex items-center justify-center text-2xl transition-all cursor-pointer",$.unlocked?"bg-gradient-to-br from-amber-500/30 to-orange-600/30 border border-amber-500/50 hover:scale-110 hover:shadow-lg hover:shadow-amber-500/20":"bg-gray-700/30 border border-gray-600/30 opacity-50 grayscale"])},[e("span",gh,c($.icon),1),$.new&&$.unlocked?(a(),l("span",fh)):j("",!0),$.unlocked?j("",!0):(a(),l("div",mh,[I(t(md),{class:"w-4 h-4 text-gray-500"})]))],10,ph))),128))])]),e("div",hh,[e("div",bh,[e("h3",vh,[I(t(or),{class:"w-4 h-4 text-blue-400"}),w[6]||(w[6]=ce(" Daily Quests ",-1))]),e("span",xh,c(t(M))+"/"+c(t(T).length)+" Complete ",1)]),e("div",yh,[(a(!0),l(Q,null,le(t(T),$=>(a(),l("div",{key:$.id,class:V(["flex items-center gap-3 p-2 rounded-xl transition-all",$.completed?"bg-green-500/10 border border-green-500/30":"bg-gray-800/50 border border-gray-700/30 hover:bg-gray-800/80"])},[e("div",{class:V(["w-6 h-6 rounded-lg flex items-center justify-center shrink-0 transition-all",$.completed?"bg-green-500 shadow-lg shadow-green-500/30":"bg-gray-700 border border-gray-600"])},[$.completed?(a(),pe(t(lt),{key:0,class:"w-4 h-4 text-white"})):j("",!0)],2),e("div",_h,[e("p",{class:V(["text-sm font-medium truncate",$.completed?"text-green-300 line-through":"text-white"])},c($.title),3),e("p",wh,c($.description),1)]),e("div",kh,[I(t(Ne),{class:"w-3 h-3 text-purple-400"}),e("span",$h,"+"+c($.xp)+" XP",1)])],2))),128))])])]))}}),Sh=Object.assign(Pt(Ch,[["__scopeId","data-v-776a53ce"]]),{__name:"LabGamification"}),Ph={class:"p-3 lg:p-6 space-y-4 lg:space-y-5"},Eh={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3"},Th={class:"flex items-center gap-2 lg:gap-4 flex-wrap"},Ah={class:"text-sm font-medium text-white"},Dh={class:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-gray-800/60"},Mh={class:"text-sm font-medium text-white"},Oh={class:"text-sm font-medium text-red-300"},Lh={key:1,class:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-gray-800/60"},jh={class:"text-sm font-medium text-white"},Ih={class:"flex items-center gap-2"},Rh={class:"w-6 h-6 rounded-md bg-gradient-to-br from-purple-500 to-indigo-600 flex items-center justify-center"},Fh={class:"text-xs font-bold text-white"},Nh={class:"hidden sm:block"},Bh={class:"text-[10px] text-purple-300/80 uppercase tracking-wider leading-none"},Vh={class:"w-16 h-1 mt-1 rounded-full bg-gray-800/80 overflow-hidden"},Uh={class:"grid grid-cols-1 lg:grid-cols-5 gap-4 lg:gap-5"},zh={class:"lg:col-span-3 space-y-4 lg:space-y-5"},Hh={class:"bg-gray-800/30 rounded-2xl border border-gray-700/40 p-4"},Gh={class:"flex items-center justify-between mb-3"},Wh={class:"flex items-center gap-2"},qh={class:"w-7 h-7 rounded-lg bg-spider-green-500/20 flex items-center justify-center"},Kh={key:0,class:"space-y-2"},Yh={class:"flex items-center gap-1.5 text-[11px] text-gray-500 mt-2"},Zh={key:1,class:"text-center py-6"},Xh={key:0,class:"bg-gray-800/30 rounded-2xl border border-gray-700/40 p-4"},Qh={class:"flex items-center justify-between mb-3"},Jh={class:"flex items-center gap-2"},eb={class:"w-7 h-7 rounded-lg bg-purple-500/20 flex items-center justify-center"},tb={class:"flex items-center gap-1"},sb=["onClick"],nb={key:0,class:"grid grid-cols-2 sm:grid-cols-3 gap-2"},ob={key:1,class:"space-y-1.5"},rb={key:2,class:"mt-3 text-center"},ab={key:1,class:"bg-gray-800/30 rounded-2xl border border-gray-700/40 p-4"},lb={class:"flex items-center justify-between mb-3"},ib={class:"flex items-center gap-2"},db={class:"w-7 h-7 rounded-lg bg-amber-500/20 flex items-center justify-center"},cb={class:"space-y-2"},ub={class:"lg:col-span-2 space-y-4 lg:space-y-5"},pb={class:"flex items-center justify-between mb-3"},gb={class:"flex items-center gap-2"},fb={key:0,class:"px-1.5 py-0.5 rounded-full bg-red-500/20 text-[10px] font-medium text-red-300"},mb={key:0,class:"space-y-2 max-h-48 overflow-y-auto"},hb={key:1,class:"text-center py-4"},bb={class:"bg-gray-800/30 rounded-2xl border border-gray-700/40 p-4"},vb={class:"flex items-center gap-2 mb-3"},xb={class:"w-7 h-7 rounded-lg bg-blue-500/20 flex items-center justify-center"},yb={class:"grid grid-cols-2 gap-2"},_b={class:"bg-gray-800/30 rounded-2xl border border-gray-700/40"},wb={class:"flex items-center gap-2"},kb={class:"w-7 h-7 rounded-lg bg-yellow-500/20 flex items-center justify-center"},$b={key:0,class:"px-4 pb-4 overflow-hidden"},Cb={class:"space-y-2"},Sb={class:"w-full max-w-lg max-h-[90vh] overflow-y-auto bg-gray-900 rounded-2xl shadow-2xl border border-gray-800"},Pb={class:"sticky top-0 z-10 flex items-center justify-between px-6 py-4 border-b border-gray-800 bg-gray-900"},Eb={class:"flex items-center gap-3"},Tb={class:"w-10 h-10 rounded-xl bg-gradient-to-br from-purple-500 to-indigo-600 flex items-center justify-center"},Ab={class:"text-xs text-gray-400"},Db={class:"p-6"},Bn="lab-onboarding-dismissed",Mb=Pe({__name:"LabDashboard",emits:["openNewPlant","openPlant","openNewStrain","addObservation"],setup(s,{emit:n}){const r=n,o=rt(),i=W("grid"),d=W(!1),g=W(!1),f=W(null),m=W(!1);ot(()=>{m.value=localStorage.getItem(Bn)==="true"});const b=U(()=>m.value?!1:x.value<3),x=U(()=>{const O=o.strains.length>0,R=o.plants.length>0,X=o.allObservations.length>0;return[O,R,X].filter(Boolean).length}),_=U(()=>m.value&&x.value<3);function C(){m.value=!0,localStorage.setItem(Bn,"true")}function k(){m.value=!1,localStorage.removeItem(Bn)}function p(O){switch(O){case"new-strain":r("openNewStrain");break;case"new-plant":r("openNewPlant");break;case"new-observation":o.activePlants[0]&&r("addObservation",o.activePlants[0].id);break}}const T=U(()=>{const O=["pre_flower","early_flower","mid_flower","late_flower"];return o.activePlants.filter(R=>O.includes(R.status)).length}),M=U(()=>o.topPerformers[0]),P=U(()=>M.value?.final_score??0),w=U(()=>{let O=0;return O+=o.plants.length*50,O+=o.allObservations.length*20,O+=o.plants.filter(R=>R.is_keeper).length*200,O+=o.strains.length*30,O}),$=U(()=>Math.floor(w.value/500)+1),S=U(()=>w.value%500/500*100),A=U(()=>{const O=["Seedling","Sprout","Grower","Cultivator","Expert","Master","Legend"];return O[Math.min($.value-1,O.length-1)]}),y=U(()=>{const O=[];for(const R of Object.keys(Fe)){if(["archived","culled"].includes(R))continue;const X=o.activePlants.filter(oe=>oe.status===R);X.length>0&&O.push({id:R,count:X.length,plants:X})}return O}),h=U(()=>o.activePlants.slice(0,6)),u=U(()=>{const O=[];return o.activePlants.length===0&&O.push({id:"start",type:"info",title:"Getting Started",text:"Add your first strain to the catalog, then create plants from seeds or clones."}),T.value>0&&O.push({id:"flower",type:"tip",title:"Flowering Stage",text:"Check trichomes regularly. Harvest when 70-80% are cloudy with some amber."}),o.activePlants.some(R=>R.status==="germinating")&&O.push({id:"germ",type:"tip",title:"Germination",text:"Keep temps at 24-28C and humidity above 70%. Taproots usually appear in 24-72h."}),O.length===0&&O.push({id:"observe",type:"reminder",title:"Regular Observations",text:"Log observations every 2-3 days to track plant health and catch issues early."}),O.slice(0,3)});function v(O){o.setFilter({stage:O}),o.activeTab="plants"}function D(O){r("openPlant",O)}function z(O){o.acknowledgeNotification(O.id),O.plant_id&&o.fetchPlant(O.plant_id)}function G(){f.value?.scrollIntoView({behavior:"smooth"})}function B(){o.activePlants[0]&&r("addObservation",o.activePlants[0].id)}return(O,R)=>{const X=sf,oe=Sf,we=jf,re=pm,E=vm,L=Sm,F=Am,be=Sh;return a(),l("div",Ph,[t(o).activePlants.length===0&&t(o).strains.length===0?(a(),pe(X,{key:0,onStart:R[0]||(R[0]=ie=>r("openNewPlant"))})):(a(),l(Q,{key:1},[t(b)?(a(),pe(oe,{key:0,onDismiss:C,onAction:p})):j("",!0),e("div",Eh,[e("div",Th,[e("button",{onClick:R[1]||(R[1]=ie=>t(o).activeTab="plants"),class:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-gray-800/60 hover:bg-gray-700/60 transition-colors"},[I(t(Ne),{class:"w-4 h-4 text-spider-green-400"}),e("span",Ah,c(t(o).activePlants.length),1),R[13]||(R[13]=e("span",{class:"text-xs text-gray-400"},"plants",-1))]),e("div",Dh,[I(t(At),{class:"w-4 h-4 text-pink-400"}),e("span",Mh,c(t(T)),1),R[14]||(R[14]=e("span",{class:"text-xs text-gray-400"},"flowering",-1))]),t(o).urgentAlerts.length>0?(a(),l("button",{key:0,onClick:G,class:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-red-900/40 hover:bg-red-800/40 transition-colors animate-pulse"},[I(t(hs),{class:"w-4 h-4 text-red-400"}),e("span",Oh,c(t(o).urgentAlerts.length),1),R[15]||(R[15]=e("span",{class:"text-xs text-red-400"},"alerts",-1))])):j("",!0),t(P)>0?(a(),l("div",Lh,[I(t(ss),{class:"w-4 h-4 text-amber-400"}),e("span",jh,c(t(P).toFixed(1)),1),R[16]||(R[16]=e("span",{class:"text-xs text-gray-400"},"best",-1))])):j("",!0)]),e("div",Ih,[t(_)?(a(),l("button",{key:0,onClick:k,class:"flex items-center gap-1.5 px-3 py-1.5 text-xs text-spider-green-400 hover:text-spider-green-300 bg-spider-green-500/10 hover:bg-spider-green-500/20 rounded-lg transition-colors"},[I(t(tr),{class:"w-4 h-4"}),R[17]||(R[17]=e("span",null,"Guide",-1))])):j("",!0),e("button",{onClick:R[2]||(R[2]=ie=>d.value=!0),class:"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-gradient-to-r from-purple-900/50 to-indigo-900/50 border border-purple-500/30 hover:border-purple-400/50 transition-all"},[e("div",Rh,[e("span",Fh,c(t($)),1)]),e("div",Nh,[e("p",Bh,c(t(A)),1),e("div",Vh,[e("div",{class:"h-full rounded-full bg-gradient-to-r from-purple-500 to-pink-500",style:Te({width:`${t(S)}%`})},null,4)])]),I(t(nt),{class:"w-3.5 h-3.5 text-purple-400/60"})])])]),e("div",Uh,[e("div",zh,[e("section",Hh,[e("div",Gh,[e("div",Wh,[e("div",qh,[I(t(Ot),{class:"w-4 h-4 text-spider-green-400"})]),R[18]||(R[18]=e("h3",{class:"text-sm font-semibold text-white"},"Plants by Stage",-1))]),e("button",{onClick:R[3]||(R[3]=ie=>t(o).activeTab="plants"),class:"text-xs text-spider-green-400 hover:text-spider-green-300 transition-colors"}," View all ")]),t(o).activePlants.length>0?(a(),l("div",Kh,[(a(!0),l(Q,null,le(t(y),ie=>(a(),pe(we,{key:ie.id,stage:ie.id,count:ie.count,total:t(o).activePlants.length,plants:ie.plants,onClick:de=>v(ie.id)},null,8,["stage","count","total","plants","onClick"]))),128)),e("p",Yh,[I(t(wt),{class:"w-3 h-3 text-yellow-400/70"}),R[19]||(R[19]=ce(" Click a stage to filter plants ",-1))])])):(a(),l("div",Zh,[I(t(Ne),{class:"w-8 h-8 mx-auto mb-2 text-spider-green-400/50"}),R[20]||(R[20]=e("p",{class:"text-sm text-gray-400"},"No active plants",-1)),e("button",{onClick:R[4]||(R[4]=ie=>r("openNewPlant")),class:"mt-2 text-xs text-spider-green-400 hover:text-spider-green-300"}," + Add your first plant ")]))]),t(o).activePlants.length>0?(a(),l("section",Xh,[e("div",Qh,[e("div",Jh,[e("div",eb,[I(t(xn),{class:"w-4 h-4 text-purple-400"})]),R[21]||(R[21]=e("h3",{class:"text-sm font-semibold text-white"},"My Plants",-1))]),e("div",tb,[(a(),l(Q,null,le(["grid","list"],ie=>e("button",{key:ie,onClick:de=>i.value=ie,class:V(["p-1.5 rounded transition-colors",t(i)===ie?"text-spider-green-400 bg-spider-green-500/20":"text-gray-500 hover:text-gray-300"])},[ie==="grid"?(a(),pe(t(xn),{key:0,class:"w-3.5 h-3.5"})):(a(),pe(t(Mn),{key:1,class:"w-3.5 h-3.5"}))],10,sb)),64))])]),t(i)==="grid"?(a(),l("div",nb,[(a(!0),l(Q,null,le(t(h),ie=>(a(),pe(re,{key:ie.id,plant:ie,variant:"mini",onClick:de=>D(ie)},null,8,["plant","onClick"]))),128))])):(a(),l("div",ob,[(a(!0),l(Q,null,le(t(h),ie=>(a(),pe(re,{key:ie.id,plant:ie,variant:"mini-row",onClick:de=>D(ie)},null,8,["plant","onClick"]))),128))])),t(o).activePlants.length>6?(a(),l("div",rb,[e("button",{onClick:R[5]||(R[5]=ie=>t(o).activeTab="plants"),class:"text-xs text-gray-400 hover:text-white transition-colors"}," + "+c(t(o).activePlants.length-6)+" more plants ",1)])):j("",!0)])):j("",!0),t(o).topPerformers.length>0?(a(),l("section",ab,[e("div",lb,[e("div",ib,[e("div",db,[I(t(ss),{class:"w-4 h-4 text-amber-400"})]),R[22]||(R[22]=e("h3",{class:"text-sm font-semibold text-white"},"Top Performers",-1))]),e("button",{onClick:R[6]||(R[6]=ie=>t(o).activeTab="pheno"),class:"text-xs text-amber-400 hover:text-amber-300 transition-colors"}," Pheno Hunt ")]),e("div",cb,[(a(!0),l(Q,null,le(t(o).topPerformers.slice(0,3),(ie,de)=>(a(),pe(E,{key:ie.id,plant:ie,rank:de+1,onClick:te=>D(ie)},null,8,["plant","rank","onClick"]))),128))])])):j("",!0)]),e("div",ub,[e("section",{ref_key:"alertsSection",ref:f,class:"bg-gray-800/30 rounded-2xl border border-gray-700/40 p-4"},[e("div",pb,[e("div",gb,[e("div",{class:V(["w-7 h-7 rounded-lg flex items-center justify-center",t(o).unreadNotifications.length>0?"bg-red-500/20":"bg-gray-600/20"])},[I(t(sr),{class:V(["w-4 h-4",t(o).unreadNotifications.length>0?"text-red-400":"text-gray-400"])},null,8,["class"])],2),R[23]||(R[23]=e("h3",{class:"text-sm font-semibold text-white"},"Alerts",-1)),t(o).unreadNotifications.length>0?(a(),l("span",fb,c(t(o).unreadNotifications.length),1)):j("",!0)])]),t(o).notifications.length>0?(a(),l("div",mb,[(a(!0),l(Q,null,le(t(o).notifications.slice(0,4),ie=>(a(),pe(L,{key:ie.id,alert:ie,onClick:de=>z(ie),onDismiss:de=>t(o).acknowledgeNotification(ie.id)},null,8,["alert","onClick","onDismiss"]))),128))])):(a(),l("div",hb,[I(t(St),{class:"w-6 h-6 mx-auto mb-1.5 text-spider-green-400/60"}),R[24]||(R[24]=e("p",{class:"text-xs text-gray-400"},"All clear!",-1))]))],512),e("section",bb,[e("div",vb,[e("div",xb,[I(t(Ys),{class:"w-4 h-4 text-blue-400"})]),R[25]||(R[25]=e("h3",{class:"text-sm font-semibold text-white"},"Quick Actions",-1))]),e("div",yb,[e("button",{onClick:R[7]||(R[7]=ie=>r("openNewPlant")),class:"flex items-center gap-2 px-3 py-2.5 rounded-xl bg-spider-green-600/20 hover:bg-spider-green-600/30 border border-spider-green-500/30 text-left transition-all"},[I(t(st),{class:"w-4 h-4 text-spider-green-400"}),R[26]||(R[26]=e("span",{class:"text-xs font-medium text-white"},"New Plant",-1))]),e("button",{onClick:R[8]||(R[8]=ie=>r("openNewStrain")),class:"flex items-center gap-2 px-3 py-2.5 rounded-xl bg-purple-600/20 hover:bg-purple-600/30 border border-purple-500/30 text-left transition-all"},[I(t(Je),{class:"w-4 h-4 text-purple-400"}),R[27]||(R[27]=e("span",{class:"text-xs font-medium text-white"},"New Strain",-1))]),t(o).activePlants.length>0?(a(),l("button",{key:0,onClick:B,class:"flex items-center gap-2 px-3 py-2.5 rounded-xl bg-blue-600/20 hover:bg-blue-600/30 border border-blue-500/30 text-left transition-all"},[I(t(_s),{class:"w-4 h-4 text-blue-400"}),R[28]||(R[28]=e("span",{class:"text-xs font-medium text-white"},"Log Note",-1))])):j("",!0),e("button",{onClick:R[9]||(R[9]=ie=>t(o).activeTab="strains"),class:"flex items-center gap-2 px-3 py-2.5 rounded-xl bg-gray-600/20 hover:bg-gray-600/30 border border-gray-500/30 text-left transition-all"},[I(t(An),{class:"w-4 h-4 text-gray-400"}),R[29]||(R[29]=e("span",{class:"text-xs font-medium text-white"},"Strains",-1))])])]),e("section",_b,[e("button",{onClick:R[10]||(R[10]=ie=>g.value=!t(g)),class:"w-full flex items-center justify-between p-4"},[e("div",wb,[e("div",kb,[I(t(wt),{class:"w-4 h-4 text-yellow-400"})]),R[30]||(R[30]=e("h3",{class:"text-sm font-semibold text-white"},"Growing Tips",-1))]),I(t(Gt),{class:V(["w-4 h-4 text-gray-400 transition-transform",t(g)?"rotate-180":""])},null,8,["class"])]),I(Ke,{"enter-active-class":"transition-all duration-200 ease-out","enter-from-class":"opacity-0 max-h-0","enter-to-class":"opacity-100 max-h-48","leave-active-class":"transition-all duration-150 ease-in","leave-from-class":"opacity-100 max-h-48","leave-to-class":"opacity-0 max-h-0"},{default:je(()=>[t(g)?(a(),l("div",$b,[e("div",Cb,[(a(!0),l(Q,null,le(t(u),ie=>(a(),pe(F,{key:ie.id,tip:ie},null,8,["tip"]))),128))])])):j("",!0)]),_:1})])])])],64)),(a(),pe(Qe,{to:"body"},[I(Ke,{"enter-active-class":"transition-all duration-300","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-all duration-200","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:je(()=>[t(d)?(a(),l("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70",onClick:R[12]||(R[12]=Ve(ie=>d.value=!1,["self"]))},[e("div",Sb,[e("div",Pb,[e("div",Eb,[e("div",Tb,[I(t(Ne),{class:"w-5 h-5 text-white"})]),e("div",null,[R[31]||(R[31]=e("h2",{class:"text-lg font-semibold text-white"},"Your Progress",-1)),e("p",Ab,"Level "+c(t($))+" - "+c(t(A)),1)])]),e("button",{onClick:R[11]||(R[11]=ie=>d.value=!1),class:"p-2 rounded-lg hover:bg-gray-800 text-gray-400 hover:text-white transition-colors"},[I(t(ze),{class:"w-5 h-5"})])]),e("div",Db,[I(be)])])])):j("",!0)]),_:1})]))])}}}),Ob=Object.assign(Mb,{__name:"LabDashboard"}),Lb={key:0,class:"absolute inset-0 rounded-2xl bg-gradient-to-br from-yellow-500/10 via-transparent to-transparent pointer-events-none"},jb=["title"],Ib={class:"relative aspect-square rounded-xl bg-white mb-3 overflow-hidden flex items-center justify-center"},Rb=["src","alt"],Fb=["src","alt"],Nb={class:"absolute top-2 left-2 flex items-center gap-1"},Bb={class:"absolute bottom-2 right-2"},Vb={class:"relative w-8 h-8"},Ub={class:"w-8 h-8 -rotate-90 transform"},zb=["stroke","stroke-dasharray"],Hb={class:"absolute inset-0 flex items-center justify-center text-[8px] font-bold text-white drop-shadow"},Gb={key:2,class:"absolute top-2 right-2 w-6 h-6 rounded-full bg-gradient-to-br from-yellow-400 to-amber-500 flex items-center justify-center shadow-lg shadow-yellow-500/40 animate-pulse"},Wb={class:"flex-1 min-w-0"},qb={class:"flex items-center gap-2 mb-1"},Kb={class:"text-sm font-bold text-white truncate flex-1"},Yb={key:0,class:"text-[10px] text-purple-400/80 truncate mb-1"},Zb={class:"text-xs text-gray-500 truncate mb-2"},Xb={class:"flex items-center justify-between gap-2"},Qb={class:"text-sm"},Jb={class:"flex items-center gap-1"},e1={class:"flex gap-0.5 h-3"},t1={class:"text-[10px] font-medium text-gray-400"},s1={key:1,class:"mt-2 flex items-center gap-1.5 p-1.5 rounded-lg bg-gray-800/60"},n1={class:"text-[9px] text-gray-400 truncate"},o1={key:2,class:"absolute -inset-0.5 rounded-2xl bg-gradient-to-r from-spider-green-500 to-emerald-500 opacity-20 blur-sm pointer-events-none"},r1=Pe({__name:"LabPlantCard",props:{plant:{},active:{type:Boolean}},emits:["click"],setup(s,{emit:n}){const r=s,o=n,i=U(()=>Fe[r.plant.status]||Fe.germinating),d=U(()=>yo[r.plant.selection_status]||yo.active),g=U(()=>{const k=r.plant.status;return["germinating","seedling"].includes(k)?"/lab/plants/germ.png":["early_veg","mid_veg","late_veg"].includes(k)?"/lab/plants/veg.png":k==="pre_flower"?"/lab/plants/preflower.png":["early_flower","mid_flower"].includes(k)?"/lab/plants/prebuds.png":["late_flower","flush"].includes(k)?"/lab/plants/buds.png":["harvest","drying","curing"].includes(k)?"/lab/plants/croptime.png":"/lab/plants/veg.png"}),f=U(()=>{const k=r.plant.selection_status;return k==="keeper"?{label:"Elite",icon:ct,color:"text-yellow-400",bg:"bg-yellow-500/30"}:k==="warning"||k==="cull_candidate"?{label:"At Risk",icon:hs,color:"text-orange-400",bg:"bg-orange-500/30"}:k==="watch"?{label:"Watch",icon:ks,color:"text-yellow-400",bg:"bg-yellow-500/30"}:{label:"Healthy",icon:St,color:"text-green-400",bg:"bg-green-500/30"}}),m=U(()=>{const k=i.value;if(!k.minDays||!k.maxDays)return 0;const p=(k.minDays+k.maxDays)/2,T=r.plant.current_day/p*100;return Math.min(100,T)}),b=U(()=>m.value>=100?"#ef4444":m.value>=80?"#f59e0b":"#22c55e"),x=U(()=>(r.plant.current_day-1)%7+1),_=U(()=>{const k=r.plant.final_score||0;return k>=90?"bg-gradient-to-r from-spider-green-500/30 to-emerald-500/30 text-spider-green-400":k>=80?"bg-gradient-to-r from-green-500/30 to-lime-500/30 text-green-400":k>=70?"bg-gradient-to-r from-lime-500/30 to-yellow-500/30 text-lime-400":k>=60?"bg-gradient-to-r from-yellow-500/30 to-amber-500/30 text-yellow-400":"bg-gradient-to-r from-orange-500/30 to-red-500/30 text-orange-400"}),C=U(()=>(r.plant.current_day||0)>3?{text:"Add an observation",icon:pt,color:"text-teal-400"}:!r.plant.final_score&&["late_flower","flush","harvest"].includes(r.plant.status)?{text:"Score this plant",icon:Je,color:"text-purple-400"}:null);return(k,p)=>(a(),l("button",{onClick:p[0]||(p[0]=T=>o("click")),"data-tutorial":"plant-card",class:V(["group relative flex flex-col p-3 rounded-2xl text-left transition-all duration-300",s.active?"bg-spider-green-500/10 border-2 border-spider-green-500/50 shadow-lg shadow-spider-green-500/10":"bg-gray-800/40 backdrop-blur-sm border border-gray-700/50 hover:border-gray-600/50 hover:bg-gray-800/60","hover:shadow-xl hover:scale-[1.02]"])},[s.plant.is_keeper?(a(),l("div",Lb)):j("",!0),e("div",{class:V(["absolute top-2 right-2 w-2.5 h-2.5 rounded-full z-10",t(d).color.replace("text-","bg-"),s.plant.selection_status==="keeper"&&"animate-pulse"]),title:t(d).label},null,10,jb),e("div",Ib,[s.plant.cover_photo?(a(),l("img",{key:0,src:s.plant.cover_photo,alt:s.plant.plant_code,class:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"},null,8,Rb)):(a(),l("img",{key:1,src:t(g),alt:t(i).label,class:"w-full h-full object-contain p-2"},null,8,Fb)),e("div",Nb,[e("div",{class:V(["flex items-center gap-1 px-1.5 py-0.5 rounded-lg backdrop-blur-md text-[9px] font-bold",t(f).bg])},[(a(),pe(_t(t(f).icon),{class:"w-3 h-3"})),e("span",{class:V(t(f).color)},c(t(f).label),3)],2)]),e("div",Bb,[e("div",Vb,[(a(),l("svg",Ub,[p[1]||(p[1]=e("circle",{cx:"16",cy:"16",r:"14",fill:"none",stroke:"rgba(255,255,255,0.2)","stroke-width":"3"},null,-1)),e("circle",{cx:"16",cy:"16",r:"14",fill:"none",stroke:t(b),"stroke-width":"3","stroke-linecap":"round","stroke-dasharray":`${t(m)*.88} 88`,class:"transition-all duration-500"},null,8,zb)])),e("span",Hb,c(Math.round(t(m)))+"% ",1)])]),s.plant.is_keeper?(a(),l("div",Gb,[I(t(ct),{class:"w-3.5 h-3.5 text-white"})])):j("",!0)]),e("div",Wb,[e("div",qb,[e("h4",Kb,c(s.plant.plant_code),1),s.plant.final_score?(a(),l("div",{key:0,class:V(["flex items-center gap-0.5 px-1.5 py-0.5 rounded-lg text-[10px] font-bold",t(_)])},[I(t(ss),{class:"w-2.5 h-2.5"}),ce(" "+c(s.plant.final_score.toFixed(1)),1)],2)):j("",!0)]),s.plant.pheno_label?(a(),l("p",Yb,' "'+c(s.plant.pheno_label)+'" ',1)):j("",!0),e("p",Zb,c(s.plant.strain_name||"Unknown strain"),1),e("div",Xb,[e("div",{class:V(["flex items-center gap-1.5 px-2 py-1 rounded-lg",`bg-${t(i).bgColor}`])},[e("span",Qb,c(t(i).icon),1),e("span",{class:V(["text-[10px] font-medium",`text-${t(i).color}`])},c(t(i).shortLabel),3)],2),e("div",Jb,[e("div",e1,[(a(),l(Q,null,le(7,T=>e("div",{key:T,class:V(["w-0.5 rounded-full transition-all",T<=t(x)?"bg-spider-green-400":"bg-gray-700"]),style:Te({height:`${Math.min(100,40+T*10)}%`})},null,6)),64))]),e("span",t1,"D"+c(s.plant.current_day),1)])]),t(C)?(a(),l("div",s1,[(a(),pe(_t(t(C).icon),{class:V(["w-3 h-3",t(C).color])},null,8,["class"])),e("span",n1,c(t(C).text),1)])):j("",!0)]),s.plant.sex!=="unknown"?(a(),l("div",{key:1,class:V(["absolute bottom-3 right-3 w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold",s.plant.sex==="female"?"bg-pink-500/20 text-pink-400 ring-2 ring-pink-500/30":s.plant.sex==="male"?"bg-blue-500/20 text-blue-400 ring-2 ring-blue-500/30":"bg-orange-500/20 text-orange-400 ring-2 ring-orange-500/30"])},c(s.plant.sex==="female"?"♀":s.plant.sex==="male"?"♂":"⚥"),3)):j("",!0),s.active?(a(),l("div",o1)):j("",!0)],2))}}),a1=Object.assign(r1,{__name:"LabPlantCard"}),l1={class:"w-10 h-10 rounded-xl bg-gray-700/50 flex items-center justify-center text-xl shrink-0"},i1={class:"flex-1 min-w-0"},d1={class:"flex items-center gap-2 mb-0.5"},c1={class:"font-semibold text-white"},u1={key:0,class:"text-xs text-gray-500"},p1={key:1,class:"text-yellow-400"},g1={class:"flex items-center gap-2 text-xs text-gray-400"},f1={key:0,class:"text-gray-600"},m1={key:1},h1={key:1,class:"text-right shrink-0"},b1=Pe({__name:"LabPlantListRow",props:{plant:{},active:{type:Boolean}},emits:["click"],setup(s,{emit:n}){const r=s,o=n,i=U(()=>Fe[r.plant.status]),d=U(()=>yo[r.plant.selection_status]),g=U(()=>{const f=r.plant.final_score||0;return f>=90?"text-spider-green-400":f>=80?"text-green-400":f>=70?"text-lime-400":f>=60?"text-yellow-400":"text-orange-400"});return(f,m)=>(a(),l("button",{onClick:m[0]||(m[0]=b=>o("click")),class:V(["group w-full flex items-center gap-3 p-3 rounded-xl transition-all duration-200 text-left",s.active?"bg-spider-green-500/10 border-2 border-spider-green-500/50":"bg-gray-800/40 hover:bg-gray-800/60 border border-gray-700/50 hover:border-gray-600/50"])},[e("div",l1,c(t(i).icon),1),e("div",i1,[e("div",d1,[e("span",c1,c(s.plant.plant_code),1),s.plant.pheno_label?(a(),l("span",u1,'"'+c(s.plant.pheno_label)+'"',1)):j("",!0),s.plant.is_keeper?(a(),l("span",p1,"★")):j("",!0)]),e("div",g1,[e("span",null,c(s.plant.strain_name||"Unknown"),1),m[1]||(m[1]=e("span",{class:"text-gray-600"},"•",-1)),e("span",{class:V(`text-${t(i).color}`)},c(t(i).label),3),m[2]||(m[2]=e("span",{class:"text-gray-600"},"•",-1)),e("span",null,"Day "+c(s.plant.current_day),1),s.plant.zone_name?(a(),l("span",f1,"•")):j("",!0),s.plant.zone_name?(a(),l("span",m1,c(s.plant.zone_name),1)):j("",!0)])]),s.plant.sex!=="unknown"?(a(),l("div",{key:0,class:V(["w-7 h-7 rounded-full flex items-center justify-center shrink-0",s.plant.sex==="female"?"bg-pink-500/20 text-pink-400":s.plant.sex==="male"?"bg-blue-500/20 text-blue-400":"bg-orange-500/20 text-orange-400"])},c(s.plant.sex==="female"?"♀":s.plant.sex==="male"?"♂":"⚥"),3)):j("",!0),s.plant.final_score?(a(),l("div",h1,[e("span",{class:V(["text-lg font-bold",t(g)])},c(s.plant.final_score.toFixed(1)),3)])):j("",!0),e("div",{class:V(["w-2.5 h-2.5 rounded-full shrink-0",t(d).color.replace("text-","bg-")])},null,2),I(t(nt),{class:"w-5 h-5 text-gray-600 group-hover:text-gray-400 transition-colors shrink-0"})],2))}}),v1=Object.assign(b1,{__name:"LabPlantListRow"}),x1={class:"p-4 rounded-2xl bg-gradient-to-br from-gray-800/60 to-gray-900/60 border border-gray-700/50 backdrop-blur-md"},y1={class:"flex items-center gap-3 mb-4"},_1={class:"text-xs text-gray-400"},w1={class:"mb-4"},k1={class:"flex items-center justify-between text-[10px] text-gray-500 mb-1"},$1={class:"h-2 rounded-full bg-gray-700/50 overflow-hidden"},C1={class:"grid grid-cols-3 gap-2 mb-4"},S1={class:"p-2 rounded-xl bg-gray-800/50 text-center"},P1={class:"text-lg font-bold text-red-400"},E1={class:"p-2 rounded-xl bg-gray-800/50 text-center"},T1={class:"text-lg font-bold text-blue-400"},A1={class:"p-2 rounded-xl bg-gray-800/50 text-center"},D1={class:"text-lg font-bold text-teal-400"},M1={class:"space-y-2"},O1={class:"text-xs font-semibold text-gray-400 uppercase tracking-wider flex items-center gap-2"},L1={class:"text-xs font-medium text-white"},j1={class:"text-[10px] text-gray-400"},I1={class:"mt-4 pt-4 border-t border-gray-700/50"},R1={class:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2 flex items-center gap-2"},F1={class:"space-y-1.5"},N1=["onUpdate:modelValue"],B1={key:0,class:"mt-4 p-3 rounded-xl bg-gradient-to-r from-purple-900/30 to-pink-900/30 border border-purple-500/20"},V1={class:"flex items-center justify-between"},U1={class:"flex items-center gap-2"},z1={class:"text-lg"},H1={class:"text-xs font-medium text-white"},G1={class:"text-[10px] text-gray-400"},W1=["disabled"],q1=Pe({__name:"LabStageGuide",props:{plant:{}},emits:["advanceStage"],setup(s,{emit:n}){const r=s,o=n,i=U(()=>Fe[r.plant.status]||Fe.germinating),d=U(()=>{const _=i.value;if(!_.minDays||!_.maxDays)return 0;const C=(_.minDays+_.maxDays)/2;return r.plant.current_day/C*100}),g=U(()=>{const _=r.plant.status,C={germinating:{temp:"24-28°C",humidity:"70-80%",vpd:"0.4-0.8"},seedling:{temp:"22-26°C",humidity:"65-75%",vpd:"0.5-0.9"},early_veg:{temp:"22-28°C",humidity:"55-70%",vpd:"0.8-1.2"},mid_veg:{temp:"22-28°C",humidity:"50-65%",vpd:"0.9-1.3"},late_veg:{temp:"22-28°C",humidity:"50-60%",vpd:"1.0-1.4"},pre_flower:{temp:"20-26°C",humidity:"45-55%",vpd:"1.0-1.4"},early_flower:{temp:"20-26°C",humidity:"40-50%",vpd:"1.2-1.5"},mid_flower:{temp:"20-26°C",humidity:"40-50%",vpd:"1.2-1.5"},late_flower:{temp:"18-24°C",humidity:"35-45%",vpd:"1.3-1.6"},flush:{temp:"18-24°C",humidity:"35-45%",vpd:"1.3-1.6"},harvest:{temp:"18-22°C",humidity:"45-55%",vpd:"—"},drying:{temp:"18-22°C",humidity:"55-65%",vpd:"—"},curing:{temp:"18-22°C",humidity:"58-65%",vpd:"—"}};return C[_]??C.early_veg}),f=U(()=>{const _=r.plant.status,C={germinating:[{title:"Keep it dark",text:"Seeds germinate best in darkness until taproot emerges",icon:Xt,color:"text-yellow-400"},{title:"High humidity",text:"Use a dome or paper towel method to maintain moisture",icon:Js,color:"text-blue-400"},{title:"Watch for taproot",text:"Plant when root is 1-2cm long, root pointing down",icon:Ne,color:"text-green-400"}],seedling:[{title:"Gentle lighting",text:"Start with 18-24h light at low intensity, increase gradually",icon:Xt,color:"text-yellow-400"},{title:"Don't overwater",text:"Let medium dry slightly between waterings",icon:Fn,color:"text-blue-400"},{title:"No nutrients yet",text:"Wait until 2-3 true leaf sets before light feeding",icon:Je,color:"text-purple-400"}],early_veg:[{title:"Increase light",text:"Gradually increase intensity as plant establishes",icon:Xt,color:"text-yellow-400"},{title:"Start training",text:"Begin LST once you have 4-5 nodes",icon:ds,color:"text-orange-400"},{title:"Light nutrients",text:"Start with 25-50% recommended dose",icon:Je,color:"text-purple-400"}],mid_veg:[{title:"Full veg nutrients",text:"Increase to full vegetative feeding schedule",icon:Je,color:"text-purple-400"},{title:"Continue training",text:"Maintain canopy evenness with LST/topping",icon:ds,color:"text-orange-400"},{title:"Check roots",text:"Watch for root bound signs if in containers",icon:Ne,color:"text-green-400"}],late_veg:[{title:"Final defoliation",text:"Remove large fan leaves blocking bud sites",icon:ds,color:"text-orange-400"},{title:"Pre-flower check",text:"Watch for sex signs before flip",icon:pt,color:"text-teal-400"},{title:"Prepare for flip",text:"Top dress or prepare bloom nutrients",icon:Je,color:"text-purple-400"}],pre_flower:[{title:"12/12 light cycle",text:"Maintain strict light schedule, no interruptions",icon:Xt,color:"text-yellow-400"},{title:"Switch to bloom",text:"Transition to bloom nutrients over 1-2 weeks",icon:Je,color:"text-purple-400"},{title:"Sex confirmation",text:"Confirm female before heavy investment",icon:pt,color:"text-teal-400"}],early_flower:[{title:"Stretch management",text:"Plants may double in height, adjust lights",icon:Xt,color:"text-yellow-400"},{title:"Lollipop lower",text:"Remove lower growth that won't get light",icon:ds,color:"text-orange-400"},{title:"Increase P-K",text:"Boost phosphorus and potassium for bud development",icon:Je,color:"text-purple-400"}],mid_flower:[{title:"Peak nutrients",text:"This is when buds fatten most, maximize feeding",icon:Je,color:"text-purple-400"},{title:"Support branches",text:"Heavy buds may need stakes or nets",icon:Ne,color:"text-green-400"},{title:"Watch humidity",text:"Lower RH to prevent mold in dense buds",icon:Js,color:"text-blue-400"}],late_flower:[{title:"Reduce nitrogen",text:"Cut back on N to improve flavor and color",icon:Je,color:"text-purple-400"},{title:"Check trichomes",text:"Start monitoring with magnification",icon:pt,color:"text-teal-400"},{title:"Prepare for flush",text:"Plan flush timing based on trichome development",icon:Fn,color:"text-blue-400"}],flush:[{title:"Plain water only",text:"No nutrients, pH balanced water for 7-14 days",icon:Fn,color:"text-blue-400"},{title:"Monitor trichomes",text:"70-80% cloudy with some amber is ideal",icon:pt,color:"text-teal-400"},{title:"Prepare drying room",text:"Set up space with proper temp/humidity control",icon:Ne,color:"text-green-400"}],harvest:[{title:"Harvest in dark",text:"Cut at end of dark period for best terpenes",icon:Xt,color:"text-yellow-400"},{title:"Wet trim vs dry",text:"Choose method based on humidity and preference",icon:ds,color:"text-orange-400"},{title:"Document everything",text:"Take final photos and notes for your records",icon:pt,color:"text-teal-400"}],drying:[{title:"Slow and steady",text:"Aim for 10-14 days, avoid rapid drying",icon:Js,color:"text-blue-400"},{title:"Monitor daily",text:"Check for mold and adjust conditions as needed",icon:pt,color:"text-teal-400"},{title:"Stem snap test",text:"Ready when stems snap but don't break clean",icon:Ne,color:"text-green-400"}],curing:[{title:"Burp daily",text:"Open jars for 15-30 min daily for first 2 weeks",icon:Js,color:"text-blue-400"},{title:"Monitor humidity",text:"Keep jars at 58-62% RH with Boveda if needed",icon:Ne,color:"text-green-400"},{title:"Patience pays",text:"Minimum 2 weeks, 4-8 weeks is better",icon:Je,color:"text-purple-400"}]};return C[_]||C.early_veg}),m=W([]);He(()=>r.plant.status,_=>{const C={germinating:["Seed is moist","Temperature is 24-28°C","Taproot visible"],seedling:["First true leaves appeared","Light set to 18-24h","No overwatering"],early_veg:["Started light nutrients","Began LST training","Checked for pests"],mid_veg:["Topped/FIMed if planned","Maintaining even canopy","Roots not bound"],late_veg:["Final defoliation done","Sex confirmed","Ready for flip"],pre_flower:["Light schedule is 12/12","Bloom nutrients started","No light leaks"],early_flower:["Stretch managed","Lower growth removed","Support in place"],mid_flower:["Peak feeding schedule","Branches supported","Humidity controlled"],late_flower:["Trichomes checked daily","Nitrogen reduced","Flush planned"],flush:["Plain water only","Monitoring trichomes","Drying space ready"],harvest:["Harvested at dark period","Documented final state","Trimming complete"],drying:["Temp 18-22°C","Humidity 55-65%","Checking for mold daily"],curing:["Jars burped daily","Humidity monitored","Patience maintained"]};m.value=(C[_]||[]).map(k=>({text:k,checked:!1}))},{immediate:!0});const b=U(()=>{const _=Nn.indexOf(r.plant.status);if(_<0||_>=Nn.length-1)return null;const C=Nn[_+1];return Fe[C]}),x=U(()=>{const _=i.value;return _.maxDays?Math.max(0,_.maxDays-r.plant.current_day):0});return(_,C)=>(a(),l("div",x1,[e("div",y1,[e("div",{class:V(["w-12 h-12 rounded-xl flex items-center justify-center text-2xl",`bg-${t(i).bgColor}`])},c(t(i).icon),3),e("div",null,[e("h3",{class:V(["text-lg font-bold",`text-${t(i).color}`])},c(t(i).label),3),e("p",_1,"Day "+c(s.plant.current_day)+" of approx. "+c(t(i).maxDays)+" days",1)])]),e("div",w1,[e("div",k1,[C[1]||(C[1]=e("span",null,"Stage Progress",-1)),e("span",null,c(Math.round(t(d)))+"%",1)]),e("div",$1,[e("div",{class:V(["h-full rounded-full transition-all duration-500",t(d)>=100?"bg-gradient-to-r from-red-500 to-orange-500":t(d)>=80?"bg-gradient-to-r from-amber-500 to-yellow-500":"bg-gradient-to-r from-spider-green-500 to-emerald-500"]),style:Te({width:`${Math.min(100,t(d))}%`})},null,6)])]),e("div",C1,[e("div",S1,[e("p",P1,c(t(g).temp),1),C[2]||(C[2]=e("p",{class:"text-[9px] text-gray-500"},"Target Temp",-1))]),e("div",E1,[e("p",T1,c(t(g).humidity),1),C[3]||(C[3]=e("p",{class:"text-[9px] text-gray-500"},"Target RH",-1))]),e("div",A1,[e("p",D1,c(t(g).vpd),1),C[4]||(C[4]=e("p",{class:"text-[9px] text-gray-500"},"Target VPD",-1))])]),e("div",M1,[e("h4",O1,[I(t(wt),{class:"w-3.5 h-3.5 text-yellow-400"}),ce(" Tips for "+c(t(i).label),1)]),(a(!0),l(Q,null,le(t(f),(k,p)=>(a(),l("div",{key:p,class:"flex items-start gap-2 p-2 rounded-xl bg-gray-800/30 hover:bg-gray-800/50 transition-colors"},[(a(),pe(_t(k.icon),{class:V(["w-4 h-4 shrink-0 mt-0.5",k.color])},null,8,["class"])),e("div",null,[e("p",L1,c(k.title),1),e("p",j1,c(k.text),1)])]))),128))]),e("div",I1,[e("h4",R1,[I(t(or),{class:"w-3.5 h-3.5 text-spider-green-400"}),C[5]||(C[5]=ce(" Stage Checklist ",-1))]),e("div",F1,[(a(!0),l(Q,null,le(t(m),(k,p)=>(a(),l("label",{key:p,class:"flex items-center gap-2 p-2 rounded-lg hover:bg-gray-800/30 cursor-pointer transition-colors"},[ye(e("input",{type:"checkbox","onUpdate:modelValue":T=>k.checked=T,class:"w-4 h-4 rounded border-gray-600 bg-gray-700 text-spider-green-500 focus:ring-spider-green-500 focus:ring-offset-0 focus:ring-offset-transparent"},null,8,N1),[[td,k.checked]]),e("span",{class:V(["text-xs",k.checked?"text-gray-500 line-through":"text-gray-300"])},c(k.text),3)]))),128))])]),t(b)?(a(),l("div",B1,[e("div",V1,[e("div",U1,[e("span",z1,c(t(b).icon),1),e("div",null,[e("p",H1,"Next: "+c(t(b).label),1),e("p",G1,"Ready in ~"+c(t(x))+" days",1)])]),e("button",{onClick:C[0]||(C[0]=k=>o("advanceStage")),disabled:t(d)<80,class:V(["px-3 py-1.5 rounded-lg text-xs font-medium transition-all",t(d)>=80?"bg-purple-600 hover:bg-purple-500 text-white":"bg-gray-700 text-gray-500 cursor-not-allowed"])}," Advance Stage ",10,W1)])])):j("",!0)]))}}),K1=Object.assign(q1,{__name:"LabStageGuide"}),Y1={class:"max-w-[90vw] max-h-[85vh] relative"},Z1=["src","alt"],X1={class:"absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/80 to-transparent"},Q1={class:"flex items-center justify-between max-w-4xl mx-auto"},J1={class:"text-white text-sm"},ev={key:0,class:"flex items-center gap-2"},tv=["onClick"],sv=["src"],nv={key:2},ov={class:"bg-gray-800 rounded-2xl p-6 max-w-sm mx-4 shadow-2xl"},rv={class:"flex gap-3"},av=Pe({__name:"LabPhotoLightbox",props:{show:{type:Boolean},photos:{},initialIndex:{default:0},canDelete:{type:Boolean,default:!1}},emits:["close","delete"],setup(s,{emit:n}){const r=s,o=n,i=W(r.initialIndex),d=W(!1);He(()=>r.initialIndex,x=>{i.value=x}),He(()=>r.show,x=>{x&&(i.value=r.initialIndex)});function g(){i.value>0&&i.value--}function f(){i.value<r.photos.length-1&&i.value++}function m(){d.value=!0}function b(){o("delete",i.value,r.photos[i.value]),d.value=!1,i.value>=r.photos.length-1&&i.value>0&&i.value--,r.photos.length<=1&&o("close")}return ot(()=>{const x=_=>{r.show&&(_.key==="Escape"&&o("close"),_.key==="ArrowLeft"&&g(),_.key==="ArrowRight"&&f())};window.addEventListener("keydown",x),Ft(()=>window.removeEventListener("keydown",x))}),(x,_)=>(a(),pe(Qe,{to:"body"},[I(Ke,{"enter-active-class":"transition-all duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-all duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:je(()=>[s.show?(a(),l("div",{key:0,class:"fixed inset-0 z-[100] flex items-center justify-center bg-black/95",onClick:_[3]||(_[3]=Ve(C=>o("close"),["self"]))},[e("button",{onClick:_[0]||(_[0]=C=>o("close")),class:"absolute top-4 right-4 p-3 rounded-full bg-gray-800/80 hover:bg-gray-700 text-white transition-colors z-10"},[I(t(ze),{class:"w-6 h-6"})]),s.photos.length>1&&t(i)>0?(a(),l("button",{key:0,onClick:g,class:"absolute left-4 p-3 rounded-full bg-gray-800/80 hover:bg-gray-700 text-white transition-colors"},[I(t(os),{class:"w-6 h-6"})])):j("",!0),s.photos.length>1&&t(i)<s.photos.length-1?(a(),l("button",{key:1,onClick:f,class:"absolute right-4 p-3 rounded-full bg-gray-800/80 hover:bg-gray-700 text-white transition-colors"},[I(t(nt),{class:"w-6 h-6"})])):j("",!0),e("div",Y1,[e("img",{src:s.photos[t(i)],alt:`Photo ${t(i)+1}`,class:"max-w-full max-h-[85vh] object-contain rounded-lg"},null,8,Z1)]),e("div",X1,[e("div",Q1,[e("div",J1,c(t(i)+1)+" / "+c(s.photos.length),1),s.photos.length>1?(a(),l("div",ev,[(a(!0),l(Q,null,le(s.photos,(C,k)=>(a(),l("button",{key:k,onClick:p=>i.value=k,class:V(["w-12 h-12 rounded-lg overflow-hidden border-2 transition-all",k===t(i)?"border-spider-green-500":"border-transparent opacity-60 hover:opacity-100"])},[e("img",{src:C,class:"w-full h-full object-cover"},null,8,sv)],10,tv))),128))])):j("",!0),s.canDelete?(a(),l("button",{key:1,onClick:m,class:"flex items-center gap-2 px-4 py-2 rounded-lg bg-red-600/80 hover:bg-red-600 text-white text-sm font-medium transition-colors"},[I(t(Tt),{class:"w-4 h-4"}),_[4]||(_[4]=ce(" Delete ",-1))])):(a(),l("div",nv))])]),I(Ke,{"enter-active-class":"transition-all duration-150","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition-all duration-100","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:je(()=>[t(d)?(a(),l("div",{key:0,class:"absolute inset-0 flex items-center justify-center bg-black/80",onClick:_[2]||(_[2]=Ve(C=>d.value=!1,["self"]))},[e("div",ov,[_[5]||(_[5]=e("h3",{class:"text-lg font-semibold text-white mb-2"},"Delete Photo?",-1)),_[6]||(_[6]=e("p",{class:"text-gray-400 mb-6"},"This action cannot be undone.",-1)),e("div",rv,[e("button",{onClick:_[1]||(_[1]=C=>d.value=!1),class:"flex-1 px-4 py-2 rounded-lg bg-gray-700 hover:bg-gray-600 text-white font-medium transition-colors"}," Cancel "),e("button",{onClick:b,class:"flex-1 px-4 py-2 rounded-lg bg-red-600 hover:bg-red-500 text-white font-medium transition-colors"}," Delete ")])])])):j("",!0)]),_:1})])):j("",!0)]),_:1})]))}}),lv=Object.assign(av,{__name:"LabPhotoLightbox"}),iv={class:"space-y-4"},dv={key:0,class:"flex flex-col items-center justify-center py-12 text-center"},cv={class:"w-16 h-16 rounded-2xl bg-gray-800/50 flex items-center justify-center mb-4"},uv={class:"text-sm text-gray-500 max-w-xs mb-4"},pv={key:1,class:"space-y-3"},gv=["onClick"],fv={class:"flex items-center justify-between px-4 py-3 border-b border-gray-700/30"},mv={class:"flex items-center gap-3 min-w-0"},hv={key:0,class:"flex items-center gap-2 shrink-0"},bv={class:"text-lg"},vv={class:"font-medium text-white"},xv={class:"text-sm text-gray-300"},yv={class:"text-xs text-gray-500"},_v=["onClick"],wv={class:"px-4 py-3 space-y-3"},kv={key:0,class:"flex flex-wrap gap-4 text-sm"},$v={key:0,class:"flex items-center gap-1.5"},Cv={key:1,class:"flex items-center gap-1.5"},Sv={class:"text-spider-green-400 font-medium"},Pv={key:2,class:"flex items-center gap-1.5"},Ev={class:"text-white font-medium"},Tv={key:1,class:"flex flex-wrap gap-2"},Av={key:0,class:"inline-flex items-center gap-1 px-2 py-1 rounded bg-red-500/20 text-red-300 text-xs"},Dv={key:1,class:"inline-flex items-center gap-1 px-2 py-1 rounded bg-orange-500/20 text-orange-300 text-xs"},Mv={key:2,class:"inline-flex items-center gap-1 px-2 py-1 rounded bg-yellow-500/20 text-yellow-300 text-xs"},Ov={key:2,class:"text-sm"},Lv={class:"text-gray-300"},jv={key:3,class:"text-sm"},Iv={class:"text-gray-300"},Rv={key:4,class:"text-sm"},Fv={class:"text-gray-300"},Nv={key:5,class:"flex flex-wrap items-center gap-2 text-sm"},Bv={key:6,class:"flex gap-2 flex-wrap"},Vv=["onClick"],Uv=["src"],zv={key:0,class:"flex items-center text-xs text-gray-500"},Hv={key:7,class:"text-sm text-gray-500"},Gv=Pe({__name:"LabObservationTimeline",props:{observations:{},showAllPlants:{type:Boolean,default:!1}},emits:["addObservation","selectObservation","editObservation","deletePhoto"],setup(s,{emit:n}){const r=n,o=W(!1),i=W([]),d=W(0),g=W("");function f(w,$){i.value=w.photos||[],d.value=$,g.value=w.id,o.value=!0}function m(w,$){r("deletePhoto",g.value,w,$)}function b(w){return!!(w.height_cm||w.health_score||w.vigor_score)}function x(w){return!!(w.pest_issues||w.disease_issues||w.deficiency_issues)}function _(w){return!!(w.general_notes||w.watering_notes||w.feeding_notes||w.training_applied?.length||w.photos?.length||b(w)||x(w))}function C(w){if(!w)return"";const $=new Date(w),A=new Date().getTime()-$.getTime(),y=Math.floor(A/(1e3*60*60*24));return y===0?"Today":y===1?"Yesterday":y<7?`${y}d ago`:$.toLocaleDateString("en-US",{month:"short",day:"numeric"})}function k(w){return w&&Fe[w]?.icon||"🌱"}function p(w){return Fe[w]?.shortLabel||w}function T(w){const $=Fe[w];return $?`bg-${$.bgColor} text-${$.color}`:"bg-gray-700 text-gray-400"}function M(w){return w>=8?"text-spider-green-400":w>=6?"text-lime-400":w>=4?"text-yellow-400":"text-red-400"}function P(w){return w?{general:"General check",watering:"Watering",nutrients:"Nutrients",feeding:"Feeding",training:"Training",problem:"Problem logged",transplant:"Transplant",photo:"Photo log",photo_only:"Photo only"}[w]||w:""}return(w,$)=>{const S=lv;return a(),l("div",iv,[s.observations.length===0?(a(),l("div",dv,[e("div",cv,[I(t(Dn),{class:"w-8 h-8 text-gray-600"})]),$[3]||($[3]=e("h4",{class:"text-base font-medium text-gray-300 mb-2"},"No observations yet",-1)),e("p",uv,c(s.showAllPlants?"Start documenting your plants":"Track this plant's journey"),1),e("button",{onClick:$[0]||($[0]=A=>r("addObservation")),class:"flex items-center gap-2 px-4 py-2 rounded-lg bg-spider-green-600 hover:bg-spider-green-500 text-white text-sm font-medium transition-colors"},[I(t(st),{class:"w-4 h-4"}),$[2]||($[2]=ce(" Add Entry ",-1))])])):(a(),l("div",pv,[(a(!0),l(Q,null,le(s.observations,A=>(a(),l("div",{key:A.id,onClick:y=>r("selectObservation",A),class:"bg-gray-800/40 rounded-xl border border-gray-700/50 overflow-hidden hover:border-gray-600/50 transition-colors cursor-pointer"},[e("div",fv,[e("div",mv,[s.showAllPlants&&A.plant_code?(a(),l("div",hv,[e("span",bv,c(k(A.stage||A.plant_status)),1),e("span",vv,c(A.plant_code),1),$[4]||($[4]=e("span",{class:"text-gray-500"},"·",-1))])):j("",!0),e("span",xv,c(C(A.observed_at)),1),e("span",yv,"D"+c(A.day_number||"--"),1),A.stage?(a(),l("span",{key:1,class:V(["text-xs px-2 py-0.5 rounded",T(A.stage)])},c(p(A.stage)),3)):j("",!0)]),e("button",{onClick:Ve(y=>r("editObservation",A),["stop"]),class:"p-1.5 rounded hover:bg-gray-700/50 text-gray-500 hover:text-white transition-colors"},[I(t(_s),{class:"w-4 h-4"})],8,_v)]),e("div",wv,[b(A)?(a(),l("div",kv,[A.health_score?(a(),l("div",$v,[I(t(At),{class:"w-4 h-4 text-pink-400"}),$[5]||($[5]=e("span",{class:"text-gray-400"},"Health:",-1)),e("span",{class:V([M(A.health_score),"font-medium"])},c(A.health_score)+"/10",3)])):j("",!0),A.vigor_score?(a(),l("div",Cv,[I(t(Ys),{class:"w-4 h-4 text-yellow-400"}),$[6]||($[6]=e("span",{class:"text-gray-400"},"Vigor:",-1)),e("span",Sv,c(A.vigor_score)+"/10",1)])):j("",!0),A.height_cm?(a(),l("div",Pv,[I(t(hi),{class:"w-4 h-4 text-blue-400"}),$[7]||($[7]=e("span",{class:"text-gray-400"},"Height:",-1)),e("span",Ev,c(A.height_cm)+"cm",1)])):j("",!0)])):j("",!0),x(A)?(a(),l("div",Tv,[A.pest_issues?(a(),l("span",Av," 🐛 Pests ")):j("",!0),A.disease_issues?(a(),l("span",Dv," 🦠 Disease ")):j("",!0),A.deficiency_issues?(a(),l("span",Mv," 🍂 Deficiency ")):j("",!0)])):j("",!0),A.general_notes?(a(),l("div",Ov,[$[8]||($[8]=e("span",{class:"text-blue-400"},"📋 ",-1)),e("span",Lv,c(A.general_notes),1)])):j("",!0),A.watering_notes?(a(),l("div",jv,[$[9]||($[9]=e("span",{class:"text-cyan-400"},"💧 Watering: ",-1)),e("span",Iv,c(A.watering_notes),1)])):j("",!0),A.feeding_notes?(a(),l("div",Rv,[$[10]||($[10]=e("span",{class:"text-green-400"},"🧪 Feeding: ",-1)),e("span",Fv,c(A.feeding_notes),1)])):j("",!0),A.training_applied?.length?(a(),l("div",Nv,[$[11]||($[11]=e("span",{class:"text-purple-400"},"✂️ Training:",-1)),(a(!0),l(Q,null,le(A.training_applied,y=>(a(),l("span",{key:y,class:"px-2 py-0.5 rounded bg-purple-500/20 text-purple-300 text-xs"},c(y),1))),128))])):j("",!0),A.photos?.length?(a(),l("div",Bv,[(a(!0),l(Q,null,le(A.photos.slice(0,4),(y,h)=>(a(),l("button",{key:h,onClick:u=>f(A,h),class:"w-16 h-16 rounded-lg overflow-hidden bg-gray-700 hover:ring-2 hover:ring-spider-green-500/50 transition-all"},[e("img",{src:y,class:"w-full h-full object-cover"},null,8,Uv)],8,Vv))),128)),A.photos.length>4?(a(),l("span",zv," +"+c(A.photos.length-4)+" more ",1)):j("",!0)])):j("",!0),_(A)?j("",!0):(a(),l("div",Hv,c(P(A.obs_type)),1))])],8,gv))),128))])),I(S,{show:t(o),photos:t(i),"initial-index":t(d),"can-delete":!0,onClose:$[1]||($[1]=A=>o.value=!1),onDelete:m},null,8,["show","photos","initial-index"])])}}}),yi=Object.assign(Gv,{__name:"LabObservationTimeline"}),Wv={class:"fixed inset-0 z-[60] flex items-center justify-center p-4 desktop:pl-[calc(var(--sidebar-width,72px)+1rem)]"},qv={class:"relative w-full max-w-md bg-gray-900 rounded-2xl shadow-2xl border border-gray-800 overflow-hidden"},Kv={class:"px-5 py-4 border-b border-gray-800"},Yv={class:"flex items-center justify-between"},Zv={class:"text-sm text-gray-400"},Xv={class:"p-5 max-h-[60vh] overflow-y-auto"},Qv={class:"mb-5 p-4 rounded-xl bg-gray-800/50"},Jv={class:"flex items-center gap-2"},ex={class:"text-xl"},tx={class:"text-white font-medium"},sx={class:"text-xs text-gray-500"},nx={class:"grid grid-cols-2 gap-2"},ox=["onClick","disabled"],rx={class:"flex items-center gap-2"},ax={class:"text-lg"},lx={class:"text-sm text-white"},ix={key:0,class:"mt-5"},dx={key:1,class:"mt-4"},cx={class:"px-5 py-4 border-t border-gray-800 flex gap-3"},ux=["disabled"],px=Pe({__name:"LabStageChangeModal",props:{plant:{}},emits:["close","changed"],setup(s,{emit:n}){const r=s,o=n,i=rt(),d=W(null),g=W(new Date().toISOString().split("T")[0]),f=W(""),m=W(!1),b=U(()=>Fe[r.plant.status]),x=U(()=>{if(!r.plant?.date_started)return 0;const C=new Date(r.plant.date_started);return Math.floor((new Date().getTime()-C.getTime())/(1e3*60*60*24))});async function _(){if(!(!d.value||d.value===r.plant.status)){m.value=!0;try{await i.changeStage(r.plant.id,d.value,{transition_date:g.value,notes:f.value}),o("changed")}catch{}finally{m.value=!1}}}return(C,k)=>(a(),pe(Qe,{to:"body"},[e("div",Wv,[e("div",{class:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:k[0]||(k[0]=p=>C.$emit("close"))}),e("div",qv,[e("div",Kv,[e("div",Yv,[e("div",null,[k[5]||(k[5]=e("h3",{class:"text-lg font-bold text-white"},"Change Stage",-1)),e("p",Zv,c(s.plant.plant_code),1)]),e("button",{onClick:k[1]||(k[1]=p=>C.$emit("close")),class:"p-2 rounded-lg hover:bg-gray-800 text-gray-400 hover:text-white transition-colors"},[I(t(ze),{class:"w-5 h-5"})])])]),e("div",Xv,[e("div",Qv,[k[6]||(k[6]=e("p",{class:"text-xs text-gray-500 mb-2"},"Current Stage",-1)),e("div",Jv,[e("span",ex,c(t(b)?.icon),1),e("span",tx,c(t(b)?.label),1),e("span",sx,"(Day "+c(t(x))+")",1)])]),k[10]||(k[10]=e("p",{class:"text-sm font-medium text-gray-300 mb-3"},"Select New Stage",-1)),e("div",nx,[(a(!0),l(Q,null,le(t(Fe),(p,T)=>(a(),l("button",{key:T,onClick:M=>d.value=T,disabled:T===s.plant.status,class:V(["p-3 rounded-xl border-2 transition-all text-left",t(d)===T?"border-spider-green-500 bg-spider-green-500/20":T===s.plant.status?"border-gray-700 bg-gray-800/30 opacity-50 cursor-not-allowed":"border-gray-700 bg-gray-800/30 hover:border-gray-600"])},[e("div",rx,[e("span",ax,c(p.icon),1),e("span",lx,c(p.label),1)])],10,ox))),128))]),t(d)?(a(),l("div",ix,[k[7]||(k[7]=e("label",{class:"block text-sm font-medium text-gray-300 mb-2"}," When did this stage start? ",-1)),ye(e("input",{"onUpdate:modelValue":k[2]||(k[2]=p=>We(g)?g.value=p:null),type:"date",class:"w-full px-4 py-3 bg-gray-800/50 border border-gray-600 rounded-xl text-white focus:border-spider-green-500 focus:outline-none"},null,512),[[$e,t(g)]]),k[8]||(k[8]=e("p",{class:"mt-1.5 text-xs text-gray-500"}," Leave as today if the plant just entered this stage ",-1))])):j("",!0),t(d)?(a(),l("div",dx,[k[9]||(k[9]=e("label",{class:"block text-sm font-medium text-gray-300 mb-2"}," Notes (optional) ",-1)),ye(e("textarea",{"onUpdate:modelValue":k[3]||(k[3]=p=>We(f)?f.value=p:null),rows:"2",placeholder:"Any observations about this transition...",class:"w-full px-4 py-3 bg-gray-800/50 border border-gray-600 rounded-xl text-white placeholder-gray-500 focus:border-spider-green-500 focus:outline-none resize-none"},null,512),[[$e,t(f)]])])):j("",!0)]),e("div",cx,[e("button",{onClick:k[4]||(k[4]=p=>C.$emit("close")),class:"flex-1 px-4 py-3 rounded-xl bg-gray-800 hover:bg-gray-700 text-gray-300 font-medium transition-colors"}," Cancel "),e("button",{onClick:_,disabled:!t(d)||t(d)===s.plant.status||t(m),class:"flex-1 px-4 py-3 rounded-xl bg-spider-green-600 hover:bg-spider-green-500 disabled:bg-gray-700 disabled:text-gray-500 text-white font-medium transition-colors flex items-center justify-center gap-2"},[t(m)?(a(),pe(t(ut),{key:0,class:"w-5 h-5 animate-spin"})):j("",!0),e("span",null,c(t(m)?"Saving...":"Confirm Change"),1)],8,ux)])])])]))}}),gx=Object.assign(px,{__name:"LabStageChangeModal"}),fx={class:"h-full flex flex-col"},mx={class:"flex-shrink-0 p-4 border-b border-gray-800/50 bg-gradient-to-br from-gray-800/50 to-gray-900/50"},hx={class:"flex items-start gap-4"},bx={class:"relative"},vx={class:"text-3xl drop-shadow-lg"},xx={key:0,class:"absolute -inset-1 rounded-2xl bg-yellow-400/30 blur-md -z-10 animate-pulse"},yx={class:"flex-1 min-w-0"},_x={class:"flex items-center gap-2 mb-1"},wx={class:"text-xl font-black text-white truncate"},kx={key:0,class:"flex items-center gap-1 px-2 py-0.5 rounded-full bg-yellow-500/20 border border-yellow-500/30"},$x={key:0,class:"text-xs text-purple-400 truncate mb-1"},Cx={class:"text-sm text-gray-400 truncate flex items-center gap-1"},Sx={key:1,class:"mt-1"},Px={class:"capitalize"},Ex={class:"grid grid-cols-4 gap-2 mt-4"},Tx={class:"p-2.5 rounded-xl bg-gray-800/60 border border-gray-700/30 text-center relative overflow-hidden group hover:border-spider-green-500/30 transition-all"},Ax={class:"text-xl font-black text-spider-green-400 relative"},Dx={class:"p-2.5 rounded-xl bg-gray-800/60 border border-gray-700/30 text-center relative overflow-hidden group hover:border-blue-500/30 transition-all"},Mx={class:"text-xl font-black text-blue-400 relative"},Ox={class:"p-2.5 rounded-xl bg-gray-800/60 border border-gray-700/30 text-center relative overflow-hidden group hover:border-purple-500/30 transition-all"},Lx={class:"p-2.5 rounded-xl bg-gray-800/60 border border-gray-700/30 text-center relative overflow-hidden group hover:border-amber-500/30 transition-all"},jx={class:"flex-shrink-0 p-4 border-b border-gray-800/50"},Ix={class:"grid grid-cols-5 gap-2"},Rx={class:"flex-shrink-0 p-4 border-b border-gray-800/50"},Fx={class:"font-medium flex items-center gap-2"},Nx={key:0,class:"mt-3 overflow-hidden"},Bx={class:"flex-shrink-0 p-4 border-b border-gray-800/50"},Vx={class:"flex items-center gap-2"},Ux={key:0,class:"mt-3 space-y-2"},zx={class:"flex justify-between text-sm"},Hx={class:"text-gray-300 capitalize"},Gx={class:"flex justify-between text-sm"},Wx={class:"text-gray-300"},qx={class:"flex justify-between text-sm"},Kx={class:"text-gray-300 capitalize"},Yx={class:"flex justify-between text-sm"},Zx={class:"flex justify-between text-sm"},Xx={key:0,class:"flex justify-between text-sm"},Qx={class:"text-gray-300"},Jx={key:1,class:"flex justify-between text-sm"},ey={class:"text-gray-300"},ty={key:0,class:"flex-shrink-0 p-4 border-b border-gray-800/50"},sy={class:"font-medium flex items-center gap-2"},ny={key:0,class:"px-1.5 py-0.5 rounded-full bg-cyan-500/20 text-cyan-300 text-[10px]"},oy={key:0,class:"mt-3 space-y-3"},ry={key:0,class:"p-3 rounded-xl bg-cyan-500/10 border border-cyan-500/30"},ay={class:"flex items-center gap-2 text-xs text-cyan-300 mb-2"},ly={class:"flex-1 min-w-0"},iy={class:"text-sm font-medium text-white truncate"},dy={class:"text-xs text-gray-500"},cy={key:1,class:"p-3 rounded-xl bg-gray-800/50 border border-gray-700/50"},uy={class:"text-xs text-gray-500 flex items-center gap-2"},py={class:"text-gray-400"},gy={key:2},fy={class:"flex items-center gap-2 text-xs text-emerald-300 mb-2"},my={class:"font-medium"},hy={class:"space-y-2 max-h-40 overflow-y-auto"},by=["onClick"],vy={class:"flex-1 min-w-0"},xy={class:"text-sm font-medium text-white truncate"},yy={class:"text-xs text-gray-500 truncate"},_y={key:0},wy={key:3,class:"text-center py-2"},ky={class:"flex-1 overflow-y-auto p-4"},$y={class:"w-full max-w-lg max-h-[90vh] bg-gray-900 rounded-2xl shadow-2xl border border-gray-800 flex flex-col overflow-hidden"},Cy={class:"flex items-center justify-between px-6 py-4 border-b border-gray-800"},Sy={class:"flex-1 overflow-y-auto p-6 space-y-5"},Py={class:"grid grid-cols-4 gap-2"},Ey=["onClick"],Ty={class:"grid grid-cols-3 gap-2"},Ay=["onClick"],Dy={class:"flex items-center justify-between p-4 rounded-xl bg-gray-800/50"},My={key:0},Oy={class:"grid grid-cols-3 gap-2"},Ly=["onClick"],jy={class:"flex items-center justify-end gap-3 px-6 py-4 border-t border-gray-800 bg-gray-900/50"},Iy=["disabled"],Ry={key:1},Fy={key:2},Ny=Pe({__name:"LabPlantDetailPanel",props:{plant:{},observations:{}},emits:["addObservation","addPhoto","score","stageChanged","plantUpdated","selectObservation","editObservation","deletePhoto","selectClone"],setup(s,{emit:n}){const r=s,o=n,i=rt(),d=W(!1),g=W(!1),f=W(!1),m=W(!1),b=W(!1),x=W(!1),_=W({pheno_label:"",sex:"unknown",selection_status:"active",is_keeper:!1,keeper_notes:"",grow_medium:"",container_size:null});He(()=>[r.plant,f.value],([u,v])=>{v&&u&&(_.value={pheno_label:u.pheno_label||"",sex:u.sex||"unknown",selection_status:u.selection_status||"active",is_keeper:u.is_keeper||!1,keeper_notes:u.keeper_notes||"",grow_medium:u.grow_medium||"",container_size:u.container_size||null})},{immediate:!0});async function C(){x.value=!0;try{await i.updatePlant(r.plant.id,{pheno_label:_.value.pheno_label||void 0,sex:_.value.sex,selection_status:_.value.selection_status,is_keeper:_.value.is_keeper,keeper_notes:_.value.keeper_notes||void 0,grow_medium:_.value.grow_medium||void 0,container_size:_.value.container_size||void 0}),f.value=!1,o("plantUpdated")}catch{}finally{x.value=!1}}const k=U(()=>r.plant?.status&&Fe[r.plant.status]||null),p=U(()=>{if(!r.plant?.date_started)return 0;const u=new Date(r.plant.date_started);return Math.floor((new Date().getTime()-u.getTime())/(1e3*60*60*24))}),T=U(()=>{const u=r.plant.final_score||0;return u>=90?"text-spider-green-400":u>=80?"text-green-400":u>=70?"text-lime-400":u>=60?"text-yellow-400":u>=40?"text-orange-400":"text-red-400"}),M=U(()=>r.plant?.parent_plant_id&&i.plants.find(u=>u.id===r.plant.parent_plant_id)||null),P=U(()=>M.value?.status&&Fe[M.value.status]||null),w=U(()=>r.plant?.id?i.plants.filter(u=>u.parent_plant_id===r.plant.id&&u.origin_type==="clone"):[]);function $(u){return u?new Date(u).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Not set"}function S(){d.value=!1,o("stageChanged")}function A(u){o("selectObservation",u)}function y(u){o("editObservation",u)}function h(u,v,D){o("deletePhoto",u,v,D)}return(u,v)=>{const D=K1,z=yi,G=gx;return a(),l("div",fx,[e("div",mx,[e("div",hx,[e("div",bx,[e("div",{class:V(["w-16 h-16 rounded-2xl flex items-center justify-center flex-shrink-0 shadow-lg",t(k)?`bg-gradient-to-br from-${t(k).color} to-${t(k).bgColor}`:"bg-gradient-to-br from-green-500/40 to-emerald-600/40"])},[e("span",vx,c(t(k)?.icon||"🌱"),1)],2),s.plant.is_keeper?(a(),l("div",xx)):j("",!0)]),e("div",yx,[e("div",_x,[e("h2",wx,c(s.plant.plant_code),1),s.plant.is_keeper?(a(),l("div",kx,[I(t(ct),{class:"w-3 h-3 text-yellow-400"}),v[20]||(v[20]=e("span",{class:"text-[10px] font-medium text-yellow-300"},"Keeper",-1))])):j("",!0)]),s.plant.pheno_label?(a(),l("p",$x,' "'+c(s.plant.pheno_label)+'" ',1)):j("",!0),e("p",Cx,[I(t(Ne),{class:"w-3 h-3"}),ce(" "+c(s.plant.strain_name||"Unknown strain"),1)]),s.plant.sex!=="unknown"?(a(),l("div",Sx,[e("span",{class:V(["inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-medium",s.plant.sex==="female"?"bg-pink-500/20 text-pink-300 border border-pink-500/30":s.plant.sex==="male"?"bg-blue-500/20 text-blue-300 border border-blue-500/30":"bg-orange-500/20 text-orange-300 border border-orange-500/30"])},[ce(c(s.plant.sex==="female"?"♀":s.plant.sex==="male"?"♂":"⚥")+" ",1),e("span",Px,c(s.plant.sex),1)],2)])):j("",!0)])]),e("div",Ex,[e("div",Tx,[v[21]||(v[21]=e("div",{class:"absolute inset-0 bg-gradient-to-br from-spider-green-500/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"},null,-1)),e("p",Ax,c(t(p)),1),v[22]||(v[22]=e("p",{class:"text-[10px] text-gray-500 uppercase font-medium relative"},"Days",-1))]),e("div",Dx,[v[23]||(v[23]=e("div",{class:"absolute inset-0 bg-gradient-to-br from-blue-500/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"},null,-1)),e("p",Mx,c(Math.ceil(t(p)/7)),1),v[24]||(v[24]=e("p",{class:"text-[10px] text-gray-500 uppercase font-medium relative"},"Weeks",-1))]),e("div",Ox,[v[25]||(v[25]=e("div",{class:"absolute inset-0 bg-gradient-to-br from-purple-500/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"},null,-1)),e("span",{class:V(["inline-block px-2 py-0.5 rounded-lg text-xs font-bold",t(k)?`bg-${t(k).bgColor} text-${t(k).color}`:"bg-green-500/20 text-green-300"])},c(t(k)?.shortLabel||s.plant.status),3),v[26]||(v[26]=e("p",{class:"text-[10px] text-gray-500 uppercase font-medium mt-1 relative"},"Stage",-1))]),e("div",Lx,[v[27]||(v[27]=e("div",{class:"absolute inset-0 bg-gradient-to-br from-amber-500/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"},null,-1)),e("p",{class:V(["text-xl font-black relative",t(T)])},c(s.plant.final_score?.toFixed(1)||"--"),3),v[28]||(v[28]=e("p",{class:"text-[10px] text-gray-500 uppercase font-medium relative"},"Score",-1))])])]),e("div",jx,[e("div",Ix,[e("button",{onClick:v[0]||(v[0]=B=>o("addObservation")),class:"p-2.5 rounded-xl bg-spider-green-500/20 hover:bg-spider-green-500/30 border border-spider-green-500/30 text-spider-green-300 transition-all flex flex-col items-center gap-1"},[I(t(Dn),{class:"w-5 h-5"}),v[29]||(v[29]=e("span",{class:"text-[10px] font-medium"},"Log",-1))]),e("button",{onClick:v[1]||(v[1]=B=>d.value=!0),class:"p-2.5 rounded-xl bg-purple-500/20 hover:bg-purple-500/30 border border-purple-500/30 text-purple-300 transition-all flex flex-col items-center gap-1"},[I(t(ut),{class:"w-5 h-5"}),v[30]||(v[30]=e("span",{class:"text-[10px] font-medium"},"Stage",-1))]),e("button",{onClick:v[2]||(v[2]=B=>o("addPhoto")),class:"p-2.5 rounded-xl bg-blue-500/20 hover:bg-blue-500/30 border border-blue-500/30 text-blue-300 transition-all flex flex-col items-center gap-1"},[I(t(pt),{class:"w-5 h-5"}),v[31]||(v[31]=e("span",{class:"text-[10px] font-medium"},"Photo",-1))]),e("button",{onClick:v[3]||(v[3]=B=>o("score")),class:"p-2.5 rounded-xl bg-amber-500/20 hover:bg-amber-500/30 border border-amber-500/30 text-amber-300 transition-all flex flex-col items-center gap-1"},[I(t(ct),{class:"w-5 h-5"}),v[32]||(v[32]=e("span",{class:"text-[10px] font-medium"},"Score",-1))]),e("button",{onClick:v[4]||(v[4]=B=>f.value=!0),class:"p-2.5 rounded-xl bg-gray-500/20 hover:bg-gray-500/30 border border-gray-500/30 text-gray-300 transition-all flex flex-col items-center gap-1"},[I(t(_s),{class:"w-5 h-5"}),v[33]||(v[33]=e("span",{class:"text-[10px] font-medium"},"Edit",-1))])])]),e("div",Rx,[e("button",{onClick:v[5]||(v[5]=B=>b.value=!t(b)),class:"w-full flex items-center justify-between text-sm text-gray-400 hover:text-gray-300 transition-colors"},[e("span",Fx,[I(t(tr),{class:"w-4 h-4 text-purple-400"}),v[34]||(v[34]=ce(" Stage Guide & Tips ",-1))]),I(t(Gt),{class:V(["w-4 h-4 transition-transform",t(b)?"rotate-180":""])},null,8,["class"])]),I(Ke,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 max-h-0","enter-to-class":"opacity-100 max-h-[1000px]","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"opacity-100 max-h-[1000px]","leave-to-class":"opacity-0 max-h-0"},{default:je(()=>[t(b)?(a(),l("div",Nx,[I(D,{plant:s.plant,onAdvanceStage:v[6]||(v[6]=B=>d.value=!0)},null,8,["plant"])])):j("",!0)]),_:1})]),e("div",Bx,[e("button",{onClick:v[8]||(v[8]=B=>g.value=!t(g)),class:"w-full flex items-center justify-between text-sm text-gray-400 hover:text-gray-300 transition-colors"},[v[35]||(v[35]=e("span",{class:"font-medium"},"Plant Details",-1)),e("div",Vx,[t(g)?(a(),l("button",{key:0,onClick:v[7]||(v[7]=Ve(B=>f.value=!0,["stop"])),class:"p-1 rounded hover:bg-gray-700 text-gray-500 hover:text-gray-300 transition-colors",title:"Edit plant"},[I(t(On),{class:"w-4 h-4"})])):j("",!0),I(t(Gt),{class:V(["w-4 h-4 transition-transform",t(g)?"rotate-180":""])},null,8,["class"])])]),t(g)?(a(),l("div",Ux,[e("div",zx,[v[36]||(v[36]=e("span",{class:"text-gray-500"},"Origin",-1)),e("span",Hx,c(s.plant.origin_type||"Seed"),1)]),e("div",Gx,[v[37]||(v[37]=e("span",{class:"text-gray-500"},"Started",-1)),e("span",Wx,c($(s.plant.date_started)),1)]),e("div",qx,[v[38]||(v[38]=e("span",{class:"text-gray-500"},"Medium",-1)),e("span",Kx,c(s.plant.grow_medium||"Not set"),1)]),e("div",Yx,[v[39]||(v[39]=e("span",{class:"text-gray-500"},"Sex",-1)),e("span",{class:V(["capitalize",s.plant.sex==="female"?"text-pink-400":s.plant.sex==="male"?"text-blue-400":s.plant.sex==="hermaphrodite"?"text-orange-400":"text-gray-400"])},c(s.plant.sex||"Unknown"),3)]),e("div",Zx,[v[40]||(v[40]=e("span",{class:"text-gray-500"},"Selection",-1)),e("span",{class:V(["px-2 py-0.5 rounded text-xs font-medium",s.plant.is_keeper?"bg-amber-500/20 text-amber-300":"bg-gray-700 text-gray-400"])},c(s.plant.is_keeper?"Keeper":s.plant.selection_status||"Evaluating"),3)]),s.plant.container_size?(a(),l("div",Xx,[v[41]||(v[41]=e("span",{class:"text-gray-500"},"Container",-1)),e("span",Qx,c(s.plant.container_size)+"L",1)])):j("",!0),s.plant.training_methods?.length?(a(),l("div",Jx,[v[42]||(v[42]=e("span",{class:"text-gray-500"},"Training",-1)),e("span",ey,c(s.plant.training_methods.join(", ")),1)])):j("",!0)])):j("",!0)]),s.plant.origin_type==="clone"||t(w).length>0?(a(),l("div",ty,[e("button",{onClick:v[9]||(v[9]=B=>m.value=!t(m)),class:"w-full flex items-center justify-between text-sm text-gray-400 hover:text-gray-300 transition-colors"},[e("span",sy,[I(t(Je),{class:"w-4 h-4 text-cyan-400"}),v[43]||(v[43]=ce(" Clone History ",-1)),t(w).length>0?(a(),l("span",ny,c(t(w).length),1)):j("",!0)]),I(t(Gt),{class:V(["w-4 h-4 transition-transform",t(m)?"rotate-180":""])},null,8,["class"])]),t(m)?(a(),l("div",oy,[s.plant.origin_type==="clone"&&t(M)?(a(),l("div",ry,[e("div",ay,[I(t(vo),{class:"w-3.5 h-3.5"}),v[44]||(v[44]=e("span",{class:"font-medium"},"Cloned From",-1))]),e("button",{onClick:v[10]||(v[10]=B=>o("selectClone",t(M))),class:"w-full flex items-center gap-3 p-2 rounded-lg bg-gray-800/50 hover:bg-gray-700/50 transition-colors text-left"},[e("div",{class:V(["w-8 h-8 rounded-lg flex items-center justify-center text-lg",t(P)?`bg-${t(P).bgColor}`:"bg-gray-700"])},c(t(P)?.icon||"🌱"),3),e("div",ly,[e("p",iy,c(t(M).plant_code),1),e("p",dy,c(t(M).strain_name||"Unknown strain"),1)]),I(t(nt),{class:"w-4 h-4 text-gray-500"})])])):s.plant.origin_type==="clone"?(a(),l("div",cy,[e("p",uy,[I(t(vo),{class:"w-3.5 h-3.5 text-cyan-400"}),e("span",null,[v[45]||(v[45]=ce("Cloned from: ",-1)),e("span",py,c(s.plant.parent_plant_id?"Plant not found":"Unknown"),1)])])])):j("",!0),t(w).length>0?(a(),l("div",gy,[e("div",fy,[I(t(mi),{class:"w-3.5 h-3.5"}),e("span",my,"Clones Made ("+c(t(w).length)+")",1)]),e("div",hy,[(a(!0),l(Q,null,le(t(w),B=>(a(),l("button",{key:B.id,onClick:O=>o("selectClone",B),class:"w-full flex items-center gap-3 p-2 rounded-lg bg-gray-800/50 hover:bg-gray-700/50 transition-colors text-left"},[e("div",{class:V(["w-8 h-8 rounded-lg flex items-center justify-center text-lg",t(Fe)[B.status]?`bg-${t(Fe)[B.status].bgColor}`:"bg-gray-700"])},c(t(Fe)[B.status]?.icon||"🌱"),3),e("div",vy,[e("p",xy,c(B.plant_code),1),e("p",yy,[ce(c(B.strain_name||"Unknown strain")+" ",1),B.status?(a(),l("span",_y," · "+c(t(Fe)[B.status]?.shortLabel||B.status),1)):j("",!0)])]),I(t(nt),{class:"w-4 h-4 text-gray-500"})],8,by))),128))])])):s.plant.origin_type!=="clone"?(a(),l("div",wy,[...v[46]||(v[46]=[e("p",{class:"text-xs text-gray-500"},"No clones recorded from this plant",-1)])])):j("",!0)])):j("",!0)])):j("",!0),e("div",ky,[I(z,{observations:s.observations,"show-all-plants":!1,onAddObservation:v[11]||(v[11]=B=>o("addObservation")),onSelectObservation:A,onEditObservation:y,onDeletePhoto:h},null,8,["observations"])]),t(d)?(a(),pe(G,{key:1,plant:s.plant,onClose:v[12]||(v[12]=B=>d.value=!1),onChanged:S},null,8,["plant"])):j("",!0),(a(),pe(Qe,{to:"body"},[I(Ke,{"enter-active-class":"transition-all duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-all duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:je(()=>[t(f)?(a(),l("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70",onClick:v[19]||(v[19]=Ve(B=>f.value=!1,["self"]))},[e("div",$y,[e("div",Cy,[v[47]||(v[47]=e("h2",{class:"text-lg font-semibold text-white"},"Edit Plant",-1)),e("button",{onClick:v[13]||(v[13]=B=>f.value=!1),class:"p-2 rounded-lg hover:bg-gray-800 text-gray-400 hover:text-white transition-colors"},[I(t(ze),{class:"w-5 h-5"})])]),e("div",Sy,[e("div",null,[v[48]||(v[48]=e("label",{class:"block text-sm font-medium text-gray-400 mb-2"},"Phenotype Label",-1)),ye(e("input",{"onUpdate:modelValue":v[14]||(v[14]=B=>t(_).pheno_label=B),type:"text",class:"w-full px-4 py-2.5 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:border-spider-green-500 focus:outline-none",placeholder:"e.g., 'The Stinker', '#3 Purple Pheno'"},null,512),[[$e,t(_).pheno_label]])]),e("div",null,[v[49]||(v[49]=e("label",{class:"block text-sm font-medium text-gray-400 mb-2"},"Sex",-1)),e("div",Py,[(a(),l(Q,null,le(["unknown","female","male","hermaphrodite"],B=>e("button",{key:B,onClick:O=>t(_).sex=B,class:V(["py-2.5 rounded-lg text-sm font-medium capitalize transition-colors",t(_).sex===B?B==="female"?"bg-pink-500/30 text-pink-300 border-2 border-pink-500":B==="male"?"bg-blue-500/30 text-blue-300 border-2 border-blue-500":B==="hermaphrodite"?"bg-orange-500/30 text-orange-300 border-2 border-orange-500":"bg-gray-600/30 text-gray-300 border-2 border-gray-500":"bg-gray-800 text-gray-400 border-2 border-transparent hover:border-gray-600"])},c(B),11,Ey)),64))])]),e("div",null,[v[50]||(v[50]=e("label",{class:"block text-sm font-medium text-gray-400 mb-2"},"Selection Status",-1)),e("div",Ty,[(a(),l(Q,null,le(["active","watch","warning","cull_candidate","keeper"],B=>e("button",{key:B,onClick:O=>t(_).selection_status=B,class:V(["py-2.5 rounded-lg text-sm font-medium capitalize transition-colors",t(_).selection_status===B?B==="keeper"?"bg-amber-500/30 text-amber-300 border-2 border-amber-500":B==="warning"?"bg-orange-500/30 text-orange-300 border-2 border-orange-500":B==="cull_candidate"?"bg-red-500/30 text-red-300 border-2 border-red-500":B==="watch"?"bg-yellow-500/30 text-yellow-300 border-2 border-yellow-500":"bg-spider-green-500/30 text-spider-green-300 border-2 border-spider-green-500":"bg-gray-800 text-gray-400 border-2 border-transparent hover:border-gray-600"])},c(B.replace("_"," ")),11,Ay)),64))])]),e("div",Dy,[v[51]||(v[51]=e("div",null,[e("p",{class:"font-medium text-white"},"Mark as Keeper"),e("p",{class:"text-sm text-gray-400"},"Elite selection for breeding/cloning")],-1)),e("button",{onClick:v[15]||(v[15]=B=>t(_).is_keeper=!t(_).is_keeper),class:V(["relative w-12 h-6 rounded-full transition-colors",t(_).is_keeper?"bg-amber-500":"bg-gray-600"])},[e("span",{class:V(["absolute top-1 w-4 h-4 rounded-full bg-white transition-transform",t(_).is_keeper?"translate-x-7":"translate-x-1"])},null,2)],2)]),t(_).is_keeper?(a(),l("div",My,[v[52]||(v[52]=e("label",{class:"block text-sm font-medium text-gray-400 mb-2"},"Keeper Notes",-1)),ye(e("textarea",{"onUpdate:modelValue":v[16]||(v[16]=B=>t(_).keeper_notes=B),rows:"2",class:"w-full px-4 py-2.5 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:border-amber-500 focus:outline-none resize-none",placeholder:"Why this plant is special..."},null,512),[[$e,t(_).keeper_notes]])])):j("",!0),e("div",null,[v[53]||(v[53]=e("label",{class:"block text-sm font-medium text-gray-400 mb-2"},"Growing Medium",-1)),e("div",Oy,[(a(),l(Q,null,le(["soil","coco","hydro","dwc","aero","other"],B=>e("button",{key:B,onClick:O=>t(_).grow_medium=B,class:V(["py-2 rounded-lg text-sm font-medium capitalize transition-colors",t(_).grow_medium===B?"bg-spider-green-500/30 text-spider-green-300 border-2 border-spider-green-500":"bg-gray-800 text-gray-400 border-2 border-transparent hover:border-gray-600"])},c(B),11,Ly)),64))])]),e("div",null,[v[54]||(v[54]=e("label",{class:"block text-sm font-medium text-gray-400 mb-2"},"Container Size (Liters)",-1)),ye(e("input",{"onUpdate:modelValue":v[17]||(v[17]=B=>t(_).container_size=B),type:"number",min:"0",step:"0.5",class:"w-full px-4 py-2.5 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:border-spider-green-500 focus:outline-none",placeholder:"e.g., 5, 10, 20"},null,512),[[$e,t(_).container_size,void 0,{number:!0}]])])]),e("div",jy,[e("button",{onClick:v[18]||(v[18]=B=>f.value=!1),class:"px-4 py-2.5 rounded-lg bg-gray-700 hover:bg-gray-600 text-white transition-colors"}," Cancel "),e("button",{onClick:C,disabled:t(x),class:"flex items-center gap-2 px-5 py-2.5 rounded-lg bg-spider-green-600 hover:bg-spider-green-500 text-white font-medium transition-colors disabled:opacity-50"},[t(x)?j("",!0):(a(),pe(t(lt),{key:0,class:"w-4 h-4"})),t(x)?(a(),l("span",Ry,"Saving...")):(a(),l("span",Fy,"Save Changes"))],8,Iy)])])])):j("",!0)]),_:1})]))])}}}),By=Object.assign(Ny,{__name:"LabPlantDetailPanel"}),Vy={class:"w-full max-w-2xl max-h-[90vh] bg-gray-900 rounded-2xl shadow-2xl border border-gray-800 flex flex-col overflow-hidden"},Uy={class:"flex items-center justify-between px-6 py-4 border-b border-gray-800"},zy={class:"flex-1 overflow-y-auto p-6 space-y-6"},Hy={class:"grid grid-cols-2 gap-4"},Gy={class:"flex gap-1"},Wy=["onClick"],qy={class:"flex gap-1"},Ky=["onClick"],Yy={class:"flex gap-3"},Zy={class:"flex flex-wrap gap-2"},Xy=["onClick"],Qy={key:0},Jy={class:"flex flex-wrap gap-2"},e5=["src"],t5=["onClick"],s5={class:"flex items-center justify-between px-6 py-4 border-t border-gray-800 bg-gray-900/50"},n5={class:"flex items-center gap-3"},o5=["disabled"],r5={class:"bg-gray-800 rounded-2xl p-6 max-w-sm mx-4 shadow-2xl"},a5={class:"flex gap-3"},l5=Pe({__name:"LabObservationEditor",props:{show:{type:Boolean},observation:{}},emits:["close","save","delete"],setup(s,{emit:n}){const r=s,o=n,i=W(!1),d=W(!1),g=["LST","HST","Topping","FIM","Defoliation","Lollipopping","Supercropping","Mainlining","SCROG"],f=W({health_score:7,vigor_score:7,height_cm:null,pest_issues:!1,disease_issues:!1,deficiency_issues:!1,general_notes:"",watering_notes:"",feeding_notes:"",training_applied:[],photos:[]});He(()=>r.observation,k=>{k&&(f.value={health_score:k.health_score||7,vigor_score:k.vigor_score||7,height_cm:k.height_cm||null,pest_issues:!!k.pest_issues,disease_issues:!!k.disease_issues,deficiency_issues:!!k.deficiency_issues,general_notes:k.general_notes||"",watering_notes:k.watering_notes||"",feeding_notes:k.feeding_notes||"",training_applied:k.training_applied||[],photos:k.photos||[]})},{immediate:!0});function m(k){const p=f.value.training_applied.indexOf(k);p>=0?f.value.training_applied.splice(p,1):f.value.training_applied.push(k)}function b(k){f.value.photos.splice(k,1)}async function x(){if(r.observation){i.value=!0;try{o("save",{id:r.observation.id,...f.value,height_cm:f.value.height_cm??void 0})}finally{i.value=!1}}}function _(){d.value=!0}function C(){r.observation&&o("delete",r.observation.id),d.value=!1}return(k,p)=>(a(),pe(Qe,{to:"body"},[I(Ke,{"enter-active-class":"transition-all duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-all duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:je(()=>[s.show?(a(),l("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70",onClick:p[11]||(p[11]=Ve(T=>o("close"),["self"]))},[e("div",Vy,[e("div",Uy,[p[12]||(p[12]=e("h2",{class:"text-lg font-semibold text-white"},"Edit Observation",-1)),e("button",{onClick:p[0]||(p[0]=T=>o("close")),class:"p-2 rounded-lg hover:bg-gray-800 text-gray-400 hover:text-white transition-colors"},[I(t(ze),{class:"w-5 h-5"})])]),e("div",zy,[e("div",Hy,[e("div",null,[p[13]||(p[13]=e("label",{class:"block text-sm font-medium text-gray-400 mb-2"},"Health Score",-1)),e("div",Gy,[(a(),l(Q,null,le(10,T=>e("button",{key:T,onClick:M=>t(f).health_score=T,class:V(["flex-1 py-2 rounded text-sm font-medium transition-colors",t(f).health_score>=T?"bg-spider-green-600 text-white":"bg-gray-700 text-gray-500 hover:bg-gray-600"])},c(T),11,Wy)),64))])]),e("div",null,[p[14]||(p[14]=e("label",{class:"block text-sm font-medium text-gray-400 mb-2"},"Vigor Score",-1)),e("div",qy,[(a(),l(Q,null,le(10,T=>e("button",{key:T,onClick:M=>t(f).vigor_score=T,class:V(["flex-1 py-2 rounded text-sm font-medium transition-colors",t(f).vigor_score>=T?"bg-yellow-600 text-white":"bg-gray-700 text-gray-500 hover:bg-gray-600"])},c(T),11,Ky)),64))])])]),e("div",null,[p[15]||(p[15]=e("label",{class:"block text-sm font-medium text-gray-400 mb-2"},"Height (cm)",-1)),ye(e("input",{"onUpdate:modelValue":p[1]||(p[1]=T=>t(f).height_cm=T),type:"number",min:"0",class:"w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:border-spider-green-500 focus:outline-none",placeholder:"Plant height in cm"},null,512),[[$e,t(f).height_cm,void 0,{number:!0}]])]),e("div",null,[p[16]||(p[16]=e("label",{class:"block text-sm font-medium text-gray-400 mb-2"},"Issues",-1)),e("div",Yy,[e("button",{onClick:p[2]||(p[2]=T=>t(f).pest_issues=!t(f).pest_issues),class:V(["flex-1 py-3 rounded-lg border-2 transition-colors text-sm font-medium",t(f).pest_issues?"border-red-500 bg-red-500/20 text-red-300":"border-gray-700 bg-gray-800 text-gray-400 hover:border-gray-600"])}," 🐛 Pests ",2),e("button",{onClick:p[3]||(p[3]=T=>t(f).disease_issues=!t(f).disease_issues),class:V(["flex-1 py-3 rounded-lg border-2 transition-colors text-sm font-medium",t(f).disease_issues?"border-orange-500 bg-orange-500/20 text-orange-300":"border-gray-700 bg-gray-800 text-gray-400 hover:border-gray-600"])}," 🦠 Disease ",2),e("button",{onClick:p[4]||(p[4]=T=>t(f).deficiency_issues=!t(f).deficiency_issues),class:V(["flex-1 py-3 rounded-lg border-2 transition-colors text-sm font-medium",t(f).deficiency_issues?"border-yellow-500 bg-yellow-500/20 text-yellow-300":"border-gray-700 bg-gray-800 text-gray-400 hover:border-gray-600"])}," 🍂 Deficiency ",2)])]),e("div",null,[p[17]||(p[17]=e("label",{class:"block text-sm font-medium text-gray-400 mb-2"},"📋 General Notes",-1)),ye(e("textarea",{"onUpdate:modelValue":p[5]||(p[5]=T=>t(f).general_notes=T),rows:"3",class:"w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:border-spider-green-500 focus:outline-none resize-none",placeholder:"General observations..."},null,512),[[$e,t(f).general_notes]])]),e("div",null,[p[18]||(p[18]=e("label",{class:"block text-sm font-medium text-gray-400 mb-2"},"💧 Watering Notes",-1)),ye(e("textarea",{"onUpdate:modelValue":p[6]||(p[6]=T=>t(f).watering_notes=T),rows:"2",class:"w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:border-spider-green-500 focus:outline-none resize-none",placeholder:"Watering details..."},null,512),[[$e,t(f).watering_notes]])]),e("div",null,[p[19]||(p[19]=e("label",{class:"block text-sm font-medium text-gray-400 mb-2"},"🧪 Feeding Notes",-1)),ye(e("textarea",{"onUpdate:modelValue":p[7]||(p[7]=T=>t(f).feeding_notes=T),rows:"2",class:"w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:border-spider-green-500 focus:outline-none resize-none",placeholder:"Nutrients, EC, pH..."},null,512),[[$e,t(f).feeding_notes]])]),e("div",null,[p[20]||(p[20]=e("label",{class:"block text-sm font-medium text-gray-400 mb-2"},"✂️ Training Applied",-1)),e("div",Zy,[(a(),l(Q,null,le(g,T=>e("button",{key:T,onClick:M=>m(T),class:V(["px-3 py-1.5 rounded-lg text-sm font-medium transition-colors",t(f).training_applied.includes(T)?"bg-purple-600 text-white":"bg-gray-700 text-gray-400 hover:bg-gray-600"])},c(T),11,Xy)),64))])]),t(f).photos.length>0?(a(),l("div",Qy,[p[21]||(p[21]=e("label",{class:"block text-sm font-medium text-gray-400 mb-2"},"📸 Photos",-1)),e("div",Jy,[(a(!0),l(Q,null,le(t(f).photos,(T,M)=>(a(),l("div",{key:M,class:"relative w-20 h-20 rounded-lg overflow-hidden"},[e("img",{src:T,class:"w-full h-full object-cover"},null,8,e5),e("button",{onClick:P=>b(M),class:"absolute top-1 right-1 w-5 h-5 bg-red-600 rounded-full flex items-center justify-center hover:bg-red-500"},[I(t(ze),{class:"w-3 h-3 text-white"})],8,t5)]))),128))])])):j("",!0)]),e("div",s5,[e("button",{onClick:_,class:"flex items-center gap-2 px-4 py-2 rounded-lg text-red-400 hover:bg-red-500/10 transition-colors"},[I(t(Tt),{class:"w-4 h-4"}),p[22]||(p[22]=ce(" Delete ",-1))]),e("div",n5,[e("button",{onClick:p[8]||(p[8]=T=>o("close")),class:"px-4 py-2 rounded-lg bg-gray-700 hover:bg-gray-600 text-white transition-colors"}," Cancel "),e("button",{onClick:x,disabled:t(i),class:"flex items-center gap-2 px-5 py-2 rounded-lg bg-spider-green-600 hover:bg-spider-green-500 text-white font-medium transition-colors disabled:opacity-50"},[t(i)?(a(),pe(t(ut),{key:0,class:"w-4 h-4 animate-spin"})):(a(),pe(t(lt),{key:1,class:"w-4 h-4"})),ce(" "+c(t(i)?"Saving...":"Save Changes"),1)],8,o5)])])]),I(Ke,{"enter-active-class":"transition-all duration-150","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition-all duration-100","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:je(()=>[t(d)?(a(),l("div",{key:0,class:"absolute inset-0 flex items-center justify-center bg-black/80",onClick:p[10]||(p[10]=Ve(T=>d.value=!1,["self"]))},[e("div",r5,[p[23]||(p[23]=e("h3",{class:"text-lg font-semibold text-white mb-2"},"Delete Observation?",-1)),p[24]||(p[24]=e("p",{class:"text-gray-400 mb-6"},"This action cannot be undone.",-1)),e("div",a5,[e("button",{onClick:p[9]||(p[9]=T=>d.value=!1),class:"flex-1 px-4 py-2 rounded-lg bg-gray-700 hover:bg-gray-600 text-white font-medium transition-colors"}," Cancel "),e("button",{onClick:C,class:"flex-1 px-4 py-2 rounded-lg bg-red-600 hover:bg-red-500 text-white font-medium transition-colors"}," Delete ")])])])):j("",!0)]),_:1})])):j("",!0)]),_:1})]))}}),i5=Object.assign(l5,{__name:"LabObservationEditor"}),d5={class:"w-full max-w-2xl max-h-[90vh] bg-gray-900 rounded-2xl shadow-2xl border border-gray-800 flex flex-col overflow-hidden"},c5={class:"flex-shrink-0 px-6 py-4 border-b border-gray-800 bg-gradient-to-r from-amber-500/10 to-orange-500/10"},u5={class:"flex items-center justify-between"},p5={class:"flex items-center gap-3"},g5={class:"text-sm text-gray-400"},f5={class:"flex items-center gap-1 mt-4"},m5={class:"flex justify-between mt-2 text-xs text-gray-500"},h5={class:"flex-1 overflow-y-auto p-6"},b5={class:"mb-6 p-4 rounded-xl bg-gradient-to-br from-gray-800/50 to-gray-800/30 border border-gray-700/50"},v5={class:"flex items-center justify-between mb-2"},x5={class:"text-lg font-semibold text-white flex items-center gap-2"},y5={class:"text-2xl"},_5={class:"px-2 py-1 rounded-lg bg-amber-500/20 text-amber-300 text-sm font-medium"},w5={class:"text-sm text-gray-400"},k5={key:0,class:"space-y-4"},$5={class:"p-6 rounded-xl bg-gradient-to-br from-amber-500/10 to-orange-500/10 border border-amber-500/30 text-center"},C5={class:"text-5xl font-bold text-white"},S5={class:"text-sm text-gray-500 mt-2"},P5={class:"space-y-3"},E5={class:"text-xl"},T5={class:"flex-1"},A5={class:"flex justify-between text-sm mb-1"},D5={class:"text-gray-300"},M5={class:"text-white font-medium"},O5={class:"h-1.5 rounded-full bg-gray-700 overflow-hidden"},L5={class:"text-xs text-gray-500 w-10 text-right"},j5={key:1,class:"space-y-4"},I5={class:"flex items-start justify-between mb-3"},R5={class:"flex-1"},F5={class:"block text-sm font-medium text-white mb-1"},N5={class:"text-xs text-gray-500"},B5={class:"flex items-center gap-2 ml-4"},V5={class:"text-2xl font-bold text-amber-400 w-8 text-right"},U5={class:"flex gap-1.5"},z5=["onClick"],H5={class:"flex-shrink-0 flex items-center justify-between px-6 py-4 border-t border-gray-800 bg-gray-900/50"},G5={key:1},W5={class:"flex items-center gap-3"},q5=["disabled"],K5=["disabled"],Y5={key:1},Z5={key:2},X5=Pe({__name:"LabScoreWizard",props:{show:{type:Boolean},plant:{}},emits:["close","saved"],setup(s,{emit:n}){const r=s,o=n,i=rt(),d=cd(),{getAuthHeaders:g}=Ue(),f=W(0),m=W(!1),b=W(""),x=W("standard"),_=sd({vigor:5,recuperation:5,growth_speed:5,rooting_speed:5,stem_strength:5,branching:5,node_spacing:5,canopy_uniformity:5,trainability:5,pest_resistance:5,mold_resistance:5,stress_tolerance:5,bud_density:5,flower_size:5,trichome_coverage:5,resin_production:5,yield_estimate:5,smell_intensity:5,smell_complexity:5,smell_appeal:5,clone_success_rate:5,rooting_time:5,clone_vigor:5}),C=[{id:"vigor",title:"Vigor & Health",icon:"💪",weight:15,description:"Evaluate the plant's overall vitality, growth rate, and ability to recover from stress.",fields:[{id:"vigor",label:"Overall Vigor",hint:"General plant health and vitality"},{id:"recuperation",label:"Recuperation",hint:"How quickly it recovers from stress or damage"},{id:"growth_speed",label:"Growth Speed",hint:"Rate of vegetative growth"},{id:"rooting_speed",label:"Rooting Speed",hint:"Speed of root development"}]},{id:"structure",title:"Structure",icon:"🌿",weight:20,description:"Assess the plant's physical structure, branching patterns, and trainability.",fields:[{id:"stem_strength",label:"Stem Strength",hint:"Thickness and rigidity of main stem"},{id:"branching",label:"Branching Pattern",hint:"Quality and distribution of branches"},{id:"node_spacing",label:"Node Spacing",hint:"Distance between nodes (shorter = better)"},{id:"canopy_uniformity",label:"Canopy Uniformity",hint:"Evenness of the canopy"},{id:"trainability",label:"Trainability",hint:"Response to LST, topping, etc."}]},{id:"resistance",title:"Resistance",icon:"🛡️",weight:15,description:"Evaluate resistance to pests, mold, and environmental stress.",fields:[{id:"pest_resistance",label:"Pest Resistance",hint:"Resistance to insects and mites"},{id:"mold_resistance",label:"Mold Resistance",hint:"Resistance to botrytis, PM, etc."},{id:"stress_tolerance",label:"Stress Tolerance",hint:"Handles heat, cold, drought well"}]},{id:"production",title:"Flower Production",icon:"🌸",weight:25,description:"Assess flower quality, density, and yield potential.",fields:[{id:"bud_density",label:"Bud Density",hint:"How tight and compact the buds are"},{id:"flower_size",label:"Flower Size",hint:"Size of individual colas"},{id:"trichome_coverage",label:"Trichome Coverage",hint:"Amount of trichomes on buds and leaves"},{id:"resin_production",label:"Resin Production",hint:"Stickiness and oil content"},{id:"yield_estimate",label:"Yield Estimate",hint:"Expected yield relative to size"}]},{id:"aroma",title:"Aroma & Terpenes",icon:"👃",weight:15,description:"Evaluate the smell profile from stem rub test and flowering.",fields:[{id:"smell_intensity",label:"Smell Intensity",hint:"How strong is the aroma?"},{id:"smell_complexity",label:"Smell Complexity",hint:"Number of distinct notes"},{id:"smell_appeal",label:"Smell Appeal",hint:"Personal preference of the aroma"}]},{id:"clonability",title:"Clone Stability",icon:"🧬",weight:10,description:"Evaluate how well this phenotype clones and maintains traits.",fields:[{id:"clone_success_rate",label:"Clone Success Rate",hint:"Percentage of clones that root"},{id:"rooting_time",label:"Rooting Time",hint:"Speed of clone rooting (faster = higher)"},{id:"clone_vigor",label:"Clone Vigor",hint:"Health and growth of rooted clones"}]},{id:"summary",title:"Summary",icon:"📊",weight:0,description:"Review your scores and save the evaluation.",fields:[]}];function k(A,y){_[A]=y}function p(A){const y=C.find(u=>u.id===A);return!y||y.fields.length===0?0:y.fields.reduce((u,v)=>u+(_[v.id]??0),0)/y.fields.length}const T=U(()=>{let A=0;for(const y of C.slice(0,6)){const h=p(y.id);A+=h*(y.weight/100)}return A}),M=U(()=>!0);function P(){f.value<C.length-1&&f.value++}function w(){f.value>0&&f.value--}function $(){o("close"),setTimeout(()=>{f.value=0,b.value="",Object.keys(_).forEach(A=>{_[A]=5})},300)}async function S(){if(r.plant){m.value=!0;try{const A={plant_id:r.plant.id,profile:x.value,vigor_score:p("vigor"),structure_score:p("structure"),resistance_score:p("resistance"),production_score:p("production"),aroma_score:p("aroma"),clonability_score:p("clonability"),final_score:T.value,details:JSON.stringify(_),notes:b.value||void 0};await $fetch("/api/lab/scores",{method:"POST",headers:g(),body:A}),d.success(`Score saved: ${T.value.toFixed(1)}`),o("saved",T.value),$(),r.plant.id&&i.fetchPlant(r.plant.id)}catch{d.error("Failed to save score")}finally{m.value=!1}}}return(A,y)=>(a(),pe(Qe,{to:"body"},[I(Ke,{"enter-active-class":"transition-all duration-300","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-all duration-200","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:je(()=>[s.show?(a(),l("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",onClick:Ve($,["self"])},[e("div",d5,[e("div",c5,[e("div",u5,[e("div",p5,[y[2]||(y[2]=e("div",{class:"w-10 h-10 rounded-xl bg-amber-500/20 flex items-center justify-center"},[e("span",{class:"text-xl"},"⭐")],-1)),e("div",null,[y[1]||(y[1]=e("h2",{class:"text-lg font-bold text-white"},"Score Plant",-1)),e("p",g5,c(s.plant?.plant_code),1)])]),e("button",{onClick:$,class:"p-2 rounded-lg hover:bg-gray-800 text-gray-400 hover:text-white transition-colors"},[I(t(ze),{class:"w-5 h-5"})])]),e("div",f5,[(a(),l(Q,null,le(C,(h,u)=>e("div",{key:h.id,class:V(["flex-1 h-1.5 rounded-full transition-all",u<t(f)?"bg-amber-500":u===t(f)?"bg-amber-400":"bg-gray-700"])},null,2)),64))]),e("div",m5,[e("span",null,c(C[t(f)]?.title),1),e("span",null,"Step "+c(t(f)+1)+" of "+c(C.length),1)])]),e("div",h5,[e("div",b5,[e("div",v5,[e("h3",x5,[e("span",y5,c(C[t(f)]?.icon),1),ce(" "+c(C[t(f)]?.title),1)]),e("span",_5,c(C[t(f)]?.weight)+"% weight ",1)]),e("p",w5,c(C[t(f)]?.description),1)]),t(f)===6?(a(),l("div",k5,[e("div",$5,[y[3]||(y[3]=e("p",{class:"text-gray-400 mb-2"},"Final Score",-1)),e("p",C5,c(t(T).toFixed(1)),1),e("p",S5,"Based on scoring profile: "+c(t(x)),1)]),e("div",P5,[(a(!0),l(Q,null,le(C.slice(0,6),(h,u)=>(a(),l("div",{key:h.id,class:"flex items-center gap-4 p-3 rounded-lg bg-gray-800/50"},[e("span",E5,c(h.icon),1),e("div",T5,[e("div",A5,[e("span",D5,c(h.title),1),e("span",M5,c(p(h.id).toFixed(1)),1)]),e("div",O5,[e("div",{class:"h-full bg-gradient-to-r from-amber-500 to-orange-400 rounded-full transition-all",style:Te({width:`${p(h.id)*10}%`})},null,4)])]),e("span",L5,c(h.weight)+"%",1)]))),128))]),e("div",null,[y[4]||(y[4]=e("label",{class:"block text-sm font-medium text-gray-400 mb-2"},"Scoring Notes (optional)",-1)),ye(e("textarea",{"onUpdate:modelValue":y[0]||(y[0]=h=>We(b)?b.value=h:null),rows:"2",class:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl text-white placeholder-gray-500 focus:border-amber-500 focus:outline-none resize-none",placeholder:"Any notes about this evaluation..."},null,512),[[$e,t(b)]])])])):(a(),l("div",j5,[(a(!0),l(Q,null,le(C[t(f)]?.fields,h=>(a(),l("div",{key:h.id,class:"p-4 rounded-xl bg-gray-800/30 border border-gray-700/50"},[e("div",I5,[e("div",R5,[e("label",F5,c(h.label),1),e("p",N5,c(h.hint),1)]),e("div",B5,[e("span",V5,c(t(_)[h.id]),1),y[5]||(y[5]=e("span",{class:"text-gray-500 text-sm"},"/10",-1))])]),e("div",U5,[(a(),l(Q,null,le(10,u=>e("button",{key:u,onClick:v=>k(h.id,u),class:V(["flex-1 py-2.5 rounded-lg text-sm font-medium transition-all",(t(_)[h.id]??0)===u?"bg-amber-500 text-white shadow-lg shadow-amber-500/30":(t(_)[h.id]??0)>u?"bg-amber-500/30 text-amber-300 hover:bg-amber-500/40":"bg-gray-700/50 text-gray-400 hover:bg-gray-700 hover:text-gray-300"])},c(u),11,z5)),64))]),y[6]||(y[6]=e("div",{class:"flex justify-between mt-2 text-[10px] text-gray-600"},[e("span",null,"Poor"),e("span",null,"Average"),e("span",null,"Excellent")],-1))]))),128))]))]),e("div",H5,[t(f)>0?(a(),l("button",{key:0,onClick:w,class:"flex items-center gap-2 px-4 py-2.5 rounded-lg bg-gray-700 hover:bg-gray-600 text-white transition-colors"},[I(t(os),{class:"w-4 h-4"}),y[7]||(y[7]=ce(" Back ",-1))])):(a(),l("div",G5)),e("div",W5,[e("button",{onClick:$,class:"px-4 py-2.5 rounded-lg text-gray-400 hover:text-white transition-colors"}," Cancel "),t(f)<C.length-1?(a(),l("button",{key:0,onClick:P,disabled:!t(M),class:"flex items-center gap-2 px-5 py-2.5 rounded-lg bg-amber-600 hover:bg-amber-500 text-white font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[y[8]||(y[8]=ce(" Next ",-1)),I(t(nt),{class:"w-4 h-4"})],8,q5)):(a(),l("button",{key:1,onClick:S,disabled:t(m),class:"flex items-center gap-2 px-5 py-2.5 rounded-lg bg-gradient-to-r from-amber-600 to-orange-500 hover:from-amber-500 hover:to-orange-400 text-white font-medium transition-all disabled:opacity-50"},[t(m)?j("",!0):(a(),pe(t(ct),{key:0,class:"w-4 h-4"})),t(m)?(a(),l("span",Y5,"Saving...")):(a(),l("span",Z5,"Save Score"))],8,K5))])])])])):j("",!0)]),_:1})]))}}),_i=Object.assign(X5,{__name:"LabScoreWizard"}),Q5={class:"w-full max-w-md max-h-[85vh] flex flex-col bg-gray-900 rounded-2xl shadow-2xl border border-gray-800 overflow-hidden"},J5={class:"flex items-center justify-between px-6 py-4 border-b border-gray-800 bg-gradient-to-r from-blue-500/10 to-cyan-500/10"},e2={class:"flex items-center gap-3"},t2={class:"w-10 h-10 rounded-xl bg-blue-500/20 flex items-center justify-center"},s2={class:"text-xs text-gray-400"},n2={class:"p-6 space-y-4 overflow-y-auto flex-1"},o2={key:0},r2={class:"flex flex-col items-center justify-center gap-3 p-8 border-2 border-dashed border-gray-700 rounded-xl cursor-pointer hover:border-blue-500/50 hover:bg-blue-500/5 transition-all"},a2=["disabled"],l2={class:"w-16 h-16 rounded-2xl bg-blue-500/20 flex items-center justify-center"},i2={class:"text-center"},d2={class:"text-sm font-medium text-white"},c2={key:1,class:"space-y-3"},u2={class:"grid grid-cols-3 gap-2"},p2=["src"],g2=["onClick"],f2={class:"aspect-square rounded-xl border-2 border-dashed border-gray-700 flex items-center justify-center cursor-pointer hover:border-blue-500/50 hover:bg-blue-500/5 transition-all"},m2=["disabled"],h2={class:"flex items-center justify-end gap-3 px-6 py-4 border-t border-gray-800 bg-gray-900/80"},b2=["disabled"],v2=Pe({__name:"LabQuickPhotoUpload",props:{show:{type:Boolean},plant:{}},emits:["close","saved"],setup(s,{emit:n}){const r=s,o=n,i=rt(),{requireAuth:d}=Ao(),g=W([]),f=W(!1),m=W(!1),b=W("");He(()=>r.show,k=>{k&&(g.value=[],b.value="")});async function x(k){const p=k.target;if(!p.files?.length)return;try{await d()}catch{return}if(!r.plant?.id)return;const{getAuthHeaders:T}=Ue(),M=T();f.value=!0;try{for(const P of Array.from(p.files)){const w=new FormData;w.append("file",P),w.append("plant_id",r.plant.id),w.append("plant_code",r.plant.plant_code);const $=await fetch("/api/lab/upload-photo",{method:"POST",headers:M,body:w});if(!$.ok)throw new Error(`Upload failed: ${$.status}`);const S=await $.json();S.path&&g.value.push(S.path)}}catch{}finally{f.value=!1,p.value=""}}function _(k){g.value.splice(k,1)}async function C(){if(!(g.value.length===0||!r.plant?.id)){try{await d()}catch{return}m.value=!0;try{await i.createObservation(r.plant.id,{obs_type:"photo",photos:g.value,general_notes:b.value||void 0,health_score:void 0,vigor_score:void 0,stage:r.plant.status,week_number:r.plant.current_week,day_number:r.plant.current_day}),o("saved"),o("close")}catch{}finally{m.value=!1}}}return(k,p)=>(a(),pe(Qe,{to:"body"},[I(Ke,{"enter-active-class":"transition-all duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-all duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:je(()=>[s.show?(a(),l("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70",onClick:p[3]||(p[3]=Ve(T=>o("close"),["self"]))},[e("div",Q5,[e("div",J5,[e("div",e2,[e("div",t2,[I(t(pt),{class:"w-5 h-5 text-blue-400"})]),e("div",null,[p[4]||(p[4]=e("h2",{class:"text-lg font-semibold text-white"},"Quick Photo",-1)),e("p",s2,c(s.plant?.plant_code||"Upload a photo"),1)])]),e("button",{onClick:p[0]||(p[0]=T=>o("close")),class:"p-2 rounded-lg hover:bg-gray-800 text-gray-400 hover:text-white transition-colors"},[I(t(ze),{class:"w-5 h-5"})])]),e("div",n2,[t(g).length===0?(a(),l("div",o2,[e("label",r2,[e("input",{type:"file",accept:"image/*",multiple:"",class:"hidden",onChange:x,disabled:t(f)},null,40,a2),e("div",l2,[t(f)?(a(),pe(t(ut),{key:1,class:"w-8 h-8 text-blue-400 animate-spin"})):(a(),pe(t(pt),{key:0,class:"w-8 h-8 text-blue-400"}))]),e("div",i2,[e("p",d2,c(t(f)?"Uploading...":"Click to add photos"),1),p[5]||(p[5]=e("p",{class:"text-xs text-gray-500 mt-1"},"JPG, PNG, WEBP up to 10MB",-1))])])])):(a(),l("div",c2,[e("div",u2,[(a(!0),l(Q,null,le(t(g),(T,M)=>(a(),l("div",{key:M,class:"relative aspect-square rounded-xl overflow-hidden bg-gray-800"},[e("img",{src:T,class:"w-full h-full object-cover"},null,8,p2),e("button",{onClick:P=>_(M),class:"absolute top-1.5 right-1.5 w-6 h-6 bg-red-500 rounded-full flex items-center justify-center hover:bg-red-400 transition-colors shadow-lg"},[I(t(ze),{class:"w-4 h-4 text-white"})],8,g2)]))),128)),e("label",f2,[e("input",{type:"file",accept:"image/*",multiple:"",class:"hidden",onChange:x,disabled:t(f)},null,40,m2),t(f)?(a(),pe(t(ut),{key:1,class:"w-6 h-6 text-blue-400 animate-spin"})):(a(),pe(t(st),{key:0,class:"w-6 h-6 text-gray-500"}))])])])),e("div",null,[p[6]||(p[6]=e("label",{class:"block text-sm font-medium text-gray-400 mb-2"},"Quick Note (optional)",-1)),ye(e("textarea",{"onUpdate:modelValue":p[1]||(p[1]=T=>We(b)?b.value=T:null),rows:"2",placeholder:"Add a note about this photo...",class:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl text-white placeholder-gray-500 focus:border-blue-500 focus:outline-none resize-none"},null,512),[[$e,t(b)]])])]),e("div",h2,[e("button",{onClick:p[2]||(p[2]=T=>o("close")),class:"px-4 py-2.5 text-gray-400 hover:text-white transition-colors rounded-xl hover:bg-gray-800"}," Cancel "),e("button",{onClick:C,disabled:t(g).length===0||t(m),class:V(["flex items-center gap-2 px-5 py-2.5 rounded-xl font-medium transition-all",t(g).length===0||t(m)?"bg-gray-700 text-gray-500 cursor-not-allowed":"bg-blue-600 hover:bg-blue-500 text-white"])},[t(m)?(a(),pe(t(ut),{key:1,class:"w-4 h-4 animate-spin"})):(a(),pe(t(lt),{key:0,class:"w-4 h-4"})),ce(" "+c(t(m)?"Saving...":"Save Photo"),1)],10,b2)])])])):j("",!0)]),_:1})]))}}),x2=Object.assign(v2,{__name:"LabQuickPhotoUpload"}),y2={class:"h-full flex overflow-hidden"},_2={class:V(["flex flex-col transition-all duration-300 overflow-hidden border-r border-gray-800/50","w-full lg:w-2/5"])},w2={class:"flex-shrink-0 p-4 space-y-4"},k2={class:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3"},$2={class:"relative flex-1 sm:flex-none sm:w-56"},C2={class:"flex items-center gap-3"},S2={class:"flex items-center bg-gray-800/50 rounded-xl p-1"},P2=["onClick"],E2={class:"flex gap-2 overflow-x-auto pb-1 scrollbar-hide"},T2=["onClick"],A2={class:"px-1.5 py-0.5 rounded bg-black/20 text-xs"},D2={class:"flex-1 overflow-y-auto p-4 pt-0"},M2={key:0},O2={key:0,class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},L2={key:1,class:"space-y-2"},j2={key:1,class:"flex flex-col items-center justify-center py-16 text-center"},I2={class:"w-20 h-20 rounded-2xl bg-gray-800/50 flex items-center justify-center mb-4"},R2={class:"text-base text-gray-500 mb-6 max-w-sm"},F2={class:"hidden lg:flex flex-1 flex-col overflow-hidden bg-gray-900/30"},N2={class:"flex-shrink-0 p-3 flex items-center justify-between border-b border-gray-800/50"},B2={class:"flex-shrink-0 p-5 border-b border-gray-800/50"},V2={class:"flex items-center justify-between"},U2={class:"flex-1 overflow-y-auto p-5"},z2=Pe({__name:"LabPlants",emits:["openNewPlant","addObservation"],setup(s,{emit:n}){const r=n,o=rt(),i=W(""),d=W(null),g=W(null),f=W(!1),m=W(null),b=W(!1),x=W(!1);ot(()=>{o.fetchAllObservations()});const _=U(()=>{const B=[];for(const O of Object.keys(Fe)){if(["archived","culled"].includes(O))continue;const R=o.plants.filter(X=>X.status===O).length;R>0&&B.push({id:O,count:R})}return B}),C=U(()=>{let B=[...o.plants];if(d.value?B=B.filter(O=>O.status===d.value):B=B.filter(O=>!["archived","culled"].includes(O.status)),i.value){const O=i.value.toLowerCase();B=B.filter(R=>R.plant_code.toLowerCase().includes(O)||R.pheno_label?.toLowerCase().includes(O)||R.strain_name?.toLowerCase().includes(O))}return B});function k(){r("openNewPlant")}function p(B){g.value=B,o.fetchPlant(B.id)}function T(){g.value=null,o.clearCurrentPlant()}function M(){g.value?.id&&o.fetchPlant(g.value.id)}function P(){g.value&&r("addObservation",g.value.id)}function w(){o.clearPlantForObservation(),r("addObservation","")}function $(){g.value&&(b.value=!0)}function S(){g.value&&(x.value=!0)}function A(){x.value=!1,g.value?.id&&(o.fetchPlant(g.value.id),o.fetchAllObservations())}function y(B){b.value=!1,g.value?.id&&(o.fetchPlant(g.value.id),o.fetchPlants(),o.fetchDashboard())}function h(B){m.value=B,f.value=!0}function u(B){if(B.plant_id){const O=o.plants.find(R=>R.id===B.plant_id);O&&p(O)}}function v(B){m.value=B,f.value=!0}async function D(B){if(B.id)try{await o.updateObservation(B.id,B),f.value=!1,m.value=null,o.fetchAllObservations(),g.value&&o.fetchPlant(g.value.id)}catch{}}async function z(B){try{await o.deleteObservation(B),f.value=!1,m.value=null,o.fetchAllObservations(),g.value&&o.fetchPlant(g.value.id)}catch{}}async function G(B,O,R){let X=o.allObservations.find(we=>we.id===B);if(X||(X=o.currentPlantObservations.find(we=>we.id===B)),!X||!X.photos)return;const oe=X.photos.filter((we,re)=>re!==O);try{await o.updateObservation(B,{photos:oe}),o.fetchAllObservations(),g.value&&o.fetchPlant(g.value.id)}catch{}}return He(()=>o.plants,B=>{if(g.value){const O=B.find(R=>R.id===g.value?.id);O&&(g.value=O)}},{deep:!0}),(B,O)=>{const R=a1,X=v1,oe=By,we=yi,re=i5,E=_i,L=x2;return a(),l("div",y2,[e("div",_2,[e("div",w2,[e("div",k2,[e("div",$2,[I(t(Us),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),ye(e("input",{"onUpdate:modelValue":O[0]||(O[0]=F=>We(i)?i.value=F:null),type:"text",placeholder:"Search plants...",class:"w-full pl-10 pr-4 py-3 rounded-xl bg-gray-800/50 border border-gray-700/50 text-base text-white placeholder-gray-500 focus:border-spider-green-500/50 focus:outline-none transition-colors"},null,512),[[$e,t(i)]])]),e("div",C2,[e("div",S2,[(a(),l(Q,null,le(["cards","list"],F=>e("button",{key:F,onClick:be=>t(o).plantsView=F,class:V(["p-2 rounded-lg transition-colors",t(o).plantsView===F?"bg-spider-green-600/30 text-spider-green-400":"text-gray-500 hover:text-gray-300"])},[F==="cards"?(a(),pe(t(xn),{key:0,class:"w-5 h-5"})):(a(),pe(t(Mn),{key:1,class:"w-5 h-5"}))],10,P2)),64))]),e("button",{onClick:k,class:"flex items-center gap-2 px-4 py-3 rounded-xl bg-gradient-to-r from-spider-green-600 to-spider-green-500 hover:from-spider-green-500 hover:to-spider-green-400 text-white text-sm font-medium shadow-lg shadow-spider-green-500/20 transition-all"},[I(t(st),{class:"w-5 h-5"}),O[5]||(O[5]=e("span",{class:"hidden sm:inline"},"New Plant",-1))])])]),e("div",E2,[e("button",{onClick:O[1]||(O[1]=F=>d.value=null),class:V(["px-3 py-2 rounded-xl text-sm font-medium whitespace-nowrap transition-all",t(d)?"bg-gray-700/50 text-gray-400 hover:bg-gray-600/50":"bg-spider-green-600 text-white"])}," All Plants ",2),(a(!0),l(Q,null,le(t(_),F=>(a(),l("button",{key:F.id,onClick:be=>d.value=F.id,class:V(["flex items-center gap-2 px-3 py-2 rounded-xl text-sm font-medium whitespace-nowrap transition-all",t(d)===F.id?`bg-${t(Fe)[F.id].bgColor} text-${t(Fe)[F.id].color}`:"bg-gray-700/50 text-gray-400 hover:bg-gray-600/50"])},[e("span",null,c(t(Fe)[F.id].icon),1),e("span",null,c(t(Fe)[F.id].shortLabel),1),e("span",A2,c(F.count),1)],10,T2))),128))])]),e("div",D2,[t(C).length>0?(a(),l("div",M2,[t(o).plantsView==="cards"?(a(),l("div",O2,[(a(!0),l(Q,null,le(t(C),F=>(a(),pe(R,{key:F.id,plant:F,active:t(g)?.id===F.id,onClick:be=>p(F)},null,8,["plant","active","onClick"]))),128))])):(a(),l("div",L2,[(a(!0),l(Q,null,le(t(C),F=>(a(),pe(X,{key:F.id,plant:F,active:t(g)?.id===F.id,onClick:be=>p(F)},null,8,["plant","active","onClick"]))),128))]))])):(a(),l("div",j2,[e("div",I2,[I(t(Ne),{class:"w-10 h-10 text-gray-600"})]),O[7]||(O[7]=e("h3",{class:"text-lg font-semibold text-gray-300 mb-2"},"No plants found",-1)),e("p",R2,c(t(i)?"Try adjusting your search or filters":"Start by adding your first plant to the laboratory"),1),t(i)?j("",!0):(a(),l("button",{key:0,onClick:k,class:"flex items-center gap-2 px-5 py-3 rounded-xl bg-spider-green-600 hover:bg-spider-green-500 text-white font-medium transition-colors"},[I(t(st),{class:"w-5 h-5"}),O[6]||(O[6]=ce(" Add First Plant ",-1))]))]))])]),e("div",F2,[t(g)?(a(),l(Q,{key:0},[e("div",N2,[e("button",{onClick:T,class:"flex items-center gap-2 px-3 py-2 rounded-xl hover:bg-gray-800 text-gray-400 hover:text-white transition-colors"},[I(t(qc),{class:"w-5 h-5"}),O[8]||(O[8]=e("span",{class:"text-sm"},"Back to Timeline",-1))])]),I(oe,{plant:t(g),observations:t(o).currentPlantObservations,onAddObservation:P,onAddPhoto:S,onScore:$,onStageChanged:M,onPlantUpdated:M,onSelectObservation:h,onEditObservation:v,onDeletePhoto:G,onSelectClone:p},null,8,["plant","observations"])],64)):(a(),l(Q,{key:1},[e("div",B2,[e("div",V2,[O[10]||(O[10]=e("div",null,[e("h2",{class:"text-xl font-bold text-white"},"Journal Timeline"),e("p",{class:"text-base text-gray-400 mt-1"},"All observations from all your plants")],-1)),t(o).activePlants.length>0?(a(),l("button",{key:0,onClick:w,class:"flex items-center gap-2 px-4 py-3 rounded-xl bg-spider-green-600 hover:bg-spider-green-500 text-white font-medium transition-colors"},[I(t(st),{class:"w-5 h-5"}),O[9]||(O[9]=ce(" Add Entry ",-1))])):j("",!0)])]),e("div",U2,[I(we,{observations:t(o).allObservations,"show-all-plants":!0,onAddObservation:w,onSelectObservation:u,onEditObservation:v,onDeletePhoto:G},null,8,["observations"])])],64))]),I(re,{show:t(f),observation:t(m),onClose:O[2]||(O[2]=F=>{f.value=!1,m.value=null}),onSave:D,onDelete:z},null,8,["show","observation"]),I(E,{show:t(b),plant:t(g),onClose:O[3]||(O[3]=F=>b.value=!1),onSaved:y},null,8,["show","plant"]),I(L,{show:t(x),plant:t(g),onClose:O[4]||(O[4]=F=>x.value=!1),onSaved:A},null,8,["show","plant"])])}}}),H2=Object.assign(Pt(z2,[["__scopeId","data-v-c7bf4130"]]),{__name:"LabPlants"});function Yt(s){return ul()?(pl(s),!0):!1}function ps(){const s=new Set,n=d=>{s.delete(d)};return{on:d=>{s.add(d);const g=()=>n(d);return Yt(g),{off:g}},off:n,trigger:(...d)=>Promise.all(Array.from(s).map(g=>g(...d))),clear:()=>{s.clear()}}}const gs=new WeakMap,wi=(...s)=>{var n;const r=s[0],o=(n=ms())==null?void 0:n.proxy;if(o==null&&!gl())throw new Error("injectLocal must be called in setup");return o&&gs.has(o)&&r in gs.get(o)?gs.get(o)[r]:nd(...s)};function G2(s,n){var r;const o=(r=ms())==null?void 0:r.proxy;if(o==null)throw new Error("provideLocal must be called in setup");gs.has(o)||gs.set(o,Object.create(null));const i=gs.get(o);return i[s]=n,ln(s,n)}function W2(s,n){const r=n?.injectionKey||Symbol(s.name||"InjectionState"),o=n?.defaultValue;return[(...g)=>{const f=s(...g);return G2(r,f),f},()=>wi(r,o)]}const yn=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const q2=Object.prototype.toString,K2=s=>q2.call(s)==="[object Object]",_n=()=>{};function Y2(s,n){function r(...o){return new Promise((i,d)=>{Promise.resolve(s(()=>n.apply(this,o),{fn:n,thisArg:this,args:o})).then(i).catch(d)})}return r}function Z2(s,n={}){let r,o,i=_n;const d=m=>{clearTimeout(m),i(),i=_n};let g;return m=>{const b=Be(s),x=Be(n.maxWait);return r&&d(r),b<=0||x!==void 0&&x<=0?(o&&(d(o),o=void 0),Promise.resolve(m())):new Promise((_,C)=>{i=n.rejectOnCancel?C:_,g=m,x&&!o&&(o=setTimeout(()=>{r&&d(r),o=void 0,_(g())},x)),r=setTimeout(()=>{o&&d(o),o=void 0,_(m())},b)})}}function X2(s,n=!1,r="Timeout"){return new Promise((o,i)=>{setTimeout(n?()=>i(r):o,s)})}function Sa(s){return s.endsWith("rem")?Number.parseFloat(s)*16:Number.parseFloat(s)}function un(s){return Array.isArray(s)?s:[s]}function Q2(s){return ms()}function J2(s,n=200,r={}){return Y2(Z2(n,r),s)}function Pa(s,n=200,r={}){const o=W(Be(s)),i=J2(()=>{o.value=s.value},n,r);return He(s,()=>i()),Do(o)}function ki(s,n=!0,r){Q2()?ot(s,r):n?s():fl(s)}function e_(s,n=1e3,r={}){const{immediate:o=!0,immediateCallback:i=!1}=r;let d=null;const g=Re(!1);function f(){d&&(clearInterval(d),d=null)}function m(){g.value=!1,f()}function b(){const x=Be(n);x<=0||(g.value=!0,i&&s(),f(),g.value&&(d=setInterval(s,x)))}if(o&&yn&&b(),We(n)||typeof n=="function"){const x=He(n,()=>{g.value&&yn&&b()});Yt(x)}return Yt(m),{isActive:Do(g),pause:m,resume:b}}function t_(s,n,r={}){const{immediate:o=!0,immediateCallback:i=!1}=r,d=Re(!1);let g;function f(){g&&(clearTimeout(g),g=void 0)}function m(){d.value=!1,f()}function b(...x){i&&s(),f(),d.value=!0,g=setTimeout(()=>{d.value=!1,g=void 0,s(...x)},Be(n))}return o&&(d.value=!0,yn&&b()),Yt(m),{isPending:Do(d),start:b,stop:m}}function s_(s=1e3,n={}){const{controls:r=!1,callback:o}=n,i=t_(o??_n,s,n),d=U(()=>!i.isPending.value);return r?{ready:d,...i}:d}function $i(s,n,r){return He(s,n,{...r,immediate:!0})}const rs=yn?window:void 0;function zt(s){var n;const r=Be(s);return(n=r?.$el)!=null?n:r}function _o(...s){const n=[],r=()=>{n.forEach(f=>f()),n.length=0},o=(f,m,b,x)=>(f.addEventListener(m,b,x),()=>f.removeEventListener(m,b,x)),i=U(()=>{const f=un(Be(s[0])).filter(m=>m!=null);return f.every(m=>typeof m!="string")?f:void 0}),d=$i(()=>{var f,m;return[(m=(f=i.value)==null?void 0:f.map(b=>zt(b)))!=null?m:[rs].filter(b=>b!=null),un(Be(i.value?s[1]:s[0])),un(t(i.value?s[2]:s[1])),Be(i.value?s[3]:s[2])]},([f,m,b,x])=>{if(r(),!f?.length||!m?.length||!b?.length)return;const _=K2(x)?{...x}:x;n.push(...f.flatMap(C=>m.flatMap(k=>b.map(p=>o(C,k,p,_)))))},{flush:"post"}),g=()=>{d(),r()};return Yt(r),g}function n_(){const s=Re(!1),n=ms();return n&&ot(()=>{s.value=!0},n),s}function rr(s){const n=n_();return U(()=>(n.value,!!s()))}function ar(s,n={}){const{immediate:r=!0,fpsLimit:o=void 0,window:i=rs,once:d=!1}=n,g=Re(!1),f=U(()=>o?1e3/Be(o):null);let m=0,b=null;function x(k){if(!g.value||!i)return;m||(m=k);const p=k-m;if(f.value&&p<f.value){b=i.requestAnimationFrame(x);return}if(m=k,s({delta:p,timestamp:k}),d){g.value=!1,b=null;return}b=i.requestAnimationFrame(x)}function _(){!g.value&&i&&(g.value=!0,m=0,b=i.requestAnimationFrame(x))}function C(){g.value=!1,b!=null&&i&&(i.cancelAnimationFrame(b),b=null)}return r&&_(),Yt(C),{isActive:gn(g),pause:C,resume:_}}const o_=Symbol("vueuse-ssr-width");function r_(){const s=gl()?wi(o_,null):null;return typeof s=="number"?s:void 0}function Ci(s,n={}){const{window:r=rs,ssrWidth:o=r_()}=n,i=rr(()=>r&&"matchMedia"in r&&typeof r.matchMedia=="function"),d=Re(typeof o=="number"),g=Re(),f=Re(!1),m=b=>{f.value=b.matches};return Ct(()=>{if(d.value){d.value=!i.value;const b=Be(s).split(",");f.value=b.some(x=>{const _=x.includes("not all"),C=x.match(/\(\s*min-width:\s*(-?\d+(?:\.\d*)?[a-z]+\s*)\)/),k=x.match(/\(\s*max-width:\s*(-?\d+(?:\.\d*)?[a-z]+\s*)\)/);let p=!!(C||k);return C&&p&&(p=o>=Sa(C[1])),k&&p&&(p=o<=Sa(k[1])),_?!p:p});return}i.value&&(g.value=r.matchMedia(Be(s)),f.value=g.value.matches)}),_o(g,"change",m,{passive:!0}),U(()=>f.value)}function a_(s={}){const{window:n=rs}=s,r=Re(1),o=Ci(()=>`(resolution: ${r.value}dppx)`,s);let i=_n;return n&&(i=$i(o,()=>r.value=n.devicePixelRatio)),{pixelRatio:gn(r),stop:i}}function l_(s,n,r={}){const{window:o=rs,...i}=r;let d;const g=rr(()=>o&&"ResizeObserver"in o),f=()=>{d&&(d.disconnect(),d=void 0)},m=U(()=>{const _=Be(s);return Array.isArray(_)?_.map(C=>zt(C)):[zt(_)]}),b=He(m,_=>{if(f(),g.value&&o){d=new ResizeObserver(n);for(const C of _)C&&d.observe(C,i)}},{immediate:!0,flush:"post"}),x=()=>{f(),b()};return Yt(x),{isSupported:g,stop:x}}function i_(s,n={width:0,height:0},r={}){const{window:o=rs,box:i="content-box"}=r,d=U(()=>{var _,C;return(C=(_=zt(s))==null?void 0:_.namespaceURI)==null?void 0:C.includes("svg")}),g=Re(n.width),f=Re(n.height),{stop:m}=l_(s,([_])=>{const C=i==="border-box"?_.borderBoxSize:i==="content-box"?_.contentBoxSize:_.devicePixelContentBoxSize;if(o&&d.value){const k=zt(s);if(k){const p=k.getBoundingClientRect();g.value=p.width,f.value=p.height}}else if(C){const k=un(C);g.value=k.reduce((p,{inlineSize:T})=>p+T,0),f.value=k.reduce((p,{blockSize:T})=>p+T,0)}else g.value=_.contentRect.width,f.value=_.contentRect.height},r);ki(()=>{const _=zt(s);_&&(g.value="offsetWidth"in _?_.offsetWidth:n.width,f.value="offsetHeight"in _?_.offsetHeight:n.height)});const b=He(()=>zt(s),_=>{g.value=_?n.width:0,f.value=_?n.height:0});function x(){m(),b()}return{width:g,height:f,stop:x}}function d_(s){var n;const r=Re(0);if(typeof performance>"u")return r;const o=(n=s?.every)!=null?n:10;let i=performance.now(),d=0;return ar(()=>{if(d+=1,d>=o){const g=performance.now(),f=g-i;r.value=Math.round(1e3/(f/d)),i=g,d=0}}),r}function c_(s={}){const n=W(),r=rr(()=>typeof performance<"u"&&"memory"in performance);if(r.value){const{interval:o=1e3}=s;e_(()=>{n.value=performance.memory},o,{immediate:s.immediate,immediateCallback:s.immediateCallback})}return{isSupported:r,memory:n}}function u_(s={}){const{window:n=rs,initialWidth:r=Number.POSITIVE_INFINITY,initialHeight:o=Number.POSITIVE_INFINITY,listenOrientation:i=!0,includeScrollbar:d=!0,type:g="inner"}=s,f=Re(r),m=Re(o),b=()=>{if(n)if(g==="outer")f.value=n.outerWidth,m.value=n.outerHeight;else if(g==="visual"&&n.visualViewport){const{width:_,height:C,scale:k}=n.visualViewport;f.value=Math.round(_*k),m.value=Math.round(C*k)}else d?(f.value=n.innerWidth,m.value=n.innerHeight):(f.value=n.document.documentElement.clientWidth,m.value=n.document.documentElement.clientHeight)};b(),ki(b);const x={passive:!0};if(_o("resize",b,x),n&&g==="visual"&&n.visualViewport&&_o(n.visualViewport,"resize",b,x),i){const _=Ci("(orientation: portrait)");He(_,()=>b())}return{width:f,height:m}}function Ea(s){var n;const r=((n=s?.replace(/([A-Z])+/g,p_))==null?void 0:n.split(/(?=[A-Z])|[\.\-\s_]/).map(o=>o.toLowerCase()))??[];return r.length===0?"":r.length===1?r[0]:r.reduce((o,i)=>`${o}${i.charAt(0).toUpperCase()}${i.slice(1)}`)}function p_(s){if(!s||s.length===0)return"";const n=s.toLowerCase();return n.substring(0,1).toUpperCase()+n.substring(1,n.length)}function Si(s,n){if(Object.is(s,n))return!0;if(s instanceof Date&&n instanceof Date)return s.getTime()===n.getTime();if(s instanceof RegExp&&n instanceof RegExp)return s.toString()===n.toString();if(typeof s!="object"||s===null||typeof n!="object"||n===null)return!1;const r=Reflect.ownKeys(s),o=Reflect.ownKeys(n);if(r.length!==o.length)return!1;for(let i=0;i<r.length;i++)if(!Reflect.has(n,r[i])||!Si(s[r[i]],n[r[i]]))return!1;return!0}function Jt(s){return typeof s=="function"}function Pi(s){return typeof s=="number"&&!Number.isNaN(s)}function lr(s){return g_(s,"[object Object]")}function ir(s){return typeof s=="string"}function g_(s,n){return Object.prototype.toString.call(s)===n}function wo(s){return typeof s>"u"}class f_{nativeEvent;NONE=0;CAPTURING_PHASE=1;AT_TARGET=2;BUBBLING_PHASE=3;relatedTarget=null;get altKey(){return this.getFromNative("altKey",!1)}get button(){return this.getFromNative("button",0)}get buttons(){return this.getFromNative("buttons",0)}get clientX(){return this.getFromNative("clientX",0)}get clientY(){return this.getFromNative("clientY",0)}get ctrlKey(){return this.getFromNative("ctrlKey",!1)}get layerX(){return this.getFromNative("layerX",0)}get layerY(){return this.getFromNative("layerY",0)}get metaKey(){return this.getFromNative("metaKey",!1)}get movementX(){return this.getFromNative("movementX",0)}get movementY(){return this.getFromNative("movementY",0)}get offsetX(){return this.getFromNative("offsetX",0)}get offsetY(){return this.getFromNative("offsetY",0)}get pageX(){return this.getFromNative("pageX",0)}get pageY(){return this.getFromNative("pageY",0)}get screenX(){return this.getFromNative("screenX",0)}get screenY(){return this.getFromNative("screenY",0)}get shiftKey(){return this.getFromNative("shiftKey",!1)}get x(){return this.getFromNative("x",0)}get y(){return this.getFromNative("y",0)}get detail(){return this.getFromNative("detail",0)}get view(){return this.getFromNative("view",null)}get which(){return this.getFromNative("which",0)}get cancelBubble(){return this.getFromNative("cancelBubble",!1)}get composed(){return this.getFromNative("composed",!1)}get eventPhase(){return this.getFromNative("eventPhase",0)}get isTrusted(){return this.getFromNative("isTrusted",!1)}get returnValue(){return this.getFromNative("returnValue",!1)}get timeStamp(){return this.getFromNative("timeStamp",0)}get cancelable(){return this.getFromNative("cancelable",!1)}get defaultPrevented(){return this.getFromNative("defaultPrevented",!1)}constructor(n){this.nativeEvent=n}getFromNative(n,r){return n in this.nativeEvent?this.nativeEvent[n]:r}}const Vn=new Le;class ft extends f_{type;bubbles;internalPointer;intersection;camera;currentObject;object;propagationState;get pointerId(){return this.internalPointer.id}get pointerType(){return this.internalPointer.type}get pointerState(){return this.internalPointer.state}get distance(){return this.intersection.distance}get distanceToRay(){return this.intersection.distanceToRay}get point(){return this.intersection.point}get index(){return this.intersection.index}get face(){return this.intersection.face}get faceIndex(){return this.intersection.faceIndex}get uv(){return this.intersection.uv}get uv1(){return this.intersection.uv1}get normal(){return this.intersection.normal}get instanceId(){return this.intersection.instanceId}get pointOnLine(){return this.intersection.pointOnLine}get batchId(){return this.intersection.batchId}get pointerPosition(){return this.intersection.pointerPosition}get pointerQuaternion(){return this.intersection.pointerQuaternion}get pointOnFace(){return this.intersection.pointOnFace}get localPoint(){return this.intersection.localPoint}get details(){return this.intersection.details}get target(){return this.object}get currentTarget(){return this.currentObject}get eventObject(){return this.currentObject}get srcElement(){return this.currentObject}_pointer;get pointer(){return this._pointer==null&&(Vn.copy(this.intersection.point).project(this.camera),this._pointer=new tt(Vn.x,Vn.y)),this._pointer}_ray;get ray(){if(this._ray!=null)return this._ray;switch(this.intersection.details.type){case"screen-ray":case"ray":case"sphere":return this._ray=new bn(this.intersection.pointerPosition,new Le(0,0,-1).applyQuaternion(this.intersection.pointerQuaternion));case"lines":return this._ray=new bn(this.intersection.details.line.start,this.intersection.details.line.end.clone().sub(this.intersection.details.line.start).normalize())}}_intersections=[];get intersections(){return this._intersections==null&&(this._intersections=[{...this.intersection,eventObject:this.currentObject}]),this._intersections}_unprojectedPoint;get unprojectedPoint(){if(this._unprojectedPoint==null){const n=this.pointer;this._unprojectedPoint=new Le(n.x,n.y,0).unproject(this.camera)}return this._unprojectedPoint}get stopped(){return this.propagationState.stoppedImmediate||this.propagationState.stopped}get stoppedImmediate(){return this.propagationState.stoppedImmediate}get delta(){throw new Error("not supported")}constructor(n,r,o,i,d,g,f=d.object,m=f,b={stopped:!r,stoppedImmediate:!1}){super(o),this.type=n,this.bubbles=r,this.internalPointer=i,this.intersection=d,this.camera=g,this.currentObject=f,this.object=m,this.propagationState=b}stopPropagation(){this.propagationState.stopped=!0}stopImmediatePropagation(){this.propagationState.stoppedImmediate=!0}retarget(n){return new ft(this.type,this.bubbles,this.nativeEvent,this.internalPointer,this.intersection,this.camera,n,this.target,this.propagationState)}}class wn extends ft{get deltaX(){return this.nativeEvent.deltaX}get deltaY(){return this.nativeEvent.deltaY}get deltaZ(){return this.nativeEvent.deltaZ}constructor(n,r,o,i,d,g){super("wheel",!0,n,r,o,i,d,g)}retarget(n){return new wn(this.nativeEvent,this.internalPointer,this.intersection,this.camera,n,this.target)}}function bt(s){Ei(s,s.currentObject)}function Ei(s,n){if(n==null)return;const r=h_(n,s.type);if(r!=null&&r.length>0){const o=s.retarget(n),i=r.length;for(let d=0;d<i&&!o.stoppedImmediate;d++)r[d](o)}s.stopped||Ei(s,n.parent)}const Ti={click:"onClick",contextmenu:"onContextMenu",dblclick:"onDoubleClick",pointercancel:"onPointerCancel",pointerdown:"onPointerDown",pointerenter:"onPointerEnter",pointerleave:"onPointerLeave",pointermove:"onPointerMove",pointerout:"onPointerOut",pointerover:"onPointerOver",pointerup:"onPointerUp",wheel:"onWheel"},m_=Object.keys(Ti);function h_(s,n){if(s._listeners!=null&&n in s._listeners)return s._listeners[n];let r;if(s.isVoidObject&&n==="click"&&s.parent?.__r3f!=null&&(r=s.parent.__r3f.root.getState().onPointerMissed),s.__r3f!=null&&(r=s.__r3f.handlers[Ti[n]]),r!=null)return[r]}const b_=1e10,v_=new hd(b_),Ta=new Map;function Ai(s){let n=Ta.get(s);return n==null&&(n=new Zs(v_),n.isVoidObject=!0,n.parent=s,n.pointerEventsOrder=-1/0,Ta.set(s,n)),n}function x_(s,n,r){const o=n.normal??n.face?.normal;return o==null?!1:(s.setFromNormalAndCoplanarPoint(o,n.localPoint),s.applyMatrix4(r),!0)}function y_(s,n,r){if(n==="none"||n==="listener"&&!s)return!1;if(r==="all")return!0;if(typeof r=="function")return({id:d,type:g,state:f})=>r(d,g,f);let o,i;return"deny"in r?(i=!0,o=r.deny):(i=!1,o=r.allow),Array.isArray(o)?d=>Aa(o.includes(d.type),i):d=>Aa(o===d.type,i)}function Aa(s,n){return n?!s:s}function Di(s,n,r,o=!1,i,d,g){const f=o||__(s,n),m=n.pointerEvents??i,b=m??n.defaultPointerEvents??"listener",x=n.pointerEventsType??d??"all",_=n.pointerEventsOrder??g??0,C=y_(f,b,x),k=r.length;if(k===1)(C===!0||typeof C=="function"&&C(r[0]))&&Un(r[0],n,b,x,_);else if(C===!0)for(let M=0;M<k;M++)Un(r[M],n,b,x,_);else if(typeof C=="function")for(let M=0;M<k;M++){const P=r[M];C(P)&&Un(P,n,b,x,_)}if(n.children.length===0||n.intersectChildren===!1)return;const p=n.interactableDescendants??n.children,T=p.length;for(let M=0;M<T;M++)Di(s,p[M],r,f,m,x,_)}function __(s,n){if(n.ancestorsHaveListeners||s==="pointer"&&n.ancestorsHavePointerListeners||s==="wheel"&&n.ancestorsHaveWheelListeners||n.__r3f!=null&&n.__r3f?.eventCount>0&&(s==="wheel"&&n.__r3f.handlers.onWheel!=null||s==="pointer"&&Object.keys(n.__r3f.handlers).some(i=>i!="onWheel")))return!0;if(n._listeners==null)return!1;if(s==="wheel"){const i=n._listeners.wheel;return i!=null&&i.length>0}const r=Object.entries(n._listeners),o=r.length;for(let i=0;i<o;i++){const d=r[i];if(d[0]!=="wheel"&&m_.includes(d[0])&&d[1]!=null&&d[1].length>0)return!0}return!1}function Un({intersector:s,options:n},r,o,i,d){n.filter?.(r,o,i,d)!==!1&&s.executeIntersection(r,d)}function w_(s,n,{customSort:r=k_}={},o){let i,d,g;const f=s.length;for(let m=0;m<f;m++){const b=s[m],x=n?.[m];(i==null||r(b,x,i,d)<0)&&(g=m,i=b,d=x)}return g}function k_(s,n=0,r,o=0){return n!=o?o-n:s.distance-r.distance}const Da=1e7;function $_(s,n,r,o,i,d=0){const g=n.direction.clone().multiplyScalar(Da),f=Da;return{distance:f+d,object:Ai(s),point:g,normal:n.origin.clone().sub(g).normalize(),details:r(g,f),pointerPosition:o,pointerQuaternion:i,pointOnFace:g,localPoint:g}}function C_(s,n,r){for(;r>0;)s.push(n),--r}const zn=Symbol("buttonsDownTime"),S_=Symbol("buttonsClickTime");globalThis.pointerEventspointerMap??=new Map;Lo.prototype.setPointerCapture=function(s){dr(s)?.setCapture(this)};Lo.prototype.releasePointerCapture=function(s){const n=dr(s);n==null||!n.hasCaptured(this)||n.setCapture(void 0)};Lo.prototype.hasPointerCapture=function(s){return dr(s)?.hasCaptured(this)??!1};function dr(s){return globalThis.pointerEventspointerMap?.get(s)}class P_{id;type;state;intersector;getCamera;onMoveCommited;parentSetPointerCapture;parentReleasePointerCapture;options;prevIntersection;intersection;prevEnabled=!0;enabled=!0;wheelIntersection;pointerEntered=[];pointerEnteredHelper=[];pointerCapture;buttonsDownTime=new Map;buttonsDown=new Set;wasMoved=!1;onFirstMove=[];constructor(n,r,o,i,d,g,f,m,b={}){this.id=n,this.type=r,this.state=o,this.intersector=i,this.getCamera=d,this.onMoveCommited=g,this.parentSetPointerCapture=f,this.parentReleasePointerCapture=m,this.options=b,globalThis.pointerEventspointerMap?.set(n,this)}getPointerCapture(){return this.pointerCapture}hasCaptured(n){return this.pointerCapture?.object===n}setCapture(n){this.pointerCapture?.object!==n&&(this.pointerCapture!=null&&(this.parentReleasePointerCapture?.(),this.pointerCapture=void 0),n!=null&&this.intersection!=null&&(this.pointerCapture={object:n,intersection:this.intersection},this.parentSetPointerCapture?.()))}getButtonsDown(){return this.buttonsDown}getIntersection(){return this.intersection}getEnabled(){return this.enabled}setEnabled(n,r,o=!0){this.enabled!==n&&(!n&&this.pointerCapture!=null&&(this.parentReleasePointerCapture?.(),this.pointerCapture=void 0),this.enabled=n,o&&this.commit(r,!1))}computeIntersection(n,r,o){return this.pointerCapture!=null?this.intersector.intersectPointerCapture(this.pointerCapture,o):(this.intersector.startIntersection(o),Di(n,r,[this]),this.intersector.finalizeIntersection(r))}setIntersection(n){this.intersection=n}commit(n,r){const o=this.getCamera(),i=this.prevEnabled?this.prevIntersection:void 0,d=this.enabled?this.intersection:void 0;i!=null&&i.object!=d?.object&&bt(new ft("pointerout",!0,n,this,i,o));const g=this.pointerEntered;this.pointerEntered=[],this.pointerEnteredHelper.length=0,Mi(d?.object,this.pointerEntered,g,this.pointerEnteredHelper);const f=g.length;for(let m=0;m<f;m++){const b=g[m];bt(new ft("pointerleave",!1,n,this,i,o,b))}d!=null&&i?.object!=d.object&&bt(new ft("pointerover",!0,n,this,d,o));for(let m=this.pointerEnteredHelper.length-1;m>=0;m--){const b=this.pointerEnteredHelper[m];bt(new ft("pointerenter",!1,n,this,d,o,b))}if(r&&d!=null&&bt(new ft("pointermove",!0,n,this,d,o)),this.prevIntersection=this.intersection,this.prevEnabled=this.enabled,!this.wasMoved&&this.intersector.isReady()){this.wasMoved=!0;const m=this.onFirstMove.length;for(let b=0;b<m;b++)this.onFirstMove[b](o);this.onFirstMove.length=0}this.onMoveCommited?.(this)}move(n,r){this.intersection=this.computeIntersection("pointer",n,r),this.commit(r,!0)}over(n,r){this.wasMoved||(this.intersection=this.computeIntersection("pointer",n,r),this.commit(r,!1))}emitMove(n){this.intersection!=null&&bt(new ft("pointermove",!0,n,this,this.intersection,this.getCamera()))}down(n){if(this.buttonsDown.add(n.button),!this.enabled)return;if(!this.wasMoved){this.onFirstMove.push(this.down.bind(this,n));return}if(this.intersection==null)return;bt(new ft("pointerdown",!0,n,this,this.intersection,this.getCamera()));const{object:r}=this.intersection;r[zn]??=new Map,r[zn].set(n.button,n.timeStamp),this.buttonsDownTime.set(n.button,n.timeStamp)}up(n){if(this.buttonsDown.delete(n.button),!this.enabled)return;if(!this.wasMoved){this.onFirstMove.push(this.up.bind(this,n));return}if(this.intersection==null)return;const{clickThesholdMs:r,contextMenuButton:o=2,dblClickThresholdMs:i=500,clickThresholdMs:d=r??300}=this.options;this.pointerCapture=void 0;const g=E_(this.buttonsDownTime,this.intersection.object[zn],n.button,n.timeStamp,d),f=this.getCamera();if(g&&n.button===o&&bt(new ft("contextmenu",!0,n,this,this.intersection,f)),bt(new ft("pointerup",!0,n,this,this.intersection,f)),!g||n.button===o)return;bt(new ft("click",!0,n,this,this.intersection,f));const{object:m}=this.intersection,b=m[S_]??=new Map,x=b.get(n.button);if(x==null||n.timeStamp-x>i){b.set(n.button,n.timeStamp);return}bt(new ft("dblclick",!0,n,this,this.intersection,f)),b.delete(n.button)}cancel(n){if(this.enabled){if(!this.wasMoved){this.onFirstMove.push(this.cancel.bind(this,n));return}this.intersection!=null&&bt(new ft("pointercancel",!0,n,this,this.intersection,this.getCamera()))}}wheel(n,r,o=!1){if(!this.enabled)return;if(!this.wasMoved&&o){this.onFirstMove.push(this.wheel.bind(this,n,r,o));return}o||(this.wheelIntersection=this.computeIntersection("wheel",n,r));const i=o?this.intersection:this.wheelIntersection;i!=null&&bt(new wn(r,this,i,this.getCamera()))}emitWheel(n,r=!1){if(!this.enabled)return;if(!this.wasMoved&&r){this.onFirstMove.push(this.emitWheel.bind(this,n,r));return}const o=r?this.intersection:this.wheelIntersection;o!=null&&bt(new wn(n,this,o,this.getCamera()))}exit(n){this.wasMoved&&(this.pointerCapture!=null&&(this.parentReleasePointerCapture?.(),this.pointerCapture=void 0),this.intersection=void 0,this.commit(n,!1)),this.onFirstMove.length=0,this.wasMoved=!1}}function Mi(s,n,r,o){if(s==null)return;const i=r.indexOf(s);i!=-1?r.splice(i,1):o.push(s),n.push(s),Mi(s.parent,n,r,o)}function E_(s,n,r,o,i){if(n==null)return!1;const d=n.get(r);return!(d==null||o-d>i||d!=s.get(r))}const Ls=new vl,Hn=new vl,Ma=new tt,Oa=new tt,La=new tt,Gn=new Le,T_=new Wt,nn=new Le;function A_(s,n,r){nn.copy(n).applyMatrix4(T_.copy(r.matrixWorld).invert());const o=r.geometry.attributes.uv;if(o==null||!(o instanceof xl))return!1;let i;return D_(r,(d,g,f)=>{r.getVertexPosition(d,Ls.a),r.getVertexPosition(g,Ls.b),r.getVertexPosition(f,Ls.c);const m=Ls.closestPointToPoint(nn,Gn).distanceTo(nn);i!=null&&m>=i||(i=m,Hn.copy(Ls),Ma.fromBufferAttribute(o,d),Oa.fromBufferAttribute(o,g),La.fromBufferAttribute(o,f))}),i==null?!1:(Hn.closestPointToPoint(nn,Gn),Hn.getInterpolation(Gn,Ma,Oa,La,s),!0)}function D_(s,n){const r=s.geometry.drawRange;if(s.geometry.index!=null){const g=s.geometry.index,f=Math.max(0,r.start),m=Math.min(g.count,r.start+r.count);for(let b=f;b<m;b+=3)n(g.getX(b),g.getX(b+1),g.getX(b+2));return}const o=s.geometry.attributes.position;if(o==null)return;const i=Math.max(0,r.start),d=Math.min(o.count,r.start+r.count);for(let g=i;g<d;g+=3)n(g,g+1,g+2)}new Wt;new bd;new Le;new ws;new bn;new tt;new Le(0,0,0),new Le(0,0,1);const ja=new Wt,M_=new Le;new Le(0,0,-1);new ws;const Ia=new tt,O_=new Le;class L_{prepareTransformation;options;raycaster=new yl;cameraQuaternion=new zs;fromPosition=new Le;fromQuaternion=new zs;coords=new tt;viewPlane=new ws;intersects=[];pointerEventsOrders=[];constructor(n,r){this.prepareTransformation=n,this.options=r}isReady(){return!0}intersectPointerCapture({intersection:n,object:r},o){const i=n.details;if(i.type!="screen-ray")throw new Error(`unable to process a pointer capture of type "${n.details.type}" with a camera ray intersector`);if(!this.startIntersection(o))return n;this.viewPlane.constant-=i.distanceViewPlane;const d=this.raycaster.ray.intersectPlane(this.viewPlane,new Le);if(d==null)return n;n.object.updateWorldMatrix(!0,!1),x_(this.viewPlane,n,n.object.matrixWorld);let g=n.uv;return n.object instanceof Zs&&A_(Ia,d,n.object)&&(g=Ia.clone()),{...n,details:{...i,direction:this.raycaster.ray.direction.clone(),screenPoint:this.coords.clone()},uv:g,object:r,point:d,pointOnFace:d,pointerPosition:this.raycaster.ray.origin.clone(),pointerQuaternion:this.cameraQuaternion.clone()}}startIntersection(n){const r=this.prepareTransformation(n,this.coords);return r==null?!1:(r.updateWorldMatrix(!0,!1),r.matrixWorld.decompose(this.fromPosition,this.fromQuaternion,M_),this.raycaster.setFromCamera(this.coords,r),this.viewPlane.setFromNormalAndCoplanarPoint(r.getWorldDirection(O_),this.raycaster.ray.origin),!0)}executeIntersection(n,r){const o=this.intersects.length;n.raycast(this.raycaster,this.intersects),C_(this.pointerEventsOrders,r,this.intersects.length-o)}finalizeIntersection(n){const r=this.fromPosition.clone(),o=this.cameraQuaternion.clone(),i=this.raycaster.ray.direction.clone(),d=w_(this.intersects,this.pointerEventsOrders,this.options),g=d==null?void 0:this.intersects[d];return this.intersects.length=0,this.pointerEventsOrders.length=0,g==null?$_(n,this.raycaster.ray,(f,m)=>({type:"screen-ray",distanceViewPlane:m,screenPoint:this.coords.clone(),direction:i}),r,o):(g.object.updateWorldMatrix(!0,!1),ja.copy(g.object.matrixWorld).invert(),Object.assign(g,{details:{type:"screen-ray",distanceViewPlane:this.viewPlane.distanceToPoint(g.point),screenPoint:this.coords.clone(),direction:i},pointOnFace:g.point,pointerPosition:r,pointerQuaternion:o,localPoint:g.point.clone().applyMatrix4(ja)}))}}new Le;new tt;new Wt;new Le;new ws;new vd;new Le;new Le;new Le;new Le(1e-4,1e-4,1e-4);new Wt;let j_=23412;function I_(){return j_++}function R_(s,n,r){if(!(n instanceof globalThis.MouseEvent))return r.set(0,0);const{width:o,height:i,top:d,left:g}=s.getBoundingClientRect(),f=n.clientX-g,m=n.clientY-d;return r.set(f/o*2-1,-(m/i)*2+1)}function F_(s,n,r,o){return N_(s,typeof n=="function"?n:()=>n,r,R_.bind(null,s),s.setPointerCapture.bind(s),i=>{s.hasPointerCapture(i)&&s.releasePointerCapture(i)},{pointerTypePrefix:"screen-",...o})}function N_(s,n,r,o,i,d,g={}){const f=g?.forwardPointerCapture??!0,m=new Map,b=g.pointerTypePrefix??"forward-",x=(u,v)=>{let D=m.get(u.pointerId);return D!=null||(D=new P_(I_(),`${b}${u.pointerType}`,u.pointerState,new L_((z,G)=>(o(z,G),n()),g),n,void 0,f?i.bind(null,u.pointerId):void 0,f?d.bind(null,u.pointerId):void 0,g),v!="move"&&v!="wheel"&&(D.setIntersection(D.computeIntersection("pointer",r,u)),D.commit(u,!1)),m.set(u.pointerId,D)),D},_=new Map,C=new Map,k=[],p=[],T=(u,v,D)=>{switch(u){case"move":D.move(r,v);return;case"over":D.move(r,v);return;case"wheel":D.wheel(r,v);return;case"cancel":D.cancel(v);return;case"down":if(!Ra(v))return;D.down(v);return;case"up":if(!Ra(v))return;D.up(v);return;case"exit":C.delete(D),_.delete(D),D.exit(v);return}},M=(u,v)=>{const D=x(v,u);u==="move"&&C.set(D,v),u==="wheel"&&_.set(D,v),g.batchEvents??!0?p.push({type:u,event:v}):T(u,v,D)},P=M.bind(null,"move"),w=M.bind(null,"over"),$=M.bind(null,"cancel"),S=M.bind(null,"down"),A=M.bind(null,"up"),y=M.bind(null,"wheel"),h=M.bind(null,"exit");return s.addEventListener("pointermove",P),s.addEventListener("pointerover",w),s.addEventListener("pointercancel",$),s.addEventListener("pointerdown",S),s.addEventListener("pointerup",A),s.addEventListener("wheel",y),s.addEventListener("pointerleave",h),{destroy(){s.removeEventListener("pointermove",P),s.removeEventListener("pointerover",w),s.removeEventListener("pointercancel",$),s.removeEventListener("pointerdown",S),s.removeEventListener("pointerup",A),s.removeEventListener("wheel",y),s.removeEventListener("pointerleave",h),C.clear(),_.clear()},update(){const u=p.length;for(let v=0;v<u;v++){const{type:D,event:z}=p[v],G=x(z,D);if(D==="move"&&(k.push(G),C.get(G)!=z)){G.emitMove(z);continue}if(D==="wheel"&&_.get(G)!=z){G.emitWheel(z);continue}T(D,z,G)}if(p.length=0,g.intersectEveryFrame??!1)for(const[v,D]of C.entries())k.includes(v)||v.move(r,D);k.length=0}}}function Ra(s){return s.button!=null}var B_={},V_="5.4.0";function U_(s){const n=Object.create(null);for(const r of s.split(","))n[r]=1;return r=>r in n}const z_="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,hgroup,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",H_=U_(z_),Et=s=>n=>lr(n)&&s in n&&!!n[s],ko=Et("isObject3D"),Oi=Et("isMesh"),Li=Et("isCamera"),G_=Et("isOrthographicCamera"),ji=Et("isPerspectiveCamera"),Ii=Et("isColor"),W_=s=>ir(s)||Pi(s)||Ii(s),Fa=s=>s instanceof $d,Ri=Et("isBufferGeometry"),Fi=Et("isMaterial"),q_=Et("isLight"),Ni=Et("isFog"),cr=Et("isScene"),$o=s=>s!==null&&typeof s=="object"&&"set"in s&&typeof s.set=="function",K_=s=>$o(s)&&"copy"in s&&typeof s.copy=="function",Y_=s=>!!s?.constructor,us=s=>Li(s)||G_(s)||ji(s),Z_=s=>ko(s)||Ri(s)||Fi(s)||Ni(s),X_=Et("isPrimitive"),Q_=s=>Z_(s)&&"__tres"in s,Bi=(s,n)=>{let r=0;for(let o=0;o<s.length;o++)n(s[o],o)&&(s[r]=s[o],r++);return s.length=r,s};function J_(){try{const s="production";if(s)return s}catch{}return"production"}J_();const kn="[TresJS ▲ ■ ●] ";function Na(...s){typeof s[0]=="string"?s[0]=kn+s[0]:s.unshift(kn)}function ew(...s){typeof s[0]=="string"?s[0]=kn+s[0]:s.unshift(kn)}function Ba(s){(r=>"map"in r&&!!r.map)(s)&&s.map.dispose(),s.dispose()}function Vi(s){if(s.parent&&s.removeFromParent?.(),delete s.__tres,[...s.children].forEach(n=>Vi(n)),!(s instanceof wl)){const n=s;s&&s.dispose?.(),n.geometry&&n.geometry.dispose(),Array.isArray(n.material)?n.material.forEach(r=>Ba(r)):n.material&&Ba(n.material)}}function $n(s,n){let r=s;if(n.includes("-")){const o=n.split("-");let i=o.shift();for(;r&&o.length;)i in r?(r=r[i],i=o.shift()):i=Va(i,o.shift());return{target:r,key:Va(i,...o)}}else return{target:r,key:n}}function Va(...s){return s.map((n,r)=>r===0?n:n.charAt(0).toUpperCase()+n.slice(1)).join("")}function tw(s,n,r){const o=/-\d+$/;if(ir(r)){if(o.test(r)){const{target:g,key:f}=$n(s,r.replace(o,""));if(!Array.isArray(g[f])){const m=g[f],b=[];b.__tresDetach=()=>{b.every(x=>wo(x))&&(g[f]=m)},g[f]=b}}const{target:i,key:d}=$n(s,r);n.__tres.previousAttach=i[d],i[d]=ys(n)}else n.__tres.previousAttach=r(s,n)}function sw(s,n,r){if(ir(r)){const{target:o,key:i}=$n(s,r),d=n.__tres.previousAttach;d===void 0?delete o[i]:o[i]=d,"__tresDetach"in o&&o.__tresDetach()}else n.__tres?.previousAttach?.(s,n);delete n.__tres?.previousAttach}function Qt(s,n,r){const o=s;return o.__tres={type:"unknown",root:r,memoizedProps:{},objects:[],parent:null,previousAttach:null,...n},o.__tres.attach||(Fi(o)?o.__tres.attach="material":Ri(o)?o.__tres.attach="geometry":Ni(o)&&(o.__tres.attach="fog")),o}function Co(s){const n=s?.__tres?.root;n?.renderer&&n.renderer.canBeInvalidated.value&&n.renderer.invalidate()}function nw(s,n,r,o,i){const d=[...n.__tres.objects],g=ys(n);if(s=ys(s),g===s)return!0;const f=Qt(s,n.__tres??{},i),m=n.parent??n.__tres.parent??null,b={...n.__tres.memoizedProps};delete b.object;for(const x of d)Ui(x,i),zi(x,i);g.__tres.objects=[],o.remove(n);for(const[x,_]of Object.entries(b))o.patchProp(f,x,f[x],_);r(s),o.insert(n,m);for(const x of d)o.insert(x,n);return!0}function ys(s){if(X_(s)){const n=s;return n.object.__tres=n.__tres,n.object}else return s}function Ui(s,n){const r=s.__tres?.parent||n.scene.value;s.__tres&&(s.__tres.parent=null),r&&r.__tres&&"objects"in r.__tres&&Bi(r.__tres.objects,o=>o!==s),s.__tres?.attach?sw(r,s,s.__tres.attach):(s.parent?.remove?.(ys(s)),s.parent=null)}function zi(s,n){s.traverse?.(r=>{us(r)&&n.camera.deregisterCamera(r)}),us(s)&&n.camera.deregisterCamera(s),Co(s)}const ow=({sizes:s})=>{const n=W([]),r=U(()=>n.value[0]),o=g=>{const f=Li(g)?g:n.value.find(m=>m.uuid===g);f&&(n.value=[f,...n.value.filter(({uuid:m})=>m!==f.uuid)])},i=(g,f=!1)=>{n.value.some(({uuid:m})=>m===g.uuid)||(n.value.push(g),f&&o(g.uuid))},d=g=>{n.value=n.value.filter(({uuid:f})=>f!==g.uuid)};return Ct(()=>{s.aspectRatio.value&&n.value.forEach(g=>{ji(g)&&(g.aspect=s.aspectRatio.value,g.updateProjectionMatrix())})}),{activeCamera:r,cameras:n,registerCamera:i,deregisterCamera:d,setActiveCamera:o}};function Ua(){const s=new Map,n=new Set;let r=0,o=!1;const i=()=>{const b=Array.from(s.entries()).sort((x,_)=>{const C=x[1].priority-_[1].priority;return C===0?x[1].addI-_[1].addI:C});n.clear(),b.forEach(x=>n.add(x[0]))},d=b=>{s.delete(b),n.delete(b)};return{on:(b,x=0)=>{s.set(b,{priority:x,addI:r++});const _=()=>d(b);return Yt(_),o=!0,{off:_}},off:d,trigger:(...b)=>(o&&(i(),o=!1),Promise.all(Array.from(n).map(x=>x(...b)))),dispose:()=>{s.clear(),n.clear()},get count(){return s.size}}}const So=W({}),Po=s=>Object.assign(So.value,s),rw=(s,n,r)=>{if(!Jt(s.setPixelRatio))return;let o=0;if(r&&Array.isArray(r)&&r.length>=2){const[i,d]=r;o=Cn.clamp(n,i,d)}else Pi(r)?o=r:o=n;o!==s.getPixelRatio?.()&&s.setPixelRatio(o)},aw=s=>{const n=new yd,r={before:ps(),after:ps()},{pause:o,resume:i,isActive:d}=ar(()=>{const m=()=>({delta:n.getDelta(),elapsed:n.elapsedTime});r.before.trigger(m()),s(),r.after.trigger(m())},{immediate:!1});return{start:()=>{n.start(),i()},stop:()=>{n.stop(),o()},isActive:d,onBeforeLoop:r.before.on,onLoop:r.after.on}};var lw=class extends Error{name="TresRendererError";constructor(s,n,r){super(s,r),this.code=n}};function iw({scene:s,canvas:n,options:r,contextParts:{sizes:o,camera:i}}){const g=Jt(r.renderer)?r.renderer({sizes:o,scene:s,camera:i,canvas:n}):new _l({...r,canvas:zt(n)}),f=W(Be(r.renderMode)==="manual"?0:1),m=60,b=U(()=>Be(r.renderMode)==="on-demand"&&f.value===0),x=()=>s.value.traverse(G=>{G instanceof Zs&&G.material instanceof xd&&(G.material.needsUpdate=!0)}),_=(G=1)=>{b.value&&(f.value=Math.min(m,f.value+G))},C=()=>{if(Be(r.renderMode)!=="manual")throw new Error("advance can only be called in manual render mode.");f.value=1},k=()=>{Be(r.renderMode)==="on-demand"&&_()},p=U(()=>Be(r.renderMode)==="always"),T=G=>lr(G)&&"isRenderer"in G&&!!G.isRenderer,M=ps(),P=ps();let w=!1;const $=W(!1),S=W(null),A=async()=>{try{T(g)&&await g.init(),$.value=!0}catch(G){const B=new lw(G instanceof Error?G.message:"Unknown error","INITIALIZATION_FAILED",{cause:G instanceof Error?G:void 0});S.value=B,P.trigger(B)}},y=ps(),h=()=>{f.value=p.value?1:Math.max(0,f.value-1),y.trigger(g)};let u=G=>{i.activeCamera.value&&(g.render(s.value,i.activeCamera.value),G())};const v=G=>{u=G},D=aw(()=>{f.value&&u(h)});M.on(()=>{$.value&&D.start()}),He([o.width,o.height,$],()=>{$.value&&(g.setSize(o.width.value,o.height.value),!w&&g.domElement.width&&g.domElement.height&&(w=!0,fl(()=>{M.trigger(g)})),k())},{immediate:!0}),Ct(()=>{$.value&&rw(g,o.pixelRatio.value,Be(r.dpr))}),A(),Be(r.renderMode)==="on-demand"&&_(),Be(r.renderMode)==="manual"&&s_(100,{callback:C});const z=U(()=>{const G=Be(r.clearColor),B=Be(r.clearAlpha),O=typeof G=="string"&&G.length===9&&G.startsWith("#");return O&&B!==void 0&&ew(`clearColor with alpha (e.g. ${G}) and clearAlpha cannot both be set, using clearColor as source of truth`),O?{alpha:Number.parseInt(G.slice(7,9),16)/255,color:G.slice(0,7)}:{alpha:B,color:G}});return Ct(()=>{if(!$.value)return;const G=z.value;G.color===void 0||G.alpha===void 0||g.setClearColor(G.color,G.alpha)}),Ct(()=>{if(!$.value)return;const G=r.toneMapping;G&&(g.toneMapping=G)}),Ct(()=>{if(!$.value)return;const G=r.toneMappingExposure;G&&(g.toneMappingExposure=G)}),Ct(()=>{if(!$.value)return;const G=r.outputColorSpace;G&&(g.outputColorSpace=G)}),Ct(()=>{if(!$.value)return;const G=r.shadows;G!==void 0&&(g.shadowMap.enabled=G,x())}),Ct(()=>{if(!$.value)return;const G=r.shadowMapType;G!==void 0&&(g.shadowMap.type=G,x())}),Ft(()=>{g.dispose(),"forceContextLoss"in g&&g.forceContextLoss()}),{loop:D,instance:g,advance:C,onReady:M.on,onRender:y.on,onError:P.on,invalidate:_,canBeInvalidated:b,mode:Be(r.renderMode),replaceRenderFunction:v,isInitialized:$,error:S}}function dw(s,n,r=10){const{pixelRatio:o}=a_(),i=Be(s)?u_():i_(U(()=>Be(n).parentElement)),d=gn(Pa(i.width,r)),g=gn(Pa(i.height,r));return{width:d,height:g,pixelRatio:o,aspectRatio:U(()=>d.value/g.value)}}function cw({canvas:s,contextParts:{scene:n,camera:r,renderer:o}}){const{update:i,destroy:d}=F_(Be(s),()=>Be(r.activeCamera),n.value),{off:g}=o.loop.onLoop(i);Ft(d),Ft(g);const f=Ai(n.value),m=ps();return f.addEventListener("click",m.trigger),{onPointerMissed:m.on}}const uw="useTres",[pw,gw]=W2(({scene:s,canvas:n,windowSize:r,rendererOptions:o})=>{const i=Re(s),d=dw(r,n),g=ow({sizes:d}),f=iw({scene:i,canvas:n,options:o,contextParts:{sizes:d,camera:g}}),m=cw({canvas:n,contextParts:{scene:i,camera:g,renderer:f}}),b={sizes:d,scene:i,camera:g,renderer:f,controls:W(null),extend:Po,events:m};return b.scene.value.__tres={root:b,objects:[],isUnmounting:!1},b},{injectionKey:"useTres"}),ur=()=>{const s=gw();if(!s)throw new Error(`useTresContext must be used together with useTresContextProvider.
 You probably tried to use it above or on the same level as a TresCanvas component.
 It should be used in child components of a TresCanvas instance.`);return s};function pr(){const{scene:s,renderer:n,camera:r,sizes:o,controls:i,extend:d,events:g}=ur();return{scene:s,renderer:n.instance,camera:r.activeCamera,sizes:o,controls:i,extend:d,events:g,invalidate:n.invalidate,advance:n.advance}}const Hi=()=>{const s=pr(),{renderer:n}=ur(),r=Ua(),o=Ua();n.loop.onBeforeLoop(d=>{r.trigger({...s,...d})}),n.loop.onLoop(d=>{o.trigger({...s,...d})});const i=n.replaceRenderFunction;return{stop:n.loop.stop,start:n.loop.start,isActive:n.loop.isActive,onBeforeRender:r.on,onRender:o.on,render:i}};function fw(s,n={},r={}){let o=s;const i=g=>{o=g};let d=new Proxy({},{});return d=new Proxy({},{has(g,f){return f in n||f in o},get(g,f,m){return f in n?n[f](o):o[f]},set(g,f,m){return r[f]?r[f](m,o,d,i):o[f]=m,!0}}),d}const mw=["onClick","onContextmenu","onPointermove","onPointerenter","onPointerleave","onPointerover","onPointerout","onDblclick","onPointerdown","onPointerup","onPointercancel","onLostpointercapture","onWheel"],hw={onClick:"click",onContextmenu:"contextmenu",onPointermove:"pointermove",onPointerenter:"pointerenter",onPointerleave:"pointerleave",onPointerover:"pointerover",onPointerout:"pointerout",onDblclick:"dblclick",onPointerdown:"pointerdown",onPointerup:"pointerup",onPointercancel:"pointercancel",onLostpointercapture:"lostpointercapture",onWheel:"wheel"},za=s=>mw.includes(s),Ha=Symbol("tresTextNode"),Ga=Symbol("tresComment"),bw=({context:s,options:n={primitivePrefix:""}})=>{const r=s.scene.value,o=()=>{if(!r?.__tres?.isUnmounting)return{[Ha]:!0,__tres:{parent:null}}},i=()=>({[Ga]:!0,__tres:{parent:null}}),d=p=>!!p&&typeof p=="object"&&Ha in p,g=p=>!!p&&typeof p=="object"&&Ga in p;function f(p,T,M,P){if(P||(P={}),P.args||(P.args=[]),H_(p))return null;p.includes("-")&&(p=p.replace(/-([a-z])/g,(S,A)=>A.toUpperCase()).replace(/^[a-z]/,S=>S.toUpperCase()));let w=p.replace("Tres",""),$;if(p===`${n?.primitivePrefix??""}primitive`){(!lr(P.object)||We(P.object))&&Na("Tres primitives need an 'object' prop, whose value is an object or shallowRef<object>"),w=P.object.type;const S={};$=fw(P.object,{object:A=>A,isPrimitive:()=>!0,__tres:()=>S},{object:(A,y,h,u)=>{nw(A,h,u,{patchProp:x,remove:b,insert:m},s)},__tres:A=>{Object.assign(S,A)}})}else{const S=So.value[w];S||Na(`${w} is not defined on the THREE namespace. Use extend to add it to the catalog.`),$=new S(...P.args)}return $?(us($)&&(P?.position||$.position.set(3,3,3),P?.lookAt||$.lookAt(0,0,0)),$=Qt($,{...Q_($)?$.__tres:{},type:w,memoizedProps:P,primitive:p==="primitive",attach:P.attach},s),$):null}function m(p,T,M){if(!p)return;if(T=T||r,d(p)||g(p)){const $=T.__tres?T:Qt(T,{},s);if(p.__tres.parent=$,$.__tres.objects){const S=M?$.__tres.objects.findIndex(A=>A===M):-1;S>=0?$.__tres.objects.splice(S,0,p):$.__tres.objects.push(p)}return}const P=p.__tres?p:Qt(p,{},s),w=T.__tres?T:Qt(T,{},s);if(p=ys(P),T=ys(w),us(p)&&s.camera?.registerCamera(p),P.__tres.attach?tw(w,P,P.__tres.attach):ko(p)&&ko(w)&&(w.add(p),p.dispatchEvent({type:"added"})),P.__tres.parent=w,w.__tres.objects&&!w.__tres.objects.includes(P)){const $=M?w.__tres.objects.findIndex(S=>S===M):-1;~$?w.__tres.objects.splice($,0,P):w.__tres.objects.push(P)}}function b(p,T){if(!p)return;if(d(p)||g(p)){const $=p.__tres.parent;$?.__tres?.objects&&Bi($.__tres.objects,S=>S!==p),p.__tres.parent=null;return}T=wo(T)?"default":T;const M=p.__tres?.dispose;wo(M)||(M===null?T=!1:T=M);const P=p.__tres?.primitive,w=T==="default"?!P:!!T;if(p.__tres&&"objects"in p.__tres&&[...p.__tres.objects].forEach($=>b($,T)),w&&p.children&&[...p.children].forEach($=>b($,T)),Ui(p,s),zi(p,s),w&&!cr(p)){if(Jt(T))T(p);else if(Jt(p.dispose))try{p.dispose()}catch{}}"__tres"in p&&delete p.__tres}function x(p,T,M,P){if(!p)return;let w=p;const $=T;if(p.__tres&&(p.__tres.memoizedProps[T]=P),T==="attach"){const h=p.__tres?.parent||p.parent;b(p),Qt(p,{attach:P},s),h&&m(p,h);return}if(T==="dispose"){p.__tres||(p=Qt(p,{},s)),p.__tres.dispose=P;return}za(T)&&Jt(P)&&p.addEventListener(hw[T],P);let S=Ea($),A=w?.[S];if($==="args"){const h=p,u=M??[],v=P??[],D=p.__tres?.type||p.type;if(D&&u.length&&!Si(u,v)){const z=new So.value[D](...P),G=Object.getOwnPropertyDescriptors(z);Object.entries(G).forEach(([B,O])=>{if(!(!O.writable&&!O.set)&&B in h)try{h[B]=z[B]}catch{}}),w=h}return}if(w.type==="BufferGeometry"){if($==="args")return;w.setAttribute(Ea($),new xl(...P));return}if($.includes("-")&&A===void 0){const h=$n(w,$);if(A=h.target,w=h.target,S=h.key,A&&S){A[S]=P,us(p)&&p.updateProjectionMatrix(),Co(p);return}}let y=P;if(y===""&&(y=!0),Jt(A)){za(T)||(Array.isArray(y)?p[S](...y):p[S](y)),S.startsWith("on")&&Jt(y)&&(w[S]=y);return}Fa(A)&&Fa(y)?A.mask=y.mask:Ii(A)&&W_(y)?A.set(y):K_(A)&&Y_(y)&&A.constructor===y.constructor?A.copy(y):$o(A)&&Array.isArray(y)?"fromArray"in A&&typeof A.fromArray=="function"?A.fromArray(y):A.set(...y):$o(A)&&typeof y=="number"?"setScalar"in A&&typeof A.setScalar=="function"?A.setScalar(y):A.set(y):w[S]=y,us(p)&&p.updateProjectionMatrix(),Co(p)}function _(p){return p?.__tres?.parent||null}function C(p){if(!p||!("__tres"in p))return null;const T=_(p)?.__tres?.objects||[],M=T.findIndex(P=>P===p);return M<0||M>=T.length-1?null:T[M+1]}const k=()=>{};return{insert:m,remove:b,createElement:f,patchProp:x,parentNode:_,createText:o,createComment:i,setText:k,setElementText:k,nextSibling:C,querySelector:k,setScopeId:k,cloneNode:k,insertStaticContent:k}},vw=["asset-load"];var xw=class{subscribers=new Set;messageQueue=[];maxQueueSize=100;send(s,n){const r={type:s,data:n,timestamp:Date.now()};this.subscribers.size>0?this.subscribers.forEach(o=>o(r)):vw.includes(s)&&this.queueMessage(r)}queueMessage(s){this.messageQueue.push(s),this.messageQueue.length>this.maxQueueSize&&this.messageQueue.shift()}flushQueue(){this.messageQueue.length===0||this.subscribers.size===0||(this.messageQueue.forEach(s=>{this.subscribers.forEach(n=>n(s))}),this.messageQueue=[])}subscribe(s){return this.subscribers.add(s),this.flushQueue(),()=>{this.subscribers.delete(s)}}get hasSubscribers(){return this.subscribers.size>0}get queueSize(){return this.messageQueue.length}clearQueue(){this.messageQueue=[]}};function yw(s,n){const r=`▲ ■ ●${s}`;typeof Wa=="function"&&Wa(r,n)}function Wa(s,n){throw new Error(s+n)}function gr(s){let n=0;return s.traverse(r=>{if(Oi(r)&&r.type!=="HightlightMesh"){const o=r.geometry,i=o.attributes.position.count*3*Float32Array.BYTES_PER_ELEMENT,d=o.index?o.index.count*Uint32Array.BYTES_PER_ELEMENT:0,g=o.attributes.normal?o.attributes.normal.count*3*Float32Array.BYTES_PER_ELEMENT:0,f=o.attributes.uv?o.attributes.uv.count*2*Float32Array.BYTES_PER_ELEMENT:0,m=i+d+g+f;n+=m}}),n}function qa(s,n,r){s.push(n),s.length>r&&s.shift()}function _w(s){return(s/1024).toFixed(2)}function ww(s){if(!s)return;typeof window<"u"&&!window.__TRES__DEVTOOLS__&&(window.__TRES__DEVTOOLS__=new xw);const n={maxFrames:160,fps:{value:0,accumulator:[]},memory:{currentMem:0,allocatedMem:0,accumulator:[]}},r=100,o=d_({every:r}),{isSupported:i,memory:d}=c_({interval:r}),g=160;let f=performance.now(),m=0;const b=1,x=({timestamp:C})=>{s.scene.value&&(n.memory.allocatedMem=gr(s.scene.value)),C-f>=r&&(f=C,qa(n.fps.accumulator,o.value,g),n.fps.value=o.value,i.value&&d.value?.usedJSHeapSize&&(qa(n.memory.accumulator,d.value.usedJSHeapSize/1024/1024,g),n.memory.accumulator.length>0&&(n.memory.currentMem=n.memory.accumulator.reduce((k,p)=>k+p,0)/n.memory.accumulator.length)))},{pause:_}=ar(({delta:C})=>{window.__TRES__DEVTOOLS__&&(x({timestamp:performance.now()}),m+=C,m>=b&&(window.__TRES__DEVTOOLS__.send("context",s),window.__TRES__DEVTOOLS__.send("performance",n),m=0))},{immediate:!0});Ft(()=>{_()})}const Gi=(s,n)=>{if(s.uuid===n)return s;for(const r of s.children){const o=Gi(r,n);if(o)return o}};var kw=class extends Zs{type="HightlightMesh";createTime;constructor(...s){super(...s),this.createTime=Date.now()}onBeforeRender(){const s=(Date.now()-this.createTime)/1e3,n=1+.07*Math.sin(2.5*s);this.scale.set(n,n,n)}};const Wi=s=>{const n={id:`scene-${s.uuid}`,label:s.type,children:[],tags:[]};s.name!==""&&n.tags.push({label:s.name,textColor:5750629,backgroundColor:15793395});const r=gr(s);return r>0&&n.tags.push({label:`${_w(r)} KB`,textColor:15707189,backgroundColor:16775644,tooltip:"Memory usage"}),s.type.includes("Light")&&(q_(s)&&n.tags.push({label:`${s.intensity}`,textColor:9738662,backgroundColor:16316922,tooltip:"Intensity"}),n.tags.push({label:`#${new qt(s.color).getHexString()}`,textColor:9738662,backgroundColor:16316922,tooltip:"Color"})),s.type.includes("Camera")&&(n.tags.push({label:`${s.fov}°`,textColor:9738662,backgroundColor:16316922,tooltip:"Field of view"}),n.tags.push({label:`x: ${Math.round(s.position.x)} y: ${Math.round(s.position.y)} z: ${Math.round(s.position.z)}`,textColor:9738662,backgroundColor:16316922,tooltip:"Position"})),n};function $w(s,n,r=""){return{id:`context-${n}-${r?`${r}.${s}`:s}`,label:s,children:[],tags:[]}}function qi(s,n,r=""){s.children.forEach(o=>{if(o.type==="HightlightMesh"||r&&!o.type.includes(r)&&!o.name.includes(r))return;const i=Wi(o);n.children.push(i),qi(o,i,r)})}function Eo(s,n,r=new WeakSet,o=0,i=4,d,g=""){if(o>=i||!s||r.has(s))return;const f=o===0?s?.scene?.value?.uuid||Math.random().toString(36).slice(2,11):d;r.add(s),Object.entries(s).forEach(([m,b])=>{if(m.startsWith("_")||typeof b=="function")return;const x=g?`${g}.${m}`:m,_=$w(m,f,g);m!=="scene"&&(We(b)?(_.tags.push({label:`Ref<${typeof b.value}>`,textColor:4372611,backgroundColor:15793395}),b.value&&typeof b.value=="object"?Eo(b.value,_,r,o+1,i,f,x):_.label=`${m}: ${JSON.stringify(b.value)}`):b&&typeof b=="object"&&!Array.isArray(b)?Object.keys(b).length>0?r.has(b)?_.tags.push({label:"Circular",textColor:16711680,backgroundColor:16773360}):Eo(b,_,r,o+1,i,f,x):_.label=`${m}: {}`:Array.isArray(b)?(_.label=`${m}: Array(${b.length})`,_.tags.push({label:`length: ${b.length}`,textColor:9738662,backgroundColor:16316922})):_.label=`${m}: ${JSON.stringify(b)}`,n.children.push(_))})}const Cw=s=>n=>{if(n.inspectorId===Ks){const r=Wi(s.scene.value);qi(s.scene.value,r,n.filter);const o={id:"context-root",label:"Context",children:[],tags:[]};Eo(s,o),n.rootNodes=[r,o]}},Sw=(s,{highlightMesh:n,prevInstance:r})=>o=>{if(o.inspectorId!==Ks)return;const i=new Cd({color:11003607,transparent:!0,opacity:.2,depthTest:!1,side:Vt});if(o.nodeId.includes("scene")){const d=o.nodeId.match(/^scene-(.+)$/),g=d?d[1]:null;if(!g)return;const[f]=s.scene.value.getObjectsByProperty("uuid",g);if(!f)return;if(r&&n&&n.parent&&r.remove(n),Oi(f)){const m=new kw(f.geometry.clone(),i);f.add(m),n=m,r=f}if(o.state={object:Object.entries(f).map(([m,b])=>m==="children"?{key:m,value:b.filter(x=>x.type!=="HightlightMesh")}:{key:m,value:b,editable:!0}).filter(({key:m})=>m!=="parent")},cr(f)){const m={...o.state,state:[{key:"Scene Info",value:{objects:f.children.length,memory:gr(f),calls:s.renderer.instance.info.render.calls,triangles:s.renderer.instance.info.render.triangles,points:s.renderer.instance.info.render.points,lines:s.renderer.instance.info.render.lines}}]};"programs"in s.renderer.instance.info&&m.state.push({key:"Programs",value:s.renderer.instance.info.programs?.map(b=>({...b,programName:b.name}))}),o.state=m}}else if(o.nodeId.includes("context")){const d=o.nodeId.match(/^context-([^-]+(?:-[^-]+)*)-(.+)$/),g=d?d[2]:"context";if(!g||g==="context"){o.state={object:Object.entries(s).filter(([b])=>!b.startsWith("_")&&b!=="parent").map(([b,x])=>({key:b,value:We(x)?x.value:x,editable:!1}))};return}const f=g.split(".");let m=s;for(const b of f){if(!m||typeof m!="object")break;m=We(m[b])?m[b].value:m[b]}m!==void 0&&(o.state={object:Object.entries(m).filter(([b])=>!b.startsWith("_")&&b!=="parent").map(([b,x])=>We(x)?{key:b,value:x.value,editable:!1}:typeof x=="function"?{key:b,value:"ƒ()",editable:!1}:x&&typeof x=="object"?{key:b,value:Array.isArray(x)?`Array(${x.length})`:"Object",editable:!1}:{key:b,value:x,editable:!1})})}},Pw=(s,n,r,o)=>{const i=Gi(s,n);if(!i)return;let d=i;for(let f=0;f<r.length-1;f++)if(d[r[f]]!==void 0)d=d[r[f]];else return;const g=r[r.length-1];d[g]!==void 0&&(d[g]=o)},Ew=s=>n=>{if(n.inspectorId===Ks&&n.nodeId.includes("scene")){const r=n.nodeId.match(/^scene-(.+)$/),o=r?r[1]:null;if(!o)return;Pw(s.scene.value,o,n.path,n.state.value)}},Ks="tres:inspector";function Tw(s,n){const r={id:"dev.esm.tres",label:"TresJS 🪐",logo:"https://raw.githubusercontent.com/Tresjs/tres/main/public/favicon.svg",packageName:"tresjs",homepage:"https://docs.tresjs.org",app:s},o=null,i=null;ww(n),lc(r,d=>{typeof d.now!="function"&&yw("You seem to be using an outdated version of Vue Devtools. Are you still using the Beta release instead of the stable one? You can find the links at https://devtools.vuejs.org/guide/installation.html."),d.addInspector({id:Ks,label:"TresJS 🪐",icon:"account_tree",treeFilterPlaceholder:"Search instances"}),setInterval(()=>{d.sendInspectorTree(Ks)},1e3),setInterval(()=>{d.notifyComponentUpdate()},5e3),d.on.getInspectorTree(Cw(n)),d.on.getInspectorState(Sw(n,{highlightMesh:o,prevInstance:i})),d.on.editInspectorState(Ew(n))})}var Aw=Pe({__name:"Context",props:{camera:{type:null,required:!1},windowSize:{type:Boolean,required:!1},enableProvideBridge:{type:Boolean,required:!1},customRendererOptions:{type:Object,required:!1},antialias:{type:Boolean,required:!1},stencil:{type:Boolean,required:!1},depth:{type:Boolean,required:!1},precision:{type:String,required:!1},logarithmicDepthBuffer:{type:Boolean,required:!1},preserveDrawingBuffer:{type:Boolean,required:!1},powerPreference:{type:null,required:!1},alpha:{type:Boolean,required:!1},premultipliedAlpha:{type:Boolean,required:!1},failIfMajorPerformanceCaveat:{type:Boolean,required:!1},clearColor:{type:[Object,String,Number],required:!1},clearAlpha:{type:Number,required:!1},shadows:{type:Boolean,required:!1},toneMapping:{type:null,required:!1},shadowMapType:{type:null,required:!1},useLegacyLights:{type:Boolean,required:!1},outputColorSpace:{type:null,required:!1},toneMappingExposure:{type:Number,required:!1},renderMode:{type:String,required:!1},dpr:{type:[Number,Array],required:!1},renderer:{type:Function,required:!1},canvas:{type:null,required:!0}},emits:["ready","error","pointermissed","render","beforeLoop","loop","click","contextmenu","pointermove","pointerenter","pointerleave","pointerover","pointerout","dblclick","pointerdown","pointerup","pointercancel","lostpointercapture","wheel"],setup(s,{expose:n,emit:r}){const o=s,i=r,d=hl(),g=Re(new wl),f=ms();Po(kd);const m=(S,A=!1)=>Pe({setup(){const y=ms()?.appContext;y&&(y.app=f?.appContext.app);const h={};function u(v){v&&(v.parent&&u(v.parent),v.provides&&Object.assign(h,v.provides))}return f?.parent&&o.enableProvideBridge&&(u(f.parent),Reflect.ownKeys(h).forEach(v=>{ln(v,h[v])})),ln(uw,S),ln("extend",Po),typeof window<"u"&&y?.app&&Tw(y?.app,S),()=>mr(Q,null,A?[]:d.default())}}),b=(S,A=!1)=>{const y=m(S,A),{render:h}=od(bw({context:S,options:o.customRendererOptions}));h(mr(y),g.value)},x=(S,A=!1)=>{Vi(S.scene.value),A&&(S.renderer.instance.dispose(),S.renderer.instance instanceof _l&&(S.renderer.instance.renderLists.dispose(),S.renderer.instance.forceContextLoss())),g.value.__tres={root:S,objects:[],isUnmounting:!0}},_=Re(pw({scene:g.value,canvas:o.canvas,windowSize:o.windowSize??!1,rendererOptions:o}));n({context:_,dispose:()=>x(_.value,!0)});const C=()=>{(A=>cr(A)&&"__tres"in A)(g.value)&&(g.value.__tres.isUnmounting=!0),b(_.value,!0),x(_.value)},{camera:k,renderer:p}=_.value,{registerCamera:T,cameras:M,activeCamera:P,deregisterCamera:w}=k,$=()=>{const S=new ts(45,window.innerWidth/window.innerHeight,.1,1e3);S.position.set(3,3,3),S.lookAt(0,0,0),T(S);const A=Ct(()=>{M.value.length>=2&&(S.removeFromParent(),w(S),A?.())})};return _.value.events.onPointerMissed(S=>{i("pointermissed",S)}),He(()=>o.camera,(S,A)=>{S&&T(Be(S),!0),A&&(Be(A).removeFromParent(),w(Be(A)))},{immediate:!0}),p.onRender(()=>{_.value&&i("render",_.value)}),p.loop.onLoop(S=>{_.value&&i("loop",{..._.value,...S})}),p.loop.onBeforeLoop(S=>{_.value&&i("beforeLoop",{..._.value,...S})}),p.onReady(()=>{b(_.value,!1),i("ready",_.value),P.value||$()}),p.onError(S=>{i("error",S)}),ot(async()=>{await X2(3e3),!_.value.sizes.width||_.value.sizes.height.value}),Ft(C),()=>{}}}),Dw=Aw;const Mw=["data-scene","data-tres"];var Ow=Pe({__name:"TresCanvas",props:{camera:{type:null,required:!1},windowSize:{type:Boolean,required:!1,default:void 0},enableProvideBridge:{type:Boolean,required:!1,default:!0},customRendererOptions:{type:Object,required:!1},antialias:{type:Boolean,required:!1,default:!0},stencil:{type:Boolean,required:!1,default:void 0},depth:{type:Boolean,required:!1,default:void 0},precision:{type:String,required:!1},logarithmicDepthBuffer:{type:Boolean,required:!1,default:void 0},preserveDrawingBuffer:{type:Boolean,required:!1,default:void 0},powerPreference:{type:null,required:!1},alpha:{type:Boolean,required:!1,default:void 0},premultipliedAlpha:{type:Boolean,required:!1},failIfMajorPerformanceCaveat:{type:Boolean,required:!1,default:void 0},clearColor:{type:[Object,String,Number],required:!1,default:"#000000"},clearAlpha:{type:Number,required:!1,default:1},shadows:{type:Boolean,required:!1,default:void 0},toneMapping:{type:null,required:!1,default:wd},shadowMapType:{type:null,required:!1,default:_d},useLegacyLights:{type:Boolean,required:!1,default:void 0},outputColorSpace:{type:null,required:!1},toneMappingExposure:{type:Number,required:!1},renderMode:{type:String,required:!1,default:"always"},dpr:{type:[Number,Array],required:!1},renderer:{type:Function,required:!1}},emits:["ready","error","pointermissed","render","beforeLoop","loop","click","contextmenu","pointermove","pointerenter","pointerleave","pointerover","pointerout","dblclick","pointerdown","pointerup","pointercancel","lostpointercapture","wheel"],setup(s,{expose:n,emit:r}){const o=s,i=r,d=W(),g=Re();return n({get context(){return g.value?.context},dispose:()=>g.value?.dispose()}),(f,m)=>(a(),l("canvas",{ref_key:"canvasRef",ref:d,"data-scene":g.value?.context?.scene.value.uuid,class:V(f.$attrs.class),"data-tres":`tresjs ${t(V_)}`,style:Te({display:"block",width:"100%",height:"100%",position:s.windowSize?"fixed":"relative",top:0,left:0,pointerEvents:"auto",touchAction:"none",...f.$attrs.style})},[d.value?(a(),pe(Dw,ml({key:0,ref_key:"contextRef",ref:g,canvas:d.value},o,{onReady:m[0]||(m[0]=b=>i("ready",b)),onError:m[1]||(m[1]=b=>i("error",b)),onPointermissed:m[2]||(m[2]=b=>i("pointermissed",b)),onRender:m[3]||(m[3]=b=>i("render",b)),onBeforeLoop:m[4]||(m[4]=b=>i("beforeLoop",b)),onLoop:m[5]||(m[5]=b=>i("loop",b)),onClick:m[6]||(m[6]=b=>i("click",b)),onContextmenu:m[7]||(m[7]=b=>i("contextmenu",b)),onPointermove:m[8]||(m[8]=b=>i("pointermove",b)),onPointerenter:m[9]||(m[9]=b=>i("pointerenter",b)),onPointerleave:m[10]||(m[10]=b=>i("pointerleave",b)),onPointerover:m[11]||(m[11]=b=>i("pointerover",b)),onPointerout:m[12]||(m[12]=b=>i("pointerout",b)),onDblclick:m[13]||(m[13]=b=>i("dblclick",b)),onPointerdown:m[14]||(m[14]=b=>i("pointerdown",b)),onPointerup:m[15]||(m[15]=b=>i("pointerup",b)),onPointercancel:m[16]||(m[16]=b=>i("pointercancel",b)),onLostpointercapture:m[17]||(m[17]=b=>i("lostpointercapture",b)),onWheel:m[18]||(m[18]=b=>i("wheel",b))}),{default:je(()=>[Mo(f.$slots,"default")]),_:3},16,["canvas"])):j("v-if",!0)],14,Mw))}}),Lw=Ow;function jw(s){return ul()?(pl(s),!0):!1}const Iw=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Rw=Object.prototype.toString,Fw=s=>Rw.call(s)==="[object Object]";function Wn(s){return Array.isArray(s)?s:[s]}function Nw(s,n,r){return He(s,n,{...r,immediate:!0})}const Bw=Iw?window:void 0;function Vw(s){var n;const r=Be(s);return(n=r?.$el)!=null?n:r}function qn(...s){const n=[],r=()=>{n.forEach(f=>f()),n.length=0},o=(f,m,b,x)=>(f.addEventListener(m,b,x),()=>f.removeEventListener(m,b,x)),i=U(()=>{const f=Wn(Be(s[0])).filter(m=>m!=null);return f.every(m=>typeof m!="string")?f:void 0}),d=Nw(()=>{var f,m;return[(m=(f=i.value)==null?void 0:f.map(b=>Vw(b)))!=null?m:[Bw].filter(b=>b!=null),Wn(Be(i.value?s[1]:s[0])),Wn(t(i.value?s[2]:s[1])),Be(i.value?s[3]:s[2])]},([f,m,b,x])=>{if(r(),!f?.length||!m?.length||!b?.length)return;const _=Fw(x)?{...x}:x;n.push(...f.flatMap(C=>m.flatMap(k=>b.map(p=>o(C,k,p,_)))))},{flush:"post"}),g=()=>{d(),r()};return jw(r),g}const Uw=parseInt(Sd.replace(/\D+/g,""));var zw=Object.defineProperty,Hw=(s,n,r)=>n in s?zw(s,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[n]=r,Gw=(s,n,r)=>(Hw(s,n+"",r),r);const Ka=(()=>{const s=class extends Zs{constructor(r,o={}){super(r),this.isReflector=!0,this.type="Reflector",this.camera=new ts;const i=this,d=o.color!==void 0?new qt(o.color):new qt(8355711),g=o.textureWidth||512,f=o.textureHeight||512,m=o.clipBias||0,b=o.shader||s.ReflectorShader,x=o.multisample!==void 0?o.multisample:4,_=new ws,C=new Le,k=new Le,p=new Le,T=new Wt,M=new Le(0,0,-1),P=new vr,w=new Le,$=new Le,S=new vr,A=new Wt,y=this.camera,h=new Pd(g,f,{samples:x,type:Ed}),u=new jo({uniforms:kl.clone(b.uniforms),fragmentShader:b.fragmentShader,vertexShader:b.vertexShader});u.uniforms.tDiffuse.value=h.texture,u.uniforms.color.value=d,u.uniforms.textureMatrix.value=A,this.material=u,this.onBeforeRender=function(v,D,z){if(k.setFromMatrixPosition(i.matrixWorld),p.setFromMatrixPosition(z.matrixWorld),T.extractRotation(i.matrixWorld),C.set(0,0,1),C.applyMatrix4(T),w.subVectors(k,p),w.dot(C)>0)return;w.reflect(C).negate(),w.add(k),T.extractRotation(z.matrixWorld),M.set(0,0,-1),M.applyMatrix4(T),M.add(p),$.subVectors(k,M),$.reflect(C).negate(),$.add(k),y.position.copy(w),y.up.set(0,1,0),y.up.applyMatrix4(T),y.up.reflect(C),y.lookAt($),y.far=z.far,y.updateMatrixWorld(),y.projectionMatrix.copy(z.projectionMatrix),A.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),A.multiply(y.projectionMatrix),A.multiply(y.matrixWorldInverse),A.multiply(i.matrixWorld),_.setFromNormalAndCoplanarPoint(C,k),_.applyMatrix4(y.matrixWorldInverse),P.set(_.normal.x,_.normal.y,_.normal.z,_.constant);const G=y.projectionMatrix;S.x=(Math.sign(P.x)+G.elements[8])/G.elements[0],S.y=(Math.sign(P.y)+G.elements[9])/G.elements[5],S.z=-1,S.w=(1+G.elements[10])/G.elements[14],P.multiplyScalar(2/P.dot(S)),G.elements[2]=P.x,G.elements[6]=P.y,G.elements[10]=P.z+1-m,G.elements[14]=P.w,i.visible=!1;const B=v.getRenderTarget(),O=v.xr.enabled,R=v.shadowMap.autoUpdate,X=v.toneMapping;let oe=!1;"outputColorSpace"in v?oe=v.outputColorSpace==="srgb":oe=v.outputEncoding===3001,v.xr.enabled=!1,v.shadowMap.autoUpdate=!1,"outputColorSpace"in v?v.outputColorSpace="srgb-linear":v.outputEncoding=3e3,v.toneMapping=$l,v.setRenderTarget(h),v.state.buffers.depth.setMask(!0),v.autoClear===!1&&v.clear(),v.render(D,y),v.xr.enabled=O,v.shadowMap.autoUpdate=R,v.toneMapping=X,"outputColorSpace"in v?v.outputColorSpace=oe?"srgb":"srgb-linear":v.outputEncoding=oe?3001:3e3,v.setRenderTarget(B);const we=z.viewport;we!==void 0&&v.state.viewport(we),i.visible=!0},this.getRenderTarget=function(){return h},this.dispose=function(){h.dispose(),i.material.dispose()}}};let n=s;return Gw(n,"ReflectorShader",{uniforms:{color:{value:null},tDiffuse:{value:null},textureMatrix:{value:null}},vertexShader:`
		uniform mat4 textureMatrix;
		varying vec4 vUv;

		#include <common>
		#include <logdepthbuf_pars_vertex>

		void main() {

			vUv = textureMatrix * vec4( position, 1.0 );

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

			#include <logdepthbuf_vertex>

		}`,fragmentShader:`
		uniform vec3 color;
		uniform sampler2D tDiffuse;
		varying vec4 vUv;

		#include <logdepthbuf_pars_fragment>

		float blendOverlay( float base, float blend ) {

			return( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );

		}

		vec3 blendOverlay( vec3 base, vec3 blend ) {

			return vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );

		}

		void main() {

			#include <logdepthbuf_fragment>

			vec4 base = texture2DProj( tDiffuse, vUv );
			gl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );

			#include <tonemapping_fragment>
			#include <${Uw>=154?"colorspace_fragment":"encodings_fragment"}>

		}`}),n})();var Ww=Object.defineProperty,qw=(s,n,r)=>n in s?Ww(s,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[n]=r,Kw=(s,n,r)=>(qw(s,n+"",r),r);class Yw{constructor(){Kw(this,"_listeners")}addEventListener(n,r){this._listeners===void 0&&(this._listeners={});const o=this._listeners;o[n]===void 0&&(o[n]=[]),o[n].indexOf(r)===-1&&o[n].push(r)}hasEventListener(n,r){if(this._listeners===void 0)return!1;const o=this._listeners;return o[n]!==void 0&&o[n].indexOf(r)!==-1}removeEventListener(n,r){if(this._listeners===void 0)return;const i=this._listeners[n];if(i!==void 0){const d=i.indexOf(r);d!==-1&&i.splice(d,1)}}dispatchEvent(n){if(this._listeners===void 0)return;const o=this._listeners[n.type];if(o!==void 0){n.target=this;const i=o.slice(0);for(let d=0,g=i.length;d<g;d++)i[d].call(this,n);n.target=null}}}var Zw=Object.defineProperty,Xw=(s,n,r)=>n in s?Zw(s,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[n]=r,Ae=(s,n,r)=>(Xw(s,typeof n!="symbol"?n+"":n,r),r);const on=new bn,Ya=new ws,Qw=Math.cos(70*(Math.PI/180)),Za=(s,n)=>(s%n+n)%n;class Jw extends Yw{constructor(n,r){super(),Ae(this,"object"),Ae(this,"domElement"),Ae(this,"enabled",!0),Ae(this,"target",new Le),Ae(this,"minDistance",0),Ae(this,"maxDistance",1/0),Ae(this,"minZoom",0),Ae(this,"maxZoom",1/0),Ae(this,"minPolarAngle",0),Ae(this,"maxPolarAngle",Math.PI),Ae(this,"minAzimuthAngle",-1/0),Ae(this,"maxAzimuthAngle",1/0),Ae(this,"enableDamping",!1),Ae(this,"dampingFactor",.05),Ae(this,"enableZoom",!0),Ae(this,"zoomSpeed",1),Ae(this,"enableRotate",!0),Ae(this,"rotateSpeed",1),Ae(this,"enablePan",!0),Ae(this,"panSpeed",1),Ae(this,"screenSpacePanning",!0),Ae(this,"keyPanSpeed",7),Ae(this,"zoomToCursor",!1),Ae(this,"autoRotate",!1),Ae(this,"autoRotateSpeed",2),Ae(this,"reverseOrbit",!1),Ae(this,"reverseHorizontalOrbit",!1),Ae(this,"reverseVerticalOrbit",!1),Ae(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Ae(this,"mouseButtons",{LEFT:Rt.ROTATE,MIDDLE:Rt.DOLLY,RIGHT:Rt.PAN}),Ae(this,"touches",{ONE:Bt.ROTATE,TWO:Bt.DOLLY_PAN}),Ae(this,"target0"),Ae(this,"position0"),Ae(this,"zoom0"),Ae(this,"_domElementKeyEvents",null),Ae(this,"getPolarAngle"),Ae(this,"getAzimuthalAngle"),Ae(this,"setPolarAngle"),Ae(this,"setAzimuthalAngle"),Ae(this,"getDistance"),Ae(this,"getZoomScale"),Ae(this,"listenToKeyEvents"),Ae(this,"stopListenToKeyEvents"),Ae(this,"saveState"),Ae(this,"reset"),Ae(this,"update"),Ae(this,"connect"),Ae(this,"dispose"),Ae(this,"dollyIn"),Ae(this,"dollyOut"),Ae(this,"getScale"),Ae(this,"setScale"),this.object=n,this.domElement=r,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>x.phi,this.getAzimuthalAngle=()=>x.theta,this.setPolarAngle=se=>{let ke=Za(se,2*Math.PI),Me=x.phi;Me<0&&(Me+=2*Math.PI),ke<0&&(ke+=2*Math.PI);let Ge=Math.abs(ke-Me);2*Math.PI-Ge<Ge&&(ke<Me?ke+=2*Math.PI:Me+=2*Math.PI),_.phi=ke-Me,o.update()},this.setAzimuthalAngle=se=>{let ke=Za(se,2*Math.PI),Me=x.theta;Me<0&&(Me+=2*Math.PI),ke<0&&(ke+=2*Math.PI);let Ge=Math.abs(ke-Me);2*Math.PI-Ge<Ge&&(ke<Me?ke+=2*Math.PI:Me+=2*Math.PI),_.theta=ke-Me,o.update()},this.getDistance=()=>o.object.position.distanceTo(o.target),this.listenToKeyEvents=se=>{se.addEventListener("keydown",Xe),this._domElementKeyEvents=se},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Xe),this._domElementKeyEvents=null},this.saveState=()=>{o.target0.copy(o.target),o.position0.copy(o.object.position),o.zoom0=o.object.zoom},this.reset=()=>{o.target.copy(o.target0),o.object.position.copy(o.position0),o.object.zoom=o.zoom0,o.object.updateProjectionMatrix(),o.dispatchEvent(i),o.update(),m=f.NONE},this.update=(()=>{const se=new Le,ke=new Le(0,1,0),Me=new zs().setFromUnitVectors(n.up,ke),Ge=Me.clone().invert(),it=new Le,Lt=new zs,Nt=2*Math.PI;return function(){const fr=o.object.position;Me.setFromUnitVectors(n.up,ke),Ge.copy(Me).invert(),se.copy(fr).sub(o.target),se.applyQuaternion(Me),x.setFromVector3(se),o.autoRotate&&m===f.NONE&&O(G()),o.enableDamping?(x.theta+=_.theta*o.dampingFactor,x.phi+=_.phi*o.dampingFactor):(x.theta+=_.theta,x.phi+=_.phi);let jt=o.minAzimuthAngle,It=o.maxAzimuthAngle;isFinite(jt)&&isFinite(It)&&(jt<-Math.PI?jt+=Nt:jt>Math.PI&&(jt-=Nt),It<-Math.PI?It+=Nt:It>Math.PI&&(It-=Nt),jt<=It?x.theta=Math.max(jt,Math.min(It,x.theta)):x.theta=x.theta>(jt+It)/2?Math.max(jt,x.theta):Math.min(It,x.theta)),x.phi=Math.max(o.minPolarAngle,Math.min(o.maxPolarAngle,x.phi)),x.makeSafe(),o.enableDamping===!0?o.target.addScaledVector(k,o.dampingFactor):o.target.add(k),o.zoomToCursor&&v||o.object.isOrthographicCamera?x.radius=be(x.radius):x.radius=be(x.radius*C),se.setFromSpherical(x),se.applyQuaternion(Ge),fr.copy(o.target).add(se),o.object.matrixAutoUpdate||o.object.updateMatrix(),o.object.lookAt(o.target),o.enableDamping===!0?(_.theta*=1-o.dampingFactor,_.phi*=1-o.dampingFactor,k.multiplyScalar(1-o.dampingFactor)):(_.set(0,0,0),k.set(0,0,0));let Ps=!1;if(o.zoomToCursor&&v){let Es=null;if(o.object instanceof ts&&o.object.isPerspectiveCamera){const Ts=se.length();Es=be(Ts*C);const Qs=Ts-Es;o.object.position.addScaledVector(h,Qs),o.object.updateMatrixWorld()}else if(o.object.isOrthographicCamera){const Ts=new Le(u.x,u.y,0);Ts.unproject(o.object),o.object.zoom=Math.max(o.minZoom,Math.min(o.maxZoom,o.object.zoom/C)),o.object.updateProjectionMatrix(),Ps=!0;const Qs=new Le(u.x,u.y,0);Qs.unproject(o.object),o.object.position.sub(Qs).add(Ts),o.object.updateMatrixWorld(),Es=se.length()}else o.zoomToCursor=!1;Es!==null&&(o.screenSpacePanning?o.target.set(0,0,-1).transformDirection(o.object.matrix).multiplyScalar(Es).add(o.object.position):(on.origin.copy(o.object.position),on.direction.set(0,0,-1).transformDirection(o.object.matrix),Math.abs(o.object.up.dot(on.direction))<Qw?n.lookAt(o.target):(Ya.setFromNormalAndCoplanarPoint(o.object.up,o.target),on.intersectPlane(Ya,o.target))))}else o.object instanceof Ht&&o.object.isOrthographicCamera&&(Ps=C!==1,Ps&&(o.object.zoom=Math.max(o.minZoom,Math.min(o.maxZoom,o.object.zoom/C)),o.object.updateProjectionMatrix()));return C=1,v=!1,Ps||it.distanceToSquared(o.object.position)>b||8*(1-Lt.dot(o.object.quaternion))>b?(o.dispatchEvent(i),it.copy(o.object.position),Lt.copy(o.object.quaternion),Ps=!1,!0):!1}})(),this.connect=se=>{o.domElement=se,o.domElement.style.touchAction="none",o.domElement.addEventListener("contextmenu",ae),o.domElement.addEventListener("pointerdown",ve),o.domElement.addEventListener("pointercancel",Ze),o.domElement.addEventListener("wheel",as)},this.dispose=()=>{var se,ke,Me,Ge,it,Lt;o.domElement&&(o.domElement.style.touchAction="auto"),(se=o.domElement)==null||se.removeEventListener("contextmenu",ae),(ke=o.domElement)==null||ke.removeEventListener("pointerdown",ve),(Me=o.domElement)==null||Me.removeEventListener("pointercancel",Ze),(Ge=o.domElement)==null||Ge.removeEventListener("wheel",as),(it=o.domElement)==null||it.ownerDocument.removeEventListener("pointermove",Ie),(Lt=o.domElement)==null||Lt.ownerDocument.removeEventListener("pointerup",Ze),o._domElementKeyEvents!==null&&o._domElementKeyEvents.removeEventListener("keydown",Xe)};const o=this,i={type:"change"},d={type:"start"},g={type:"end"},f={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let m=f.NONE;const b=1e-6,x=new xr,_=new xr;let C=1;const k=new Le,p=new tt,T=new tt,M=new tt,P=new tt,w=new tt,$=new tt,S=new tt,A=new tt,y=new tt,h=new Le,u=new tt;let v=!1;const D=[],z={};function G(){return 2*Math.PI/60/60*o.autoRotateSpeed}function B(){return Math.pow(.95,o.zoomSpeed)}function O(se){o.reverseOrbit||o.reverseHorizontalOrbit?_.theta+=se:_.theta-=se}function R(se){o.reverseOrbit||o.reverseVerticalOrbit?_.phi+=se:_.phi-=se}const X=(()=>{const se=new Le;return function(Me,Ge){se.setFromMatrixColumn(Ge,0),se.multiplyScalar(-Me),k.add(se)}})(),oe=(()=>{const se=new Le;return function(Me,Ge){o.screenSpacePanning===!0?se.setFromMatrixColumn(Ge,1):(se.setFromMatrixColumn(Ge,0),se.crossVectors(o.object.up,se)),se.multiplyScalar(Me),k.add(se)}})(),we=(()=>{const se=new Le;return function(Me,Ge){const it=o.domElement;if(it&&o.object instanceof ts&&o.object.isPerspectiveCamera){const Lt=o.object.position;se.copy(Lt).sub(o.target);let Nt=se.length();Nt*=Math.tan(o.object.fov/2*Math.PI/180),X(2*Me*Nt/it.clientHeight,o.object.matrix),oe(2*Ge*Nt/it.clientHeight,o.object.matrix)}else it&&o.object instanceof Ht&&o.object.isOrthographicCamera?(X(Me*(o.object.right-o.object.left)/o.object.zoom/it.clientWidth,o.object.matrix),oe(Ge*(o.object.top-o.object.bottom)/o.object.zoom/it.clientHeight,o.object.matrix)):o.enablePan=!1}})();function re(se){o.object instanceof ts&&o.object.isPerspectiveCamera||o.object instanceof Ht&&o.object.isOrthographicCamera?C=se:o.enableZoom=!1}function E(se){re(C/se)}function L(se){re(C*se)}function F(se){if(!o.zoomToCursor||!o.domElement)return;v=!0;const ke=o.domElement.getBoundingClientRect(),Me=se.clientX-ke.left,Ge=se.clientY-ke.top,it=ke.width,Lt=ke.height;u.x=Me/it*2-1,u.y=-(Ge/Lt)*2+1,h.set(u.x,u.y,1).unproject(o.object).sub(o.object.position).normalize()}function be(se){return Math.max(o.minDistance,Math.min(o.maxDistance,se))}function ie(se){p.set(se.clientX,se.clientY)}function de(se){F(se),S.set(se.clientX,se.clientY)}function te(se){P.set(se.clientX,se.clientY)}function K(se){T.set(se.clientX,se.clientY),M.subVectors(T,p).multiplyScalar(o.rotateSpeed);const ke=o.domElement;ke&&(O(2*Math.PI*M.x/ke.clientHeight),R(2*Math.PI*M.y/ke.clientHeight)),p.copy(T),o.update()}function ue(se){A.set(se.clientX,se.clientY),y.subVectors(A,S),y.y>0?E(B()):y.y<0&&L(B()),S.copy(A),o.update()}function N(se){w.set(se.clientX,se.clientY),$.subVectors(w,P).multiplyScalar(o.panSpeed),we($.x,$.y),P.copy(w),o.update()}function H(se){F(se),se.deltaY<0?L(B()):se.deltaY>0&&E(B()),o.update()}function Y(se){let ke=!1;switch(se.code){case o.keys.UP:we(0,o.keyPanSpeed),ke=!0;break;case o.keys.BOTTOM:we(0,-o.keyPanSpeed),ke=!0;break;case o.keys.LEFT:we(o.keyPanSpeed,0),ke=!0;break;case o.keys.RIGHT:we(-o.keyPanSpeed,0),ke=!0;break}ke&&(se.preventDefault(),o.update())}function me(){if(D.length==1)p.set(D[0].pageX,D[0].pageY);else{const se=.5*(D[0].pageX+D[1].pageX),ke=.5*(D[0].pageY+D[1].pageY);p.set(se,ke)}}function J(){if(D.length==1)P.set(D[0].pageX,D[0].pageY);else{const se=.5*(D[0].pageX+D[1].pageX),ke=.5*(D[0].pageY+D[1].pageY);P.set(se,ke)}}function Z(){const se=D[0].pageX-D[1].pageX,ke=D[0].pageY-D[1].pageY,Me=Math.sqrt(se*se+ke*ke);S.set(0,Me)}function q(){o.enableZoom&&Z(),o.enablePan&&J()}function ee(){o.enableZoom&&Z(),o.enableRotate&&me()}function ne(se){if(D.length==1)T.set(se.pageX,se.pageY);else{const Me=et(se),Ge=.5*(se.pageX+Me.x),it=.5*(se.pageY+Me.y);T.set(Ge,it)}M.subVectors(T,p).multiplyScalar(o.rotateSpeed);const ke=o.domElement;ke&&(O(2*Math.PI*M.x/ke.clientHeight),R(2*Math.PI*M.y/ke.clientHeight)),p.copy(T)}function Ce(se){if(D.length==1)w.set(se.pageX,se.pageY);else{const ke=et(se),Me=.5*(se.pageX+ke.x),Ge=.5*(se.pageY+ke.y);w.set(Me,Ge)}$.subVectors(w,P).multiplyScalar(o.panSpeed),we($.x,$.y),P.copy(w)}function Ee(se){const ke=et(se),Me=se.pageX-ke.x,Ge=se.pageY-ke.y,it=Math.sqrt(Me*Me+Ge*Ge);A.set(0,it),y.set(0,Math.pow(A.y/S.y,o.zoomSpeed)),E(y.y),S.copy(A)}function he(se){o.enableZoom&&Ee(se),o.enablePan&&Ce(se)}function ge(se){o.enableZoom&&Ee(se),o.enableRotate&&ne(se)}function ve(se){var ke,Me;o.enabled!==!1&&(D.length===0&&((ke=o.domElement)==null||ke.ownerDocument.addEventListener("pointermove",Ie),(Me=o.domElement)==null||Me.ownerDocument.addEventListener("pointerup",Ze)),fe(se),se.pointerType==="touch"?kt(se):ht(se))}function Ie(se){o.enabled!==!1&&(se.pointerType==="touch"?gt(se):Zt(se))}function Ze(se){var ke,Me,Ge;_e(se),D.length===0&&((ke=o.domElement)==null||ke.releasePointerCapture(se.pointerId),(Me=o.domElement)==null||Me.ownerDocument.removeEventListener("pointermove",Ie),(Ge=o.domElement)==null||Ge.ownerDocument.removeEventListener("pointerup",Ze)),o.dispatchEvent(g),m=f.NONE}function ht(se){let ke;switch(se.button){case 0:ke=o.mouseButtons.LEFT;break;case 1:ke=o.mouseButtons.MIDDLE;break;case 2:ke=o.mouseButtons.RIGHT;break;default:ke=-1}switch(ke){case Rt.DOLLY:if(o.enableZoom===!1)return;de(se),m=f.DOLLY;break;case Rt.ROTATE:if(se.ctrlKey||se.metaKey||se.shiftKey){if(o.enablePan===!1)return;te(se),m=f.PAN}else{if(o.enableRotate===!1)return;ie(se),m=f.ROTATE}break;case Rt.PAN:if(se.ctrlKey||se.metaKey||se.shiftKey){if(o.enableRotate===!1)return;ie(se),m=f.ROTATE}else{if(o.enablePan===!1)return;te(se),m=f.PAN}break;default:m=f.NONE}m!==f.NONE&&o.dispatchEvent(d)}function Zt(se){if(o.enabled!==!1)switch(m){case f.ROTATE:if(o.enableRotate===!1)return;K(se);break;case f.DOLLY:if(o.enableZoom===!1)return;ue(se);break;case f.PAN:if(o.enablePan===!1)return;N(se);break}}function as(se){o.enabled===!1||o.enableZoom===!1||m!==f.NONE&&m!==f.ROTATE||(se.preventDefault(),o.dispatchEvent(d),H(se),o.dispatchEvent(g))}function Xe(se){o.enabled===!1||o.enablePan===!1||Y(se)}function kt(se){switch(De(se),D.length){case 1:switch(o.touches.ONE){case Bt.ROTATE:if(o.enableRotate===!1)return;me(),m=f.TOUCH_ROTATE;break;case Bt.PAN:if(o.enablePan===!1)return;J(),m=f.TOUCH_PAN;break;default:m=f.NONE}break;case 2:switch(o.touches.TWO){case Bt.DOLLY_PAN:if(o.enableZoom===!1&&o.enablePan===!1)return;q(),m=f.TOUCH_DOLLY_PAN;break;case Bt.DOLLY_ROTATE:if(o.enableZoom===!1&&o.enableRotate===!1)return;ee(),m=f.TOUCH_DOLLY_ROTATE;break;default:m=f.NONE}break;default:m=f.NONE}m!==f.NONE&&o.dispatchEvent(d)}function gt(se){switch(De(se),m){case f.TOUCH_ROTATE:if(o.enableRotate===!1)return;ne(se),o.update();break;case f.TOUCH_PAN:if(o.enablePan===!1)return;Ce(se),o.update();break;case f.TOUCH_DOLLY_PAN:if(o.enableZoom===!1&&o.enablePan===!1)return;he(se),o.update();break;case f.TOUCH_DOLLY_ROTATE:if(o.enableZoom===!1&&o.enableRotate===!1)return;ge(se),o.update();break;default:m=f.NONE}}function ae(se){o.enabled!==!1&&se.preventDefault()}function fe(se){D.push(se)}function _e(se){delete z[se.pointerId];for(let ke=0;ke<D.length;ke++)if(D[ke].pointerId==se.pointerId){D.splice(ke,1);return}}function De(se){let ke=z[se.pointerId];ke===void 0&&(ke=new tt,z[se.pointerId]=ke),ke.set(se.pageX,se.pageY)}function et(se){const ke=se.pointerId===D[0].pointerId?D[1]:D[0];return z[ke.pointerId]}this.dollyIn=(se=B())=>{L(se),o.update()},this.dollyOut=(se=B())=>{E(se),o.update()},this.getScale=()=>C,this.setScale=se=>{re(se),o.update()},this.getZoomScale=()=>B(),r!==void 0&&this.connect(r),this.update()}}var Kn;/Mac/.test((Kn=globalThis?.navigator)===null||Kn===void 0?void 0:Kn.platform);function rn(s){throw new Error('Could not dynamically require "'+s+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Yn={exports:{}},Xa;function e4(){return Xa||(Xa=1,(function(s,n){(function(r){s.exports=r()})(function(){return(function r(o,i,d){function g(b,x){if(!i[b]){if(!o[b]){var _=typeof rn=="function"&&rn;if(!x&&_)return _(b,!0);if(f)return f(b,!0);throw new Error("Cannot find module '"+b+"'")}x=i[b]={exports:{}},o[b][0].call(x.exports,function(C){var k=o[b][1][C];return g(k||C)},x,x.exports,r,o,i,d)}return i[b].exports}for(var f=typeof rn=="function"&&rn,m=0;m<d.length;m++)g(d[m]);return g})({1:[function(r,o,i){(function(d,g,f,m,b,x,_,C,k){var p=r("crypto");function T(y,h){h=w(y,h);var u;return(u=h.algorithm!=="passthrough"?p.createHash(h.algorithm):new A).write===void 0&&(u.write=u.update,u.end=u.update),S(h,u).dispatch(y),u.update||u.end(""),u.digest?u.digest(h.encoding==="buffer"?void 0:h.encoding):(y=u.read(),h.encoding!=="buffer"?y.toString(h.encoding):y)}(i=o.exports=T).sha1=function(y){return T(y)},i.keys=function(y){return T(y,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},i.MD5=function(y){return T(y,{algorithm:"md5",encoding:"hex"})},i.keysMD5=function(y){return T(y,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var M=p.getHashes?p.getHashes().slice():["sha1","md5"],P=(M.push("passthrough"),["buffer","hex","binary","base64"]);function w(y,h){var u={};if(u.algorithm=(h=h||{}).algorithm||"sha1",u.encoding=h.encoding||"hex",u.excludeValues=!!h.excludeValues,u.algorithm=u.algorithm.toLowerCase(),u.encoding=u.encoding.toLowerCase(),u.ignoreUnknown=h.ignoreUnknown===!0,u.respectType=h.respectType!==!1,u.respectFunctionNames=h.respectFunctionNames!==!1,u.respectFunctionProperties=h.respectFunctionProperties!==!1,u.unorderedArrays=h.unorderedArrays===!0,u.unorderedSets=h.unorderedSets!==!1,u.unorderedObjects=h.unorderedObjects!==!1,u.replacer=h.replacer||void 0,u.excludeKeys=h.excludeKeys||void 0,y===void 0)throw new Error("Object argument required.");for(var v=0;v<M.length;++v)M[v].toLowerCase()===u.algorithm.toLowerCase()&&(u.algorithm=M[v]);if(M.indexOf(u.algorithm)===-1)throw new Error('Algorithm "'+u.algorithm+'"  not supported. supported values: '+M.join(", "));if(P.indexOf(u.encoding)===-1&&u.algorithm!=="passthrough")throw new Error('Encoding "'+u.encoding+'"  not supported. supported values: '+P.join(", "));return u}function $(y){if(typeof y=="function")return/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(y))!=null}function S(y,h,u){u=u||[];function v(D){return h.update?h.update(D,"utf8"):h.write(D,"utf8")}return{dispatch:function(D){return this["_"+((D=y.replacer?y.replacer(D):D)===null?"null":typeof D)](D)},_object:function(D){var z,G=Object.prototype.toString.call(D),B=/\[object (.*)\]/i.exec(G);if(B=(B=B?B[1]:"unknown:["+G+"]").toLowerCase(),0<=(G=u.indexOf(D)))return this.dispatch("[CIRCULAR:"+G+"]");if(u.push(D),f!==void 0&&f.isBuffer&&f.isBuffer(D))return v("buffer:"),v(D);if(B==="object"||B==="function"||B==="asyncfunction")return G=Object.keys(D),y.unorderedObjects&&(G=G.sort()),y.respectType===!1||$(D)||G.splice(0,0,"prototype","__proto__","constructor"),y.excludeKeys&&(G=G.filter(function(O){return!y.excludeKeys(O)})),v("object:"+G.length+":"),z=this,G.forEach(function(O){z.dispatch(O),v(":"),y.excludeValues||z.dispatch(D[O]),v(",")});if(!this["_"+B]){if(y.ignoreUnknown)return v("["+B+"]");throw new Error('Unknown object type "'+B+'"')}this["_"+B](D)},_array:function(D,O){O=O!==void 0?O:y.unorderedArrays!==!1;var G=this;if(v("array:"+D.length+":"),!O||D.length<=1)return D.forEach(function(R){return G.dispatch(R)});var B=[],O=D.map(function(R){var X=new A,oe=u.slice();return S(y,X,oe).dispatch(R),B=B.concat(oe.slice(u.length)),X.read().toString()});return u=u.concat(B),O.sort(),this._array(O,!1)},_date:function(D){return v("date:"+D.toJSON())},_symbol:function(D){return v("symbol:"+D.toString())},_error:function(D){return v("error:"+D.toString())},_boolean:function(D){return v("bool:"+D.toString())},_string:function(D){v("string:"+D.length+":"),v(D.toString())},_function:function(D){v("fn:"),$(D)?this.dispatch("[native]"):this.dispatch(D.toString()),y.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(D.name)),y.respectFunctionProperties&&this._object(D)},_number:function(D){return v("number:"+D.toString())},_xml:function(D){return v("xml:"+D.toString())},_null:function(){return v("Null")},_undefined:function(){return v("Undefined")},_regexp:function(D){return v("regex:"+D.toString())},_uint8array:function(D){return v("uint8array:"),this.dispatch(Array.prototype.slice.call(D))},_uint8clampedarray:function(D){return v("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(D))},_int8array:function(D){return v("int8array:"),this.dispatch(Array.prototype.slice.call(D))},_uint16array:function(D){return v("uint16array:"),this.dispatch(Array.prototype.slice.call(D))},_int16array:function(D){return v("int16array:"),this.dispatch(Array.prototype.slice.call(D))},_uint32array:function(D){return v("uint32array:"),this.dispatch(Array.prototype.slice.call(D))},_int32array:function(D){return v("int32array:"),this.dispatch(Array.prototype.slice.call(D))},_float32array:function(D){return v("float32array:"),this.dispatch(Array.prototype.slice.call(D))},_float64array:function(D){return v("float64array:"),this.dispatch(Array.prototype.slice.call(D))},_arraybuffer:function(D){return v("arraybuffer:"),this.dispatch(new Uint8Array(D))},_url:function(D){return v("url:"+D.toString())},_map:function(D){return v("map:"),D=Array.from(D),this._array(D,y.unorderedSets!==!1)},_set:function(D){return v("set:"),D=Array.from(D),this._array(D,y.unorderedSets!==!1)},_file:function(D){return v("file:"),this.dispatch([D.name,D.size,D.type,D.lastModfied])},_blob:function(){if(y.ignoreUnknown)return v("[blob]");throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){return v("domwindow")},_bigint:function(D){return v("bigint:"+D.toString())},_process:function(){return v("process")},_timer:function(){return v("timer")},_pipe:function(){return v("pipe")},_tcp:function(){return v("tcp")},_udp:function(){return v("udp")},_tty:function(){return v("tty")},_statwatcher:function(){return v("statwatcher")},_securecontext:function(){return v("securecontext")},_connection:function(){return v("connection")},_zlib:function(){return v("zlib")},_context:function(){return v("context")},_nodescript:function(){return v("nodescript")},_httpparser:function(){return v("httpparser")},_dataview:function(){return v("dataview")},_signal:function(){return v("signal")},_fsevent:function(){return v("fsevent")},_tlswrap:function(){return v("tlswrap")}}}function A(){return{buf:"",write:function(y){this.buf+=y},end:function(y){this.buf+=y},read:function(){return this.buf}}}i.writeToStream=function(y,h,u){return u===void 0&&(u=h,h={}),S(h=w(y,h),u).dispatch(y)}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/")},{buffer:3,crypto:5,lYpoI2:11}],2:[function(r,o,i){(function(d,g,f,m,b,x,_,C,k){(function(p){var T=typeof Uint8Array<"u"?Uint8Array:Array,M=43,P=47,w=48,$=97,S=65,A=45,y=95;function h(u){return u=u.charCodeAt(0),u===M||u===A?62:u===P||u===y?63:u<w?-1:u<w+10?u-w+26+26:u<S+26?u-S:u<$+26?u-$+26:void 0}p.toByteArray=function(u){var v,D;if(0<u.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var z=u.length,z=u.charAt(z-2)==="="?2:u.charAt(z-1)==="="?1:0,G=new T(3*u.length/4-z),B=0<z?u.length-4:u.length,O=0;function R(X){G[O++]=X}for(v=0;v<B;v+=4,0)R((16711680&(D=h(u.charAt(v))<<18|h(u.charAt(v+1))<<12|h(u.charAt(v+2))<<6|h(u.charAt(v+3))))>>16),R((65280&D)>>8),R(255&D);return z==2?R(255&(D=h(u.charAt(v))<<2|h(u.charAt(v+1))>>4)):z==1&&(R((D=h(u.charAt(v))<<10|h(u.charAt(v+1))<<4|h(u.charAt(v+2))>>2)>>8&255),R(255&D)),G},p.fromByteArray=function(u){var v,D,z,G,B=u.length%3,O="";function R(X){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(X)}for(v=0,z=u.length-B;v<z;v+=3)D=(u[v]<<16)+(u[v+1]<<8)+u[v+2],O+=R((G=D)>>18&63)+R(G>>12&63)+R(G>>6&63)+R(63&G);switch(B){case 1:O=(O+=R((D=u[u.length-1])>>2))+R(D<<4&63)+"==";break;case 2:O=(O=(O+=R((D=(u[u.length-2]<<8)+u[u.length-1])>>10))+R(D>>4&63))+R(D<<2&63)+"="}return O}})(i===void 0?this.base64js={}:i)}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:11}],3:[function(r,o,i){(function(d,g,M,m,b,x,_,C,k){var p=r("base64-js"),T=r("ieee754");function M(N,H,Y){if(!(this instanceof M))return new M(N,H,Y);var me,J,Z,q,ee=typeof N;if(H==="base64"&&ee=="string")for(N=(q=N).trim?q.trim():q.replace(/^\s+|\s+$/g,"");N.length%4!=0;)N+="=";if(ee=="number")me=we(N);else if(ee=="string")me=M.byteLength(N,H);else{if(ee!="object")throw new Error("First argument needs to be a number, array or string.");me=we(N.length)}if(M._useTypedArrays?J=M._augment(new Uint8Array(me)):((J=this).length=me,J._isBuffer=!0),M._useTypedArrays&&typeof N.byteLength=="number")J._set(N);else if(re(q=N)||M.isBuffer(q)||q&&typeof q=="object"&&typeof q.length=="number")for(Z=0;Z<me;Z++)M.isBuffer(N)?J[Z]=N.readUInt8(Z):J[Z]=N[Z];else if(ee=="string")J.write(N,0,H);else if(ee=="number"&&!M._useTypedArrays&&!Y)for(Z=0;Z<me;Z++)J[Z]=0;return J}function P(N,H,Y,me){return M._charsWritten=be((function(J){for(var Z=[],q=0;q<J.length;q++)Z.push(255&J.charCodeAt(q));return Z})(H),N,Y,me)}function w(N,H,Y,me){return M._charsWritten=be((function(J){for(var Z,q,ee=[],ne=0;ne<J.length;ne++)q=J.charCodeAt(ne),Z=q>>8,q=q%256,ee.push(q),ee.push(Z);return ee})(H),N,Y,me)}function $(N,H,Y){var me="";Y=Math.min(N.length,Y);for(var J=H;J<Y;J++)me+=String.fromCharCode(N[J]);return me}function S(N,H,Y,Z){Z||(ue(typeof Y=="boolean","missing or invalid endian"),ue(H!=null,"missing offset"),ue(H+1<N.length,"Trying to read beyond buffer length"));var J,Z=N.length;if(!(Z<=H))return Y?(J=N[H],H+1<Z&&(J|=N[H+1]<<8)):(J=N[H]<<8,H+1<Z&&(J|=N[H+1])),J}function A(N,H,Y,Z){Z||(ue(typeof Y=="boolean","missing or invalid endian"),ue(H!=null,"missing offset"),ue(H+3<N.length,"Trying to read beyond buffer length"));var J,Z=N.length;if(!(Z<=H))return Y?(H+2<Z&&(J=N[H+2]<<16),H+1<Z&&(J|=N[H+1]<<8),J|=N[H],H+3<Z&&(J+=N[H+3]<<24>>>0)):(H+1<Z&&(J=N[H+1]<<16),H+2<Z&&(J|=N[H+2]<<8),H+3<Z&&(J|=N[H+3]),J+=N[H]<<24>>>0),J}function y(N,H,Y,me){if(me||(ue(typeof Y=="boolean","missing or invalid endian"),ue(H!=null,"missing offset"),ue(H+1<N.length,"Trying to read beyond buffer length")),!(N.length<=H))return me=S(N,H,Y,!0),32768&me?-1*(65535-me+1):me}function h(N,H,Y,me){if(me||(ue(typeof Y=="boolean","missing or invalid endian"),ue(H!=null,"missing offset"),ue(H+3<N.length,"Trying to read beyond buffer length")),!(N.length<=H))return me=A(N,H,Y,!0),2147483648&me?-1*(4294967295-me+1):me}function u(N,H,Y,me){return me||(ue(typeof Y=="boolean","missing or invalid endian"),ue(H+3<N.length,"Trying to read beyond buffer length")),T.read(N,H,Y,23,4)}function v(N,H,Y,me){return me||(ue(typeof Y=="boolean","missing or invalid endian"),ue(H+7<N.length,"Trying to read beyond buffer length")),T.read(N,H,Y,52,8)}function D(N,H,Y,me,J){if(J||(ue(H!=null,"missing value"),ue(typeof me=="boolean","missing or invalid endian"),ue(Y!=null,"missing offset"),ue(Y+1<N.length,"trying to write beyond buffer length"),de(H,65535)),J=N.length,!(J<=Y))for(var Z=0,q=Math.min(J-Y,2);Z<q;Z++)N[Y+Z]=(H&255<<8*(me?Z:1-Z))>>>8*(me?Z:1-Z)}function z(N,H,Y,me,J){if(J||(ue(H!=null,"missing value"),ue(typeof me=="boolean","missing or invalid endian"),ue(Y!=null,"missing offset"),ue(Y+3<N.length,"trying to write beyond buffer length"),de(H,4294967295)),J=N.length,!(J<=Y))for(var Z=0,q=Math.min(J-Y,4);Z<q;Z++)N[Y+Z]=H>>>8*(me?Z:3-Z)&255}function G(N,H,Y,me,J){J||(ue(H!=null,"missing value"),ue(typeof me=="boolean","missing or invalid endian"),ue(Y!=null,"missing offset"),ue(Y+1<N.length,"Trying to write beyond buffer length"),te(H,32767,-32768)),N.length<=Y||D(N,0<=H?H:65535+H+1,Y,me,J)}function B(N,H,Y,me,J){J||(ue(H!=null,"missing value"),ue(typeof me=="boolean","missing or invalid endian"),ue(Y!=null,"missing offset"),ue(Y+3<N.length,"Trying to write beyond buffer length"),te(H,2147483647,-2147483648)),N.length<=Y||z(N,0<=H?H:4294967295+H+1,Y,me,J)}function O(N,H,Y,me,J){J||(ue(H!=null,"missing value"),ue(typeof me=="boolean","missing or invalid endian"),ue(Y!=null,"missing offset"),ue(Y+3<N.length,"Trying to write beyond buffer length"),K(H,34028234663852886e22,-34028234663852886e22)),N.length<=Y||T.write(N,H,Y,me,23,4)}function R(N,H,Y,me,J){J||(ue(H!=null,"missing value"),ue(typeof me=="boolean","missing or invalid endian"),ue(Y!=null,"missing offset"),ue(Y+7<N.length,"Trying to write beyond buffer length"),K(H,17976931348623157e292,-17976931348623157e292)),N.length<=Y||T.write(N,H,Y,me,52,8)}i.Buffer=M,i.SlowBuffer=M,i.INSPECT_MAX_BYTES=50,M.poolSize=8192,M._useTypedArrays=(function(){try{var N=new ArrayBuffer(0),H=new Uint8Array(N);return H.foo=function(){return 42},H.foo()===42&&typeof H.subarray=="function"}catch{return!1}})(),M.isEncoding=function(N){switch(String(N).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},M.isBuffer=function(N){return!(N==null||!N._isBuffer)},M.byteLength=function(N,H){var Y;switch(N+="",H||"utf8"){case"hex":Y=N.length/2;break;case"utf8":case"utf-8":Y=L(N).length;break;case"ascii":case"binary":case"raw":Y=N.length;break;case"base64":Y=F(N).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":Y=2*N.length;break;default:throw new Error("Unknown encoding")}return Y},M.concat=function(N,H){if(ue(re(N),`Usage: Buffer.concat(list, [totalLength])
list should be an Array.`),N.length===0)return new M(0);if(N.length===1)return N[0];if(typeof H!="number")for(J=H=0;J<N.length;J++)H+=N[J].length;for(var Y=new M(H),me=0,J=0;J<N.length;J++){var Z=N[J];Z.copy(Y,me),me+=Z.length}return Y},M.prototype.write=function(N,H,Y,me){isFinite(H)?isFinite(Y)||(me=Y,Y=void 0):(ne=me,me=H,H=Y,Y=ne),H=Number(H)||0;var J,Z,q,ee,ne=this.length-H;switch((!Y||ne<(Y=Number(Y)))&&(Y=ne),me=String(me||"utf8").toLowerCase()){case"hex":J=(function(Ce,Ee,he,ge){he=Number(he)||0;var ve=Ce.length-he;(!ge||ve<(ge=Number(ge)))&&(ge=ve),ue((ve=Ee.length)%2==0,"Invalid hex string"),ve/2<ge&&(ge=ve/2);for(var Ie=0;Ie<ge;Ie++){var Ze=parseInt(Ee.substr(2*Ie,2),16);ue(!isNaN(Ze),"Invalid hex string"),Ce[he+Ie]=Ze}return M._charsWritten=2*Ie,Ie})(this,N,H,Y);break;case"utf8":case"utf-8":Z=this,q=H,ee=Y,J=M._charsWritten=be(L(N),Z,q,ee);break;case"ascii":case"binary":J=P(this,N,H,Y);break;case"base64":Z=this,q=H,ee=Y,J=M._charsWritten=be(F(N),Z,q,ee);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":J=w(this,N,H,Y);break;default:throw new Error("Unknown encoding")}return J},M.prototype.toString=function(N,H,Y){var me,J,Z,q,ee=this;if(N=String(N||"utf8").toLowerCase(),H=Number(H)||0,(Y=Y!==void 0?Number(Y):ee.length)===H)return"";switch(N){case"hex":me=(function(ne,Ce,Ee){var he=ne.length;(!Ce||Ce<0)&&(Ce=0),(!Ee||Ee<0||he<Ee)&&(Ee=he);for(var ge="",ve=Ce;ve<Ee;ve++)ge+=E(ne[ve]);return ge})(ee,H,Y);break;case"utf8":case"utf-8":me=(function(ne,Ce,Ee){var he="",ge="";Ee=Math.min(ne.length,Ee);for(var ve=Ce;ve<Ee;ve++)ne[ve]<=127?(he+=ie(ge)+String.fromCharCode(ne[ve]),ge=""):ge+="%"+ne[ve].toString(16);return he+ie(ge)})(ee,H,Y);break;case"ascii":case"binary":me=$(ee,H,Y);break;case"base64":J=ee,q=Y,me=(Z=H)===0&&q===J.length?p.fromByteArray(J):p.fromByteArray(J.slice(Z,q));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":me=(function(ne,Ce,Ee){for(var he=ne.slice(Ce,Ee),ge="",ve=0;ve<he.length;ve+=2)ge+=String.fromCharCode(he[ve]+256*he[ve+1]);return ge})(ee,H,Y);break;default:throw new Error("Unknown encoding")}return me},M.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},M.prototype.copy=function(N,H,Y,me){if(H=H||0,(me=me||me===0?me:this.length)!==(Y=Y||0)&&N.length!==0&&this.length!==0){ue(Y<=me,"sourceEnd < sourceStart"),ue(0<=H&&H<N.length,"targetStart out of bounds"),ue(0<=Y&&Y<this.length,"sourceStart out of bounds"),ue(0<=me&&me<=this.length,"sourceEnd out of bounds"),me>this.length&&(me=this.length);var J=(me=N.length-H<me-Y?N.length-H+Y:me)-Y;if(J<100||!M._useTypedArrays)for(var Z=0;Z<J;Z++)N[Z+H]=this[Z+Y];else N._set(this.subarray(Y,Y+J),H)}},M.prototype.slice=function(N,H){var Y=this.length;if(N=oe(N,Y,0),H=oe(H,Y,Y),M._useTypedArrays)return M._augment(this.subarray(N,H));for(var me=H-N,J=new M(me,void 0,!0),Z=0;Z<me;Z++)J[Z]=this[Z+N];return J},M.prototype.get=function(N){return this.readUInt8(N)},M.prototype.set=function(N,H){return this.writeUInt8(N,H)},M.prototype.readUInt8=function(N,H){if(H||(ue(N!=null,"missing offset"),ue(N<this.length,"Trying to read beyond buffer length")),!(N>=this.length))return this[N]},M.prototype.readUInt16LE=function(N,H){return S(this,N,!0,H)},M.prototype.readUInt16BE=function(N,H){return S(this,N,!1,H)},M.prototype.readUInt32LE=function(N,H){return A(this,N,!0,H)},M.prototype.readUInt32BE=function(N,H){return A(this,N,!1,H)},M.prototype.readInt8=function(N,H){if(H||(ue(N!=null,"missing offset"),ue(N<this.length,"Trying to read beyond buffer length")),!(N>=this.length))return 128&this[N]?-1*(255-this[N]+1):this[N]},M.prototype.readInt16LE=function(N,H){return y(this,N,!0,H)},M.prototype.readInt16BE=function(N,H){return y(this,N,!1,H)},M.prototype.readInt32LE=function(N,H){return h(this,N,!0,H)},M.prototype.readInt32BE=function(N,H){return h(this,N,!1,H)},M.prototype.readFloatLE=function(N,H){return u(this,N,!0,H)},M.prototype.readFloatBE=function(N,H){return u(this,N,!1,H)},M.prototype.readDoubleLE=function(N,H){return v(this,N,!0,H)},M.prototype.readDoubleBE=function(N,H){return v(this,N,!1,H)},M.prototype.writeUInt8=function(N,H,Y){Y||(ue(N!=null,"missing value"),ue(H!=null,"missing offset"),ue(H<this.length,"trying to write beyond buffer length"),de(N,255)),H>=this.length||(this[H]=N)},M.prototype.writeUInt16LE=function(N,H,Y){D(this,N,H,!0,Y)},M.prototype.writeUInt16BE=function(N,H,Y){D(this,N,H,!1,Y)},M.prototype.writeUInt32LE=function(N,H,Y){z(this,N,H,!0,Y)},M.prototype.writeUInt32BE=function(N,H,Y){z(this,N,H,!1,Y)},M.prototype.writeInt8=function(N,H,Y){Y||(ue(N!=null,"missing value"),ue(H!=null,"missing offset"),ue(H<this.length,"Trying to write beyond buffer length"),te(N,127,-128)),H>=this.length||(0<=N?this.writeUInt8(N,H,Y):this.writeUInt8(255+N+1,H,Y))},M.prototype.writeInt16LE=function(N,H,Y){G(this,N,H,!0,Y)},M.prototype.writeInt16BE=function(N,H,Y){G(this,N,H,!1,Y)},M.prototype.writeInt32LE=function(N,H,Y){B(this,N,H,!0,Y)},M.prototype.writeInt32BE=function(N,H,Y){B(this,N,H,!1,Y)},M.prototype.writeFloatLE=function(N,H,Y){O(this,N,H,!0,Y)},M.prototype.writeFloatBE=function(N,H,Y){O(this,N,H,!1,Y)},M.prototype.writeDoubleLE=function(N,H,Y){R(this,N,H,!0,Y)},M.prototype.writeDoubleBE=function(N,H,Y){R(this,N,H,!1,Y)},M.prototype.fill=function(N,H,Y){if(H=H||0,Y=Y||this.length,ue(typeof(N=typeof(N=N||0)=="string"?N.charCodeAt(0):N)=="number"&&!isNaN(N),"value is not a number"),ue(H<=Y,"end < start"),Y!==H&&this.length!==0){ue(0<=H&&H<this.length,"start out of bounds"),ue(0<=Y&&Y<=this.length,"end out of bounds");for(var me=H;me<Y;me++)this[me]=N}},M.prototype.inspect=function(){for(var N=[],H=this.length,Y=0;Y<H;Y++)if(N[Y]=E(this[Y]),Y===i.INSPECT_MAX_BYTES){N[Y+1]="...";break}return"<Buffer "+N.join(" ")+">"},M.prototype.toArrayBuffer=function(){if(typeof Uint8Array>"u")throw new Error("Buffer.toArrayBuffer not supported in this browser");if(M._useTypedArrays)return new M(this).buffer;for(var N=new Uint8Array(this.length),H=0,Y=N.length;H<Y;H+=1)N[H]=this[H];return N.buffer};var X=M.prototype;function oe(N,H,Y){return typeof N!="number"?Y:H<=(N=~~N)?H:0<=N||0<=(N+=H)?N:0}function we(N){return(N=~~Math.ceil(+N))<0?0:N}function re(N){return(Array.isArray||function(H){return Object.prototype.toString.call(H)==="[object Array]"})(N)}function E(N){return N<16?"0"+N.toString(16):N.toString(16)}function L(N){for(var H=[],Y=0;Y<N.length;Y++){var me=N.charCodeAt(Y);if(me<=127)H.push(N.charCodeAt(Y));else for(var J=Y,Z=(55296<=me&&me<=57343&&Y++,encodeURIComponent(N.slice(J,Y+1)).substr(1).split("%")),q=0;q<Z.length;q++)H.push(parseInt(Z[q],16))}return H}function F(N){return p.toByteArray(N)}function be(N,H,Y,me){for(var J=0;J<me&&!(J+Y>=H.length||J>=N.length);J++)H[J+Y]=N[J];return J}function ie(N){try{return decodeURIComponent(N)}catch{return"�"}}function de(N,H){ue(typeof N=="number","cannot write a non-number as a number"),ue(0<=N,"specified a negative value for writing an unsigned value"),ue(N<=H,"value is larger than maximum value for type"),ue(Math.floor(N)===N,"value has a fractional component")}function te(N,H,Y){ue(typeof N=="number","cannot write a non-number as a number"),ue(N<=H,"value larger than maximum allowed value"),ue(Y<=N,"value smaller than minimum allowed value"),ue(Math.floor(N)===N,"value has a fractional component")}function K(N,H,Y){ue(typeof N=="number","cannot write a non-number as a number"),ue(N<=H,"value larger than maximum allowed value"),ue(Y<=N,"value smaller than minimum allowed value")}function ue(N,H){if(!N)throw new Error(H||"Failed assertion")}M._augment=function(N){return N._isBuffer=!0,N._get=N.get,N._set=N.set,N.get=X.get,N.set=X.set,N.write=X.write,N.toString=X.toString,N.toLocaleString=X.toString,N.toJSON=X.toJSON,N.copy=X.copy,N.slice=X.slice,N.readUInt8=X.readUInt8,N.readUInt16LE=X.readUInt16LE,N.readUInt16BE=X.readUInt16BE,N.readUInt32LE=X.readUInt32LE,N.readUInt32BE=X.readUInt32BE,N.readInt8=X.readInt8,N.readInt16LE=X.readInt16LE,N.readInt16BE=X.readInt16BE,N.readInt32LE=X.readInt32LE,N.readInt32BE=X.readInt32BE,N.readFloatLE=X.readFloatLE,N.readFloatBE=X.readFloatBE,N.readDoubleLE=X.readDoubleLE,N.readDoubleBE=X.readDoubleBE,N.writeUInt8=X.writeUInt8,N.writeUInt16LE=X.writeUInt16LE,N.writeUInt16BE=X.writeUInt16BE,N.writeUInt32LE=X.writeUInt32LE,N.writeUInt32BE=X.writeUInt32BE,N.writeInt8=X.writeInt8,N.writeInt16LE=X.writeInt16LE,N.writeInt16BE=X.writeInt16BE,N.writeInt32LE=X.writeInt32LE,N.writeInt32BE=X.writeInt32BE,N.writeFloatLE=X.writeFloatLE,N.writeFloatBE=X.writeFloatBE,N.writeDoubleLE=X.writeDoubleLE,N.writeDoubleBE=X.writeDoubleBE,N.fill=X.fill,N.inspect=X.inspect,N.toArrayBuffer=X.toArrayBuffer,N}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(r,o,i){(function(d,g,p,m,b,x,_,C,k){var p=r("buffer").Buffer,T=4,M=new p(T);M.fill(0),o.exports={hash:function(P,w,$,S){for(var A=w((function(D,z){D.length%T!=0&&(G=D.length+(T-D.length%T),D=p.concat([D,M],G));for(var G,B=[],O=z?D.readInt32BE:D.readInt32LE,R=0;R<D.length;R+=T)B.push(O.call(D,R));return B})(P=p.isBuffer(P)?P:new p(P),S),8*P.length),w=S,y=new p($),h=w?y.writeInt32BE:y.writeInt32LE,u=0;u<A.length;u++)h.call(y,A[u],4*u,!0);return y}}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],5:[function(r,o,i){(function(d,g,p,m,b,x,_,C,k){var p=r("buffer").Buffer,T=r("./sha"),M=r("./sha256"),P=r("./rng"),w={sha1:T,sha256:M,md5:r("./md5")},$=64,S=new p($);function A(D,z){var G=w[D=D||"sha1"],B=[];return G||y("algorithm:",D,"is not yet supported"),{update:function(O){return p.isBuffer(O)||(O=new p(O)),B.push(O),O.length,this},digest:function(O){var R=p.concat(B),R=z?(function(X,oe,we){p.isBuffer(oe)||(oe=new p(oe)),p.isBuffer(we)||(we=new p(we)),oe.length>$?oe=X(oe):oe.length<$&&(oe=p.concat([oe,S],$));for(var re=new p($),E=new p($),L=0;L<$;L++)re[L]=54^oe[L],E[L]=92^oe[L];return we=X(p.concat([re,we])),X(p.concat([E,we]))})(G,z,R):G(R);return B=null,O?R.toString(O):R}}}function y(){var D=[].slice.call(arguments).join(" ");throw new Error([D,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join(`
`))}S.fill(0),i.createHash=function(D){return A(D)},i.createHmac=A,i.randomBytes=function(D,z){if(!z||!z.call)return new p(P(D));try{z.call(this,void 0,new p(P(D)))}catch(G){z(G)}};var h,u=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],v=function(D){i[D]=function(){y("sorry,",D,"is not implemented yet")}};for(h in u)v(u[h])}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(r,o,i){(function(d,g,f,m,b,x,_,C,k){var p=r("./helpers");function T(y,h){y[h>>5]|=128<<h%32,y[14+(h+64>>>9<<4)]=h;for(var u=1732584193,v=-271733879,D=-1732584194,z=271733878,G=0;G<y.length;G+=16){var B=u,O=v,R=D,X=z,u=P(u,v,D,z,y[G+0],7,-680876936),z=P(z,u,v,D,y[G+1],12,-389564586),D=P(D,z,u,v,y[G+2],17,606105819),v=P(v,D,z,u,y[G+3],22,-1044525330);u=P(u,v,D,z,y[G+4],7,-176418897),z=P(z,u,v,D,y[G+5],12,1200080426),D=P(D,z,u,v,y[G+6],17,-1473231341),v=P(v,D,z,u,y[G+7],22,-45705983),u=P(u,v,D,z,y[G+8],7,1770035416),z=P(z,u,v,D,y[G+9],12,-1958414417),D=P(D,z,u,v,y[G+10],17,-42063),v=P(v,D,z,u,y[G+11],22,-1990404162),u=P(u,v,D,z,y[G+12],7,1804603682),z=P(z,u,v,D,y[G+13],12,-40341101),D=P(D,z,u,v,y[G+14],17,-1502002290),u=w(u,v=P(v,D,z,u,y[G+15],22,1236535329),D,z,y[G+1],5,-165796510),z=w(z,u,v,D,y[G+6],9,-1069501632),D=w(D,z,u,v,y[G+11],14,643717713),v=w(v,D,z,u,y[G+0],20,-373897302),u=w(u,v,D,z,y[G+5],5,-701558691),z=w(z,u,v,D,y[G+10],9,38016083),D=w(D,z,u,v,y[G+15],14,-660478335),v=w(v,D,z,u,y[G+4],20,-405537848),u=w(u,v,D,z,y[G+9],5,568446438),z=w(z,u,v,D,y[G+14],9,-1019803690),D=w(D,z,u,v,y[G+3],14,-187363961),v=w(v,D,z,u,y[G+8],20,1163531501),u=w(u,v,D,z,y[G+13],5,-1444681467),z=w(z,u,v,D,y[G+2],9,-51403784),D=w(D,z,u,v,y[G+7],14,1735328473),u=$(u,v=w(v,D,z,u,y[G+12],20,-1926607734),D,z,y[G+5],4,-378558),z=$(z,u,v,D,y[G+8],11,-2022574463),D=$(D,z,u,v,y[G+11],16,1839030562),v=$(v,D,z,u,y[G+14],23,-35309556),u=$(u,v,D,z,y[G+1],4,-1530992060),z=$(z,u,v,D,y[G+4],11,1272893353),D=$(D,z,u,v,y[G+7],16,-155497632),v=$(v,D,z,u,y[G+10],23,-1094730640),u=$(u,v,D,z,y[G+13],4,681279174),z=$(z,u,v,D,y[G+0],11,-358537222),D=$(D,z,u,v,y[G+3],16,-722521979),v=$(v,D,z,u,y[G+6],23,76029189),u=$(u,v,D,z,y[G+9],4,-640364487),z=$(z,u,v,D,y[G+12],11,-421815835),D=$(D,z,u,v,y[G+15],16,530742520),u=S(u,v=$(v,D,z,u,y[G+2],23,-995338651),D,z,y[G+0],6,-198630844),z=S(z,u,v,D,y[G+7],10,1126891415),D=S(D,z,u,v,y[G+14],15,-1416354905),v=S(v,D,z,u,y[G+5],21,-57434055),u=S(u,v,D,z,y[G+12],6,1700485571),z=S(z,u,v,D,y[G+3],10,-1894986606),D=S(D,z,u,v,y[G+10],15,-1051523),v=S(v,D,z,u,y[G+1],21,-2054922799),u=S(u,v,D,z,y[G+8],6,1873313359),z=S(z,u,v,D,y[G+15],10,-30611744),D=S(D,z,u,v,y[G+6],15,-1560198380),v=S(v,D,z,u,y[G+13],21,1309151649),u=S(u,v,D,z,y[G+4],6,-145523070),z=S(z,u,v,D,y[G+11],10,-1120210379),D=S(D,z,u,v,y[G+2],15,718787259),v=S(v,D,z,u,y[G+9],21,-343485551),u=A(u,B),v=A(v,O),D=A(D,R),z=A(z,X)}return Array(u,v,D,z)}function M(y,h,u,v,D,z){return A((h=A(A(h,y),A(v,z)))<<D|h>>>32-D,u)}function P(y,h,u,v,D,z,G){return M(h&u|~h&v,y,h,D,z,G)}function w(y,h,u,v,D,z,G){return M(h&v|u&~v,y,h,D,z,G)}function $(y,h,u,v,D,z,G){return M(h^u^v,y,h,D,z,G)}function S(y,h,u,v,D,z,G){return M(u^(h|~v),y,h,D,z,G)}function A(y,h){var u=(65535&y)+(65535&h);return(y>>16)+(h>>16)+(u>>16)<<16|65535&u}o.exports=function(y){return p.hash(y,T,16)}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(r,o,i){(function(d,g,f,m,b,x,_,C,k){o.exports=function(p){for(var T,M=new Array(p),P=0;P<p;P++)(3&P)==0&&(T=4294967296*Math.random()),M[P]=T>>>((3&P)<<3)&255;return M}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],8:[function(r,o,i){(function(d,g,f,m,b,x,_,C,k){var p=r("./helpers");function T(w,$){w[$>>5]|=128<<24-$%32,w[15+($+64>>9<<4)]=$;for(var S,A,y,h=Array(80),u=1732584193,v=-271733879,D=-1732584194,z=271733878,G=-1009589776,B=0;B<w.length;B+=16){for(var O=u,R=v,X=D,oe=z,we=G,re=0;re<80;re++){h[re]=re<16?w[B+re]:P(h[re-3]^h[re-8]^h[re-14]^h[re-16],1);var E=M(M(P(u,5),(E=v,A=D,y=z,(S=re)<20?E&A|~E&y:!(S<40)&&S<60?E&A|E&y|A&y:E^A^y)),M(M(G,h[re]),(S=re)<20?1518500249:S<40?1859775393:S<60?-1894007588:-899497514)),G=z,z=D,D=P(v,30),v=u,u=E}u=M(u,O),v=M(v,R),D=M(D,X),z=M(z,oe),G=M(G,we)}return Array(u,v,D,z,G)}function M(w,$){var S=(65535&w)+(65535&$);return(w>>16)+($>>16)+(S>>16)<<16|65535&S}function P(w,$){return w<<$|w>>>32-$}o.exports=function(w){return p.hash(w,T,20,!0)}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(r,o,i){(function(d,g,f,m,b,x,_,C,k){function p($,S){var A=(65535&$)+(65535&S);return($>>16)+(S>>16)+(A>>16)<<16|65535&A}function T($,S){var A,y=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),h=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),u=new Array(64);$[S>>5]|=128<<24-S%32,$[15+(S+64>>9<<4)]=S;for(var v,D,z=0;z<$.length;z+=16){for(var G=h[0],B=h[1],O=h[2],R=h[3],X=h[4],oe=h[5],we=h[6],re=h[7],E=0;E<64;E++)u[E]=E<16?$[E+z]:p(p(p((D=u[E-2],P(D,17)^P(D,19)^w(D,10)),u[E-7]),(D=u[E-15],P(D,7)^P(D,18)^w(D,3))),u[E-16]),A=p(p(p(p(re,P(D=X,6)^P(D,11)^P(D,25)),X&oe^~X&we),y[E]),u[E]),v=p(P(v=G,2)^P(v,13)^P(v,22),G&B^G&O^B&O),re=we,we=oe,oe=X,X=p(R,A),R=O,O=B,B=G,G=p(A,v);h[0]=p(G,h[0]),h[1]=p(B,h[1]),h[2]=p(O,h[2]),h[3]=p(R,h[3]),h[4]=p(X,h[4]),h[5]=p(oe,h[5]),h[6]=p(we,h[6]),h[7]=p(re,h[7])}return h}var M=r("./helpers"),P=function($,S){return $>>>S|$<<32-S},w=function($,S){return $>>>S};o.exports=function($){return M.hash($,T,32,!0)}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(r,o,i){(function(d,g,f,m,b,x,_,C,k){i.read=function(p,T,M,P,z){var $,S,A=8*z-P-1,y=(1<<A)-1,h=y>>1,u=-7,v=M?z-1:0,D=M?-1:1,z=p[T+v];for(v+=D,$=z&(1<<-u)-1,z>>=-u,u+=A;0<u;$=256*$+p[T+v],v+=D,u-=8);for(S=$&(1<<-u)-1,$>>=-u,u+=P;0<u;S=256*S+p[T+v],v+=D,u-=8);if($===0)$=1-h;else{if($===y)return S?NaN:1/0*(z?-1:1);S+=Math.pow(2,P),$-=h}return(z?-1:1)*S*Math.pow(2,$-P)},i.write=function(p,T,M,P,w,G){var S,A,y=8*G-w-1,h=(1<<y)-1,u=h>>1,v=w===23?Math.pow(2,-24)-Math.pow(2,-77):0,D=P?0:G-1,z=P?1:-1,G=T<0||T===0&&1/T<0?1:0;for(T=Math.abs(T),isNaN(T)||T===1/0?(A=isNaN(T)?1:0,S=h):(S=Math.floor(Math.log(T)/Math.LN2),T*(P=Math.pow(2,-S))<1&&(S--,P*=2),2<=(T+=1<=S+u?v/P:v*Math.pow(2,1-u))*P&&(S++,P/=2),h<=S+u?(A=0,S=h):1<=S+u?(A=(T*P-1)*Math.pow(2,w),S+=u):(A=T*Math.pow(2,u-1)*Math.pow(2,w),S=0));8<=w;p[M+D]=255&A,D+=z,A/=256,w-=8);for(S=S<<w|A,y+=w;0<y;p[M+D]=255&S,D+=z,S/=256,y-=8);p[M+D-z]|=128*G}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754")},{buffer:3,lYpoI2:11}],11:[function(r,o,i){(function(d,g,f,m,b,x,_,C,k){var p,T,M;function P(){}(d=o.exports={}).nextTick=(T=typeof window<"u"&&window.setImmediate,M=typeof window<"u"&&window.postMessage&&window.addEventListener,T?function(w){return window.setImmediate(w)}:M?(p=[],window.addEventListener("message",function(w){var $=w.source;$!==window&&$!==null||w.data!=="process-tick"||(w.stopPropagation(),0<p.length&&p.shift()())},!0),function(w){p.push(w),window.postMessage("process-tick","*")}):function(w){setTimeout(w,0)}),d.title="browser",d.browser=!0,d.env={},d.argv=[],d.on=P,d.addListener=P,d.once=P,d.off=P,d.removeListener=P,d.removeAllListeners=P,d.emit=P,d.binding=function(w){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(w){throw new Error("process.chdir is not supported")}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:11}]},{},[1])(1)})})(Yn)),Yn.exports}e4();var Zn,Qa;function Ki(){return Qa||(Qa=1,Zn=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]),Zn}var Xn,Ja;function t4(){return Ja||(Ja=1,Xn=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]),Xn}var Qn,el;function Yi(){return el||(el=1,Qn=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]),Qn}var Jn,tl;function s4(){if(tl)return Jn;tl=1;var s=Ki();return Jn=s.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"]),Jn}var eo,sl;function n4(){if(sl)return eo;sl=1;var s=Yi();return s=s.slice().filter(function(n){return!/^(gl\_|texture)/.test(n)}),eo=s.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"]),eo}var to,nl;function o4(){if(nl)return to;nl=1,to=S;var s=Ki(),n=t4(),r=Yi(),o=s4(),i=n4(),d=999,g=9999,f=0,m=1,b=2,x=3,_=4,C=5,k=6,p=7,T=8,M=9,P=10,w=11,$=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function S(A){var y=0,h=0,u=d,v,D,z=[],G=[],B=1,O=0,R=0,X=!1,oe=!1,we="",re;A=A||{};var E=r,L=s;A.version==="300 es"&&(E=i,L=o);for(var F={},be={},y=0;y<E.length;y++)F[E[y]]=!0;for(var y=0;y<L.length;y++)be[L[y]]=!0;return function(Ce){return G=[],Ce!==null?de(Ce):te()};function ie(Ce){Ce.length&&G.push({type:$[u],data:Ce,position:R,line:B,column:O})}function de(Ce){y=0,Ce.toString&&(Ce=Ce.toString()),we+=Ce.replace(/\r\n/g,`
`),re=we.length;for(var Ee;v=we[y],y<re;){switch(Ee=y,u){case f:y=Y();break;case m:y=H();break;case b:y=N();break;case x:y=me();break;case _:y=q();break;case w:y=Z();break;case C:y=ee();break;case g:y=ne();break;case M:y=ue();break;case d:y=K();break}Ee!==y&&(we[Ee]===`
`?(O=0,++B):++O)}return h+=y,we=we.slice(y),G}function te(Ce){return z.length&&ie(z.join("")),u=P,ie("(eof)"),G}function K(){return z=z.length?[]:z,D==="/"&&v==="*"?(R=h+y-1,u=f,D=v,y+1):D==="/"&&v==="/"?(R=h+y-1,u=m,D=v,y+1):v==="#"?(u=b,R=h+y,y):/\s/.test(v)?(u=M,R=h+y,y):(X=/\d/.test(v),oe=/[^\w_]/.test(v),R=h+y,u=X?_:oe?x:g,y)}function ue(){return/[^\s]/g.test(v)?(ie(z.join("")),u=d,y):(z.push(v),D=v,y+1)}function N(){return(v==="\r"||v===`
`)&&D!=="\\"?(ie(z.join("")),u=d,y):(z.push(v),D=v,y+1)}function H(){return N()}function Y(){return v==="/"&&D==="*"?(z.push(v),ie(z.join("")),u=d,y+1):(z.push(v),D=v,y+1)}function me(){if(D==="."&&/\d/.test(v))return u=C,y;if(D==="/"&&v==="*")return u=f,y;if(D==="/"&&v==="/")return u=m,y;if(v==="."&&z.length){for(;J(z););return u=C,y}if(v===";"||v===")"||v==="("){if(z.length)for(;J(z););return ie(v),u=d,y+1}var Ce=z.length===2&&v!=="=";if(/[\w_\d\s]/.test(v)||Ce){for(;J(z););return u=d,y}return z.push(v),D=v,y+1}function J(Ce){var Ee=0,he,ge;do{if(he=n.indexOf(Ce.slice(0,Ce.length+Ee).join("")),ge=n[he],he===-1){if(Ee--+Ce.length>0)continue;ge=Ce.slice(0,1).join("")}return ie(ge),R+=ge.length,z=z.slice(ge.length),z.length}while(!0)}function Z(){return/[^a-fA-F0-9]/.test(v)?(ie(z.join("")),u=d,y):(z.push(v),D=v,y+1)}function q(){return v==="."||/[eE]/.test(v)?(z.push(v),u=C,D=v,y+1):v==="x"&&z.length===1&&z[0]==="0"?(u=w,z.push(v),D=v,y+1):/[^\d]/.test(v)?(ie(z.join("")),u=d,y):(z.push(v),D=v,y+1)}function ee(){return v==="f"&&(z.push(v),D=v,y+=1),/[eE]/.test(v)||(v==="-"||v==="+")&&/[eE]/.test(D)?(z.push(v),D=v,y+1):/[^\d]/.test(v)?(ie(z.join("")),u=d,y):(z.push(v),D=v,y+1)}function ne(){if(/[^\d\w_]/.test(v)){var Ce=z.join("");return be[Ce]?u=T:F[Ce]?u=p:u=k,ie(z.join("")),u=d,y}return z.push(v),D=v,y+1}}return to}var so,ol;function r4(){if(ol)return so;ol=1;var s=o4();so=n;function n(r,o){var i=s(o),d=[];return d=d.concat(i(r)),d=d.concat(i(null)),d}return so}r4();function a4(s,n){if(typeof s!="object"||s===null)return s;var r=s[Symbol.toPrimitive];if(r!==void 0){var o=r.call(s,n);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(s)}function l4(s){var n=a4(s,"string");return typeof n=="symbol"?n:String(n)}function qe(s,n,r){return n=l4(n),n in s?Object.defineProperty(s,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[n]=r,s}var Oe={position:"csm_Position",positionRaw:"csm_PositionRaw",pointSize:"csm_PointSize",fragColor:"csm_FragColor",diffuseColor:"csm_DiffuseColor",normal:"csm_Normal",roughness:"csm_Roughness",metalness:"csm_Metalness",emissive:"csm_Emissive",ao:"csm_AO",bump:"csm_Bump",depthAlpha:"csm_DepthAlpha"},vt,ls;vt={},qe(vt,"".concat(Oe.normal),{"#include <beginnormal_vertex>":`
    vec3 objectNormal = `.concat(Oe.normal,`;
    #ifdef USE_TANGENT
	    vec3 objectTangent = vec3( tangent.xyz );
    #endif
    `)}),qe(vt,"".concat(Oe.position),{"#include <begin_vertex>":`
    vec3 transformed = `.concat(Oe.position,`;
  `)}),qe(vt,"".concat(Oe.positionRaw),{"#include <begin_vertex>":`
    vec4 csm_internal_positionUnprojected = `.concat(Oe.positionRaw,`;
    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;
    #ifdef USE_INSTANCING
      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;
    #endif
    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;
    vec3 transformed = csm_internal_positionUnprojected.xyz;
  `)}),qe(vt,"".concat(Oe.pointSize),{"gl_PointSize = size;":`
    gl_PointSize = `.concat(Oe.pointSize,`;
    `)}),qe(vt,"".concat(Oe.diffuseColor),{"#include <color_fragment>":`
    #include <color_fragment>
    diffuseColor = `.concat(Oe.diffuseColor,`;
  `)}),qe(vt,"".concat(Oe.fragColor),{"#include <dithering_fragment>":`
    #include <dithering_fragment>
    gl_FragColor  = `.concat(Oe.fragColor,`;
  `)}),qe(vt,"".concat(Oe.emissive),{"vec3 totalEmissiveRadiance = emissive;":`
    vec3 totalEmissiveRadiance = `.concat(Oe.emissive,`;
    `)}),qe(vt,"".concat(Oe.roughness),{"#include <roughnessmap_fragment>":`
    #include <roughnessmap_fragment>
    roughnessFactor = `.concat(Oe.roughness,`;
    `)}),qe(vt,"".concat(Oe.metalness),{"#include <metalnessmap_fragment>":`
    #include <metalnessmap_fragment>
    metalnessFactor = `.concat(Oe.metalness,`;
    `)}),qe(vt,"".concat(Oe.ao),{"#include <aomap_fragment>":`
    #include <aomap_fragment>
    reflectedLight.indirectDiffuse *= 1. - `.concat(Oe.ao,`;
    `)}),qe(vt,"".concat(Oe.bump),{"#include <normal_fragment_maps>":`
    #include <normal_fragment_maps>

    vec3 csm_internal_orthogonal = `.concat(Oe.bump," - (dot(").concat(Oe.bump,`, normal) * normal);
    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;
    normal = normalize(normal - csm_internal_projectedbump);
    `)}),qe(vt,"".concat(Oe.depthAlpha),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":`
      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * `.concat(Oe.depthAlpha,` );
    `),"gl_FragColor = packDepthToRGBA( fragCoordZ );":`
      gl_FragColor = packDepthToRGBA( fragCoordZ );
      gl_FragColor.a *= `.concat(Oe.depthAlpha,`;
    `)});ls={},qe(ls,"".concat(Oe.position),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":`
    gl_Position = projectionMatrix * modelViewMatrix * vec4( `.concat(Oe.position,`, 1.0 );
  `)}),qe(ls,"".concat(Oe.positionRaw),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":`
    gl_Position = `.concat(Oe.position,`;
  `)}),qe(ls,"".concat(Oe.diffuseColor),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":`
    gl_FragColor = `.concat(Oe.diffuseColor,`;
  `)}),qe(ls,"".concat(Oe.fragColor),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":`
    gl_FragColor = `.concat(Oe.fragColor,`;
  `)});var xt;xt={},qe(xt,"".concat(Oe.position),"*"),qe(xt,"".concat(Oe.positionRaw),"*"),qe(xt,"".concat(Oe.normal),"*"),qe(xt,"".concat(Oe.pointSize),["PointsMaterial"]),qe(xt,"".concat(Oe.diffuseColor),"*"),qe(xt,"".concat(Oe.fragColor),"*"),qe(xt,"".concat(Oe.emissive),["MeshStandardMaterial","MeshPhysicalMaterial"]),qe(xt,"".concat(Oe.roughness),["MeshStandardMaterial","MeshPhysicalMaterial"]),qe(xt,"".concat(Oe.metalness),["MeshStandardMaterial","MeshPhysicalMaterial"]),qe(xt,"".concat(Oe.ao),["MeshStandardMaterial","MeshPhysicalMaterial","MeshBasicMaterial","MeshLambertMaterial","MeshPhongMaterial","MeshToonMaterial"]),qe(xt,"".concat(Oe.bump),["MeshLambertMaterial","MeshMatcapMaterial","MeshNormalMaterial","MeshPhongMaterial","MeshPhysicalMaterial","MeshStandardMaterial","MeshToonMaterial","ShadowMaterial"]),qe(xt,"".concat(Oe.depthAlpha),"*");var pn={exports:{}},i4=pn.exports,rl;function d4(){return rl||(rl=1,(function(s,n){(function(r,o){s.exports=o()})(i4,function(){var r=function(){function o(k){return g.appendChild(k.dom),k}function i(k){for(var p=0;p<g.children.length;p++)g.children[p].style.display=p===k?"block":"none";d=k}var d=0,g=document.createElement("div");g.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",g.addEventListener("click",function(k){k.preventDefault(),i(++d%g.children.length)},!1);var f=(performance||Date).now(),m=f,b=0,x=o(new r.Panel("FPS","#0ff","#002")),_=o(new r.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var C=o(new r.Panel("MB","#f08","#201"));return i(0),{REVISION:16,dom:g,addPanel:o,showPanel:i,begin:function(){f=(performance||Date).now()},end:function(){b++;var k=(performance||Date).now();if(_.update(k-f,200),k>m+1e3&&(x.update(1e3*b/(k-m),100),m=k,b=0,C)){var p=performance.memory;C.update(p.usedJSHeapSize/1048576,p.jsHeapSizeLimit/1048576)}return k},update:function(){f=this.end()},domElement:g,setMode:i}};return r.Panel=function(o,i,d){var g=1/0,f=0,m=Math.round,b=m(window.devicePixelRatio||1),x=80*b,_=48*b,C=3*b,k=2*b,p=3*b,T=15*b,M=74*b,P=30*b,w=document.createElement("canvas");w.width=x,w.height=_,w.style.cssText="width:80px;height:48px";var $=w.getContext("2d");return $.font="bold "+9*b+"px Helvetica,Arial,sans-serif",$.textBaseline="top",$.fillStyle=d,$.fillRect(0,0,x,_),$.fillStyle=i,$.fillText(o,C,k),$.fillRect(p,T,M,P),$.fillStyle=d,$.globalAlpha=.9,$.fillRect(p,T,M,P),{dom:w,update:function(S,A){g=Math.min(g,S),f=Math.max(f,S),$.fillStyle=d,$.globalAlpha=1,$.fillRect(0,0,x,T),$.fillStyle=i,$.fillText(m(S)+" "+o+" ("+m(g)+"-"+m(f)+")",C,k),$.drawImage(w,p+b,T,M-b,P,p,T,M-b,P),$.fillRect(p+M-b,T,b,P),$.fillStyle=d,$.globalAlpha=.9,$.fillRect(p+M-b,T,b,m((1-S/A)*P))}}},r})})(pn)),pn.exports}d4();function Zi(s,n,r,o){const i=class extends jo{key="";constructor(d={}){const g=Object.entries(s);super({uniforms:g.reduce((f,[m,b])=>{const x=kl.clone({[m]:{value:b}});return{...f,...x}},{}),vertexShader:n,fragmentShader:r}),g.forEach(([f])=>Object.defineProperty(this,f,{get:()=>this.uniforms[f].value,set:m=>this.uniforms[f].value=m})),Object.assign(this,d)}};return i.key=Cn.generateUUID(),i}(function(){const s=new Ad,n=new Dd(new Float32Array([-1,-1,0,0,0,1,-1,0,1,0,1,1,0,1,1,-1,1,0,0,1]),5);return s.setIndex([0,1,2,0,2,3]),s.setAttribute("position",new yr(n,3,0,!1)),s.setAttribute("uv",new yr(n,2,3,!1)),s})();Cn.clamp;Cn.lerp;new qt("black"),new tt(1,1);const c4=["args","material-uniforms-color-value"];Ka.ReflectorShader;new Le;new Le;new Le;const u4=["target","auto-rotate","auto-rotate-speed","enable-damping","damping-factor","enable-pan","key-pan-speed","keys","max-azimuth-angle","min-azimuth-angle","max-polar-angle","min-polar-angle","min-distance","max-distance","min-zoom","max-zoom","touches","enable-zoom","zoom-speed","enable-rotate","rotate-speed","mouse-buttons","args"];var p4=Pe({__name:"OrbitControls",props:{makeDefault:{type:Boolean,required:!1,default:!1},camera:{type:Object,required:!1},domElement:{type:null,required:!1},target:{type:null,required:!1,default:()=>[0,0,0]},enableDamping:{type:Boolean,required:!1,default:!0},dampingFactor:{type:Number,required:!1,default:.05},autoRotate:{type:Boolean,required:!1,default:!1},autoRotateSpeed:{type:Number,required:!1,default:2},enablePan:{type:Boolean,required:!1,default:!0},keyPanSpeed:{type:Number,required:!1,default:7},keys:{type:Object,required:!1},maxAzimuthAngle:{type:Number,required:!1,default:Number.POSITIVE_INFINITY},minAzimuthAngle:{type:Number,required:!1,default:Number.NEGATIVE_INFINITY},maxPolarAngle:{type:Number,required:!1,default:Math.PI},minPolarAngle:{type:Number,required:!1,default:0},minDistance:{type:Number,required:!1,default:0},maxDistance:{type:Number,required:!1,default:Number.POSITIVE_INFINITY},minZoom:{type:Number,required:!1,default:0},maxZoom:{type:Number,required:!1,default:Number.POSITIVE_INFINITY},touches:{type:Object,required:!1,default:()=>({ONE:Bt.ROTATE,TWO:Bt.DOLLY_PAN})},enableZoom:{type:Boolean,required:!1,default:!0},zoomSpeed:{type:Number,required:!1,default:1},enableRotate:{type:Boolean,required:!1,default:!0},rotateSpeed:{type:Number,required:!1,default:1},mouseButtons:{type:Object,required:!1,default:()=>({LEFT:Rt.ROTATE,MIDDLE:Rt.DOLLY,RIGHT:Rt.PAN})}},emits:["change","start","end"],setup(s,{expose:n,emit:r}){const o=s,i=r,{makeDefault:d,autoRotate:g,autoRotateSpeed:f,enableDamping:m,dampingFactor:b,enablePan:x,keyPanSpeed:_,maxAzimuthAngle:C,minAzimuthAngle:k,maxPolarAngle:p,minPolarAngle:T,minDistance:M,maxDistance:P,minZoom:w,maxZoom:$,enableZoom:S,zoomSpeed:A,enableRotate:y,touches:h,rotateSpeed:u,target:v,mouseButtons:D}=Oo(o),{camera:z,renderer:G,extend:B,controls:O,invalidate:R}=pr(),X=Re(null);B({OrbitControls:Jw}),He(X,re=>{oe(),re&&d.value?O.value=re:O.value=null});function oe(){qn(X.value,"change",()=>{i("change",X.value),R()}),qn(X.value,"start",()=>i("start",X.value)),qn(X.value,"end",()=>i("end",X.value))}const{onBeforeRender:we}=Hi();return we(()=>{X.value&&(m.value||g.value)&&(X.value.update(),g.value)}),Ft(()=>{X.value&&X.value.dispose()}),n({instance:X}),(re,E)=>(s.camera||t(z))&&(s.domElement||t(G).domElement)?(a(),l("TresOrbitControls",{ref_key:"controlsRef",ref:X,key:(s.camera||t(z))?.uuid,target:t(v),"auto-rotate":t(g),"auto-rotate-speed":t(f),"enable-damping":t(m),"damping-factor":t(b),"enable-pan":t(x),"key-pan-speed":t(_),keys:s.keys,"max-azimuth-angle":t(C),"min-azimuth-angle":t(k),"max-polar-angle":t(p),"min-polar-angle":t(T),"min-distance":t(M),"max-distance":t(P),"min-zoom":t(w),"max-zoom":t($),touches:t(h),"enable-zoom":t(S),"zoom-speed":t(A),"enable-rotate":t(y),"rotate-speed":t(u),"mouse-buttons":t(D),args:[s.camera||t(z),s.domElement||t(G).domElement]},null,8,u4)):j("v-if",!0)}}),g4=p4,f4=`void main() {
  gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
}`,al=`#include <common>

uniform float uWidth;
uniform float uHeight;

void main() {

  vec4 mvPosition = modelViewMatrix * vec4(0.0, 0.0, 0.0, 1.0);

  vec2 quad = position.xy;

  vec2 alignedPosition = quad * vec2(uWidth, uHeight);

  mvPosition.xy += alignedPosition;

  gl_Position = projectionMatrix * mvPosition;
}`,m4=`#include <common>

void main() {
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}`;const Ss=new Le(0,0,0),Ln=new Le(0,0,0),h4=new Le(0,0,0);function b4(s,n,r){const o=Ss.setFromMatrixPosition(s.matrixWorld);o.project(n);const i=r.width/2,d=r.height/2;return[(Number.isNaN(o.x)?0:o.x)*i+i,-(o.y*d)+d,o.z]}function v4(s,n){const r=Ss.setFromMatrixPosition(s.matrixWorld),o=Ln.setFromMatrixPosition(n.matrixWorld),i=r.sub(o),d=n.getWorldDirection(h4);return i.angleTo(d)>Math.PI/2}function x4(s,n,r,o){const i=Ss.setFromMatrixPosition(s.matrixWorld),d=i.clone();d.project(n),r.setFromCamera(new tt(d.x,d.y),n);const g=r.intersectObjects(o,!0);if(g.length>0){const f=g[0].distance;return i.distanceTo(r.ray.origin)<f}return!0}function y4(s,n=new Le(0,0,0),r){const{width:o,height:i}=r,d=o/i,g=Ss,f=Ln;f.copy(n);const m=s.getWorldPosition(g).distanceTo(f);if(s instanceof Ht)return 1;const b=s.fov*Math.PI/180;return o/(2*Math.tan(b/2)*m*d)}function _4(s,n){if(n instanceof Ht)return n.zoom;if(n instanceof ts){const r=Ss.setFromMatrixPosition(s.matrixWorld),o=Ln.setFromMatrixPosition(n.matrixWorld),i=n.fov*Math.PI/180,d=r.distanceTo(o);return 1/(2*Math.tan(i/2)*d)}else return 1}function w4(s,n,r){if(n instanceof ts||n instanceof Ht){const o=Ss.setFromMatrixPosition(s.matrixWorld),i=Ln.setFromMatrixPosition(n.matrixWorld),d=o.distanceTo(i),g=(r[1]-r[0])/(n.far-n.near),f=r[1]-g*n.far;return Math.round(g*d+f)}}const To=s=>Math.abs(s)<1e-10?0:s;function Xi(s,n,r=""){let o="matrix3d(";for(let i=0;i!==16;i++)o+=To(n[i]*s.elements[i])+(i!==15?",":")");return r+o}const k4=(s=>n=>Xi(n,s))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),$4=(s,n)=>Xi(s,[1/n,1/n,1/n,1,-1/n,-1/n,-1/n,-1,1/n,1/n,1/n,1,1,1,1,1],"translate(-50%,-50%)"),C4=["material","cast-shadow","receive-shadow","geometry"];var S4=Pe({__name:"HTML",props:{geometry:{type:null,required:!1},material:{type:null,required:!1},as:{type:String,required:!1,default:"div"},transform:{type:Boolean,required:!1,default:!1},prepend:{type:Boolean,required:!1,default:!1},portal:{type:null,required:!1},wrapperClass:{type:String,required:!1},eps:{type:Number,required:!1,default:1e-4},distanceFactor:{type:Number,required:!1},fullscreen:{type:Boolean,required:!1},center:{type:Boolean,required:!1},pointerEvents:{type:String,required:!1,default:"auto"},sprite:{type:Boolean,required:!1,default:!1},transparentMaterial:{type:Boolean,required:!1,default:!1},zIndexRange:{type:Array,required:!1,default:()=>[16777271,0]},calculatePosition:{type:null,required:!1,default:()=>b4},occlude:{type:[Object,null,Array,Boolean,String],required:!1},castShadow:{type:Boolean,required:!1,default:!1},receiveShadow:{type:Boolean,required:!1,default:!1}},emits:["onOcclude"],setup(s,{expose:n,emit:r}){const o=s,i=r,d=hl(),{geometry:g,material:f,as:m,transform:b,portal:x,wrapperClass:_,eps:C,distanceFactor:k,fullscreen:p,center:T,pointerEvents:M,sprite:P,prepend:w,occlude:$,zIndexRange:S,castShadow:A,receiveShadow:y,transparentMaterial:h,calculatePosition:u}=Oo(o),v=bl(),D=Re(null),z=Re(null),G=new Td,{renderer:B,scene:O,camera:R,sizes:X}=ur(),oe=U(()=>document.createElement(m.value)),we=new yl,re=new Le,E=new Wt,L=new zs,F=W([0,0,0]),be=W(0),ie=W(null),de=W(!0),te=W(!1),K=U(()=>({position:"absolute",top:"0",left:"0",willChange:"transform",pointerEvents:M.value,...typeof v.style=="object"?v.style:{}})),ue=U(()=>{const J=X.width.value,Z=X.height.value;return b.value?{...K.value,transformStyle:"preserve-3d",pointerEvents:"none",width:`${J}px`,height:`${Z}px`}:{...K.value,transform:T.value?"translate3d(-50%,-50%,0)":"none",...p.value&&{top:`-${Z/2}px`,left:`-${J/2}px`,width:`${J}px`,height:`${Z}px`},pointerEvents:p.value?"none":M.value}}),N=U(()=>({position:"absolute",pointerEvents:M.value})),H=U(()=>{const J=$.value;return J&&J!=="blending"&&(Array.isArray(J)?J.length&&typeof J[0]!="boolean":!0)}),Y=U(()=>f.value?f.value:new jo({vertexShader:P.value?al:b.value?m4:al,fragmentShader:f4,side:Vt,transparent:h.value,uniforms:{uWidth:{value:1},uHeight:{value:1}}}));Ct(()=>{Y.value.transparent=h.value}),He([$,()=>B.instance],([J,Z])=>{if(!Z||J!=="blending")return;const q=Z.domElement;q.style.zIndex=`${Math.floor(S.value[0]/2)}`,q.style.position="absolute"},{immediate:!0}),He(()=>[D.value,B.instance,X.width.value,X.height.value,d.default?.(),R.activeCamera.value],([J,Z])=>{if(!J||!Z||!R.activeCamera.value)return;te.value=!1,O.value?.updateMatrixWorld();const q=oe.value.style;q.position="absolute",q.top="0",q.left="0",b.value?(q.pointerEvents="none",q.overflow="hidden",q.transformStyle="preserve-3d"):(q.transformOrigin="0 0",q.willChange="transform",$.value||(q.zIndex=`${S.value[0]}`));const ee=x.value||Z.domElement?.parentNode;ee&&!oe.value.parentNode&&(w.value?ee.prepend(oe.value):ee.appendChild(oe.value)),ie.value=b.value?I("div",{style:ue.value},[I("div",{style:N.value},[I("div",{key:D.value?.uuid,class:v.class,style:v.style},d.default?.())])]):I("div",{key:D.value?.uuid,style:ue.value,class:v.class},d.default?.()),rd(ie.value,oe.value)}),Ct(()=>{_.value&&(oe.value.className=_.value)});const{onBeforeRender:me}=Hi();return me(({invalidate:J})=>{const Z=D.value,q=R.activeCamera.value,ee=B.instance;if(!Z||!q||!ee)return;q.updateMatrixWorld(),Z.updateWorldMatrix(!0,!1);const ne=X.width.value,Ce=X.height.value,Ee=ne*.5,he=Ce*.5,ge=b.value?F.value:u.value(Z,q,{width:ne,height:Ce}),ve=Math.abs(be.value-q.zoom)>C.value||Math.abs(F.value[0]-ge[0])>C.value||Math.abs(F.value[1]-ge[1])>C.value||Math.abs(F.value[2]-ge[2])>C.value;let Ie=b.value||ve,Ze=!0;const ht=v4(Z,q);if(H.value){let Xe=!1;Array.isArray($.value)?Xe=$.value:$.value!=="blending"&&(Xe=[O.value]),Xe&&(Ze=x4(Z,q,we,Xe)&&!ht)}else Ze=!ht;Ze!==de.value&&(de.value=Ze,oe.value.style.display=Ze?"block":"none",i("onOcclude",!Ze),Ie=!0);const Zt=Math.floor(S.value[0]/2),as=$.value?H.value?[S.value[0],Zt]:[Zt-1,0]:S.value;if(oe.value.style.zIndex=`${w4(Z,q,as)}`,b.value){const Xe=q.projectionMatrix.elements[5]*he,kt=k4(q.matrixWorldInverse),gt=q instanceof Ht,ae=gt?`scale(${Xe})translate(${To(-(q.right+q.left)/2)}px,${To((q.top+q.bottom)/2)}px)`:`translateZ(${Xe}px)`;let fe=Z.matrixWorld;if(P.value){E.copy(Z.matrixWorld);const De=q.matrixWorldInverse.clone().transpose();L.setFromRotationMatrix(De),E.makeRotationFromQuaternion(L),Z.getWorldPosition(re),E.setPosition(re),E.scale(Z.scale),E.elements[3]=E.elements[7]=E.elements[11]=0,E.elements[15]=1,fe=E}const _e=oe.value.style;if(_e.width=`${ne}px`,_e.height=`${Ce}px`,_e.perspective=gt?"":`${Xe}px`,ie.value?.el){ie.value.el.style.transform=`${ae}${kt}translate(${Ee}px,${he}px)`;let De;Array.isArray(ie.value.children)&&(De=ie.value.children[0]),De?.el&&(De.el.style.transform=$4(fe,1/((k.value||10)/400)))}}else{const Xe=k.value===void 0?1:_4(Z,q)*k.value;oe.value.style.transform=`translate3d(${ge[0]}px,${ge[1]}px,0) scale(${Xe})`}if(F.value=[ge[0],ge[1],ge[2]],be.value=q.zoom,!H.value&&z.value&&!te.value){const Xe=z.value;if(b.value){const kt=ie.value?.children;if(Array.isArray(kt)){const gt=kt[0]?.el;if(gt){const ae=q instanceof Ht;if(ae&&g.value&&v.scale)Array.isArray(v.scale)?v.scale instanceof Le?Xe.scale.copy(v.scale):Xe.scale.set(1/v.scale[0],1/v.scale[1],1/v.scale[2]):Xe.scale.setScalar(1/v.scale);else if(!ae&&!g.value){const fe=(k.value||10)/400;if(P.value)Y.value.uniforms.uWidth.value=gt.clientWidth*fe,Y.value.uniforms.uHeight.value=gt.clientHeight*fe,Xe.lookAt(q.position),Xe.scale.set(1,1,1);else{const _e=gt.clientWidth*fe,De=gt.clientHeight*fe;Xe.scale.set(_e,De,1)}}te.value=!0}}}else{const kt=oe.value.children[0];if(kt?.clientWidth&&kt?.clientHeight){Z.getWorldPosition(re);const gt=1/y4(q,re,{width:ne,height:Ce});Y.value.uniforms.uWidth.value=kt.clientWidth*gt,Y.value.uniforms.uHeight.value=kt.clientHeight*gt,Xe.scale.set(1,1,1),Xe.lookAt(q.position),te.value=!0}}}Ie&&J()}),Ft(()=>{G?.dispose(),Y.value?.dispose(),oe.value?.parentNode&&oe.value.parentNode.removeChild(oe.value)}),n({instance:D,isVisible:de,occlusionMesh:z}),(J,Z)=>(a(),l("TresGroup",{ref_key:"groupRef",ref:D},[t($)&&!H.value?(a(),l("TresMesh",{key:0,ref_key:"occlusionMeshRef",ref:z,material:Y.value,"cast-shadow":t(A),"receive-shadow":t(y),geometry:t(g)||t(G)},null,8,C4)):j("v-if",!0)],512))}}),fs=S4;new qt;const P4={key:0,args:[0,1,64]},E4={key:1,args:[.5,1,64]},T4={key:2},A4=["tone-mapped","map","side","color"];new qt(16777215);const D4=["position"],M4=["object","scale"],O4=["object","position-y","scale"],L4=["position"],j4={class:"plant-label-3d"},I4={class:"plant-code-3d"},R4={class:"soil-mini-3d"},is=.28,F4=Pe({__name:"LabPlant3D",props:{position:{},stageNum:{},colorHex:{},colorCss:{},isKeeper:{type:Boolean},code:{},stage:{},showLabels:{type:Boolean},soilSensor:{},soilProbePosition:{},plantModels:{}},setup(s){const n=s,r=Re(null),o=Re(null);function i(x,_){return _<=4?x.veg:_<=6?x.flower:_<=9?x.bloom:x.veg}He(()=>[n.plantModels,n.stageNum],([x,_])=>{if(x){const C=i(x,_);r.value=C?C.clone():null,o.value=x.pot?x.pot.clone():null}},{immediate:!0});const d=U(()=>is/.367),g=U(()=>{const x=n.stageNum;return x<=4?[.15,.22,.35,.5,.7][x]/1.16:x<=6?({5:.55,6:.65}[x]||.6)/1.88:x<=9?({7:.7,8:.85,9:.8}[x]||.75)/1:.45/1.16}),f=U(()=>{const x=n.stageNum,_=g.value;return x<=6?is:is+.5*_}),m=U(()=>{const x=n.stageNum,_=g.value;return x<=4?is+1.16*_:x<=6?is+1.88*_:is+.5*_}),b=U(()=>n.soilProbePosition==="side"?[.07,.02,0]:[.04,.05,.04]);return(x,_)=>(a(),l("TresGroup",{position:s.position},[t(o)?(a(),l("primitive",{key:0,object:t(o),"position-y":0,scale:t(d)},null,8,M4)):j("",!0),t(r)?(a(),l("primitive",{key:1,object:t(r),"position-y":t(f),scale:t(g)},null,8,O4)):j("",!0),s.soilSensor?(a(),l("TresGroup",{key:2,position:t(b)},[..._[0]||(_[0]=[e("TresMesh",{"position-y":.035},[e("TresCylinderGeometry",{args:[.003,.003,.07,4]}),e("TresMeshBasicMaterial",{color:6715238})],-1),e("TresMesh",{"position-y":.07},[e("TresBoxGeometry",{args:[.015,.02,.012]}),e("TresMeshStandardMaterial",{color:3377220,emissive:2254387,"emissive-intensity":.3,roughness:.5,metalness:0})],-1),e("TresMesh",{position:[.009,.075,0]},[e("TresSphereGeometry",{args:[.003,6,4]}),e("TresMeshBasicMaterial",{color:6750088})],-1)])],8,L4)):j("",!0),s.isKeeper?(a(),pe(t(fs),{key:3,position:[0,t(m)+.04,0],center:""},{default:je(()=>[..._[1]||(_[1]=[e("div",{class:"keeper-star-3d"},"★",-1)])]),_:1},8,["position"])):j("",!0),s.showLabels?(a(),pe(t(fs),{key:4,position:[0,-.02,.09],center:""},{default:je(()=>[e("div",j4,[e("span",I4,c(s.code),1),e("span",{class:"plant-stage-3d",style:Te({color:s.colorCss})},c(s.stage),5)])]),_:1})):j("",!0),s.soilSensor&&s.showLabels?(a(),pe(t(fs),{key:5,position:[t(b)[0]+.06,t(b)[1]+.06,t(b)[2]]},{default:je(()=>[e("div",R4,[e("span",null,c(s.soilSensor.temp_soil!=null?s.soilSensor.temp_soil.toFixed(1)+"°":""),1),e("span",null,c(s.soilSensor.humi_soil!=null?Math.round(s.soilSensor.humi_soil)+"%":""),1),e("span",null,c(s.soilSensor.ec_soil!=null?"EC"+s.soilSensor.ec_soil.toFixed(1):""),1)])]),_:1},8,["position"])):j("",!0)],8,D4))}}),N4=Object.assign(Pt(F4,[["__scopeId","data-v-2e646070"]]),{__name:"LabPlant3D"}),B4={__name:"TresCanvas",setup(s){const n=bl();return(r,o)=>(a(),pe(t(Lw),ad(ld(t(n))),{default:je(()=>[Mo(r.$slots,"default")]),_:3},16))}},V4=Od(B4),U4={class:"relative w-full h-full",style:{isolation:"isolate","z-index":"0"}},z4=["position"],H4=["position"],G4=["rotation-x"],W4={key:0,args:[10,20,2764864,1712176]},q4={"position-y":.01},K4=["args"],Y4=["position"],Z4=["args"],X4=["side"],Q4=["position"],J4=["args"],e3=["side"],t3=["position"],s3=["args"],n3=["side"],o3=["position"],r3=["args"],a3=["side"],l3=["position-y"],i3=["args"],d3=["position"],c3=["args"],u3=["position"],p3=["args"],g3=["position"],f3=["object","scale","position-y"],m3=["intensity","angle","distance"],h3=["position"],b3=["args"],v3=["side"],x3={class:"light-name-3d"},y3={class:"light-info-3d"},_3=["position"],w3=["position"],k3=["position"],$3=["color"],C3={class:"socket-panel-3d"},S3=["position"],P3=["rotation-z"],E3=["color"],T3=["rotation-z"],A3=["rotation-z"],D3=["color"],M3=["rotation"],O3=["rotation-z"],L3=["rotation-z"],j3={class:"device-panel-status-3d"},I3={key:0,class:"device-watts-3d"},R3=["position"],F3=["rotation-z"],N3=["rotation"],B3=62,no=.01,V3=.52,U3=1.09,z3=Pe({__name:"LabRoom3DScene",props:{room:{},devices:{},plants:{},sensorData:{},outletStates:{},showGrid:{type:Boolean},showLabels:{type:Boolean}},setup(s){const n=s,{getSocketDisplayName:r}=Io(),o=Ro(),i=Sn(),d=Ld(),g=Sl(),f=U(()=>d.on?Math.round(B3*d.level/100):0),m=U(()=>(n.room.outlet_ids||[]).some(F=>{const be=F.includes(":")?F.split(":").pop():F,ie=i.configs[be];return ie&&(ie.modeType===3||ie.modeType===4)})),b=U(()=>(n.room.outlet_ids||[]).some(F=>{const be=F.includes(":")?F.split(":").pop():F,ie=i.configs[be],de=n.outletStates[be];return ie&&(ie.modeType===3||ie.modeType===4)&&de?.isOn})),x=U(()=>{const L={},F=g.soilSensors,be=g.soilSensorsCurrent;for(const ie of F){const de=be[ie.id];ie.plantId&&de&&(L[ie.plantId]={temp_soil:de.temp_soil??null,humi_soil:de.humi_soil??null,ec_soil:de.ec_soil??null})}return L}),_={clearColor:"#0a0e18",toneMapping:$l,outputColorSpace:Md,alpha:!1,antialias:!0,dpr:[1,2],shadows:!1},C=U(()=>(n.room.dimensions_cm?.width??120)*no),k=U(()=>(n.room.dimensions_cm?.depth??120)*no),p=U(()=>(n.room.dimensions_cm?.height??200)*no),T=U(()=>{const F=Math.max(C.value,k.value,p.value)*1.7;return[F*.3,F*.55,F*.95]}),M=U(()=>{const L=C.value/2,F=k.value/2,be=p.value/2;return[{pos:[-L,be,-F]},{pos:[L,be,-F]},{pos:[-L,be,F]},{pos:[L,be,F]}]}),P=U(()=>{const L=C.value/2,F=k.value/2;return[{pos:[0,p.value,-F],size:[C.value,.015,.015]},{pos:[0,p.value,F],size:[C.value,.015,.015]},{pos:[-L,p.value,0],size:[.015,.015,k.value]},{pos:[L,p.value,0],size:[.015,.015,k.value]}]}),w=U(()=>Math.min(C.value*.7,.5)/V3),$=U(()=>U3*w.value),S=U(()=>Math.min(C.value*.7,.5)/2);function A(L){return L==="light2"||L.endsWith(":light2")?i.isLight2Disabled:!1}const y=U(()=>{const L=n.room.light_ids||[],F=n.devices.some(ie=>ie.deviceType==="LC");return L.length===0&&F?["light","light2"].filter(ie=>!A(ie)).map((ie,de)=>{const te=o.states[ie];return{id:ie,label:`Light ${de+1}`,isOn:te?.isOn??!1,level:te?.mLevel??0,mode:te?o.getModeName(te.modeType):""}}):L.filter(ie=>{const de=ie.includes(":")?ie.split(":").pop():ie;return!A(de)}).map((ie,de)=>{const te=ie.includes(":")?ie.split(":").pop():ie,K=o.states[te];return{id:ie,label:`Light ${de+1}`,isOn:K?.isOn??!1,level:K?.mLevel??0,mode:K?o.getModeName(K.modeType):""}})});function h(L){const F=y.value.length;if(F<=1)return 0;const be=C.value*.6;return-be/2+L*(be/(F-1))}const u=U(()=>(n.room.outlet_ids||[]).map(F=>{const be=F.includes(":")?F.split(":").pop():F,ie=n.outletStates[be];return{key:be,name:r(be,"short"),isOn:ie?.isOn??!1}})),v=U(()=>(n.room.sensor_ids?.length??0)>0||n.devices.length>0),D={"amber-400":16498468,"lime-400":10741301,"green-400":4906624,"green-500":2278750,"emerald-400":3462041,"purple-400":12616956,"purple-500":11032055,"pink-400":16020150,"pink-500":15485081,"yellow-400":16436245,"orange-400":16486972,"amber-500":16096779,"amber-600":14251782,"gray-400":10265519,"red-400":16281969},z={"amber-400":"#fbbf24","lime-400":"#a3e635","green-400":"#4ade80","green-500":"#22c55e","emerald-400":"#34d399","purple-400":"#c084fc","purple-500":"#a855f7","pink-400":"#f472b6","pink-500":"#ec4899","yellow-400":"#facc15","orange-400":"#fb923c","amber-500":"#f59e0b","amber-600":"#d97706","gray-400":"#9ca3af","red-400":"#f87171"},G={germinating:0,seedling:1,early_veg:2,mid_veg:3,late_veg:4,pre_flower:5,early_flower:6,mid_flower:7,late_flower:8,flush:9,harvest:10,drying:11,curing:12,archived:13,culled:14},B=U(()=>{const L=n.plants;if(L.length===0)return[];const F=n.room.layout_data?.plant_positions,be=Math.min(L.length,4),ie=Math.ceil(L.length/be),de=n.room.dimensions_cm?.width||120,te=n.room.dimensions_cm?.depth||120;return L.map((K,ue)=>{const N=Fe[K.status],H=G[K.status]??2;let Y,me;const J=F?.[K.id];if(J)Y=(J.x/de-.5)*C.value,me=(J.z/te-.5)*k.value;else{const ne=ue%be,Ce=Math.floor(ue/be),Ee=C.value*.18,he=k.value*.18,ge=C.value-Ee*2,ve=k.value-he*2;Y=be>1?-C.value/2+Ee+ne*(ge/(be-1)):0,me=ie>1?-k.value/2+he+Ce*(ve/(ie-1)):0}const Z=N?.color||"green-400",q=D[Z]??4906624,ee=z[Z]??"#4ade80";return{code:K.plant_code,stage:N?.shortLabel||K.status,stageNum:H,colorHex:q,colorCss:ee,isKeeper:!!K.is_keeper,position:[Y,0,me],soilReading:x.value[K.id]||null,soilProbePos:"top"}})}),O=Re({veg:null,flower:null,bloom:null,pot:null}),R=Re(null),X=U(()=>R.value?y.value.map(()=>R.value.clone()):[]),oe=W(0);let we=0,re=0;function E(L){const F=re?(L-re)/1e3:0;re=L,oe.value+=F*5,we=requestAnimationFrame(E)}return ot(()=>{we=requestAnimationFrame(E);const L=new dd,F={veg:"/data/appdata/models/plant_veg.glb",flower:"/data/appdata/models/plant_flower.glb",bloom:"/data/appdata/models/cannabis_plant.glb",pot:"/data/appdata/models/plant_pot.glb"},be={veg:null,flower:null,bloom:null,pot:null};for(const[ie,de]of Object.entries(F))L.load(de,te=>{be[ie]=te.scene,O.value={...be}},void 0,te=>{});L.load("/data/appdata/models/grow_led.glb",ie=>{R.value=ie.scene},void 0,ie=>{})}),Ft(()=>{cancelAnimationFrame(we)}),(L,F)=>{const be=N4,ie=V4;return a(),l("div",U4,[I(ie,ml(_,{class:"!absolute inset-0"}),{default:je(()=>[e("TresPerspectiveCamera",{position:t(T),fov:45,near:.1,far:50},null,8,z4),I(t(g4),{target:[.1,t(p)*.35,0],"enable-damping":!0,"damping-factor":.05,"min-distance":1,"max-distance":6,"max-polar-angle":Math.PI/2.1,"enable-pan":!1},null,8,["target","max-polar-angle"]),F[19]||(F[19]=e("TresAmbientLight",{color:16777215,intensity:1.2},null,-1)),F[20]||(F[20]=e("TresDirectionalLight",{position:[4,8,5],intensity:3,color:16777215},null,-1)),F[21]||(F[21]=e("TresDirectionalLight",{position:[-3,6,-2],intensity:1.5,color:13426175},null,-1)),F[22]||(F[22]=e("TresDirectionalLight",{position:[0,2,4],intensity:1,color:15658751},null,-1)),e("TresPointLight",{position:[0,t(p)*.5,0],intensity:2,color:16772829,distance:4,decay:1},null,8,H4),e("TresMesh",{"rotation-x":-Math.PI/2,"position-y":-.005},[...F[0]||(F[0]=[e("TresPlaneGeometry",{args:[10,10]},null,-1),e("TresMeshStandardMaterial",{color:1711656,roughness:.9,metalness:0},null,-1)])],8,G4),s.showGrid?(a(),l("TresGridHelper",W4)):j("",!0),e("TresGroup",null,[e("TresMesh",q4,[e("TresBoxGeometry",{args:[t(C),.02,t(k)]},null,8,K4),F[1]||(F[1]=e("TresMeshStandardMaterial",{color:3817557,roughness:.9,metalness:0},null,-1))]),e("TresMesh",{position:[0,t(p)/2,-t(k)/2]},[e("TresBoxGeometry",{args:[t(C),t(p),.008]},null,8,Z4),e("TresMeshStandardMaterial",{color:11581636,roughness:.35,metalness:.15,transparent:!0,opacity:.88,side:t(Vt)},null,8,X4)],8,Y4),e("TresMesh",{position:[-t(C)/2,t(p)/2,0]},[e("TresBoxGeometry",{args:[.008,t(p),t(k)]},null,8,J4),e("TresMeshStandardMaterial",{color:11055292,roughness:.35,metalness:.15,transparent:!0,opacity:.88,side:t(Vt)},null,8,e3)],8,Q4),e("TresMesh",{position:[t(C)/2,t(p)/2,0]},[e("TresBoxGeometry",{args:[.008,t(p),t(k)]},null,8,s3),e("TresMeshBasicMaterial",{color:6715272,transparent:!0,opacity:.12,side:t(Vt)},null,8,n3)],8,t3),e("TresMesh",{position:[0,t(p)/2,t(k)/2]},[e("TresBoxGeometry",{args:[t(C),t(p),.008]},null,8,r3),e("TresMeshBasicMaterial",{color:6715272,transparent:!0,opacity:.06,side:t(Vt)},null,8,a3)],8,o3),e("TresMesh",{"position-y":t(p)},[e("TresBoxGeometry",{args:[t(C),.008,t(k)]},null,8,i3),F[2]||(F[2]=e("TresMeshBasicMaterial",{color:4478310,transparent:!0,opacity:.35},null,-1))],8,l3),(a(!0),l(Q,null,le(t(M),(de,te)=>(a(),l("TresMesh",{key:"ve-"+te,position:de.pos},[e("TresBoxGeometry",{args:[.015,t(p),.015]},null,8,c3),F[3]||(F[3]=e("TresMeshStandardMaterial",{color:6715272,roughness:.6,metalness:.3},null,-1))],8,d3))),128)),(a(!0),l(Q,null,le(t(P),(de,te)=>(a(),l("TresMesh",{key:"te-"+te,position:de.pos},[e("TresBoxGeometry",{args:de.size},null,8,p3),F[4]||(F[4]=e("TresMeshStandardMaterial",{color:6715272,roughness:.6,metalness:.3},null,-1))],8,u3))),128))]),(a(!0),l(Q,null,le(t(y),(de,te)=>(a(),l("TresGroup",{key:"light-"+de.id},[e("TresGroup",{position:[h(te),t(p)-.2,0]},[t(X)[te]?(a(),l("primitive",{key:0,object:t(X)[te],scale:t(w),"position-y":-t($)},null,8,f3)):j("",!0),de.isOn?(a(),l("TresSpotLight",{key:1,position:[0,-.02,0],color:16771751,intensity:de.level/100*12,angle:Math.PI/3,penumbra:.6,distance:t(p)*2,decay:.8},null,8,m3)):j("",!0),de.isOn?(a(),l("TresMesh",{key:2,position:[0,-(t(p)*.4),0]},[e("TresConeGeometry",{args:[t(C)*.4,t(p)*.75,32,1,!0]},null,8,b3),e("TresMeshBasicMaterial",{color:16768358,transparent:!0,opacity:.06,side:t(Vt),"depth-write":!1},null,8,v3)],8,h3)):j("",!0),s.showLabels?(a(),pe(t(fs),{key:3,position:[t(S)+.06,0,0],center:""},{default:je(()=>[e("div",{class:V(["light-label-3d",de.isOn?"light-on":"light-off"])},[e("span",x3,c(de.label),1),e("span",y3,c(de.isOn?de.level+"% · "+de.mode:"OFF"),1)],2)]),_:2},1032,["position"])):j("",!0)],8,g3)]))),128)),(a(!0),l(Q,null,le(t(B),(de,te)=>(a(),pe(be,{key:"plant-"+te,position:de.position,"stage-num":de.stageNum,"color-hex":de.colorHex,"color-css":de.colorCss,"is-keeper":de.isKeeper,code:de.code,stage:de.stage,"show-labels":s.showLabels,"soil-sensor":de.soilReading,"soil-probe-position":de.soilProbePos,"plant-models":t(O)},null,8,["position","stage-num","color-hex","color-css","is-keeper","code","stage","show-labels","soil-sensor","soil-probe-position","plant-models"]))),128)),t(v)?(a(),l("TresGroup",{key:1,position:[-t(C)/2+.02,t(p)*.5,t(k)*.15]},[...F[5]||(F[5]=[e("TresMesh",null,[e("TresBoxGeometry",{args:[.025,.08,.05]}),e("TresMeshStandardMaterial",{color:3368618,emissive:2250171,"emissive-intensity":.4,roughness:.5,metalness:0})],-1),e("TresMesh",{position:[.014,.03,0]},[e("TresSphereGeometry",{args:[.006,8,6]}),e("TresMeshBasicMaterial",{color:2282478})],-1)])],8,_3)):j("",!0),t(u).length>0?(a(),l("TresGroup",{key:2,position:[t(C)/2-.05,t(p)*.6,-t(k)/2+.02]},[F[7]||(F[7]=e("TresMesh",null,[e("TresBoxGeometry",{args:[.04,.3,.035]}),e("TresMeshStandardMaterial",{color:5595248,roughness:.7,metalness:0})],-1)),F[8]||(F[8]=e("TresMesh",{"position-y":.155},[e("TresBoxGeometry",{args:[.045,.01,.04]}),e("TresMeshStandardMaterial",{color:7833753,roughness:.5,metalness:.3})],-1)),(a(!0),l(Q,null,le(t(u),(de,te)=>(a(),l("TresMesh",{key:"sock-"+de.key,position:[.021,.12-te*.055,0]},[F[6]||(F[6]=e("TresSphereGeometry",{args:[.007,8,6]},null,-1)),e("TresMeshBasicMaterial",{color:de.isOn?2278750:4473924},null,8,$3)],8,k3))),128))],8,w3)):j("",!0),t(u).length>0&&s.showLabels?(a(),pe(t(fs),{key:3,position:[t(C)/2+.08,t(p)*.65,-t(k)/2+.02]},{default:je(()=>[e("div",C3,[F[9]||(F[9]=e("div",{class:"socket-panel-title-3d"},"Outlets",-1)),(a(!0),l(Q,null,le(t(u),de=>(a(),l("div",{key:"sl-"+de.key,class:"socket-row-3d"},[e("span",{class:V(["socket-dot-3d",de.isOn?"on":"off"])},null,2),e("span",{class:V(de.isOn?"socket-on-3d":"socket-off-3d")},c(de.name),3)]))),128))])]),_:1},8,["position"])):j("",!0),e("TresGroup",{position:[-t(C)/2+.02,t(p)*.82,-t(k)*.15]},[e("TresMesh",{"rotation-z":Math.PI/2},[F[10]||(F[10]=e("TresCylinderGeometry",{args:[.09,.09,.12,20]},null,-1)),e("TresMeshStandardMaterial",{color:t(d).on?4871525:3817552,roughness:.7,metalness:.2},null,8,E3)],8,P3),e("TresMesh",{position:[.06,0,0],"rotation-z":Math.PI/2},[...F[11]||(F[11]=[e("TresCylinderGeometry",{args:[.095,.095,.01,20]},null,-1),e("TresMeshStandardMaterial",{color:6713472,roughness:.5,metalness:.3},null,-1)])],8,T3),e("TresMesh",{position:[.065,0,0],"rotation-z":Math.PI/2},[F[12]||(F[12]=e("TresCylinderGeometry",{args:[.02,.02,.015,12]},null,-1)),e("TresMeshStandardMaterial",{color:t(d).on?5618636:5596791,roughness:.4,metalness:.3},null,8,D3)],8,A3),(a(),l(Q,null,le(4,de=>e("TresMesh",{key:"blade-"+de,position:[.065,0,0],rotation:[(t(d).on?t(oe):0)+(de-1)*Math.PI/2,0,Math.PI/2]},[...F[13]||(F[13]=[e("TresBoxGeometry",{args:[.14,.004,.03]},null,-1),e("TresMeshStandardMaterial",{color:10070715,roughness:.4,metalness:.2,transparent:!0,opacity:.85},null,-1)])],8,M3)),64)),e("TresMesh",{position:[-.12,0,0],"rotation-z":Math.PI/2},[...F[14]||(F[14]=[e("TresCylinderGeometry",{args:[.075,.08,.12,12]},null,-1),e("TresMeshStandardMaterial",{color:5595248,roughness:.6,metalness:.2},null,-1)])],8,O3),e("TresMesh",{position:[-.25,0,0],"rotation-z":Math.PI/2},[...F[15]||(F[15]=[e("TresCylinderGeometry",{args:[.07,.075,.15,12]},null,-1),e("TresMeshStandardMaterial",{color:5595248,roughness:.6,metalness:.2},null,-1)])],8,L3)],8,S3),s.showLabels?(a(),pe(t(fs),{key:4,position:[-t(C)/2-.38,t(p)*.85,-t(k)*.15]},{default:je(()=>[e("div",{class:V(["device-panel-3d",t(d).on?"active":""])},[F[16]||(F[16]=e("div",{class:"device-panel-title-3d"},"Blower",-1)),e("div",j3,[e("span",{class:V(["device-dot-3d",t(d).on?"on":"off"])},null,2),e("span",{class:V(t(d).on?"device-val-on":"device-val-off")},c(t(d).on?t(d).level+"%":"OFF"),3)]),t(d).on?(a(),l("div",I3,c(t(f))+"W",1)):j("",!0)],2)]),_:1},8,["position"])):j("",!0),t(m)?(a(),l("TresGroup",{key:5,position:[-t(C)/2+.02,t(p)*.55,t(k)*.25]},[e("TresMesh",{"rotation-z":Math.PI/2},[...F[17]||(F[17]=[e("TresCylinderGeometry",{args:[.06,.06,.08,16]},null,-1),e("TresMeshStandardMaterial",{color:4870240,roughness:.7,metalness:.2},null,-1)])],8,F3),(a(),l(Q,null,le(3,de=>e("TresMesh",{key:"sb-"+de,position:[.045,0,0],rotation:[(t(b)?t(oe)*.7:0)+(de-1)*Math.PI*2/3,0,Math.PI/2]},[...F[18]||(F[18]=[e("TresBoxGeometry",{args:[.09,.003,.02]},null,-1),e("TresMeshStandardMaterial",{color:10070715,roughness:.4,metalness:.2,transparent:!0,opacity:.8},null,-1)])],8,N3)),64))],8,R3)):j("",!0)]),_:1},16)])}}}),H3=Object.assign(Pt(z3,[["__scopeId","data-v-524b16e5"]]),{__name:"LabRoom3DScene"}),G3={class:"absolute inset-0 overflow-hidden pointer-events-none"},W3={class:"scene-container"},q3={key:0,class:"floor-grid"},K3={key:1,class:"floor-light-pool"},Y3={key:0,class:"canopy-flowers"},Z3={key:0,class:"keeper-badge"},X3={key:1,class:"plant-label"},Q3={class:"plant-code"},J3={key:2,class:"socket-strip-3d"},ek={key:0,class:"socket-name"},tk={class:"mylar-lines"},sk={class:"lights-rail"},nk={class:"led-bar"},ok={key:0,class:"led-bar-glow"},rk={key:1,class:"led-chips"},ak={key:0,class:"light-cone"},lk={key:1,class:"light-label"},ik={class:"light-name"},dk={class:"light-info"},ck={key:0,class:"sensor-3d"},uk={class:"sensor-body"},pk={class:"sensor-screen"},gk={class:"sensor-readings"},fk={class:"reading-temp"},mk={class:"reading-humi"},hk={key:0,class:"sensor-label"},bk={key:1,class:"fan-3d"},vk={class:"hud-overlay"},xk={class:"hud-panel hud-top-left"},yk={class:"hud-room-type"},_k={key:0,class:"hud-dims"},wk={key:0,class:"hud-panel hud-bottom-right"},kk={class:"hud-sensor-row"},$k={class:"hud-value"},Ck={class:"hud-sensor-row"},Sk={class:"hud-value"},Pk={key:0,class:"hud-sensor-row"},Ek={class:"hud-value"},Tk={key:1,class:"hud-panel hud-bottom-left"},js=260,Is=220,oo=180,Ak=Pe({__name:"LabRoom2DView",props:{room:{},devices:{},plants:{},sensorData:{},outletStates:{},showGrid:{type:Boolean},showLabels:{type:Boolean}},setup(s){const n=s,{getSocketDisplayName:r}=Io(),o=Ro(),i=Sn(),d=W(!1),g=U(()=>({width:js+"px",height:Is+"px"})),f=U(()=>({width:js+"px",height:oo+"px"})),m=U(()=>({width:Is+"px",height:oo+"px"})),b=U(()=>Array.from({length:12},($,S)=>({id:S,style:{left:10+Math.sin(S*2.3)*40+40+"%",top:10+Math.cos(S*1.7)*35+35+"%",animationDelay:S*.4+"s",animationDuration:3+S%3+"s"}}))),x=U(()=>({tent:"TENT",room:"ROOM",greenhouse:"GREENHOUSE",outdoor:"OUTDOOR",closet:"CLOSET",custom:"CUSTOM"})[n.room.room_type]||"ROOM"),_=U(()=>(n.room.sensor_ids?.length??0)>0||n.devices.length>0),C=U(()=>(n.room.outlet_ids?.length??0)>0),k=U(()=>{const $=n.room.light_ids||[],S=n.devices.some(A=>A.deviceType==="LC");return $.length===0&&S?["light","light2"].filter(A=>A==="light"||!i.isLight2Disabled).map((A,y)=>{const h=o.states[A];return{id:A,label:`Light ${y+1}`,isOn:h?.isOn??!1,level:h?.mLevel??0,mode:h?o.getModeName(h.modeType):""}}):$.map((A,y)=>{const h=A.includes(":")?A.split(":").pop():A,u=o.states[h];return{id:A,label:`Light ${y+1}`,isOn:u?.isOn??!1,level:u?.mLevel??0,mode:u?o.getModeName(u.modeType):""}})}),p=U(()=>k.value.some($=>$.isOn)),T=U(()=>(n.room.outlet_ids||[]).map(S=>{const A=S.includes(":")?S.split(":").pop():S,y=n.outletStates[A],h=i.configs[A];return{key:A,name:r(A,"short"),isOn:y?.isOn??!1,mode:h?i.getModeName(h.modeType):""}})),M={"amber-400":"#fbbf24","lime-400":"#a3e635","green-400":"#4ade80","green-500":"#22c55e","emerald-400":"#34d399","purple-400":"#c084fc","purple-500":"#a855f7","pink-400":"#f472b6","pink-500":"#ec4899","yellow-400":"#facc15","orange-400":"#fb923c","amber-500":"#f59e0b","amber-600":"#d97706","gray-400":"#9ca3af","red-400":"#f87171"},P={germinating:0,seedling:1,early_veg:2,mid_veg:3,late_veg:4,pre_flower:5,early_flower:6,mid_flower:7,late_flower:8,flush:9,harvest:10,drying:11,curing:12,archived:13,culled:14},w=U(()=>{const $=n.plants;if($.length===0)return[];const S=Math.min($.length,4),A=Math.ceil($.length/S);return $.map((y,h)=>{const u=h%S,v=Math.floor(h/S),D=Fe[y.status],z=P[y.status]??2,G=z>=5&&z<=9,B=Math.min(1,.3+z*.08),O=30,R=40,X=js-O*2,oe=Is-R*2,we=S>1?X/(S-1):0,re=A>1?oe/(A-1):0,E=S>1?O+u*we:js/2,L=A>1?R+v*re:Is/2,F=D&&M[D.color]||"#4ade80";return{code:y.plant_code,stage:D?.shortLabel||y.status,color:F,isKeeper:y.is_keeper,hasFlowers:G,posStyle:{left:E+"px",top:L+"px"},canopyStyle:{width:16+B*22+"px",height:16+B*22+"px",bottom:10+B*28+"px"}}})});return($,S)=>(a(),l("div",{class:"room-viewport",onMouseenter:S[0]||(S[0]=A=>d.value=!0),onMouseleave:S[1]||(S[1]=A=>d.value=!1)},[S[18]||(S[18]=e("div",{class:"absolute inset-0 bg-gradient-to-br from-[#080a10] via-[#0d1017] to-[#0a0e18]"},null,-1)),e("div",G3,[(a(!0),l(Q,null,le(t(b),A=>(a(),l("div",{key:A.id,class:"particle",style:Te(A.style)},null,4))),128))]),e("div",W3,[e("div",{class:V(["scene-3d",{"scene-hover":t(d)}])},[e("div",{class:"room-floor",style:Te(t(g))},[S[4]||(S[4]=e("div",{class:"floor-surface"},null,-1)),s.showGrid?(a(),l("div",q3)):j("",!0),t(p)?(a(),l("div",K3)):j("",!0),(a(!0),l(Q,null,le(t(w),(A,y)=>(a(),l("div",{key:"p-"+y,class:"plant-3d",style:Te(A.posStyle)},[S[2]||(S[2]=e("div",{class:"plant-pot"},[e("div",{class:"pot-body"}),e("div",{class:"pot-soil"})],-1)),e("div",{class:"plant-canopy",style:Te(A.canopyStyle)},[e("div",{class:"canopy-body",style:Te({background:A.color})},null,4),A.hasFlowers?(a(),l("div",Y3,[(a(),l(Q,null,le(3,h=>e("span",{key:h,class:"flower-dot"})),64))])):j("",!0)],4),A.isKeeper?(a(),l("div",Z3,"★")):j("",!0),s.showLabels?(a(),l("div",X3,[e("span",Q3,c(A.code),1),e("span",{class:"plant-stage",style:Te({color:A.color})},c(A.stage),5)])):j("",!0)],4))),128)),t(T).length>0?(a(),l("div",J3,[(a(!0),l(Q,null,le(t(T),A=>(a(),l("div",{key:A.key,class:V(["socket-3d-item",{"socket-on":A.isOn}])},[S[3]||(S[3]=e("div",{class:"socket-dot"},null,-1)),s.showLabels?(a(),l("span",ek,c(A.name),1)):j("",!0)],2))),128))])):j("",!0)],4),e("div",{class:"room-wall-back",style:Te(t(f))},[S[8]||(S[8]=e("div",{class:"wall-surface wall-back-surface"},null,-1)),e("div",tk,[(a(),l(Q,null,le(6,A=>e("div",{key:"m-"+A,class:"mylar-line",style:Te({left:A*16+"%"})},null,4)),64))]),e("div",sk,[(a(!0),l(Q,null,le(t(k),A=>(a(),l("div",{key:A.id,class:V(["light-unit",{"light-active":A.isOn}])},[S[6]||(S[6]=e("div",{class:"light-cable left-cable"},null,-1)),S[7]||(S[7]=e("div",{class:"light-cable right-cable"},null,-1)),e("div",nk,[S[5]||(S[5]=e("div",{class:"led-bar-body"},null,-1)),A.isOn?(a(),l("div",ok)):j("",!0),A.isOn?(a(),l("div",rk,[(a(),l(Q,null,le(6,y=>e("span",{key:y,class:"led-chip"})),64))])):j("",!0)]),A.isOn?(a(),l("div",ak)):j("",!0),s.showLabels?(a(),l("div",lk,[e("span",ik,c(A.label),1),e("span",dk,c(A.isOn?A.level+"% "+A.mode:"OFF"),1)])):j("",!0)],2))),128))])],4),e("div",{class:"room-wall-left",style:Te(t(m))},[S[11]||(S[11]=e("div",{class:"wall-surface wall-left-surface"},null,-1)),t(_)?(a(),l("div",ck,[e("div",uk,[e("div",pk,[S[9]||(S[9]=e("div",{class:"sensor-led"},null,-1)),e("div",gk,[e("span",fk,c(s.sensorData.temp!=null?s.sensorData.temp.toFixed(1)+"°":"--"),1),e("span",mk,c(s.sensorData.humi!=null?s.sensorData.humi.toFixed(0)+"%":"--"),1)])])]),s.showLabels?(a(),l("div",hk,"Sensor")):j("",!0)])):j("",!0),t(C)?(a(),l("div",bk,[...S[10]||(S[10]=[e("div",{class:"fan-housing"},[e("div",{class:"fan-blades"})],-1),e("div",{class:"fan-duct"},null,-1)])])):j("",!0)],4),e("div",{class:"edge-floor-back",style:Te({width:js+"px"})},null,4),e("div",{class:"edge-floor-left",style:Te({height:Is+"px"})},null,4),e("div",{class:"edge-vertical",style:Te({height:oo+"px"})},null,4)],2)]),e("div",vk,[e("div",xk,[e("span",yk,c(t(x)),1),s.room.dimensions_cm?(a(),l("span",_k,c(s.room.dimensions_cm.width)+"x"+c(s.room.dimensions_cm.depth)+"x"+c(s.room.dimensions_cm.height)+"cm ",1)):j("",!0)]),t(_)?(a(),l("div",wk,[e("div",kk,[S[13]||(S[13]=e("span",{class:"hud-dot hud-dot-red"},null,-1)),e("span",$k,[ce(c(s.sensorData.temp!=null?s.sensorData.temp.toFixed(1):"--"),1),S[12]||(S[12]=e("small",null,"°C",-1))])]),e("div",Ck,[S[15]||(S[15]=e("span",{class:"hud-dot hud-dot-blue"},null,-1)),e("span",Sk,[ce(c(s.sensorData.humi!=null?s.sensorData.humi.toFixed(0):"--"),1),S[14]||(S[14]=e("small",null,"%",-1))])]),s.sensorData.vpd!=null?(a(),l("div",Pk,[S[17]||(S[17]=e("span",{class:"hud-dot hud-dot-green"},null,-1)),e("span",Ek,[ce(c(s.sensorData.vpd.toFixed(2)),1),S[16]||(S[16]=e("small",null,"kPa",-1))])])):j("",!0)])):j("",!0),t(T).length>0?(a(),l("div",Tk,[(a(!0),l(Q,null,le(t(T),A=>(a(),l("div",{key:"hud-"+A.key,class:"hud-socket"},[e("span",{class:V(["hud-dot",A.isOn?"hud-dot-green":"hud-dot-off"])},null,2),e("span",{class:V(["hud-socket-name",A.isOn?"text-green-300":"text-gray-600"])},c(A.name),3)]))),128))])):j("",!0)])],32))}}),Dk=Object.assign(Pt(Ak,[["__scopeId","data-v-abf49afc"]]),{__name:"LabRoom2DView"}),Mk={class:"device-overlay"},Ok={key:0,class:"mt-2 w-56 rounded-xl bg-gray-900/70 backdrop-blur-xl border border-gray-700/30 shadow-2xl overflow-hidden"},Lk={key:0,class:"p-2.5 border-b border-gray-800/50"},jk={class:"space-y-1.5"},Ik={key:0,class:"text-[10px] text-gray-400 font-mono"},Rk={key:1,class:"text-[8px] px-1.5 py-0.5 rounded-full bg-amber-500/15 text-amber-400 font-medium"},Fk={key:2,class:"text-[10px] text-gray-600"},Nk={key:1,class:"p-2.5 border-b border-gray-800/50"},Bk={class:"flex gap-1.5 flex-wrap"},Vk={class:"p-2.5"},Uk={class:"space-y-1"},zk={class:"text-[10px] text-gray-400 truncate"},Hk=Pe({__name:"LabDeviceOverlay",props:{room:{},devices:{},outletStates:{}},setup(s){const n=s,r=W(!1),{getSocketDisplayName:o}=Io(),i=Ro(),d=Sn(),g=U(()=>{const m=n.room.light_ids||[],b=n.devices.some(x=>x.deviceType==="LC");return m.length===0&&b?["light","light2"].filter(x=>x==="light"||!d.isLight2Disabled).map((x,_)=>{const C=i.states[x];return{id:x,label:`Light ${_+1}`,isOn:C?.isOn??!1,level:C?.mLevel??0,mode:C?i.getModeName(C.modeType):""}}):m.map((x,_)=>{const C=x.includes(":")?x.split(":").pop():x,k=i.states[C];return{id:x,label:`Light ${_+1}`,isOn:k?.isOn??!1,level:k?.mLevel??0,mode:k?i.getModeName(k.modeType):""}})}),f=U(()=>(n.room.outlet_ids||[]).map(b=>{const x=b.includes(":")?b.split(":").pop():b,_=n.outletStates[x];return{key:x,name:o(x,"short"),isOn:_?.isOn??!1}}));return(m,b)=>(a(),l("div",Mk,[e("button",{onClick:b[0]||(b[0]=x=>r.value=!t(r)),class:"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg bg-gray-900/70 backdrop-blur-xl border border-gray-700/30 text-gray-300 hover:text-white transition-all text-xs font-medium"},[I(t(io),{class:"w-3.5 h-3.5"}),e("span",null,c(s.devices.length),1),I(t(Gt),{class:V(["w-3 h-3 transition-transform",t(r)?"rotate-180":""])},null,8,["class"])]),I(Ke,{"enter-active-class":"transition-all duration-200","enter-from-class":"opacity-0 -translate-y-1 scale-95","enter-to-class":"opacity-100 translate-y-0 scale-100","leave-active-class":"transition-all duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0 -translate-y-1 scale-95"},{default:je(()=>[t(r)?(a(),l("div",Ok,[t(g).length>0?(a(),l("div",Lk,[b[1]||(b[1]=e("div",{class:"text-[9px] text-gray-500 uppercase tracking-widest mb-2 font-semibold"},"Lights",-1)),e("div",jk,[(a(!0),l(Q,null,le(t(g),x=>(a(),l("div",{key:x.id,class:"flex items-center gap-2"},[e("div",{class:V(["w-2 h-2 rounded-full flex-shrink-0 transition-all",x.isOn?"bg-amber-400 shadow-sm shadow-amber-400/50":"bg-gray-600"])},null,2),e("span",{class:V(["text-xs font-medium flex-1",x.isOn?"text-amber-200":"text-gray-500"])},c(x.label),3),x.isOn?(a(),l("span",Ik,c(x.level)+"%",1)):j("",!0),x.isOn&&x.mode?(a(),l("span",Rk,c(x.mode),1)):j("",!0),x.isOn?j("",!0):(a(),l("span",Fk,"OFF"))]))),128))])])):j("",!0),t(f).length>0?(a(),l("div",Nk,[b[2]||(b[2]=e("div",{class:"text-[9px] text-gray-500 uppercase tracking-widest mb-2 font-semibold"},"Outlets",-1)),e("div",Bk,[(a(!0),l(Q,null,le(t(f),x=>(a(),l("div",{key:x.key,class:V(["flex flex-col items-center gap-0.5 px-1.5 py-1 rounded-lg transition-colors",x.isOn?"bg-green-500/10":"bg-gray-800/40"])},[e("div",{class:V(["w-3 h-3 rounded-full transition-all flex items-center justify-center",x.isOn?"bg-green-400 shadow-sm shadow-green-400/40":"bg-gray-700"])},[I(t(Ys),{class:V(["w-1.5 h-1.5",x.isOn?"text-gray-900":"text-gray-500"])},null,8,["class"])],2),e("span",{class:V(["text-[8px] font-medium leading-none",x.isOn?"text-green-400":"text-gray-600"])},c(x.name),3)],2))),128))])])):j("",!0),e("div",Vk,[b[3]||(b[3]=e("div",{class:"text-[9px] text-gray-500 uppercase tracking-widest mb-2 font-semibold"},"Connection",-1)),e("div",Uk,[(a(!0),l(Q,null,le(s.devices,x=>(a(),l("div",{key:x.mac,class:"flex items-center gap-2"},[e("div",{class:V(["w-1.5 h-1.5 rounded-full flex-shrink-0",x.connected?"bg-green-400 shadow-sm shadow-green-400/50":"bg-red-400"])},null,2),e("span",zk,c(x.customName||(x.deviceType==="PS5"?"Power Strip":"Light Controller")),1)]))),128))])])])):j("",!0)]),_:1})]))}}),Gk=Object.assign(Hk,{__name:"LabDeviceOverlay"}),Wk={class:"gauges-wrapper"},qk={class:"gauges-container"},Kk={class:"gauge-item"},Yk={viewBox:"0 0 120 120",class:"gauge-svg"},Zk=["stroke","stroke-dashoffset"],Xk={x:"60",y:"56","text-anchor":"middle","dominant-baseline":"central",class:"gauge-value",fill:"white"},Qk={class:"gauge-item"},Jk={viewBox:"0 0 120 120",class:"gauge-svg"},e6=["stroke","stroke-dashoffset"],t6={x:"60",y:"56","text-anchor":"middle","dominant-baseline":"central",class:"gauge-value",fill:"white"},s6={class:"gauge-item"},n6={viewBox:"0 0 120 120",class:"gauge-svg"},o6=["stroke","stroke-dashoffset"],r6={x:"60",y:"56","text-anchor":"middle","dominant-baseline":"central",class:"gauge-value",fill:"white"},a6={class:"gauge-item"},l6={viewBox:"0 0 120 120",class:"gauge-svg"},i6=["stroke","stroke-dashoffset"],d6={x:"60",y:"56","text-anchor":"middle","dominant-baseline":"central",class:"gauge-value",fill:"white"},c6={key:0,class:"gauge-item"},u6={viewBox:"0 0 120 120",class:"gauge-svg"},p6=["stroke","stroke-dashoffset"],g6={x:"60",y:"56","text-anchor":"middle","dominant-baseline":"central",class:"gauge-value",fill:"white"},f6={key:0,class:"soil-strip"},m6={class:"soil-chip"},h6={class:"soil-chip-value"},b6={class:"soil-chip"},v6={class:"soil-chip-value"},x6={class:"soil-chip"},y6={class:"soil-chip-value"},_6=2.8,w6=Pe({__name:"LabEnvironmentGauges",props:{temp:{},humi:{},vpd:{},co2:{},tempSoil:{},humiSoil:{},ecSoil:{}},setup(s){const n=s,r=2*Math.PI*50;function o(u,v,D){return Math.min(D,Math.max(v,u))}function i(u){return r*(1-o(u,0,100)/100)}function d(u,v,D,z,G){return u>=v&&u<=D?"#4ade80":u>=z&&u<=G?"#facc15":"#f87171"}function g(u){return .6108*Math.exp(17.27*u/(u+237.3))}const f=U(()=>{if(n.temp==null||n.humi==null)return null;const u=n.temp-_6,v=g(u),D=g(n.temp)*(n.humi/100);return Math.max(0,v-D)}),m=U(()=>n.temp!=null?(n.temp-15)/20*100:0),b=U(()=>i(m.value)),x=U(()=>n.temp==null?"#374151":d(n.temp,20,28,18,30)),_=U(()=>n.humi!=null?n.humi:0),C=U(()=>i(_.value)),k=U(()=>n.humi==null?"#374151":d(n.humi,40,65,30,75)),p=U(()=>n.vpd!=null?n.vpd/2*100:0),T=U(()=>i(p.value)),M=U(()=>n.vpd==null?"#374151":d(n.vpd,.8,1.2,.4,1.6)),P=U(()=>f.value!=null?f.value/2*100:0),w=U(()=>i(P.value)),$=U(()=>f.value==null?"#374151":d(f.value,.8,1.2,.4,1.6)),S=U(()=>n.co2!=null?n.co2/2e3*100:0),A=U(()=>i(S.value)),y=U(()=>n.co2==null?"#374151":d(n.co2,800,1200,400,1500)),h=U(()=>n.tempSoil!=null||n.humiSoil!=null||n.ecSoil!=null);return(u,v)=>(a(),l("div",Wk,[e("div",qk,[e("div",Kk,[(a(),l("svg",Yk,[v[0]||(v[0]=e("circle",{cx:"60",cy:"60",r:"50",fill:"none",stroke:"#1f2937","stroke-width":"7"},null,-1)),e("circle",{cx:"60",cy:"60",r:"50",fill:"none",stroke:t(x),"stroke-width":"7","stroke-linecap":"round","stroke-dasharray":r,"stroke-dashoffset":t(b),transform:"rotate(-90 60 60)",class:"gauge-ring"},null,8,Zk),e("text",Xk,c(s.temp!=null?s.temp.toFixed(1):"--"),1),v[1]||(v[1]=e("text",{x:"60",y:"76","text-anchor":"middle","dominant-baseline":"central",class:"gauge-unit",fill:"#6b7280"},"°C",-1))])),v[2]||(v[2]=e("span",{class:"gauge-label"},"Temp",-1))]),e("div",Qk,[(a(),l("svg",Jk,[v[3]||(v[3]=e("circle",{cx:"60",cy:"60",r:"50",fill:"none",stroke:"#1f2937","stroke-width":"7"},null,-1)),e("circle",{cx:"60",cy:"60",r:"50",fill:"none",stroke:t(k),"stroke-width":"7","stroke-linecap":"round","stroke-dasharray":r,"stroke-dashoffset":t(C),transform:"rotate(-90 60 60)",class:"gauge-ring"},null,8,e6),e("text",t6,c(s.humi!=null?Math.round(s.humi):"--"),1),v[4]||(v[4]=e("text",{x:"60",y:"76","text-anchor":"middle","dominant-baseline":"central",class:"gauge-unit",fill:"#6b7280"},"% RH",-1))])),v[5]||(v[5]=e("span",{class:"gauge-label"},"Humidity",-1))]),e("div",s6,[(a(),l("svg",n6,[v[6]||(v[6]=e("circle",{cx:"60",cy:"60",r:"50",fill:"none",stroke:"#1f2937","stroke-width":"7"},null,-1)),e("circle",{cx:"60",cy:"60",r:"50",fill:"none",stroke:t(M),"stroke-width":"7","stroke-linecap":"round","stroke-dasharray":r,"stroke-dashoffset":t(T),transform:"rotate(-90 60 60)",class:"gauge-ring"},null,8,o6),e("text",r6,c(s.vpd!=null?s.vpd.toFixed(2):"--"),1),v[7]||(v[7]=e("text",{x:"60",y:"76","text-anchor":"middle","dominant-baseline":"central",class:"gauge-unit",fill:"#6b7280"},"kPa",-1))])),v[8]||(v[8]=e("span",{class:"gauge-label"},"Air VPD",-1))]),e("div",a6,[(a(),l("svg",l6,[v[9]||(v[9]=e("circle",{cx:"60",cy:"60",r:"50",fill:"none",stroke:"#1f2937","stroke-width":"7"},null,-1)),e("circle",{cx:"60",cy:"60",r:"50",fill:"none",stroke:t($),"stroke-width":"7","stroke-linecap":"round","stroke-dasharray":r,"stroke-dashoffset":t(w),transform:"rotate(-90 60 60)",class:"gauge-ring"},null,8,i6),e("text",d6,c(t(f)!=null?t(f).toFixed(2):"--"),1),v[10]||(v[10]=e("text",{x:"60",y:"76","text-anchor":"middle","dominant-baseline":"central",class:"gauge-unit",fill:"#6b7280"},"kPa",-1))])),v[11]||(v[11]=e("span",{class:"gauge-label leaf-label"},"Leaf VPD",-1))]),s.co2!=null&&s.co2>0?(a(),l("div",c6,[(a(),l("svg",u6,[v[12]||(v[12]=e("circle",{cx:"60",cy:"60",r:"50",fill:"none",stroke:"#1f2937","stroke-width":"7"},null,-1)),e("circle",{cx:"60",cy:"60",r:"50",fill:"none",stroke:t(y),"stroke-width":"7","stroke-linecap":"round","stroke-dasharray":r,"stroke-dashoffset":t(A),transform:"rotate(-90 60 60)",class:"gauge-ring"},null,8,p6),e("text",g6,c(Math.round(s.co2)),1),v[13]||(v[13]=e("text",{x:"60",y:"76","text-anchor":"middle","dominant-baseline":"central",class:"gauge-unit",fill:"#6b7280"},"ppm",-1))])),v[14]||(v[14]=e("span",{class:"gauge-label"},"CO2",-1))])):j("",!0)]),t(h)?(a(),l("div",f6,[v[18]||(v[18]=e("span",{class:"soil-strip-title"},"Soil",-1)),e("div",m6,[v[15]||(v[15]=e("span",{class:"soil-chip-label"},"Temp",-1)),e("span",h6,c(s.tempSoil!=null?s.tempSoil.toFixed(1)+"°C":"--"),1)]),e("div",b6,[v[16]||(v[16]=e("span",{class:"soil-chip-label"},"Moisture",-1)),e("span",v6,c(s.humiSoil!=null?Math.round(s.humiSoil)+"%":"--"),1)]),e("div",x6,[v[17]||(v[17]=e("span",{class:"soil-chip-label"},"EC",-1)),e("span",y6,c(s.ecSoil!=null?s.ecSoil.toFixed(1)+" mS":"--"),1)])])):j("",!0)]))}}),k6=Object.assign(Pt(w6,[["__scopeId","data-v-cb485dd1"]]),{__name:"LabEnvironmentGauges"}),$6={key:0,class:"plant-overlay"},C6={class:"flex items-center gap-1 px-2.5 py-2 rounded-xl bg-gray-900/70 backdrop-blur-xl border border-gray-700/30 shadow-2xl"},S6=["onClick","title"],P6={class:"text-[9px] font-bold text-gray-200"},E6={key:0,class:"text-[8px] text-amber-400"},T6={key:0,class:"mt-2 p-3 rounded-xl bg-gray-900/70 backdrop-blur-xl border border-gray-700/30 shadow-2xl w-52"},A6={class:"flex items-center justify-between mb-2"},D6={class:"flex items-center gap-1.5"},M6={class:"text-sm font-bold text-white"},O6={key:0,class:"text-xs text-amber-400"},L6={class:"space-y-1 text-[10px]"},j6={class:"flex justify-between"},I6={class:"text-gray-300 font-medium"},R6={class:"flex justify-between"},F6={class:"flex justify-between"},N6={class:"text-gray-300 font-mono"},B6={key:0,class:"flex justify-between"},V6={class:"text-gray-300"},U6=Pe({__name:"LabPlantOverlay",props:{plants:{}},setup(s){const n=s,r=rt(),o=W(null),i={"amber-400":"#fbbf24","lime-400":"#a3e635","green-400":"#4ade80","green-500":"#22c55e","emerald-400":"#34d399","purple-400":"#c084fc","purple-500":"#a855f7","pink-400":"#f472b6","pink-500":"#ec4899","yellow-400":"#facc15","orange-400":"#fb923c","amber-500":"#f59e0b","amber-600":"#d97706","gray-400":"#9ca3af","red-400":"#f87171"},d=U(()=>n.plants.map(b=>{const x=Fe[b.status];return{id:b.id,code:b.plant_code,strain:b.strain_name||"Unknown",stageLabel:x?.shortLabel||b.status,color:x&&i[x.color]||"#4ade80",isKeeper:b.is_keeper,sex:b.sex,day:b.current_day}})),g=U(()=>o.value&&d.value.find(b=>b.id===o.value)||null);function f(b){o.value=o.value===b.id?null:b.id}function m(b){r.activeTab="plants",r.fetchPlant(b),o.value=null}return(b,x)=>s.plants.length>0?(a(),l("div",$6,[e("div",C6,[x[2]||(x[2]=e("span",{class:"text-[9px] text-gray-500 font-semibold uppercase tracking-wider mr-1"},"Plants",-1)),(a(!0),l(Q,null,le(t(d),_=>(a(),l("button",{key:_.id,onClick:C=>f(_),class:V(["flex items-center gap-1 px-1.5 py-0.5 rounded-md transition-all hover:scale-105",t(o)===_.id?"bg-gray-700/60 ring-1 ring-gray-500/30":"hover:bg-gray-800/60"]),title:_.strain+" - "+_.stageLabel},[e("div",{class:"w-2 h-2 rounded-full flex-shrink-0",style:Te({backgroundColor:_.color})},null,4),e("span",P6,c(_.code),1),_.isKeeper?(a(),l("span",E6,"★")):j("",!0)],10,S6))),128))]),I(Ke,{"enter-active-class":"transition-all duration-200","enter-from-class":"opacity-0 translate-y-1 scale-95","enter-to-class":"opacity-100 translate-y-0 scale-100","leave-active-class":"transition-all duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0 translate-y-1 scale-95"},{default:je(()=>[t(g)?(a(),l("div",T6,[e("div",A6,[e("div",D6,[e("div",{class:"w-3 h-3 rounded-full",style:Te({backgroundColor:t(g).color})},null,4),e("span",M6,c(t(g).code),1),t(g).isKeeper?(a(),l("span",O6,"★")):j("",!0)]),e("button",{onClick:x[0]||(x[0]=_=>o.value=null),class:"text-gray-500 hover:text-white text-xs"},"✕")]),e("div",L6,[e("div",j6,[x[3]||(x[3]=e("span",{class:"text-gray-500"},"Strain",-1)),e("span",I6,c(t(g).strain),1)]),e("div",R6,[x[4]||(x[4]=e("span",{class:"text-gray-500"},"Stage",-1)),e("span",{style:Te({color:t(g).color}),class:"font-semibold"},c(t(g).stageLabel),5)]),e("div",F6,[x[5]||(x[5]=e("span",{class:"text-gray-500"},"Day",-1)),e("span",N6,c(t(g).day),1)]),t(g).sex!=="unknown"?(a(),l("div",B6,[x[6]||(x[6]=e("span",{class:"text-gray-500"},"Sex",-1)),e("span",V6,c(t(g).sex),1)])):j("",!0)]),e("button",{onClick:x[1]||(x[1]=_=>m(t(g).id)),class:"mt-2 w-full text-center text-[10px] font-medium text-teal-400 hover:text-teal-300 transition-colors"}," View Full Details → ")])):j("",!0)]),_:1})])):j("",!0)}}),z6=Object.assign(U6,{__name:"LabPlantOverlay"}),H6={class:"fixed top-0 right-0 bottom-0 left-0 desktop:left-[var(--sidebar-width,256px)] z-50 bg-gray-900 overflow-hidden flex flex-col"},G6={class:"h-1 bg-gray-800"},W6={class:"flex-shrink-0 border-b border-gray-800"},q6={class:"max-w-4xl mx-auto px-6 py-4"},K6={class:"flex items-center justify-between"},Y6={class:"flex items-center gap-4"},Z6={class:"w-12 h-12 rounded-2xl bg-gradient-to-br from-teal-500 to-cyan-600 flex items-center justify-center shadow-lg shadow-teal-500/20"},X6={class:"text-xl font-bold text-white"},Q6={class:"text-sm text-gray-400"},J6={class:"flex-1 overflow-y-auto"},e$={class:"max-w-4xl mx-auto px-6 py-8"},t$={class:"grid grid-cols-2 sm:grid-cols-3 gap-4"},s$=["onClick"],n$={class:"text-4xl mb-3"},o$={class:"text-sm font-bold text-white mb-1"},r$={class:"text-[10px] text-gray-400"},a$={class:"space-y-6"},l$={class:"p-6 rounded-2xl bg-gray-800/50 border border-gray-700/50"},i$={class:"p-6 rounded-2xl bg-gray-800/50 border border-gray-700/50"},d$={class:"p-6 rounded-2xl bg-gray-800/50 border border-gray-700/50"},c$={class:"grid grid-cols-3 gap-4"},u$={class:"mt-4 flex items-end justify-center gap-1 h-20"},p$={class:"flex items-center justify-center h-full text-[9px] text-teal-400/80 font-mono"},g$={key:0,class:"text-center py-12"},f$={key:1,class:"space-y-3"},m$=["onClick"],h$={class:"flex-1"},b$={class:"font-medium text-white"},v$={class:"text-xs text-gray-500"},x$={key:0,class:"mb-8"},y$={class:"grid grid-cols-2 sm:grid-cols-3 gap-3"},_$=["onClick"],w$={class:"text-sm font-medium text-white"},k$={class:"text-[10px] text-gray-500"},$$={key:0,class:"text-center py-12"},C$={key:1,class:"space-y-2"},S$=["onClick"],P$={class:"flex-1 min-w-0"},E$={class:"text-sm font-medium text-white"},T$={class:"text-[10px] text-gray-500"},A$={key:0,class:"text-center py-12"},D$={key:1},M$={class:"absolute inset-0 w-full h-full pointer-events-none",preserveAspectRatio:"none"},O$=["id","width","height"],L$=["d"],j$=["fill"],I$={class:"absolute -top-6 left-1/2 -translate-x-1/2 text-[10px] text-gray-500 font-mono"},R$={class:"absolute top-1/2 -left-8 -translate-y-1/2 -rotate-90 text-[10px] text-gray-500 font-mono whitespace-nowrap"},F$=["onMousedown","onTouchstart"],N$={class:"relative"},B$={class:"absolute -bottom-5 left-1/2 -translate-x-1/2 whitespace-nowrap text-center"},V$={class:"text-[9px] font-bold text-white/80 bg-gray-900/70 px-1.5 py-0.5 rounded"},U$={class:"space-y-4"},z$={class:"p-6 rounded-2xl bg-gray-800/50 border border-gray-700/50"},H$={class:"flex items-center gap-4 mb-4"},G$={class:"text-3xl"},W$={class:"text-xl font-bold text-white"},q$={class:"text-sm text-gray-400 capitalize"},K$={key:0,class:"text-sm text-gray-400 mb-4"},Y$={class:"grid grid-cols-2 sm:grid-cols-4 gap-3 text-center"},Z$={class:"p-3 rounded-xl bg-gray-900/50"},X$={class:"text-sm font-medium text-white"},Q$={class:"p-3 rounded-xl bg-gray-900/50"},J$={class:"text-sm font-medium text-white"},e7={class:"p-3 rounded-xl bg-gray-900/50"},t7={class:"text-sm font-medium text-white"},s7={class:"p-3 rounded-xl bg-gray-900/50"},n7={class:"text-sm font-medium text-white"},o7={class:"flex-shrink-0 border-t border-gray-800"},r7={class:"max-w-4xl mx-auto px-6 py-4 flex items-center justify-between"},a7={key:1},l7=["disabled"],Rs=7,an=500,i7=Pe({__name:"LabRoomWizard",props:{editingRoom:{}},emits:["close","saved"],setup(s,{emit:n}){const r=s,o=n,i=rt(),d=Pl(),g=W(1),f=W(!1),m=["Room Type","Details","Devices","Outlets & Sensors","Plants","Plant Layout","Review"],b=[{id:"tent",icon:"⛺",label:"Grow Tent",desc:"Indoor fabric tent"},{id:"room",icon:"🏠",label:"Dedicated Room",desc:"Converted room"},{id:"greenhouse",icon:"🌿",label:"Greenhouse",desc:"Glass or poly structure"},{id:"outdoor",icon:"☀️",label:"Outdoor",desc:"Open air garden"},{id:"closet",icon:"🚪",label:"Closet",desc:"Small enclosed space"},{id:"custom",icon:"🔧",label:"Custom",desc:"Other setup"}],x=W({room_type:r.editingRoom?.room_type||"tent",name:r.editingRoom?.name||"",description:r.editingRoom?.description||"",width:r.editingRoom?.dimensions_cm?.width||120,depth:r.editingRoom?.dimensions_cm?.depth||120,height:r.editingRoom?.dimensions_cm?.height||200,device_macs:[...r.editingRoom?.device_macs||[]],outlet_ids:[...r.editingRoom?.outlet_ids||[]],plant_ids:[...r.editingRoom?.active_plant_ids||[]],plant_positions:{...r.editingRoom?.layout_data?.plant_positions||{}}}),_=U(()=>d.allDevices),C=U(()=>i.activePlants),k=U(()=>{const re=[];for(const E of x.value.device_macs){const L=_.value.find(F=>F.mac===E);if(L?.deviceType==="PS5")for(let F=1;F<=5;F++)re.push({id:`${E}:O${F}`,label:`Outlet ${F}`,device:L.customName||E})}return re}),p=U(()=>b.find(re=>re.id===x.value.room_type)?.icon||"🏠"),T=U(()=>{switch(g.value){case 1:return!!x.value.room_type;case 2:return!!x.value.name.trim()&&x.value.width>0&&x.value.depth>0&&x.value.height>0;case 3:return!0;case 4:return!0;case 5:return!0;case 6:return!0;case 7:return!0;default:return!1}});ot(()=>{d.fetchDevices()});function M(re){const E=x.value.device_macs.indexOf(re);E>=0?(x.value.device_macs.splice(E,1),x.value.outlet_ids=x.value.outlet_ids.filter(L=>!L.startsWith(re+":"))):x.value.device_macs.push(re)}function P(re){const E=x.value.outlet_ids.indexOf(re);E>=0?x.value.outlet_ids.splice(E,1):x.value.outlet_ids.push(re)}function w(re){const E=x.value.plant_ids.indexOf(re);E>=0?x.value.plant_ids.splice(E,1):x.value.plant_ids.push(re)}const $=Math.random().toString(36).slice(2,8),S=W(null),A=W(null);let y={x:0,y:0},h={x:0,z:0};const u=U(()=>C.value.filter(re=>x.value.plant_ids.includes(re.id))),v=U(()=>{const re=x.value.width||120,E=x.value.depth||120,L=re/E;let F,be;return L>=1?(F=an,be=an/L):(be=an,F=an*L),{width:F+"px",height:be+"px"}}),D=U(()=>{const re=x.value.width||120,E=parseFloat(v.value.width);return 20/re*E});function z(re,E){return{left:re/x.value.width*100,top:E/x.value.depth*100}}function G(re){if(x.value.plant_positions[re])return x.value.plant_positions[re];const E=x.value.plant_ids.indexOf(re),L=x.value.plant_ids.length,F=Math.min(L,4),be=Math.ceil(L/F),ie=E%F,de=Math.floor(E/F),te=x.value.width*.15,K=x.value.depth*.15,ue=x.value.width-te*2,N=x.value.depth-K*2;return{x:F>1?te+ie*(ue/(F-1)):x.value.width/2,z:be>1?K+de*(N/(be-1)):x.value.depth/2}}function B(re){const E=G(re.id),L=z(E.x,E.z);return{left:L.left+"%",top:L.top+"%",transform:"translate(-50%, -50%)"}}const O={germinating:"#fbbf24",seedling:"#a3e635",early_veg:"#4ade80",mid_veg:"#22c55e",late_veg:"#34d399",pre_flower:"#c084fc",early_flower:"#a855f7",mid_flower:"#f472b6",late_flower:"#ec4899",flush:"#fb923c",harvest:"#f59e0b",drying:"#d97706",curing:"#9ca3af",archived:"#6b7280",culled:"#f87171"};function R(re){return O[re.status]||"#4ade80"}function X(re,E){A.value=E;const L="touches"in re?re.touches[0]:re;y={x:L.clientX,y:L.clientY};const F=G(E);h={x:F.x,z:F.z};const be=de=>{const te="touches"in de?de.touches[0]:de;if(!S.value)return;const K=S.value.getBoundingClientRect(),ue=te.clientX-y.x,N=te.clientY-y.y,H=x.value.width/K.width,Y=x.value.depth/K.height,me=Math.max(0,Math.min(x.value.width,h.x+ue*H)),J=Math.max(0,Math.min(x.value.depth,h.z+N*Y));x.value.plant_positions[E]={x:Math.round(me),z:Math.round(J)}},ie=()=>{A.value=null,document.removeEventListener("mousemove",be),document.removeEventListener("mouseup",ie),document.removeEventListener("touchmove",be),document.removeEventListener("touchend",ie)};document.addEventListener("mousemove",be),document.addEventListener("mouseup",ie),document.addEventListener("touchmove",be,{passive:!1}),document.addEventListener("touchend",ie)}function oe(){const re=x.value.plant_ids;if(re.length===0)return;const E=Math.min(re.length,4),L=Math.ceil(re.length/E),F=x.value.width*.15,be=x.value.depth*.15,ie=x.value.width-F*2,de=x.value.depth-be*2,te={};re.forEach((K,ue)=>{const N=ue%E,H=Math.floor(ue/E);te[K]={x:Math.round(E>1?F+N*(ie/(E-1)):x.value.width/2),z:Math.round(L>1?be+H*(de/(L-1)):x.value.depth/2)}}),x.value.plant_positions=te}He(g,re=>{if(re===6){for(const E of x.value.plant_ids)x.value.plant_positions[E]||(x.value.plant_positions[E]=G(E));for(const E of Object.keys(x.value.plant_positions))x.value.plant_ids.includes(E)||delete x.value.plant_positions[E]}});async function we(){if(g.value<Rs){g.value++;return}f.value=!0;try{const re={name:x.value.name.trim(),description:x.value.description.trim()||void 0,room_type:x.value.room_type,dimensions_cm:{width:x.value.width,depth:x.value.depth,height:x.value.height},device_macs:x.value.device_macs,outlet_ids:x.value.outlet_ids,active_plant_ids:x.value.plant_ids,layout_data:{plant_positions:x.value.plant_positions},status:"active"};r.editingRoom?await i.updateRoom(r.editingRoom.id,re):await i.createRoom(re),o("saved")}catch{}finally{f.value=!1}}return(re,E)=>(a(),l("div",H6,[e("div",G6,[e("div",{class:"h-full bg-gradient-to-r from-teal-600 to-cyan-400 transition-all duration-500",style:Te({width:`${g.value/Rs*100}%`})},null,4)]),e("div",W6,[e("div",q6,[e("div",K6,[e("div",Y6,[e("div",Z6,[I(t(nr),{class:"w-6 h-6 text-white"})]),e("div",null,[e("h1",X6,c(s.editingRoom?"Edit Room":"New Grow Room"),1),e("p",Q6,"Step "+c(g.value)+" of "+c(Rs)+" — "+c(m[g.value-1]),1)])]),e("button",{onClick:E[0]||(E[0]=L=>o("close")),class:"p-3 rounded-xl hover:bg-gray-800 text-gray-400 hover:text-white transition-colors"},[I(t(ze),{class:"w-6 h-6"})])])])]),e("div",J6,[e("div",e$,[g.value===1?(a(),l(Q,{key:0},[E[7]||(E[7]=e("div",{class:"mb-8"},[e("h2",{class:"text-3xl font-bold text-white mb-3"},"What type of grow space?"),e("p",{class:"text-lg text-gray-400"},"Select the type that best describes your cultivation area.")],-1)),e("div",t$,[(a(),l(Q,null,le(b,L=>e("button",{key:L.id,onClick:F=>x.value.room_type=L.id,class:V(["group relative p-6 rounded-2xl border-2 transition-all text-center",x.value.room_type===L.id?"border-teal-500 bg-teal-500/10 shadow-lg shadow-teal-500/20":"border-gray-700/50 bg-gray-800/40 hover:border-gray-600"])},[e("div",n$,c(L.icon),1),e("h3",o$,c(L.label),1),e("p",r$,c(L.desc),1)],10,s$)),64))])],64)):j("",!0),g.value===2?(a(),l(Q,{key:1},[E[14]||(E[14]=e("div",{class:"mb-8"},[e("h2",{class:"text-3xl font-bold text-white mb-3"},"Room Details"),e("p",{class:"text-lg text-gray-400"},"Name your room and set its dimensions.")],-1)),e("div",a$,[e("div",l$,[E[8]||(E[8]=e("label",{class:"block text-lg font-semibold text-white mb-2"},[ce(" Room Name "),e("span",{class:"text-red-400"},"*")],-1)),ye(e("input",{"onUpdate:modelValue":E[1]||(E[1]=L=>x.value.name=L),type:"text",placeholder:"e.g., Main Tent, Flower Room, Veg Closet...",class:"w-full px-5 py-4 bg-gray-700/50 border border-gray-600 rounded-xl text-white text-lg placeholder-gray-500 focus:border-teal-500 focus:outline-none focus:ring-2 focus:ring-teal-500/20 transition-all",autofocus:""},null,512),[[$e,x.value.name]])]),e("div",i$,[E[9]||(E[9]=e("label",{class:"block text-sm font-semibold text-white mb-2"},"Description (optional)",-1)),ye(e("textarea",{"onUpdate:modelValue":E[2]||(E[2]=L=>x.value.description=L),rows:"2",placeholder:"Brief description of this grow space...",class:"w-full px-4 py-3 bg-gray-700/50 border border-gray-600 rounded-xl text-white placeholder-gray-500 focus:border-teal-500 focus:outline-none resize-none transition-all"},null,512),[[$e,x.value.description]])]),e("div",d$,[E[13]||(E[13]=e("label",{class:"block text-lg font-semibold text-white mb-4"},"Dimensions (cm)",-1)),e("div",c$,[e("div",null,[E[10]||(E[10]=e("label",{class:"block text-xs text-gray-400 mb-1"},"Width",-1)),ye(e("input",{"onUpdate:modelValue":E[3]||(E[3]=L=>x.value.width=L),type:"number",min:"30",max:"1000",class:"w-full px-4 py-3 bg-gray-700/50 border border-gray-600 rounded-xl text-white text-center font-mono focus:border-teal-500 focus:outline-none transition-all"},null,512),[[$e,x.value.width,void 0,{number:!0}]])]),e("div",null,[E[11]||(E[11]=e("label",{class:"block text-xs text-gray-400 mb-1"},"Depth",-1)),ye(e("input",{"onUpdate:modelValue":E[4]||(E[4]=L=>x.value.depth=L),type:"number",min:"30",max:"1000",class:"w-full px-4 py-3 bg-gray-700/50 border border-gray-600 rounded-xl text-white text-center font-mono focus:border-teal-500 focus:outline-none transition-all"},null,512),[[$e,x.value.depth,void 0,{number:!0}]])]),e("div",null,[E[12]||(E[12]=e("label",{class:"block text-xs text-gray-400 mb-1"},"Height",-1)),ye(e("input",{"onUpdate:modelValue":E[5]||(E[5]=L=>x.value.height=L),type:"number",min:"50",max:"400",class:"w-full px-4 py-3 bg-gray-700/50 border border-gray-600 rounded-xl text-white text-center font-mono focus:border-teal-500 focus:outline-none transition-all"},null,512),[[$e,x.value.height,void 0,{number:!0}]])])]),e("div",u$,[e("div",{class:"border border-teal-500/50 bg-teal-500/10 rounded transition-all",style:Te({width:Math.max(20,Math.min(120,x.value.width/5))+"px",height:Math.max(20,Math.min(80,x.value.height/5))+"px"})},[e("div",p$,c(x.value.width)+"x"+c(x.value.depth),1)],4)])])])],64)):j("",!0),g.value===3?(a(),l(Q,{key:2},[E[16]||(E[16]=e("div",{class:"mb-8"},[e("h2",{class:"text-3xl font-bold text-white mb-3"},"Assign Devices"),e("p",{class:"text-lg text-gray-400"},"Select the Spider Farmer devices in this grow space.")],-1)),_.value.length===0?(a(),l("div",g$,[I(t(io),{class:"w-12 h-12 text-gray-600 mx-auto mb-3"}),E[15]||(E[15]=e("p",{class:"text-gray-400"},"No devices detected. You can add them later.",-1))])):(a(),l("div",f$,[(a(!0),l(Q,null,le(_.value,L=>(a(),l("button",{key:L.mac,onClick:F=>M(L.mac),class:V(["w-full flex items-center gap-4 p-4 rounded-2xl border-2 transition-all text-left",x.value.device_macs.includes(L.mac)?"border-teal-500 bg-teal-500/10":"border-gray-700/50 bg-gray-800/40 hover:border-gray-600"])},[e("div",{class:V(["w-12 h-12 rounded-xl flex items-center justify-center",x.value.device_macs.includes(L.mac)?"bg-teal-500/20":"bg-gray-700/50"])},[I(t(io),{class:V(["w-6 h-6",x.value.device_macs.includes(L.mac)?"text-teal-400":"text-gray-500"])},null,8,["class"])],2),e("div",h$,[e("p",b$,c(L.customName||L.mac),1),e("p",v$,c(L.deviceType==="PS5"?"Power Strip 5":"Light Controller")+" · "+c(L.mac),1)]),e("div",{class:V(["w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors",x.value.device_macs.includes(L.mac)?"border-teal-500 bg-teal-500":"border-gray-600"])},[x.value.device_macs.includes(L.mac)?(a(),pe(t(lt),{key:0,class:"w-4 h-4 text-white"})):j("",!0)],2)],10,m$))),128))]))],64)):j("",!0),g.value===4?(a(),l(Q,{key:3},[E[18]||(E[18]=e("div",{class:"mb-8"},[e("h2",{class:"text-3xl font-bold text-white mb-3"},"Configure Outlets & Sensors"),e("p",{class:"text-lg text-gray-400"},"Select which outlets and sensors belong to this room.")],-1)),k.value.length>0?(a(),l("div",x$,[E[17]||(E[17]=e("h3",{class:"text-sm font-medium text-gray-300 mb-3"},"Outlets",-1)),e("div",y$,[(a(!0),l(Q,null,le(k.value,L=>(a(),l("button",{key:L.id,onClick:F=>P(L.id),class:V(["p-4 rounded-xl border-2 transition-all text-center",x.value.outlet_ids.includes(L.id)?"border-amber-500 bg-amber-500/10":"border-gray-700/50 bg-gray-800/40 hover:border-gray-600"])},[I(t(Ys),{class:V(["w-6 h-6 mx-auto mb-2",x.value.outlet_ids.includes(L.id)?"text-amber-400":"text-gray-500"])},null,8,["class"]),e("p",w$,c(L.label),1),e("p",k$,c(L.device),1)],10,_$))),128))])])):j("",!0),E[19]||(E[19]=e("div",null,[e("h3",{class:"text-sm font-medium text-gray-300 mb-3"},"Sensors"),e("div",{class:"p-4 rounded-xl bg-gray-800/40 border border-gray-700/50"},[e("p",{class:"text-sm text-gray-400"}," Sensor data from assigned devices will be automatically associated with this room. ")])],-1))],64)):j("",!0),g.value===5?(a(),l(Q,{key:4},[E[21]||(E[21]=e("div",{class:"mb-8"},[e("h2",{class:"text-3xl font-bold text-white mb-3"},"Assign Plants"),e("p",{class:"text-lg text-gray-400"},"Select plants currently growing in this room. You can change this anytime.")],-1)),C.value.length===0?(a(),l("div",$$,[...E[20]||(E[20]=[e("p",{class:"text-gray-400"},"No active plants in the lab. You can add them later.",-1)])])):(a(),l("div",C$,[(a(!0),l(Q,null,le(C.value,L=>(a(),l("button",{key:L.id,onClick:F=>w(L.id),class:V(["w-full flex items-center gap-3 p-3 rounded-xl border transition-all text-left",x.value.plant_ids.includes(L.id)?"border-green-500/50 bg-green-500/10":"border-gray-700/50 bg-gray-800/40 hover:border-gray-600"])},[e("div",{class:V(["w-3 h-3 rounded-full",x.value.plant_ids.includes(L.id)?"bg-green-400":"bg-gray-600"])},null,2),e("div",P$,[e("p",E$,c(L.plant_code),1),e("p",T$,c(L.strain_name||"Unknown")+" · "+c(L.status),1)]),x.value.plant_ids.includes(L.id)?(a(),pe(t(lt),{key:0,class:"w-5 h-5 text-green-400"})):j("",!0)],10,S$))),128))]))],64)):j("",!0),g.value===6?(a(),l(Q,{key:5},[E[24]||(E[24]=e("div",{class:"mb-6"},[e("h2",{class:"text-3xl font-bold text-white mb-3"},"Plant Layout"),e("p",{class:"text-lg text-gray-400"},"Drag plants to position them in your room. Top-down aerial view.")],-1)),u.value.length===0?(a(),l("div",A$,[...E[22]||(E[22]=[e("p",{class:"text-gray-400"},"No plants selected. Go back to add plants first, or skip this step.",-1)])])):(a(),l("div",D$,[e("div",{class:"relative mx-auto",style:Te(v.value)},[e("div",{ref_key:"aerialFloor",ref:S,class:"relative w-full h-full rounded-xl border-2 border-gray-600/60 overflow-hidden",style:{background:"radial-gradient(circle at 50% 50%, rgba(20,40,35,0.9), rgba(10,15,20,0.95))"}},[(a(),l("svg",M$,[e("defs",null,[e("pattern",{id:"grid-"+t($),width:D.value,height:D.value,patternUnits:"userSpaceOnUse"},[e("path",{d:`M ${D.value} 0 L 0 0 0 ${D.value}`,fill:"none",stroke:"rgba(100,120,140,0.12)","stroke-width":"1"},null,8,L$)],8,O$)]),e("rect",{width:"100%",height:"100%",fill:`url(#grid-${t($)})`},null,8,j$)])),e("div",I$,c(x.value.width)+" cm ",1),e("div",R$,c(x.value.depth)+" cm ",1),(a(!0),l(Q,null,le(u.value,L=>(a(),l("div",{key:"layout-"+L.id,class:"absolute cursor-grab active:cursor-grabbing select-none z-10 group",style:Te(B(L)),onMousedown:F=>X(F,L.id),onTouchstart:Ve(F=>X(F,L.id),["prevent"])},[e("div",N$,[e("div",{class:V(["w-9 h-9 rounded-full border-2 flex items-center justify-center transition-all group-hover:scale-110",A.value===L.id?"border-teal-400 bg-teal-500/30 scale-110":"border-green-500/60 bg-green-500/20"])},[e("div",{class:"w-4 h-4 rounded-full",style:Te({background:R(L)})},null,4)],2),e("div",B$,[e("span",V$,c(L.plant_code),1)])])],44,F$))),128))],512)],4),e("div",{class:"flex items-center justify-center gap-3 mt-6"},[e("button",{onClick:oe,class:"px-4 py-2 rounded-xl text-xs font-medium text-gray-300 bg-gray-800 hover:bg-gray-700 border border-gray-700 transition-colors"}," Auto-distribute evenly "),E[23]||(E[23]=e("span",{class:"text-[10px] text-gray-600"},"Drag plants to fine-tune positions",-1))])]))],64)):j("",!0),g.value===7?(a(),l(Q,{key:6},[E[29]||(E[29]=e("div",{class:"mb-8"},[e("h2",{class:"text-3xl font-bold text-white mb-3"},"Review & Create"),e("p",{class:"text-lg text-gray-400"},"Check everything looks good before saving.")],-1)),e("div",U$,[e("div",z$,[e("div",H$,[e("div",G$,c(p.value),1),e("div",null,[e("h3",W$,c(x.value.name),1),e("p",q$,c(x.value.room_type),1)])]),x.value.description?(a(),l("div",K$,c(x.value.description),1)):j("",!0),e("div",Y$,[e("div",Z$,[E[25]||(E[25]=e("p",{class:"text-[10px] text-gray-500"},"Dimensions",-1)),e("p",X$,c(x.value.width)+"x"+c(x.value.depth)+"x"+c(x.value.height)+"cm",1)]),e("div",Q$,[E[26]||(E[26]=e("p",{class:"text-[10px] text-gray-500"},"Devices",-1)),e("p",J$,c(x.value.device_macs.length),1)]),e("div",e7,[E[27]||(E[27]=e("p",{class:"text-[10px] text-gray-500"},"Outlets",-1)),e("p",t7,c(x.value.outlet_ids.length),1)]),e("div",s7,[E[28]||(E[28]=e("p",{class:"text-[10px] text-gray-500"},"Plants",-1)),e("p",n7,c(x.value.plant_ids.length),1)])])])])],64)):j("",!0)])]),e("div",o7,[e("div",r7,[g.value>1?(a(),l("button",{key:0,onClick:E[6]||(E[6]=L=>g.value--),class:"px-5 py-2.5 rounded-xl text-sm text-gray-400 hover:text-white hover:bg-gray-800 transition-colors"}," Back ")):(a(),l("div",a7)),e("button",{onClick:we,disabled:!T.value||f.value,class:V(["px-6 py-2.5 rounded-xl text-sm font-medium text-white transition-all disabled:opacity-50 disabled:cursor-not-allowed",g.value===Rs?"bg-gradient-to-r from-teal-600 to-cyan-500 hover:from-teal-500 hover:to-cyan-400 shadow-lg shadow-teal-500/25":"bg-gray-700 hover:bg-gray-600"])},c(g.value===Rs?f.value?"Saving...":s.editingRoom?"Save Changes":"Create Room":"Next"),11,l7)])])]))}}),d7=Object.assign(i7,{__name:"LabRoomWizard"}),c7={class:"h-full flex flex-col"},u7={class:"flex-shrink-0 p-4 pb-2"},p7={class:"flex items-center justify-between gap-3"},g7={class:"flex items-center gap-3 min-w-0"},f7={class:"w-8 h-8 rounded-lg bg-gradient-to-br from-teal-500 to-cyan-600 flex items-center justify-center flex-shrink-0"},m7={key:0,class:"relative min-w-0"},h7={class:"text-xl"},b7={class:"text-lg font-bold text-white truncate"},v7={key:0,class:"absolute top-full left-0 mt-1 z-20 w-64 py-1 bg-gray-800 border border-gray-700 rounded-xl shadow-2xl"},x7=["onClick"],y7={class:"text-lg"},_7={class:"flex-1 min-w-0"},w7={class:"text-sm font-medium text-white truncate"},k7={class:"text-[10px] text-gray-500"},$7={key:1,class:"flex items-center gap-2 min-w-0"},C7={class:"text-xl"},S7={class:"text-lg font-bold text-white truncate"},P7={key:2,class:"text-lg font-bold text-white"},E7={class:"flex items-center gap-2 flex-shrink-0"},T7={class:"flex-1 overflow-hidden"},A7={key:0,class:"h-full flex flex-col items-center justify-center p-6"},D7={key:1,class:"h-full relative overflow-hidden"},M7={class:"absolute top-3 left-3 z-10"},O7={class:"flex items-center gap-2 px-3 py-1.5 rounded-xl bg-gray-900/60 backdrop-blur-xl border border-gray-700/30 shadow-lg"},L7={class:"text-xs font-bold tracking-widest uppercase text-cyan-400/70"},j7={key:0,class:"text-[10px] text-gray-500 font-mono"},I7={class:"absolute top-3 right-3 z-10"},R7={class:"absolute bottom-4 left-1/2 -translate-x-1/2 z-10"},F7={key:0,class:"absolute bottom-4 right-4 z-10"},N7={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm"},B7={class:"bg-gray-800 rounded-2xl border border-gray-700 p-6 max-w-md w-full shadow-2xl"},V7={class:"text-sm text-gray-400 mb-6"},U7={class:"text-white"},z7={class:"flex justify-end gap-3"},H7=Pe({__name:"LabRooms",setup(s){const n=rt(),r=Pl(),o=Sl(),i=Sn(),d=W(!1),g=W(null),f=W(null),m=W(!1),b=W(!0),x=U(()=>n.rooms),_=U(()=>n.currentRoom?n.currentRoom:x.value.length===1?x.value[0]:null),C=U(()=>_.value?.device_macs?.length?r.allDevices.filter(u=>_.value.device_macs.includes(u.mac)):[]),k=U(()=>_.value?.active_plant_ids?.length?n.plants.filter(u=>_.value.active_plant_ids.includes(u.id)):[]),p=U(()=>{const u=o.current,v=o.soil;return{temp:u?.temp??null,humi:u?.humi??null,vpd:u?.vpd??null,co2:u?.co2??null,temp_soil:v?.temp_soil??null,humi_soil:v?.humi_soil??null,ec_soil:v?.ec_soil??null}}),T=U(()=>i.states||{}),M=U(()=>({tent:"TENT",room:"ROOM",greenhouse:"GREENHOUSE",outdoor:"OUTDOOR",closet:"CLOSET",custom:"CUSTOM"})[_.value?.room_type||"tent"]||"ROOM");ot(()=>{n.fetchRooms(),i.fetchWattage(),o.fetchSoilSensors();try{const u=document.createElement("canvas");b.value=!!(u.getContext("webgl2")||u.getContext("webgl"))}catch{b.value=!1}});function P(u){n.selectRoom(u),m.value=!1}function w(u){return{tent:"⛺",room:"🏠",greenhouse:"🌿",outdoor:"☀️",closet:"🚪",custom:"🔧"}[u]||"🏠"}function $(u){const v={active:"bg-green-500/20 text-green-400",inactive:"bg-gray-500/20 text-gray-400",setup:"bg-blue-500/20 text-blue-400",harvesting:"bg-amber-500/20 text-amber-400"};return(v[u]||v.inactive)??""}function S(u){g.value=u,d.value=!0}function A(){d.value=!1,g.value=null}function y(){A(),n.fetchRooms()}async function h(){if(f.value)try{await n.deleteRoom(f.value.id),f.value=null}catch{}}return(u,v)=>{const D=H3,z=Dk,G=Cl,B=Gk,O=k6,R=z6,X=d7;return a(),l("div",c7,[e("div",u7,[e("div",p7,[e("div",g7,[e("div",f7,[I(t(nr),{class:"w-4 h-4 text-white"})]),t(x).length>1?(a(),l("div",m7,[e("button",{onClick:v[0]||(v[0]=oe=>m.value=!t(m)),class:"flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-gray-800/60 transition-colors"},[e("span",h7,c(w(t(_)?.room_type||"tent")),1),e("span",b7,c(t(_)?.name||"Select Room"),1),I(t(Gt),{class:"w-4 h-4 text-gray-400 flex-shrink-0"})]),I(Ke,{"enter-active-class":"transition-all duration-150","enter-from-class":"opacity-0 -translate-y-1","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition-all duration-100","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:je(()=>[t(m)?(a(),l("div",v7,[(a(!0),l(Q,null,le(t(x),oe=>(a(),l("button",{key:oe.id,onClick:we=>P(oe),class:V(["w-full flex items-center gap-3 px-4 py-2.5 text-left hover:bg-gray-700/60 transition-colors",oe.id===t(_)?.id?"bg-teal-500/10":""])},[e("span",y7,c(w(oe.room_type)),1),e("div",_7,[e("p",w7,c(oe.name),1),e("p",k7,c((oe.device_macs||[]).length)+" devices · "+c((oe.active_plant_ids||[]).length)+" plants",1)]),e("span",{class:V(["w-2 h-2 rounded-full flex-shrink-0",oe.status==="active"?"bg-green-400":"bg-gray-600"])},null,2)],10,x7))),128))])):j("",!0)]),_:1})])):t(_)?(a(),l("div",$7,[e("span",C7,c(w(t(_).room_type)),1),e("h2",S7,c(t(_).name),1)])):(a(),l("h2",P7,"Grow Rooms"))]),e("div",E7,[t(_)?(a(),l(Q,{key:0},[e("button",{onClick:v[1]||(v[1]=oe=>S(t(_))),class:"p-2 rounded-lg hover:bg-gray-800 text-gray-400 hover:text-white transition-colors",title:"Edit Room"},[I(t(_s),{class:"w-4 h-4"})]),e("button",{onClick:v[2]||(v[2]=oe=>f.value=t(_)),class:"p-2 rounded-lg hover:bg-red-500/20 text-gray-400 hover:text-red-400 transition-colors",title:"Delete Room"},[I(t(Tt),{class:"w-4 h-4"})])],64)):j("",!0),e("button",{onClick:v[3]||(v[3]=oe=>d.value=!0),class:"flex items-center gap-1.5 px-3 py-2 rounded-xl bg-gradient-to-r from-teal-600 to-cyan-500 hover:from-teal-500 hover:to-cyan-400 text-white text-xs font-medium shadow-lg shadow-teal-500/25 transition-all hover:shadow-teal-500/40"},[I(t(st),{class:"w-3.5 h-3.5"}),v[7]||(v[7]=e("span",{class:"hidden sm:inline"},"New Room",-1))])])])]),e("div",T7,[t(x).length===0?(a(),l("div",A7,[v[9]||(v[9]=yt('<div class="w-24 h-24 rounded-3xl bg-gradient-to-br from-teal-500/10 to-cyan-500/10 border border-teal-500/20 flex items-center justify-center mb-6"><svg class="w-12 h-12 text-teal-400/60" viewBox="0 0 64 64" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="8" y="20" width="48" height="36" rx="2"></rect><path d="M8 20 L32 6 L56 20"></path><rect x="24" y="36" width="16" height="20" rx="1"></rect><circle cx="36" cy="46" r="1.5" fill="currentColor"></circle></svg></div><h3 class="text-xl font-bold text-white mb-2">Set Up Your Grow Space</h3><p class="text-sm text-gray-400 text-center max-w-sm mb-6"> Create a virtual room to organize devices, sensors, outlets, and plants in one visual dashboard. </p>',3)),e("button",{onClick:v[4]||(v[4]=oe=>d.value=!0),class:"flex items-center gap-2 px-6 py-3 rounded-xl bg-gradient-to-r from-teal-600 to-cyan-500 text-white font-medium shadow-lg shadow-teal-500/25 hover:shadow-teal-500/40 transition-all hover:scale-105"},[I(t(st),{class:"w-5 h-5"}),v[8]||(v[8]=ce(" Create First Room ",-1))])])):t(_)?(a(),l("div",D7,[I(G,null,{fallback:je(()=>[...v[10]||(v[10]=[e("div",{class:"absolute inset-0 flex items-center justify-center bg-gray-950"},[e("div",{class:"text-center"},[e("div",{class:"w-8 h-8 border-2 border-teal-400 border-t-transparent rounded-full animate-spin mx-auto mb-3"}),e("span",{class:"text-xs text-gray-500"},"Loading 3D scene...")])],-1)])]),default:je(()=>[t(b)?(a(),pe(D,{key:0,room:t(_),devices:t(C),plants:t(k),"sensor-data":t(p),"outlet-states":t(T),"show-grid":!1,"show-labels":!0,class:"absolute inset-0"},null,8,["room","devices","plants","sensor-data","outlet-states"])):(a(),pe(z,{key:1,room:t(_),devices:t(C),plants:t(k),"sensor-data":t(p),"outlet-states":t(T),"show-grid":!1,"show-labels":!0,class:"absolute inset-0"},null,8,["room","devices","plants","sensor-data","outlet-states"]))]),_:1}),e("div",M7,[e("div",O7,[e("span",L7,c(t(M)),1),t(_).dimensions_cm?(a(),l("span",j7,c(t(_).dimensions_cm.width)+"×"+c(t(_).dimensions_cm.depth)+"×"+c(t(_).dimensions_cm.height)+"cm ",1)):j("",!0),e("span",{class:V(["px-1.5 py-0.5 rounded-full text-[8px] font-bold uppercase tracking-wider",$(t(_).status)])},c(t(_).status),3)])]),e("div",I7,[I(B,{room:t(_),devices:t(C),"outlet-states":t(T)},null,8,["room","devices","outlet-states"])]),e("div",R7,[I(O,{temp:t(p).temp,humi:t(p).humi,vpd:t(p).vpd,co2:t(p).co2,"temp-soil":t(p).temp_soil,"humi-soil":t(p).humi_soil,"ec-soil":t(p).ec_soil},null,8,["temp","humi","vpd","co2","temp-soil","humi-soil","ec-soil"])]),t(k).length>0?(a(),l("div",F7,[I(R,{plants:t(k)},null,8,["plants"])])):j("",!0)])):j("",!0)]),t(d)?(a(),pe(X,{key:0,"editing-room":t(g),onClose:A,onSaved:y},null,8,["editing-room"])):j("",!0),(a(),pe(Qe,{to:"body"},[I(Ke,{"enter-active-class":"transition-all duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-all duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:je(()=>[t(f)?(a(),l("div",N7,[e("div",B7,[v[13]||(v[13]=e("h3",{class:"text-lg font-bold text-white mb-2"},"Delete Room",-1)),e("p",V7,[v[11]||(v[11]=ce(" Are you sure you want to delete ",-1)),e("strong",U7,c(t(f).name),1),v[12]||(v[12]=ce("? ",-1))]),e("div",z7,[e("button",{onClick:v[5]||(v[5]=oe=>f.value=null),class:"px-4 py-2 rounded-xl text-sm text-gray-400 hover:text-white hover:bg-gray-700 transition-colors"},"Cancel"),e("button",{onClick:h,class:"px-4 py-2 rounded-xl text-sm bg-red-600 hover:bg-red-500 text-white transition-colors"},"Delete")])])])):j("",!0)]),_:1})])),t(m)?(a(),l("div",{key:1,class:"fixed inset-0 z-10",onClick:v[6]||(v[6]=oe=>m.value=!1)})):j("",!0)])}}}),G7=Object.assign(H7,{__name:"LabRooms"});function W7(){const s=W(!1),n=W(""),{getAuthHeaders:r}=Ue();async function o(d,g){s.value=!0,n.value="";try{const f=await $fetch(`/api/cameras/${d}/command`,{method:"POST",headers:r(),body:{path:g}});return f.success||(n.value=f.body||"Command failed"),{success:f.success,body:f.body}}catch(f){return n.value=f.message||"Request failed",{success:!1,body:n.value}}finally{s.value=!1}}async function i(d){try{const g=await o(d,"/status.json?show_avail=1");if(g.success&&g.body)return JSON.parse(g.body)}catch{}return null}return{sending:s,error:n,sendCommand:o,fetchSettings:i}}const q7={class:"p-4 space-y-4"},K7={key:0,class:"flex items-center justify-center py-6"},Y7={key:1,class:"flex flex-col items-center gap-2 py-6 text-center"},Z7={class:"flex flex-wrap gap-2"},X7=["onClick","disabled","title"],Q7={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},J7={class:"space-y-4"},e8={class:"rounded-xl bg-gray-800/40 p-3 space-y-2"},t8=["value"],s8={key:0,class:"space-y-1"},n8={class:"flex items-center justify-between"},o8={class:"text-base text-gray-400 font-medium"},r8=["max"],a8={class:"rounded-xl bg-gray-800/40 p-3 space-y-2"},l8={class:"flex items-center justify-between"},i8={class:"text-base text-teal-400 font-medium"},d8=["max"],c8={class:"rounded-xl bg-gray-800/40 p-3 space-y-2"},u8={class:"flex items-center justify-between"},p8={class:"text-base text-teal-400 font-medium"},g8={key:0,class:"rounded-xl bg-indigo-900/20 border border-indigo-500/20 p-3 space-y-2"},f8={class:"grid grid-cols-2 gap-3"},m8={class:"flex items-center gap-2"},h8={class:"text-base text-gray-400 w-12 text-right"},b8={class:"flex items-center gap-2"},v8={class:"text-base text-gray-400 w-12 text-right"},x8={class:"space-y-4"},y8={class:"rounded-xl bg-gray-800/40 p-3 space-y-2"},_8={class:"grid grid-cols-2 gap-2"},w8=["value"],k8=["value"],$8={class:"rounded-xl bg-gray-800/40 p-3 space-y-2"},C8={class:"flex flex-wrap gap-1"},S8=["onClick","disabled"],P8={class:"flex flex-wrap gap-1"},E8=["onClick","disabled"],T8={class:"rounded-xl bg-gray-800/40 p-3 space-y-2"},A8={class:"grid grid-cols-2 gap-2"},D8=["value"],M8=["value"],O8={class:"rounded-xl bg-gray-800/40 p-3"},L8={class:"grid grid-cols-2 gap-2"},j8=["value"],I8=["value"],R8={class:"rounded-xl bg-gray-800/40 p-3 space-y-2"},F8={class:"flex items-center justify-between"},N8=["disabled"],B8={key:0,class:"space-y-2"},V8={class:"flex items-center gap-2"},U8=["min","max"],z8={class:"text-base text-gray-400 w-12 text-right"},H8={key:0,class:"flex flex-wrap items-center gap-4 p-3 rounded-xl bg-gray-900/50 text-base text-gray-500"},G8={key:0},W8={key:1,class:"flex items-center gap-2 p-3 rounded-lg bg-red-500/10 border border-red-500/20"},q8={class:"text-base text-red-400"},K8=Pe({__name:"LabCameraControls",props:{cameraId:{}},setup(s){const n=s,{sending:r,error:o,sendCommand:i,fetchSettings:d}=W7(),g=W(!0),f=W(!1),m=W(!1),b=W(!1),x=W(1),_=W(2),C=W(!1),k=W(!1),p=W(100),T=W("1920x1080"),M=W("1920x1080"),P=W("landscape"),w=W("none"),$=W("auto"),S=W(!1),A=W(100),y=W(100),h=W(3200),u=W("auto"),v=W("continuous-video"),D=W("none"),z=W("auto"),G=W(0),B=W(["100"]),O=W(0),R=W([]),X=W(["auto","continuous-video"]),oe=W(["1920x1080"]),we=W(["1920x1080"]),re=W(["landscape","portrait"]),E=W(["auto"]),L=W(["auto"]),F=W(["none"]),be=W(["auto"]),ie=W(null),de=[{value:"none",label:"Normal"},{value:"mirror",label:"Mirror"},{value:"flip",label:"Flip"},{value:"mirror,flip",label:"Both"}],te=U(()=>[{key:"torch",label:"Flash",icon:Ys,title:"Toggle flashlight/LED",active:()=>m.value,activeClass:"bg-yellow-500/20 text-yellow-400 border border-yellow-500/30",toggle:()=>{m.value=!m.value,H(m.value?"/enabletorch":"/disabletorch")}},{key:"nv",label:"Night Vision",icon:Qc,title:"Software night vision — amplifies low-light image",active:()=>b.value,activeClass:"bg-indigo-500/20 text-indigo-400 border border-indigo-500/30",toggle:()=>{b.value=!b.value,H("/settings/night_vision?set="+(b.value?"on":"off"))}},{key:"overlay",label:"Overlay",icon:bi,title:"Show data overlay on video stream (not on photos)",active:()=>C.value,activeClass:"bg-teal-500/20 text-teal-400 border border-teal-500/30",toggle:()=>{C.value=!C.value,H("/settings/overlay?set="+(C.value?"on":"off"))}},{key:"ffc",label:"Front Camera",icon:ut,title:"Switch to front-facing camera",active:()=>k.value,activeClass:"bg-teal-500/20 text-teal-400 border border-teal-500/30",toggle:()=>{k.value=!k.value,H("/settings/ffc?set="+(k.value?"on":"off"))}}]),K=U(()=>{const q=B.value[G.value];return q?(parseInt(q)/100).toFixed(1)+"x":"1.0x"}),ue=U(()=>{const q=R.value.length-1-O.value,ee=R.value[q];if(!ee)return"?";const ne=parseFloat(ee);return ne===0?"Infinity":ne<=1?`~${(1/ne).toFixed(1)}m`:ne<=5?`~${(100/ne).toFixed(0)}cm`:`~${(100/ne).toFixed(0)}cm (macro)`});function N(q){return q.replace(/[-_]/g," ").replace(/\b\w/g,ee=>ee.toUpperCase())}async function H(q){await i(n.cameraId,q)}async function Y(){await H("/ptz?zoom="+G.value)}async function me(){const q=R.value.length-1-O.value,ee=R.value[q];ee&&await H("/settings/focus_distance?set="+ee)}async function J(){S.value=!S.value,await H("/settings/manual_sensor?set="+(S.value?"on":"off"))}async function Z(){g.value=!0,f.value=!1;try{const q=await d(n.cameraId);if(q?.curvals){const ee=q.curvals,ne=q.avail||{};if(b.value=ee.night_vision==="on",x.value=parseFloat(ee.night_vision_gain)||1,_.value=parseInt(ee.night_vision_average)||2,C.value=ee.overlay==="on",m.value=ee.torch==="on"||ee.flashmode==="torch",k.value=ee.ffc==="on",p.value=parseInt(ee.quality)||100,S.value=ee.manual_sensor==="on",A.value=parseInt(ee.iso)||100,ee.video_size&&(T.value=ee.video_size),ee.photo_size&&(M.value=ee.photo_size),ee.orientation&&(P.value=ee.orientation),ee.mirror_flip&&(w.value=ee.mirror_flip),ee.whitebalance&&($.value=ee.whitebalance),ee.scenemode&&(u.value=ee.scenemode),ee.focusmode&&(v.value=ee.focusmode),ee.coloreffect&&(D.value=ee.coloreffect),ee.antibanding&&(z.value=ee.antibanding),ne.zoom?.length){B.value=ne.zoom;const Ce=ne.zoom.indexOf(String(ee.zoom||"100"));G.value=Ce>=0?Ce:0}if(ne.focus_distance?.length){R.value=ne.focus_distance;const Ce=String(ee.focus_distance||"0.00"),Ee=ne.focus_distance.indexOf(Ce);O.value=Ee>=0?ne.focus_distance.length-1-Ee:0}if(ne.focusmode?.length&&(X.value=ne.focusmode),ne.video_size?.length&&(oe.value=ne.video_size),ne.photo_size?.length&&(we.value=ne.photo_size),ne.orientation?.length&&(re.value=ne.orientation),ne.whitebalance?.length&&(E.value=ne.whitebalance),ne.scenemode?.length&&(L.value=ne.scenemode),ne.coloreffect?.length&&(F.value=ne.coloreffect),ne.antibanding?.length&&(be.value=ne.antibanding),ne.iso?.length){const Ce=ne.iso.map(Ee=>parseInt(Ee)).filter(Ee=>!isNaN(Ee));Ce.length&&(y.value=Math.min(...Ce),h.value=Math.max(...Ce))}ie.value={focalLength:ee.focal_length||"?",aperture:ee.aperture||"?",iso:ee.iso||"?",battery:q.deviceInfo?.batteryPercent??-1},f.value=!0}}catch{}finally{g.value=!1}}return ot(Z),(q,ee)=>(a(),l("div",q7,[t(g)?(a(),l("div",K7,[...ee[24]||(ee[24]=[yt('<div class="flex items-center gap-2 text-gray-400"><svg class="w-5 h-5 animate-spin" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"></path></svg><span class="text-base">Loading camera settings...</span></div>',1)])])):t(f)?(a(),l(Q,{key:2},[e("div",Z7,[(a(!0),l(Q,null,le(t(te),ne=>(a(),l("button",{key:ne.key,onClick:Ce=>ne.toggle(),disabled:t(r),class:V(["flex items-center gap-1.5 px-3 py-2 rounded-lg text-base font-medium transition-all",ne.active()?ne.activeClass:"bg-gray-700/50 text-gray-300 hover:bg-gray-600/50 hover:text-white border border-transparent"]),title:ne.title},[(a(),pe(_t(ne.icon),{class:"w-4 h-4"})),ce(" "+c(ne.label),1)],10,X7))),128))]),e("div",Q7,[e("div",J7,[e("div",e8,[ee[29]||(ee[29]=e("h4",{class:"text-base font-medium text-gray-300"},"Focus",-1)),ye(e("select",{"onUpdate:modelValue":ee[0]||(ee[0]=ne=>We(v)?v.value=ne:null),onChange:ee[1]||(ee[1]=ne=>H("/settings/focusmode?set="+t(v))),class:"w-full bg-gray-700 border-0 rounded-lg text-base text-white px-3 py-2 focus:ring-teal-500"},[(a(!0),l(Q,null,le(t(X),ne=>(a(),l("option",{key:ne,value:ne},c(N(ne)),9,t8))),128))],544),[[dt,t(v)]]),t(R).length>0?(a(),l("div",s8,[e("div",n8,[ee[26]||(ee[26]=e("span",{class:"text-base text-gray-500"},"Close",-1)),e("span",o8,c(t(ue)),1),ee[27]||(ee[27]=e("span",{class:"text-base text-gray-500"},"Far",-1))]),ye(e("input",{type:"range",min:0,max:t(R).length-1,"onUpdate:modelValue":ee[2]||(ee[2]=ne=>We(O)?O.value=ne:null),onChange:me,class:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-teal-500"},null,40,r8),[[$e,t(O),void 0,{number:!0}]]),ee[28]||(ee[28]=e("p",{class:"text-base text-gray-600"},"For timelapse: use Off mode + set distance manually",-1))])):j("",!0)]),e("div",a8,[e("div",l8,[ee[30]||(ee[30]=e("h4",{class:"text-base font-medium text-gray-300"},"Zoom",-1)),e("span",i8,c(t(K)),1)]),ye(e("input",{type:"range",min:0,max:t(B).length-1,"onUpdate:modelValue":ee[3]||(ee[3]=ne=>We(G)?G.value=ne:null),onChange:Y,class:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-teal-500"},null,40,d8),[[$e,t(G),void 0,{number:!0}]])]),e("div",c8,[e("div",u8,[ee[31]||(ee[31]=e("h4",{class:"text-base font-medium text-gray-300"},"Quality",-1)),e("span",p8,c(t(p))+"%",1)]),ye(e("input",{type:"range",min:"1",max:"100","onUpdate:modelValue":ee[4]||(ee[4]=ne=>We(p)?p.value=ne:null),onChange:ee[5]||(ee[5]=ne=>H("/settings/quality?set="+t(p))),class:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-teal-500"},null,544),[[$e,t(p),void 0,{number:!0}]])]),t(b)?(a(),l("div",g8,[ee[34]||(ee[34]=e("h4",{class:"text-base font-medium text-indigo-400"},"Night Vision",-1)),e("div",f8,[e("div",null,[ee[32]||(ee[32]=e("span",{class:"text-base text-gray-500"},"Gain",-1)),e("div",m8,[ye(e("input",{type:"range",min:"0.25",max:"60",step:"0.25","onUpdate:modelValue":ee[6]||(ee[6]=ne=>We(x)?x.value=ne:null),onChange:ee[7]||(ee[7]=ne=>H("/settings/night_vision_gain?set="+t(x).toFixed(2))),class:"flex-1 h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-indigo-500"},null,544),[[$e,t(x),void 0,{number:!0}]]),e("span",h8,c(t(x).toFixed(1))+"x",1)])]),e("div",null,[ee[33]||(ee[33]=e("span",{class:"text-base text-gray-500"},"Average",-1)),e("div",b8,[ye(e("input",{type:"range",min:"1",max:"20","onUpdate:modelValue":ee[8]||(ee[8]=ne=>We(_)?_.value=ne:null),onChange:ee[9]||(ee[9]=ne=>H("/settings/night_vision_average?set="+t(_))),class:"flex-1 h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-indigo-500"},null,544),[[$e,t(_),void 0,{number:!0}]]),e("span",v8,c(t(_))+"f",1)])])])])):j("",!0)]),e("div",x8,[e("div",y8,[ee[37]||(ee[37]=e("h4",{class:"text-base font-medium text-gray-300"},"Resolution",-1)),e("div",_8,[e("div",null,[ee[35]||(ee[35]=e("label",{class:"text-base text-gray-500 mb-1 block"},"Video",-1)),ye(e("select",{"onUpdate:modelValue":ee[10]||(ee[10]=ne=>We(T)?T.value=ne:null),onChange:ee[11]||(ee[11]=ne=>H("/settings/video_size?set="+t(T))),class:"w-full bg-gray-700 border-0 rounded-lg text-base text-white px-3 py-2 focus:ring-teal-500"},[(a(!0),l(Q,null,le(t(oe),ne=>(a(),l("option",{key:"v"+ne,value:ne},c(ne),9,w8))),128))],544),[[dt,t(T)]])]),e("div",null,[ee[36]||(ee[36]=e("label",{class:"text-base text-gray-500 mb-1 block"},"Photo",-1)),ye(e("select",{"onUpdate:modelValue":ee[12]||(ee[12]=ne=>We(M)?M.value=ne:null),onChange:ee[13]||(ee[13]=ne=>H("/settings/photo_size?set="+t(M))),class:"w-full bg-gray-700 border-0 rounded-lg text-base text-white px-3 py-2 focus:ring-teal-500"},[(a(!0),l(Q,null,le(t(we),ne=>(a(),l("option",{key:"p"+ne,value:ne},c(ne),9,k8))),128))],544),[[dt,t(M)]])])])]),e("div",$8,[ee[38]||(ee[38]=e("h4",{class:"text-base font-medium text-gray-300"},"Orientation",-1)),e("div",C8,[(a(!0),l(Q,null,le(t(re),ne=>(a(),l("button",{key:ne,onClick:Ce=>{P.value=ne,H("/settings/orientation?set="+ne)},disabled:t(r),class:V(["px-2.5 py-1.5 rounded-lg text-base font-medium transition-all",t(P)===ne?"bg-teal-500/20 text-teal-400":"bg-gray-700/50 text-gray-400 hover:text-white"])},c(N(ne)),11,S8))),128))]),e("div",P8,[(a(),l(Q,null,le(de,ne=>e("button",{key:ne.value,onClick:Ce=>{w.value=ne.value,H("/settings/mirror_flip?set="+ne.value)},disabled:t(r),class:V(["px-2.5 py-1.5 rounded-lg text-base font-medium transition-all",t(w)===ne.value?"bg-teal-500/20 text-teal-400":"bg-gray-700/50 text-gray-400 hover:text-white"])},c(ne.label),11,E8)),64))])]),e("div",T8,[e("div",A8,[e("div",null,[ee[39]||(ee[39]=e("label",{class:"text-base text-gray-300 font-medium mb-1 block"},"White Balance",-1)),ye(e("select",{"onUpdate:modelValue":ee[14]||(ee[14]=ne=>We($)?$.value=ne:null),onChange:ee[15]||(ee[15]=ne=>H("/settings/whitebalance?set="+t($))),class:"w-full bg-gray-700 border-0 rounded-lg text-base text-white px-3 py-2 focus:ring-teal-500"},[(a(!0),l(Q,null,le(t(E),ne=>(a(),l("option",{key:ne,value:ne},c(N(ne)),9,D8))),128))],544),[[dt,t($)]])]),e("div",null,[ee[40]||(ee[40]=e("label",{class:"text-base text-gray-300 font-medium mb-1 block"},"Scene Mode",-1)),ye(e("select",{"onUpdate:modelValue":ee[16]||(ee[16]=ne=>We(u)?u.value=ne:null),onChange:ee[17]||(ee[17]=ne=>H("/settings/scenemode?set="+t(u))),class:"w-full bg-gray-700 border-0 rounded-lg text-base text-white px-3 py-2 focus:ring-teal-500"},[(a(!0),l(Q,null,le(t(L),ne=>(a(),l("option",{key:ne,value:ne},c(N(ne)),9,M8))),128))],544),[[dt,t(u)]])])])]),e("div",O8,[e("div",L8,[e("div",null,[ee[41]||(ee[41]=e("label",{class:"text-base text-gray-300 font-medium mb-1 block"},"Color Effect",-1)),ye(e("select",{"onUpdate:modelValue":ee[18]||(ee[18]=ne=>We(D)?D.value=ne:null),onChange:ee[19]||(ee[19]=ne=>H("/settings/coloreffect?set="+t(D))),class:"w-full bg-gray-700 border-0 rounded-lg text-base text-white px-3 py-2 focus:ring-teal-500"},[(a(!0),l(Q,null,le(t(F),ne=>(a(),l("option",{key:ne,value:ne},c(N(ne)),9,j8))),128))],544),[[dt,t(D)]])]),e("div",null,[ee[42]||(ee[42]=e("label",{class:"text-base text-gray-300 font-medium mb-1 block"},"Antibanding",-1)),ye(e("select",{"onUpdate:modelValue":ee[20]||(ee[20]=ne=>We(z)?z.value=ne:null),onChange:ee[21]||(ee[21]=ne=>H("/settings/antibanding?set="+t(z))),class:"w-full bg-gray-700 border-0 rounded-lg text-base text-white px-3 py-2 focus:ring-teal-500"},[(a(!0),l(Q,null,le(t(be),ne=>(a(),l("option",{key:ne,value:ne},c(N(ne)),9,I8))),128))],544),[[dt,t(z)]])])])]),e("div",R8,[e("div",F8,[ee[43]||(ee[43]=e("h4",{class:"text-base font-medium text-gray-300"},"Manual Sensor",-1)),e("button",{onClick:J,disabled:t(r),class:V(["w-10 h-6 rounded-full transition-colors relative",t(S)?"bg-orange-500":"bg-gray-600"])},[e("span",{class:V(["absolute top-0.5 w-5 h-5 rounded-full bg-white shadow transition-transform",t(S)?"left-[18px]":"left-0.5"])},null,2)],10,N8)]),t(S)?(a(),l("div",B8,[e("div",V8,[ee[44]||(ee[44]=e("span",{class:"text-base text-gray-400 w-10 shrink-0"},"ISO",-1)),ye(e("input",{type:"range",min:t(y),max:t(h),step:100,"onUpdate:modelValue":ee[22]||(ee[22]=ne=>We(A)?A.value=ne:null),onChange:ee[23]||(ee[23]=ne=>H("/settings/iso?set="+t(A))),class:"flex-1 h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-orange-500"},null,40,U8),[[$e,t(A),void 0,{number:!0}]]),e("span",z8,c(t(A)),1)])])):j("",!0)])])]),t(ie)?(a(),l("div",H8,[e("span",null,"f/"+c(t(ie).aperture)+" · "+c(t(ie).focalLength)+"mm",1),e("span",null,"ISO "+c(t(ie).iso),1),t(ie).battery>=0?(a(),l("span",G8,"Battery "+c(t(ie).battery)+"%",1)):j("",!0)])):j("",!0),t(o)?(a(),l("div",W8,[I(t(hs),{class:"w-4 h-4 text-red-400 shrink-0"}),e("span",q8,c(t(o)),1)])):j("",!0)],64)):(a(),l("div",Y7,[I(t(hs),{class:"w-8 h-8 text-yellow-500"}),ee[25]||(ee[25]=e("p",{class:"text-base text-gray-300"},"Cannot reach camera control API",-1)),e("button",{onClick:Z,class:"mt-2 px-4 py-2 rounded-lg bg-gray-700 text-base text-white hover:bg-gray-600 transition-colors"},"Retry")]))]))}}),Y8=Object.assign(K8,{__name:"LabCameraControls"}),Z8={class:"p-4 space-y-4"},X8={class:"flex items-center justify-between"},Q8={key:0,class:"text-base text-gray-400 text-center py-4"},J8={key:1,class:"text-center py-6"},eC={class:"flex items-center justify-between"},tC={class:"flex items-center gap-3"},sC=["onClick"],nC={class:"text-base font-medium text-white"},oC={key:0,class:"text-base text-gray-400 ml-2"},rC={key:1,class:"text-base text-gray-500 ml-2"},aC={class:"flex items-center gap-2"},lC=["onClick"],iC=["onClick"],dC={class:"flex items-center gap-1"},cC={key:0,class:"rounded-xl bg-gray-800/80 border border-teal-500/30 p-4 space-y-4"},uC={class:"text-base font-semibold text-white"},pC={class:"flex items-center gap-2"},gC={class:"flex items-center gap-1"},fC=["onClick"],mC={class:"flex items-center gap-2 pt-2"},hC=["disabled"],bC=Pe({__name:"LabCameraSchedule",props:{cameraId:{}},setup(s){const n=s,{getAuthHeaders:r}=Ue(),o=["mon","tue","wed","thu","fri","sat","sun"],i=W(!0),d=W(!1),g=W(!1),f=W(null),m=W([]),b=W({interval_minutes:30,start_time:"",end_time:"",days_active:"all"});function x(A){if(A<60)return`${A} min`;if(A===60)return"1 hour";if(A<1440){const y=Math.floor(A/60),h=A%60;return h>0?`${y}h ${h}m`:`${y} hours`}return"24 hours"}function _(A,y){return A.days_active==="all"?!0:A.days_active.split(",").map(h=>h.trim().toLowerCase()).includes(y)}function C(A){return b.value.days_active==="all"?!0:b.value.days_active.split(",").includes(A)}function k(){b.value.days_active="all"}function p(A){let y=b.value.days_active==="all"?[...o]:b.value.days_active.split(",").filter(h=>h);y.includes(A)?y=y.filter(h=>h!==A):y.push(A),y.length===0||y.length===7?b.value.days_active="all":b.value.days_active=y.join(",")}function T(A){f.value=A.id,b.value={interval_minutes:A.interval_minutes,start_time:A.start_time,end_time:A.end_time,days_active:A.days_active},g.value=!0}function M(){g.value=!1,f.value=null,b.value={interval_minutes:30,start_time:"",end_time:"",days_active:"all"}}async function P(){d.value=!0;try{if(f.value){const A=await $fetch(`/api/cameras/schedules/${f.value}`,{method:"PUT",headers:r(),body:b.value});if(A.success){const y=m.value.findIndex(h=>h.id===f.value);y!==-1&&(m.value[y]=A.schedule)}}else{const A=await $fetch(`/api/cameras/${n.cameraId}/schedules`,{method:"POST",headers:r(),body:b.value});A.success&&m.value.push(A.schedule)}M()}catch{}finally{d.value=!1}}async function w(A){try{const y=await $fetch(`/api/cameras/schedules/${A.id}`,{method:"PUT",headers:r(),body:{enabled:!A.enabled}});if(y.success){const h=m.value.findIndex(u=>u.id===A.id);h!==-1&&(m.value[h]=y.schedule)}}catch{}}async function $(A){try{await $fetch(`/api/cameras/schedules/${A}`,{method:"DELETE",headers:r()}),m.value=m.value.filter(y=>y.id!==A)}catch{}}async function S(){i.value=!0;try{const A=await $fetch(`/api/cameras/${n.cameraId}/schedules`,{headers:r()});m.value=A.schedules||[]}catch{}finally{i.value=!1}}return ot(S),(A,y)=>(a(),l("div",Z8,[e("div",X8,[y[6]||(y[6]=e("h3",{class:"text-lg font-semibold text-white"},"Timelapse Schedules",-1)),t(m).length<3?(a(),l("button",{key:0,onClick:y[0]||(y[0]=h=>g.value=!t(g)),class:"flex items-center gap-1.5 px-3 py-2 rounded-lg bg-teal-600/80 text-white text-base font-medium hover:bg-teal-500 transition-colors"},[I(t(st),{class:"w-4 h-4"}),y[5]||(y[5]=e("span",null,"Add",-1))])):j("",!0)]),t(i)?(a(),l("div",Q8,"Loading schedules...")):t(m).length===0&&!t(g)?(a(),l("div",J8,[I(t(ks),{class:"w-10 h-10 text-gray-600 mx-auto mb-2"}),y[7]||(y[7]=e("p",{class:"text-base text-gray-400"},"No timelapse schedules configured",-1)),y[8]||(y[8]=e("p",{class:"text-base text-gray-500 mt-1"},"Create a schedule to automatically capture photos at regular intervals",-1))])):j("",!0),(a(!0),l(Q,null,le(t(m),h=>(a(),l("div",{key:h.id,class:"rounded-xl bg-gray-800/80 border border-gray-700/50 p-3 space-y-2"},[e("div",eC,[e("div",tC,[e("button",{onClick:u=>w(h),class:V(["w-10 h-6 rounded-full transition-colors relative",h.enabled?"bg-teal-500":"bg-gray-600"])},[e("span",{class:V(["absolute top-0.5 w-5 h-5 rounded-full bg-white shadow transition-transform",h.enabled?"left-[18px]":"left-0.5"])},null,2)],10,sC),e("div",null,[e("span",nC," Every "+c(x(h.interval_minutes)),1),h.start_time&&h.end_time?(a(),l("span",oC,c(h.start_time)+" – "+c(h.end_time),1)):(a(),l("span",rC,"24h"))])]),e("div",aC,[e("button",{onClick:u=>T(h),class:"p-1.5 rounded-lg text-gray-400 hover:text-white hover:bg-gray-700/50 transition-colors"},[I(t(On),{class:"w-4 h-4"})],8,lC),e("button",{onClick:u=>$(h.id),class:"p-1.5 rounded-lg text-gray-400 hover:text-red-400 hover:bg-red-500/10 transition-colors"},[I(t(Tt),{class:"w-4 h-4"})],8,iC)])]),e("div",dC,[(a(),l(Q,null,le(o,u=>e("span",{key:u,class:V(["px-2 py-0.5 rounded text-base",_(h,u)?"bg-teal-500/20 text-teal-400":"bg-gray-700/30 text-gray-600"])},c(u.charAt(0).toUpperCase()+u.slice(1,3)),3)),64))])]))),128)),I(Ke,{"enter-active-class":"transition-all duration-200 ease-out","enter-from-class":"opacity-0 translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition-all duration-150 ease-in","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-2"},{default:je(()=>[t(g)?(a(),l("div",cC,[e("h4",uC,c(t(f)?"Edit Schedule":"New Schedule"),1),e("div",null,[y[10]||(y[10]=e("label",{class:"text-base text-gray-400 block mb-1"},"Capture Interval",-1)),ye(e("select",{"onUpdate:modelValue":y[1]||(y[1]=h=>t(b).interval_minutes=h),class:"bg-gray-700/50 text-white text-base rounded-lg px-3 py-2 border border-gray-600/50 focus:border-teal-500 focus:outline-none"},[...y[9]||(y[9]=[e("option",{value:1},"Every 1 minute",-1),e("option",{value:5},"Every 5 minutes",-1),e("option",{value:10},"Every 10 minutes",-1),e("option",{value:15},"Every 15 minutes",-1),e("option",{value:30},"Every 30 minutes",-1),e("option",{value:60},"Every 1 hour",-1),e("option",{value:120},"Every 2 hours",-1),e("option",{value:360},"Every 6 hours",-1),e("option",{value:720},"Every 12 hours",-1),e("option",{value:1440},"Every 24 hours",-1)])],512),[[dt,t(b).interval_minutes]])]),e("div",null,[y[12]||(y[12]=e("label",{class:"text-base text-gray-400 block mb-1"},"Time Window (optional)",-1)),e("div",pC,[ye(e("input",{"onUpdate:modelValue":y[2]||(y[2]=h=>t(b).start_time=h),type:"time",class:"bg-gray-700/50 text-white text-base rounded-lg px-3 py-2 border border-gray-600/50 focus:border-teal-500 focus:outline-none"},null,512),[[$e,t(b).start_time]]),y[11]||(y[11]=e("span",{class:"text-gray-500"},"to",-1)),ye(e("input",{"onUpdate:modelValue":y[3]||(y[3]=h=>t(b).end_time=h),type:"time",class:"bg-gray-700/50 text-white text-base rounded-lg px-3 py-2 border border-gray-600/50 focus:border-teal-500 focus:outline-none"},null,512),[[$e,t(b).end_time]]),t(b).start_time||t(b).end_time?(a(),l("button",{key:0,onClick:y[4]||(y[4]=h=>{t(b).start_time="",t(b).end_time=""}),class:"text-base text-gray-400 hover:text-white transition-colors px-2"}," Clear ")):j("",!0)]),y[13]||(y[13]=e("p",{class:"text-base text-gray-500 mt-1"},"Leave empty to capture 24 hours. Set to photoperiod hours for grow-aligned timelapse.",-1))]),e("div",null,[y[14]||(y[14]=e("label",{class:"text-base text-gray-400 block mb-1"},"Active Days",-1)),e("div",gC,[e("button",{onClick:k,class:V(["px-3 py-1.5 rounded-lg text-base font-medium transition-colors mr-2",t(b).days_active==="all"?"bg-teal-500/20 text-teal-400":"bg-gray-700/50 text-gray-400 hover:text-white"])}," All ",2),(a(),l(Q,null,le(o,h=>e("button",{key:h,onClick:u=>p(h),class:V(["px-2.5 py-1.5 rounded-lg text-base font-medium transition-colors",C(h)?"bg-teal-500/20 text-teal-400":"bg-gray-700/50 text-gray-400 hover:text-white"])},c(h.charAt(0).toUpperCase()+h.slice(1,3)),11,fC)),64))])]),e("div",mC,[e("button",{onClick:P,disabled:t(d),class:"flex items-center gap-1.5 px-4 py-2 rounded-lg bg-teal-600 text-white text-base font-medium hover:bg-teal-500 transition-colors disabled:opacity-50"},c(t(d)?"Saving...":t(f)?"Update":"Create Schedule"),9,hC),e("button",{onClick:M,class:"px-4 py-2 rounded-lg bg-gray-700/50 text-gray-300 text-base hover:bg-gray-600/50 hover:text-white transition-colors"}," Cancel ")])])):j("",!0)]),_:1})]))}}),vC=Object.assign(bC,{__name:"LabCameraSchedule"}),xC={class:"p-4 space-y-4"},yC={key:0,class:"flex items-center justify-center py-4"},_C={class:"flex items-center justify-between"},wC={class:"rounded-xl bg-gray-900/80 border border-gray-700/50 p-4"},kC={class:"relative bg-gray-800 rounded-lg overflow-hidden h-20 flex items-end"},$C={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},CC={class:"space-y-3"},SC={class:"flex items-center justify-between"},PC={key:0},EC={class:"flex items-center justify-between"},TC={class:"flex items-center justify-between"},AC={class:"grid grid-cols-2 gap-2"},DC={key:0,class:"text-base text-gray-500"},MC={class:"space-y-3"},OC={class:"grid grid-cols-2 gap-2"},LC=["onClick"],jC={class:"text-base text-gray-400 mb-1 block"},IC={class:"flex flex-wrap gap-2"},RC=["onClick"],FC=Pe({__name:"LabCameraOverlay",props:{cameraId:{}},setup(s){const n=s,{getAuthHeaders:r}=Ue(),o=W(!0),i=W(""),d=W({enabled:!1,position:"bottom-left",show_date:!0,date_format:"YYYY-MM-DD",show_time:!0,show_day_counter:!1,day_counter_start:"",day_counter_label:"Day",custom_text:"",font_size:36,text_color:"white"}),g=[{value:"top-left",label:"Top Left"},{value:"top-right",label:"Top Right"},{value:"bottom-left",label:"Bottom Left"},{value:"bottom-right",label:"Bottom Right"}],f=[{value:"white",label:"White",hex:"#FFFFFF"},{value:"yellow",label:"Yellow",hex:"#FFDD00"},{value:"green",label:"Green",hex:"#00FF88"},{value:"cyan",label:"Cyan",hex:"#00DDFF"},{value:"red",label:"Red",hex:"#FF4444"}],m=U(()=>({"top-left":"top-1 left-1","top-right":"top-1 right-1","bottom-left":"bottom-1 left-1","bottom-right":"bottom-1 right-1"})[d.value.position]||"bottom-1 left-1"),b=U(()=>f.find(P=>P.value===d.value.text_color)?.hex||"#FFFFFF"),x=U(()=>Math.max(10,Math.round(d.value.font_size*.4))),_=U(()=>{const M=[],P=new Date;if(d.value.custom_text&&M.push(d.value.custom_text),d.value.show_day_counter&&d.value.day_counter_start){const w=new Date(d.value.day_counter_start+"T00:00:00"),$=Math.max(1,Math.floor((P.getTime()-w.getTime())/864e5)+1);M.push(`${d.value.day_counter_label||"Day"} ${$}`)}if(d.value.show_date){const w=P.getFullYear(),$=String(P.getMonth()+1).padStart(2,"0"),S=String(P.getDate()).padStart(2,"0");switch(d.value.date_format){case"DD/MM/YYYY":M.push(`${S}/${$}/${w}`);break;case"MM/DD/YYYY":M.push(`${$}/${S}/${w}`);break;default:M.push(`${w}-${$}-${S}`)}}if(d.value.show_time){const w=String(P.getHours()).padStart(2,"0"),$=String(P.getMinutes()).padStart(2,"0");M.push(`${w}:${$}:00`)}return M.join(" | ")}),C=U(()=>{if(!d.value.day_counter_start)return"";const M=new Date(d.value.day_counter_start+"T00:00:00"),w=Math.max(1,Math.floor((new Date().getTime()-M.getTime())/864e5)+1);return`Today would show: "${d.value.day_counter_label||"Day"} ${w}"`});let k=null;async function p(){k&&clearTimeout(k),k=setTimeout(async()=>{try{await $fetch(`/api/cameras/${n.cameraId}/overlay`,{method:"POST",headers:r(),body:d.value}),i.value="saved",setTimeout(()=>{i.value=""},2e3)}catch{i.value="error",setTimeout(()=>{i.value=""},3e3)}},500)}async function T(){o.value=!0;try{const M=await $fetch(`/api/cameras/${n.cameraId}/overlay`,{headers:r()});M&&(d.value={enabled:M.enabled||!1,position:M.position||"bottom-left",show_date:M.show_date!==!1,date_format:M.date_format||"YYYY-MM-DD",show_time:M.show_time!==!1,show_day_counter:M.show_day_counter||!1,day_counter_start:M.day_counter_start||"",day_counter_label:M.day_counter_label||"Day",custom_text:M.custom_text||"",font_size:M.font_size||36,text_color:M.text_color||"white"})}catch{}finally{o.value=!1}}return ot(T),(M,P)=>(a(),l("div",xC,[t(o)?(a(),l("div",yC,[...P[14]||(P[14]=[yt('<div class="flex items-center gap-2 text-gray-400"><svg class="w-5 h-5 animate-spin" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"></path></svg><span class="text-base">Loading overlay settings...</span></div>',1)])])):(a(),l(Q,{key:1},[e("div",_C,[P[15]||(P[15]=e("div",null,[e("p",{class:"text-base font-medium text-white"},"Photo Overlay"),e("p",{class:"text-base text-gray-400 opacity-70"},"Server-side text overlay on captured photos")],-1)),e("button",{onClick:P[0]||(P[0]=w=>{t(d).enabled=!t(d).enabled,p()}),class:V(["relative inline-flex h-7 w-12 shrink-0 cursor-pointer rounded-full transition-colors",t(d).enabled?"bg-teal-500":"bg-gray-600"])},[e("span",{class:V(["pointer-events-none inline-block h-5 w-5 rounded-full bg-white shadow transform transition-transform mt-1",t(d).enabled?"translate-x-6 ml-0.5":"translate-x-1"])},null,2)],2)]),t(d).enabled?(a(),l(Q,{key:0},[e("div",wC,[P[17]||(P[17]=e("p",{class:"text-base text-gray-400 mb-2"},"Preview",-1)),e("div",kC,[P[16]||(P[16]=e("div",{class:"absolute inset-0 bg-gradient-to-br from-green-900/30 to-gray-900/50"},null,-1)),e("div",{class:V(["absolute px-3 py-1.5",t(m)])},[e("span",{class:"font-bold whitespace-nowrap",style:Te({color:t(b),fontSize:t(x)+"px",textShadow:"2px 2px 3px rgba(0,0,0,0.9)"})},c(t(_)||"No overlay text"),5)],2)])]),e("div",$C,[e("div",CC,[P[26]||(P[26]=e("p",{class:"text-base font-medium text-teal-400"},"Content",-1)),e("div",null,[P[18]||(P[18]=e("label",{class:"text-base text-gray-400 mb-1 block"},"Custom Text",-1)),ye(e("input",{"onUpdate:modelValue":P[1]||(P[1]=w=>t(d).custom_text=w),onChange:P[2]||(P[2]=w=>p()),type:"text",maxlength:"100",placeholder:"e.g. Grow Room A",class:"w-full px-3 py-2 rounded-lg bg-gray-800 border border-gray-700 text-base text-white placeholder-gray-600 focus:border-teal-500 focus:outline-none"},null,544),[[$e,t(d).custom_text]])]),e("div",SC,[P[19]||(P[19]=e("span",{class:"text-base text-gray-300"},"Show Date",-1)),e("button",{onClick:P[3]||(P[3]=w=>{t(d).show_date=!t(d).show_date,p()}),class:V(["relative inline-flex h-6 w-10 shrink-0 cursor-pointer rounded-full transition-colors",t(d).show_date?"bg-teal-500":"bg-gray-600"])},[e("span",{class:V(["pointer-events-none inline-block h-4 w-4 rounded-full bg-white shadow transform transition-transform mt-1",t(d).show_date?"translate-x-5 ml-0.5":"translate-x-1"])},null,2)],2)]),t(d).show_date?(a(),l("div",PC,[P[21]||(P[21]=e("label",{class:"text-base text-gray-400 mb-1 block"},"Date Format",-1)),ye(e("select",{"onUpdate:modelValue":P[4]||(P[4]=w=>t(d).date_format=w),onChange:P[5]||(P[5]=w=>p()),class:"w-full px-3 py-2 rounded-lg bg-gray-800 border border-gray-700 text-base text-white focus:border-teal-500 focus:outline-none"},[...P[20]||(P[20]=[e("option",{value:"YYYY-MM-DD"},"2026-02-13",-1),e("option",{value:"DD/MM/YYYY"},"13/02/2026",-1),e("option",{value:"MM/DD/YYYY"},"02/13/2026",-1)])],544),[[dt,t(d).date_format]])])):j("",!0),e("div",EC,[P[22]||(P[22]=e("span",{class:"text-base text-gray-300"},"Show Time",-1)),e("button",{onClick:P[6]||(P[6]=w=>{t(d).show_time=!t(d).show_time,p()}),class:V(["relative inline-flex h-6 w-10 shrink-0 cursor-pointer rounded-full transition-colors",t(d).show_time?"bg-teal-500":"bg-gray-600"])},[e("span",{class:V(["pointer-events-none inline-block h-4 w-4 rounded-full bg-white shadow transform transition-transform mt-1",t(d).show_time?"translate-x-5 ml-0.5":"translate-x-1"])},null,2)],2)]),e("div",TC,[P[23]||(P[23]=e("span",{class:"text-base text-gray-300"},"Day Counter",-1)),e("button",{onClick:P[7]||(P[7]=w=>{t(d).show_day_counter=!t(d).show_day_counter,p()}),class:V(["relative inline-flex h-6 w-10 shrink-0 cursor-pointer rounded-full transition-colors",t(d).show_day_counter?"bg-teal-500":"bg-gray-600"])},[e("span",{class:V(["pointer-events-none inline-block h-4 w-4 rounded-full bg-white shadow transform transition-transform mt-1",t(d).show_day_counter?"translate-x-5 ml-0.5":"translate-x-1"])},null,2)],2)]),t(d).show_day_counter?(a(),l(Q,{key:1},[e("div",AC,[e("div",null,[P[24]||(P[24]=e("label",{class:"text-base text-gray-400 mb-1 block"},"Label",-1)),ye(e("input",{"onUpdate:modelValue":P[8]||(P[8]=w=>t(d).day_counter_label=w),onChange:P[9]||(P[9]=w=>p()),type:"text",maxlength:"20",placeholder:"Day",class:"w-full px-3 py-2 rounded-lg bg-gray-800 border border-gray-700 text-base text-white placeholder-gray-600 focus:border-teal-500 focus:outline-none"},null,544),[[$e,t(d).day_counter_label]])]),e("div",null,[P[25]||(P[25]=e("label",{class:"text-base text-gray-400 mb-1 block"},"Start Date",-1)),ye(e("input",{"onUpdate:modelValue":P[10]||(P[10]=w=>t(d).day_counter_start=w),onChange:P[11]||(P[11]=w=>p()),type:"date",class:"w-full px-3 py-2 rounded-lg bg-gray-800 border border-gray-700 text-base text-white focus:border-teal-500 focus:outline-none"},null,544),[[$e,t(d).day_counter_start]])])]),t(C)?(a(),l("p",DC,c(t(C)),1)):j("",!0)],64)):j("",!0)]),e("div",MC,[P[30]||(P[30]=e("p",{class:"text-base font-medium text-teal-400"},"Appearance",-1)),e("div",null,[P[27]||(P[27]=e("label",{class:"text-base text-gray-400 mb-1 block"},"Position",-1)),e("div",OC,[(a(),l(Q,null,le(g,w=>e("button",{key:w.value,onClick:$=>{t(d).position=w.value,p()},class:V(["px-3 py-2 rounded-lg text-base font-medium transition-all border",t(d).position===w.value?"bg-teal-500/20 border-teal-500/50 text-teal-400":"bg-gray-800 border-gray-700 text-gray-400 hover:border-gray-600"])},c(w.label),11,LC)),64))])]),e("div",null,[e("label",jC,"Font Size: "+c(t(d).font_size)+"px",1),ye(e("input",{"onUpdate:modelValue":P[12]||(P[12]=w=>t(d).font_size=w),onChange:P[13]||(P[13]=w=>p()),type:"range",min:"18",max:"72",step:"2",class:"w-full accent-teal-500"},null,544),[[$e,t(d).font_size,void 0,{number:!0}]]),P[28]||(P[28]=e("div",{class:"flex justify-between text-base text-gray-500 opacity-70 mt-0.5"},[e("span",null,"18"),e("span",null,"72")],-1))]),e("div",null,[P[29]||(P[29]=e("label",{class:"text-base text-gray-400 mb-1 block"},"Text Color",-1)),e("div",IC,[(a(),l(Q,null,le(f,w=>e("button",{key:w.value,onClick:$=>{t(d).text_color=w.value,p()},class:V(["px-3 py-2 rounded-lg text-base font-medium transition-all border",t(d).text_color===w.value?"border-teal-500/50 ring-1 ring-teal-500/30":"border-gray-700 hover:border-gray-600"]),style:Te({color:w.hex,backgroundColor:"rgba(0,0,0,0.4)"})},c(w.label),15,RC)),64))])])])]),t(i)?(a(),l("div",{key:0,class:V(["text-base text-center",t(i)==="saved"?"text-teal-400":"text-red-400"])},c(t(i)==="saved"?"Settings saved":"Error saving settings"),3)):j("",!0)],64)):j("",!0)],64))]))}}),NC=Object.assign(FC,{__name:"LabCameraOverlay"}),BC={key:0,class:"border-t border-gray-700/50"},VC={class:"px-4 py-2 flex items-center justify-between flex-wrap gap-2"},UC={class:"flex items-center gap-3"},zC={class:"text-base text-gray-500"},HC={key:0,class:"text-base text-gray-600"},GC={class:"flex items-center gap-2 flex-wrap"},WC=["disabled","title"],qC=["disabled"],KC=["href"],YC=["disabled","title"],ZC={key:0,class:"px-4 pb-2"},XC={class:"flex items-center gap-2 flex-wrap px-3 py-2 rounded-xl bg-yellow-500/10 border border-yellow-500/30"},QC={class:"text-base text-yellow-400 font-medium mr-1"},JC=["disabled"],eS=["disabled"],tS=["disabled"],sS=["disabled"],nS={key:1,class:"px-4 pb-3"},oS={class:"relative rounded-xl overflow-hidden bg-black"},rS=["src"],aS={class:"absolute bottom-12 left-3 bg-black/70 px-2 py-1 rounded text-base text-white"},lS={key:0,class:"text-gray-400 ml-1"},iS={class:"px-4 pb-3 space-y-2"},dS={class:"px-3 py-2 flex items-center justify-between gap-2"},cS={class:"flex items-center gap-2 min-w-0"},uS=["checked","onChange"],pS=["onClick"],gS={class:"text-base font-medium text-white"},fS={class:"text-base text-gray-500"},mS={key:1,class:"text-base text-gray-600"},hS={key:2,class:"px-1.5 py-0.5 rounded bg-green-500/20 text-green-400 text-base"},bS={key:0,class:"text-green-500/60 ml-0.5"},vS={key:0,class:"flex items-center gap-1.5 shrink-0"},xS=["onClick"],yS=["onClick"],_S=["href","download"],wS=["onClick","disabled","title"],kS={key:1,class:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24"},$S=["onClick","disabled"],CS={key:0,class:"px-3 pb-3 pt-1"},SS={key:0,class:"text-base text-gray-500 py-2"},PS={key:1,class:"flex gap-2 overflow-x-auto pb-2 scrollbar-thin"},ES=["onClick","title"],TS=["src","alt"],AS={class:"absolute inset-0 rounded-lg bg-black/0 group-hover:bg-black/30 transition-all flex items-center justify-center"},DS=["onClick"],MS={class:"text-base font-medium"},OS={key:2,class:"text-base text-gray-600 py-1"},LS={class:"text-center mb-3"},jS={class:"text-base text-gray-400"},IS={key:0,class:"ml-2 text-gray-500"},RS=["src","alt"],FS={class:"mt-4 flex items-center gap-3"},NS=["href","download"],Fs=20,BS=Pe({__name:"LabCameraGallery",props:{cameraId:{}},setup(s){const n=s,{getAuthHeaders:r}=Ue(),o=W(10),i=W(null),d=W(!1),g=W(0),f=W(0),m=W(!1),b=W(!1),x=W([]),_=W(new Set),C=W({}),k=W({}),p=W(null),T=W(!1),M=W(new Set),P=W(null);let w=null;const $=W(null),S=W(null),A=W([]),y=W(null),h=W(null),u=W(0),v=W({hasExport:!1}),D=U(()=>x.value.reduce((he,ge)=>he+ge.photoCount,0)),z=U(()=>x.value.filter(he=>he.hasVideo).length),G=U(()=>x.value.filter(he=>!he.hasVideo&&he.photoCount>=2).length),B=U(()=>{const he=x.value.reduce((Ie,Ze)=>Ie+(Ze.photoSize||0),0),ge=x.value.reduce((Ie,Ze)=>Ie+(Ze.videoSize||0),0),ve=[];return he>0&&ve.push(`${Ee(he)} photos`),ge>0&&ve.push(`${Ee(ge)} video`),ve.join(" + ")}),O=U(()=>x.value.filter(he=>M.value.has(he.date)&&!he.hasVideo&&he.photoCount>=2).length),R=U(()=>!h.value||!C.value[h.value]?[]:C.value[h.value]),X=U(()=>R.value?.length??0),oe=U(()=>u.value>0),we=U(()=>u.value<X.value-1);async function re(){try{const he=await $fetch(`/api/cameras/${n.cameraId}/timelapse-days`,{headers:r()});x.value=he.days||[],v.value={hasExport:he.hasExport||!1,exportUrl:he.exportUrl,exportSize:he.exportSize}}catch{}}function E(he){if(_.value.has(he)){_.value.delete(he),_.value=new Set(_.value);return}_.value.add(he),_.value=new Set(_.value),C.value[he]||$fetch(`/api/cameras/${n.cameraId}/photos?type=timelapse&limit=500`,{headers:r()}).then(ge=>{C.value[he]=(ge.photos||[]).filter(ve=>ve.date===he)}).catch(()=>{C.value[he]=[]})}function L(he){const ge=k.value[he]||Fs;k.value[he]=ge+Fs}function F(){T.value=!T.value,T.value||(M.value=new Set,P.value=null)}function be(he){const ge=new Set(M.value);ge.has(he)?ge.delete(he):ge.add(he),M.value=ge}function ie(){M.value.size===x.value.length?M.value=new Set:M.value=new Set(x.value.map(he=>he.date))}function de(he){if(P.value===he){te(he),P.value=null,w&&clearTimeout(w);return}P.value=he,w&&clearTimeout(w),w=setTimeout(()=>{P.value=null},6e3)}async function te(he){const ge=[...M.value];b.value=!0;try{switch(he){case"cleanAll":await $fetch(`/api/cameras/${n.cameraId}/timelapse-cleanup`,{method:"POST",headers:r(),body:{action:"photos"}});break;case"deleteSelectedPhotos":await $fetch(`/api/cameras/${n.cameraId}/timelapse-cleanup`,{method:"POST",headers:r(),body:{action:"photos",dates:ge}});break;case"deleteSelectedVideos":await $fetch(`/api/cameras/${n.cameraId}/timelapse-cleanup`,{method:"POST",headers:r(),body:{action:"videos",dates:ge}});break;case"deleteSelectedAll":await $fetch(`/api/cameras/${n.cameraId}/timelapse-cleanup`,{method:"POST",headers:r(),body:{action:"all",dates:ge}});break}await re(),C.value={},he.startsWith("deleteSelected")&&(M.value=new Set,T.value=!1)}catch{}finally{b.value=!1}}async function K(he){i.value=he;try{const ge=await $fetch(`/api/cameras/${n.cameraId}/timelapse-video`,{method:"POST",headers:r(),body:{date:he,fps:o.value}});if(ge.success){const ve=x.value.find(Ie=>Ie.date===he);ve&&(ve.hasVideo=!0,ve.videoUrl=ge.video.url)}}catch{}finally{i.value=null}}async function ue(){const he=x.value.filter(ge=>!ge.hasVideo&&ge.photoCount>=2);if(he.length!==0){d.value=!0,g.value=0,f.value=he.length;for(const ge of he){i.value=ge.date;try{const ve=await $fetch(`/api/cameras/${n.cameraId}/timelapse-video`,{method:"POST",headers:r(),body:{date:ge.date,fps:o.value}});ve.success&&(ge.hasVideo=!0,ge.videoUrl=ve.video.url)}catch{}g.value++}i.value=null,d.value=!1}}async function N(){const he=x.value.filter(ge=>M.value.has(ge.date)&&!ge.hasVideo&&ge.photoCount>=2);if(he.length!==0){d.value=!0,g.value=0,f.value=he.length;for(const ge of he){i.value=ge.date;try{const ve=await $fetch(`/api/cameras/${n.cameraId}/timelapse-video`,{method:"POST",headers:r(),body:{date:ge.date,fps:o.value}});ve.success&&(ge.hasVideo=!0,ge.videoUrl=ve.video.url)}catch{}g.value++}i.value=null,d.value=!1}}function H(he,ge){$.value=ge,S.value=he,A.value=[]}function Y(he){const ge=[...x.value].reverse(),ve=ge.findIndex(ht=>ht.date===he);if(ve===-1)return;const Ie=ge.slice(ve).filter(ht=>ht.hasVideo&&ht.videoUrl).map(ht=>({date:ht.date,url:ht.videoUrl}));if(Ie.length===0)return;const Ze=Ie.shift();$.value=Ze.url,S.value=Ze.date,A.value=Ie}function me(){if(A.value.length>0){const he=A.value.shift();$.value=he.url,S.value=he.date}else $.value=null,S.value=null}function J(){$.value=null,S.value=null,A.value=[]}async function Z(){m.value=!0;try{const he=await $fetch(`/api/cameras/${n.cameraId}/timelapse-export`,{method:"POST",headers:r()});he.success&&he.export&&(v.value={hasExport:!0,exportUrl:he.export.url,exportSize:he.export.size})}catch{}finally{m.value=!1}}async function q(he){b.value=!0;try{await $fetch(`/api/cameras/${n.cameraId}/timelapse-cleanup`,{method:"POST",headers:r(),body:{action:"photos",dates:[he]}});const ge=x.value.find(ve=>ve.date===he);ge&&(ge.photoCount=0,ge.photoSize=0),delete C.value[he]}catch{}finally{b.value=!1}}function ee(he,ge){h.value=he;const ve=C.value[he]||[];u.value=ve.findIndex(Ie=>Ie.path===ge.path),u.value<0&&(u.value=0),y.value=ge}function ne(){oe.value&&(u.value--,y.value=R.value?.[u.value]??null)}function Ce(){we.value&&(u.value++,y.value=R.value?.[u.value]??null)}function Ee(he){return he<1024?`${he} B`:he<1024*1024?`${(he/1024).toFixed(0)} KB`:`${(he/(1024*1024)).toFixed(1)} MB`}return ot(re),(he,ge)=>t(x).length>0?(a(),l("div",BC,[e("div",VC,[e("div",UC,[ge[8]||(ge[8]=e("span",{class:"text-base text-gray-300 font-medium"},"Timelapse",-1)),e("span",zC,c(t(D))+" photos · "+c(t(x).length)+" days ",1),t(B)?(a(),l("span",HC," · "+c(t(B)),1)):j("",!0)]),e("div",GC,[ye(e("select",{"onUpdate:modelValue":ge[0]||(ge[0]=ve=>We(o)?o.value=ve:null),class:"bg-gray-700/50 text-gray-300 text-base rounded-lg px-2 py-1 border border-gray-600/50 focus:border-teal-500 focus:outline-none",title:"Frames per second for video generation"},[...ge[9]||(ge[9]=[e("option",{value:5},"5 fps",-1),e("option",{value:10},"10 fps",-1),e("option",{value:15},"15 fps",-1),e("option",{value:24},"24 fps",-1),e("option",{value:30},"30 fps",-1)])],512),[[dt,t(o),void 0,{number:!0}]]),e("button",{onClick:F,class:V(["flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-base font-medium transition-colors",t(T)?"bg-yellow-500/20 text-yellow-400":"bg-gray-700/50 text-gray-400 hover:text-white hover:bg-gray-600/50"])},c(t(T)?`${t(M).size} selected`:"Select"),3),t(G)>0&&!t(T)?(a(),l("button",{key:0,onClick:ue,disabled:t(d),class:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-cyan-500/20 text-cyan-400 text-base font-medium hover:bg-cyan-500/30 transition-colors disabled:opacity-50",title:`Generate videos for ${t(G)} days without video`},[I(t(sn),{class:"w-3.5 h-3.5"}),ce(" "+c(t(d)?`${t(g)}/${t(f)}...`:`Generate ${t(G)} Missing`),1)],8,WC)):j("",!0),t(z)>=2&&!t(T)?(a(),l("button",{key:1,onClick:Z,disabled:t(m),class:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-purple-500/20 text-purple-400 text-base font-medium hover:bg-purple-500/30 transition-colors disabled:opacity-50"},[I(t(sn),{class:"w-3.5 h-3.5"}),ce(" "+c(t(m)?"Exporting...":"Export All"),1)],8,qC)):j("",!0),t(v).hasExport&&t(v).exportUrl&&!t(T)?(a(),l("a",{key:2,href:t(v).exportUrl,download:"full_timelapse.mp4",class:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-green-500/20 text-green-400 text-base font-medium hover:bg-green-500/30 transition-colors"},[I(t(Bs),{class:"w-3.5 h-3.5"}),ce(" Full ("+c(Ee(t(v).exportSize||0))+") ",1)],8,KC)):j("",!0),t(z)>0&&t(D)>0&&!t(T)?(a(),l("button",{key:3,onClick:ge[1]||(ge[1]=ve=>de("cleanAll")),disabled:t(b),class:V(["flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-base font-medium transition-colors disabled:opacity-50",t(P)==="cleanAll"?"bg-red-500/30 text-red-400 ring-1 ring-red-500/50":"bg-orange-500/20 text-orange-400 hover:bg-orange-500/30"]),title:t(P)==="cleanAll"?"Click again to confirm":"Delete photos for days that already have a video"},[I(t(Tt),{class:"w-3.5 h-3.5"}),ce(" "+c(t(b)?"Cleaning...":t(P)==="cleanAll"?"Confirm?":"Clean Photos"),1)],10,YC)):j("",!0)])]),t(T)&&t(M).size>0?(a(),l("div",ZC,[e("div",XC,[e("span",QC,c(t(M).size)+" day"+c(t(M).size>1?"s":"")+": ",1),t(O)>0?(a(),l("button",{key:0,onClick:N,disabled:t(d),class:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-cyan-500/20 text-cyan-400 text-base font-medium hover:bg-cyan-500/30 transition-colors disabled:opacity-50"},[I(t(sn),{class:"w-3.5 h-3.5"}),ce(" Generate "+c(t(O))+" Video"+c(t(O)>1?"s":""),1)],8,JC)):j("",!0),e("button",{onClick:ge[2]||(ge[2]=ve=>de("deleteSelectedPhotos")),disabled:t(b),class:V(["flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-base font-medium transition-colors disabled:opacity-50",t(P)==="deleteSelectedPhotos"?"bg-red-500/30 text-red-400 ring-1 ring-red-500/50":"bg-orange-500/20 text-orange-400 hover:bg-orange-500/30"])},[I(t(Tt),{class:"w-3.5 h-3.5"}),ce(" "+c(t(P)==="deleteSelectedPhotos"?"Confirm?":"Delete Photos"),1)],10,eS),e("button",{onClick:ge[3]||(ge[3]=ve=>de("deleteSelectedVideos")),disabled:t(b),class:V(["flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-base font-medium transition-colors disabled:opacity-50",t(P)==="deleteSelectedVideos"?"bg-red-500/30 text-red-400 ring-1 ring-red-500/50":"bg-red-500/20 text-red-400 hover:bg-red-500/30"])},[I(t(Tt),{class:"w-3.5 h-3.5"}),ce(" "+c(t(P)==="deleteSelectedVideos"?"Confirm?":"Delete Videos"),1)],10,tS),e("button",{onClick:ge[4]||(ge[4]=ve=>de("deleteSelectedAll")),disabled:t(b),class:V(["flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-base font-medium transition-colors disabled:opacity-50",t(P)==="deleteSelectedAll"?"bg-red-600/40 text-red-300 ring-1 ring-red-500/50":"bg-red-600/20 text-red-400 hover:bg-red-600/30"])},[I(t(Tt),{class:"w-3.5 h-3.5"}),ce(" "+c(t(P)==="deleteSelectedAll"?"Confirm?":"Delete All"),1)],10,sS),ge[10]||(ge[10]=e("div",{class:"flex-1"},null,-1)),e("button",{onClick:ie,class:"text-base text-yellow-400/70 hover:text-yellow-400 transition-colors"},c(t(M).size===t(x).length?"Deselect All":"Select All"),1)])])):j("",!0),t($)?(a(),l("div",nS,[e("div",oS,[e("video",{ref_key:"videoPlayer",ref:p,src:t($),controls:"",autoplay:"",class:"w-full max-h-[400px]",onEnded:me},null,40,rS),e("button",{onClick:J,class:"absolute top-2 right-2 p-1.5 rounded-lg bg-black/60 text-white hover:bg-black/80 transition-colors"},[I(t(ze),{class:"w-4 h-4"})]),e("div",aS,[ce(c(t(S))+" ",1),t(A).length>0?(a(),l("span",lS,"("+c(t(A).length)+" more)",1)):j("",!0)])])])):j("",!0),e("div",iS,[(a(!0),l(Q,null,le(t(x),ve=>(a(),l("div",{key:ve.date,class:V(["rounded-xl bg-gray-800/80 border overflow-hidden transition-colors",t(M).has(ve.date)?"border-yellow-500/40 ring-1 ring-yellow-500/20":"border-gray-700/50"])},[e("div",dS,[e("div",cS,[t(T)?(a(),l("input",{key:0,type:"checkbox",checked:t(M).has(ve.date),onChange:Ie=>be(ve.date),class:"w-4 h-4 rounded border-gray-600 bg-gray-700 text-yellow-500 focus:ring-yellow-500 focus:ring-offset-0 shrink-0 cursor-pointer"},null,40,uS)):j("",!0),e("button",{onClick:Ie=>E(ve.date),class:"text-gray-400 hover:text-white transition-colors shrink-0"},[I(t(nt),{class:V(["w-4 h-4 transition-transform",t(_).has(ve.date)?"rotate-90":""])},null,8,["class"])],8,pS),e("span",gS,c(ve.date),1),e("span",fS,c(ve.photoCount)+" photos",1),ve.photoSize?(a(),l("span",mS,c(Ee(ve.photoSize)),1)):j("",!0),ve.hasVideo?(a(),l("span",hS,[ge[11]||(ge[11]=ce(" MP4 ",-1)),ve.videoSize?(a(),l("span",bS,c(Ee(ve.videoSize)),1)):j("",!0)])):j("",!0)]),t(T)?j("",!0):(a(),l("div",vS,[ve.hasVideo&&ve.videoUrl?(a(),l("button",{key:0,onClick:Ie=>H(ve.date,ve.videoUrl),class:"p-1.5 rounded-lg bg-green-500/20 text-green-400 hover:bg-green-500/30 transition-colors",title:"Play video"},[I(t(vi),{class:"w-4 h-4"})],8,xS)):j("",!0),ve.hasVideo&&t(z)>=2?(a(),l("button",{key:1,onClick:Ie=>Y(ve.date),class:"p-1.5 rounded-lg bg-purple-500/20 text-purple-400 hover:bg-purple-500/30 transition-colors",title:"Play all days from here"},[I(t(Xc),{class:"w-4 h-4"})],8,yS)):j("",!0),ve.hasVideo&&ve.videoUrl?(a(),l("a",{key:2,href:ve.videoUrl,download:`timelapse-${ve.date}.mp4`,class:"p-1.5 rounded-lg bg-gray-700/50 text-gray-400 hover:text-green-400 hover:bg-green-500/10 transition-colors",title:"Download video"},[I(t(Bs),{class:"w-4 h-4"})],8,_S)):j("",!0),ve.photoCount>=2?(a(),l("button",{key:3,onClick:Ie=>K(ve.date),disabled:t(i)===ve.date,title:`Create video from ${ve.photoCount} photos at ${t(o)} fps`,class:"p-1.5 rounded-lg bg-cyan-500/20 text-cyan-400 hover:bg-cyan-500/30 transition-colors disabled:opacity-50"},[t(i)!==ve.date?(a(),pe(t(sn),{key:0,class:"w-4 h-4"})):(a(),l("svg",kS,[...ge[12]||(ge[12]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"},null,-1)])]))],8,wS)):j("",!0),ve.hasVideo&&ve.photoCount>0?(a(),l("button",{key:4,onClick:Ie=>q(ve.date),disabled:t(b),class:"p-1.5 rounded-lg bg-gray-700/50 text-gray-400 hover:text-orange-400 hover:bg-orange-500/10 transition-colors",title:"Delete photos (video preserved)"},[I(t(Tt),{class:"w-4 h-4"})],8,$S)):j("",!0)]))]),t(_).has(ve.date)?(a(),l("div",CS,[t(C)[ve.date]?t(C)[ve.date].length>0?(a(),l("div",PS,[(a(!0),l(Q,null,le(t(C)[ve.date].slice(0,t(k)[ve.date]||Fs),Ie=>(a(),l("div",{key:Ie.path,class:"relative group cursor-pointer shrink-0",onClick:Ze=>ee(ve.date,Ie),title:`${Ie.time} — ${Ee(Ie.size)}`},[e("img",{src:Ie.url,alt:Ie.filename,class:"w-24 h-16 object-cover rounded-lg border border-gray-700/50 group-hover:border-teal-500/50 transition-all",loading:"lazy"},null,8,TS),e("div",AS,[I(t(Us),{class:"w-5 h-5 text-white opacity-0 group-hover:opacity-100 transition-opacity"})])],8,ES))),128)),t(C)[ve.date].length>(t(k)[ve.date]||Fs)?(a(),l("button",{key:0,onClick:Ie=>L(ve.date),class:"shrink-0 w-24 h-16 rounded-lg border border-dashed border-gray-600 flex items-center justify-center text-gray-400 hover:text-teal-400 hover:border-teal-500/50 transition-colors"},[e("span",MS,"+"+c(t(C)[ve.date].length-(t(k)[ve.date]||Fs)),1)],8,DS)):j("",!0)])):(a(),l("div",OS,"No photos (video only)")):(a(),l("div",SS,"Loading..."))])):j("",!0)],2))),128))]),(a(),pe(Qe,{to:"body"},[I(Ke,{"enter-active-class":"transition-all duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-all duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:je(()=>[t(y)?(a(),l("div",{key:0,class:"fixed inset-0 z-50 bg-black/90 flex flex-col items-center justify-center p-4",onClick:ge[6]||(ge[6]=Ve(ve=>y.value=null,["self"])),onKeydown:[jn(ne,["left"]),jn(Ce,["right"]),ge[7]||(ge[7]=jn(ve=>y.value=null,["escape"]))]},[e("button",{onClick:ge[5]||(ge[5]=ve=>y.value=null),class:"absolute top-4 right-4 p-2 rounded-lg bg-white/10 text-white hover:bg-white/20 transition-colors z-10"},[I(t(ze),{class:"w-6 h-6"})]),t(oe)?(a(),l("button",{key:0,onClick:ne,class:"absolute left-4 top-1/2 -translate-y-1/2 p-3 rounded-full bg-white/10 text-white hover:bg-white/20 transition-colors z-10"},[I(t(os),{class:"w-6 h-6"})])):j("",!0),t(we)?(a(),l("button",{key:1,onClick:Ce,class:"absolute right-4 top-1/2 -translate-y-1/2 p-3 rounded-full bg-white/10 text-white hover:bg-white/20 transition-colors z-10"},[I(t(nt),{class:"w-6 h-6"})])):j("",!0),e("div",LS,[e("p",jS,[ce(c(t(y).date)+" "+c(t(y).time)+" · "+c(Ee(t(y).size))+" ",1),t(X)>0?(a(),l("span",IS,c(t(u)+1)+" / "+c(t(X)),1)):j("",!0)])]),e("img",{src:t(y).url,alt:t(y).filename,class:"max-w-full max-h-[75vh] rounded-lg object-contain"},null,8,RS),e("div",FS,[e("a",{href:t(y).url,download:t(y).filename,class:"flex items-center gap-2 px-4 py-2 rounded-lg bg-teal-600 text-white text-base font-medium hover:bg-teal-500 transition-colors"},[I(t(Bs),{class:"w-4 h-4"}),ge[13]||(ge[13]=ce(" Download ",-1))],8,NS)]),ge[14]||(ge[14]=e("p",{class:"mt-2 text-base text-gray-600"},"Arrow keys to navigate · ESC to close",-1))],32)):j("",!0)]),_:1})]))])):j("",!0)}}),VS=Object.assign(BS,{__name:"LabCameraGallery"}),US={class:"rounded-2xl bg-gray-800/60 border border-gray-700/50 overflow-hidden hover:border-teal-500/50 hover:shadow-xl transition-all"},zS={class:"relative"},HS={key:1,class:"aspect-video bg-gray-900 flex items-center justify-center"},GS={class:"px-4 py-3 border-t border-gray-700/50"},WS={class:"flex items-center justify-between"},qS={class:"flex items-center gap-2 min-w-0"},KS={class:"text-base font-medium text-white truncate"},YS={class:"flex items-center gap-2"},ZS=["disabled"],XS={key:0,class:"text-base"},QS={key:1,class:"text-base"},JS={class:"mt-1.5 flex items-center gap-3 text-base text-gray-500"},eP={key:0,class:"border-t border-gray-700/50"},tP={class:"px-4 py-2 flex items-center justify-between"},sP={class:"text-base text-gray-400 font-medium"},nP={class:"px-4 pb-3"},oP={class:"flex flex-wrap gap-2"},rP=["onClick"],aP=["src","alt"],lP={class:"absolute inset-0 rounded-lg bg-black/0 group-hover:bg-black/30 transition-all flex items-center justify-center"},iP={key:0,class:"overflow-hidden border-t border-gray-700/50"},dP={key:0,class:"overflow-hidden border-t border-gray-700/50"},cP={key:0,class:"overflow-hidden border-t border-gray-700/50"},uP={class:"text-center mb-3"},pP={class:"text-base text-white font-medium"},gP={class:"text-base text-gray-400"},fP=["src","alt"],mP={class:"mt-4 flex items-center gap-3"},hP=["href","download"],bP=["disabled"],vP=Pe({__name:"LabCameraCard",props:{camera:{}},setup(s){const n=s,{getAuthHeaders:r}=Ue(),o=W(!1),i=W(!1),d=W(!1),g=W(!1),f=W(!1),m=W(!1),b=W([]),x=W(null),_=U(()=>g.value?b.value:b.value.slice(0,6));function C(w){const $=w==="controls"?o.value:w==="schedule"?i.value:d.value;o.value=!1,i.value=!1,d.value=!1,$||(w==="controls"?o.value=!0:w==="schedule"?i.value=!0:d.value=!0)}async function k(){f.value=!0;try{const w=await $fetch(`/api/cameras/${n.camera.id}/capture`,{method:"POST",headers:r(),body:{type:"manual"}});w.success&&w.photo&&b.value.unshift(w.photo)}catch{}finally{f.value=!1}}async function p(){try{const w=await $fetch(`/api/cameras/${n.camera.id}/photos?type=manual&limit=50`,{headers:r()});b.value=w.photos||[]}catch{}}function T(w){x.value=w}async function M(w){m.value=!0;try{await $fetch(`/api/cameras/photos/${w.path}`,{method:"DELETE",headers:r()}),b.value=b.value.filter($=>$.path!==w.path),x.value=null}catch{}finally{m.value=!1}}function P(w){return w<1024?`${w} B`:w<1024*1024?`${(w/1024).toFixed(0)} KB`:`${(w/(1024*1024)).toFixed(1)} MB`}return ot(()=>{p()}),(w,$)=>{const S=Y8,A=vC,y=NC,h=VS;return a(),l("div",US,[e("div",zS,[s.camera.enabled?(a(),pe(Id,{key:0,"camera-id":s.camera.id,"camera-name":s.camera.name},null,8,["camera-id","camera-name"])):(a(),l("div",HS,[...$[7]||($[7]=[e("span",{class:"text-base text-gray-500"},"Camera Disabled",-1)])]))]),e("div",GS,[e("div",WS,[e("div",qS,[e("span",{class:V(["w-2.5 h-2.5 rounded-full shrink-0",s.camera.enabled?"bg-spider-green-400 shadow-lg shadow-spider-green-400/50":"bg-gray-500"])},null,2),e("span",KS,c(s.camera.name),1)]),e("div",YS,[e("button",{onClick:k,disabled:!s.camera.enabled||t(f),class:"flex items-center gap-1.5 px-3 py-2 rounded-lg bg-gray-700/50 text-gray-300 hover:bg-gray-600/50 hover:text-white transition-all disabled:opacity-40",title:"Capture photo (saved to server)"},[I(t(pt),{class:"w-4 h-4"}),t(f)?(a(),l("span",XS,"Capturing...")):(a(),l("span",QS,"Capture"))],8,ZS),e("button",{onClick:$[0]||($[0]=u=>C("schedule")),class:V(["flex items-center gap-1.5 px-3 py-2 rounded-lg text-base font-medium transition-all",t(i)?"bg-cyan-500/20 text-cyan-400":"bg-gray-700/50 text-gray-300 hover:bg-gray-600/50 hover:text-white"])},[I(t(ks),{class:"w-4 h-4"}),$[8]||($[8]=e("span",null,"Timelapse",-1))],2),e("button",{onClick:$[1]||($[1]=u=>C("overlay")),class:V(["flex items-center gap-1.5 px-3 py-2 rounded-lg text-base font-medium transition-all",t(d)?"bg-purple-500/20 text-purple-400":"bg-gray-700/50 text-gray-300 hover:bg-gray-600/50 hover:text-white"])},[I(t(Jc),{class:"w-4 h-4"}),$[9]||($[9]=e("span",null,"Overlay",-1))],2),e("button",{onClick:$[2]||($[2]=u=>C("controls")),class:V(["flex items-center gap-1.5 px-3 py-2 rounded-lg text-base font-medium transition-all",t(o)?"bg-teal-500/20 text-teal-400":"bg-gray-700/50 text-gray-300 hover:bg-gray-600/50 hover:text-white"])},[I(t(El),{class:"w-4 h-4"}),$[10]||($[10]=e("span",null,"Controls",-1))],2)])]),e("div",JS,[e("span",null,c(s.camera.protocol.toUpperCase()),1),$[11]||($[11]=e("span",null,"·",-1)),e("span",null,c(s.camera.host)+":"+c(s.camera.port),1)])]),t(b).length>0?(a(),l("div",eP,[e("div",tP,[e("span",sP," Captures ("+c(t(b).length)+") ",1),t(b).length>6?(a(),l("button",{key:0,onClick:$[3]||($[3]=u=>g.value=!t(g)),class:"text-base text-teal-400 hover:text-teal-300 transition-colors"},c(t(g)?"Show less":"Show all"),1)):j("",!0)]),e("div",nP,[e("div",oP,[(a(!0),l(Q,null,le(t(_),u=>(a(),l("div",{key:u.path,class:"relative group cursor-pointer",onClick:v=>T(u)},[e("img",{src:u.url,alt:u.filename,class:"w-20 h-14 object-cover rounded-lg border border-gray-700/50 group-hover:border-teal-500/50 transition-all",loading:"lazy"},null,8,aP),e("div",lP,[I(t(Us),{class:"w-5 h-5 text-white opacity-0 group-hover:opacity-100 transition-opacity"})]),$[12]||($[12]=e("div",{class:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent h-6 rounded-b-lg"},null,-1))],8,rP))),128))])])])):j("",!0),I(Ke,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"max-h-0 opacity-0","enter-to-class":"max-h-[2000px] opacity-100","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"max-h-[2000px] opacity-100","leave-to-class":"max-h-0 opacity-0"},{default:je(()=>[t(o)?(a(),l("div",iP,[I(S,{"camera-id":s.camera.id},null,8,["camera-id"])])):j("",!0)]),_:1}),I(Ke,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"max-h-0 opacity-0","enter-to-class":"max-h-[2000px] opacity-100","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"max-h-[2000px] opacity-100","leave-to-class":"max-h-0 opacity-0"},{default:je(()=>[t(i)?(a(),l("div",dP,[I(A,{"camera-id":s.camera.id},null,8,["camera-id"])])):j("",!0)]),_:1}),I(Ke,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"max-h-0 opacity-0","enter-to-class":"max-h-[2000px] opacity-100","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"max-h-[2000px] opacity-100","leave-to-class":"max-h-0 opacity-0"},{default:je(()=>[t(d)?(a(),l("div",cP,[I(y,{"camera-id":s.camera.id},null,8,["camera-id"])])):j("",!0)]),_:1}),I(h,{"camera-id":s.camera.id},null,8,["camera-id"]),(a(),pe(Qe,{to:"body"},[I(Ke,{"enter-active-class":"transition-all duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-all duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:je(()=>[t(x)?(a(),l("div",{key:0,class:"fixed inset-0 z-50 bg-black/90 flex flex-col items-center justify-center p-4",onClick:$[6]||($[6]=Ve(u=>x.value=null,["self"]))},[e("button",{onClick:$[4]||($[4]=u=>x.value=null),class:"absolute top-4 right-4 p-2 rounded-lg bg-white/10 text-white hover:bg-white/20 transition-colors"},[I(t(ze),{class:"w-6 h-6"})]),e("div",uP,[e("p",pP,c(s.camera.name),1),e("p",gP,c(t(x).date)+" "+c(t(x).time)+" · "+c(P(t(x).size)),1)]),e("img",{src:t(x).url,alt:t(x).filename,class:"max-w-full max-h-[75vh] rounded-lg object-contain"},null,8,fP),e("div",mP,[e("a",{href:t(x).url,download:t(x).filename,class:"flex items-center gap-2 px-4 py-2 rounded-lg bg-teal-600 text-white text-base font-medium hover:bg-teal-500 transition-colors"},[I(t(Bs),{class:"w-4 h-4"}),$[13]||($[13]=ce(" Download ",-1))],8,hP),e("button",{onClick:$[5]||($[5]=u=>M(t(x))),disabled:t(m),class:"flex items-center gap-2 px-4 py-2 rounded-lg bg-red-600/80 text-white text-base font-medium hover:bg-red-500 transition-colors disabled:opacity-50"},[I(t(Tt),{class:"w-4 h-4"}),ce(" "+c(t(m)?"Deleting...":"Delete"),1)],8,bP)])])):j("",!0)]),_:1})]))])}}}),xP=Object.assign(vP,{__name:"LabCameraCard"}),yP={class:"p-4 lg:p-6 space-y-6"},_P={class:"flex items-center justify-between"},wP={key:0,class:"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-spider-green-500/20"},kP={key:1,class:"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-gray-700/50"},$P={key:0,class:"flex flex-col items-center justify-center py-16 text-center"},CP={class:"w-16 h-16 rounded-2xl bg-gray-800 flex items-center justify-center mb-4"},SP={key:1,class:"grid grid-cols-1 xl:grid-cols-2 gap-6"},PP=Pe({__name:"LabCameras",setup(s){const{cameras:n,loading:r,go2rtcRunning:o}=Rd();return(i,d)=>{const g=jd,f=xP;return a(),l("div",yP,[e("div",_P,[d[2]||(d[2]=e("div",null,[e("h2",{class:"text-xl font-bold text-white"},"Cameras"),e("p",{class:"text-base text-gray-400 mt-1"},"Live feeds and camera controls")],-1)),t(o)?(a(),l("div",wP,[...d[0]||(d[0]=[e("span",{class:"w-2 h-2 rounded-full bg-spider-green-400 shadow-lg shadow-spider-green-400/50"},null,-1),e("span",{class:"text-base text-spider-green-400 font-medium"},"Streaming",-1)])])):(a(),l("div",kP,[...d[1]||(d[1]=[e("span",{class:"w-2 h-2 rounded-full bg-gray-500"},null,-1),e("span",{class:"text-base text-gray-400 font-medium"},"Offline",-1)])]))]),!t(r)&&t(n).length===0?(a(),l("div",$P,[e("div",CP,[I(t(xi),{class:"w-8 h-8 text-gray-600"})]),d[4]||(d[4]=e("h3",{class:"text-lg font-semibold text-white mb-2"},"No Cameras Configured",-1)),d[5]||(d[5]=e("p",{class:"text-base text-gray-400 max-w-md mb-6"}," Add IP cameras in System > Server & Services to start viewing live feeds and controlling camera settings here. ",-1)),I(g,{to:"/system",class:"px-5 py-2.5 rounded-xl bg-gradient-to-r from-teal-600 to-cyan-500 text-white text-base font-medium hover:from-teal-500 hover:to-cyan-400 transition-all shadow-lg shadow-teal-500/25"},{default:je(()=>[...d[3]||(d[3]=[ce(" Go to System Settings ",-1)])]),_:1})])):(a(),l("div",SP,[(a(!0),l(Q,null,le(t(n),m=>(a(),pe(f,{key:m.id,camera:m},null,8,["camera"]))),128))]))])}}}),EP=Object.assign(PP,{__name:"LabCameras"}),TP={class:"rounded-xl bg-gray-800/50 border border-gray-700/50 overflow-hidden"},AP={key:0,class:"p-8 flex items-center justify-center"},DP={class:"flex items-center gap-3 px-4 py-3 border-b border-gray-700/30"},MP={class:"flex-1 min-w-0"},OP={class:"flex items-center gap-2 flex-wrap"},LP={class:"text-lg font-bold text-white"},jP={class:"text-sm text-gray-400 truncate"},IP={key:0},RP={key:1,class:"text-gray-600"},FP={key:2,class:"text-gray-500"},NP={class:"p-4 grid grid-cols-1 lg:grid-cols-12 gap-4"},BP={class:"lg:col-span-4 space-y-3"},VP={class:"p-3 rounded-lg bg-gray-900/40 space-y-2"},UP={key:0,class:"flex items-center gap-2"},zP={class:"text-xs text-gray-400 w-14"},HP={class:"flex-1 h-2 rounded-full bg-gray-700 overflow-hidden flex"},GP={class:"text-xs text-gray-400 w-14 text-right"},WP={class:"flex items-center gap-3 text-xs flex-wrap"},qP=["title"],KP={key:0,class:"text-gray-300"},YP={key:1,class:"text-gray-500"},ZP={key:2,class:"text-gray-600"},XP={class:"flex items-center gap-1",title:"Average height"},QP={key:0,class:"text-gray-300"},JP={key:1,class:"text-gray-600"},eE={class:"flex items-center gap-1",title:"Seed inventory"},tE={key:1,class:"text-gray-600"},sE={key:1,class:"flex items-center gap-2 flex-wrap"},nE={key:2,class:"flex items-center gap-2 flex-wrap"},oE={class:"grid grid-cols-2 gap-2"},rE={class:"p-2 rounded-lg bg-purple-500/10 border border-purple-500/20 text-center"},aE={class:"text-lg font-bold text-white"},lE={class:"p-2 rounded-lg bg-amber-500/10 border border-amber-500/20 text-center"},iE={class:"text-lg font-bold text-amber-400"},dE={class:"p-2 rounded-lg bg-spider-green-500/10 border border-spider-green-500/20 text-center"},cE={class:"p-2 rounded-lg bg-blue-500/10 border border-blue-500/20 text-center"},uE={class:"text-lg font-bold text-blue-400"},pE={class:"flex items-center gap-2"},gE={class:"flex-1 min-w-0"},fE={class:"text-sm font-medium text-white truncate"},mE={class:"text-lg font-bold text-amber-400"},hE={key:1,class:"p-2 rounded-lg bg-gray-900/30"},bE={class:"text-xs text-gray-400 line-clamp-3"},vE={class:"lg:col-span-4"},xE={class:"p-3 rounded-lg bg-gray-900/40 h-full"},yE={class:"flex items-center justify-between mb-2"},_E={key:0,class:"text-xs text-gray-600"},wE={key:0,class:"grid grid-cols-3 gap-1"},kE=["src","alt"],$E={class:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-end p-1"},CE={class:"text-[10px] text-white truncate"},SE={key:0,class:"aspect-square rounded-lg bg-gray-800 flex items-center justify-center cursor-pointer hover:bg-gray-700 transition-colors"},PE={class:"text-sm text-gray-400"},EE={key:1,class:"py-8 text-center"},TE={class:"lg:col-span-4 space-y-3"},AE={class:"p-3 rounded-lg bg-gray-900/40"},DE={class:"flex items-center justify-between mb-2"},ME={class:"flex items-center gap-2 text-[10px]"},OE={key:0,class:"text-green-400"},LE={key:1,class:"text-gray-500"},jE={key:0,class:"space-y-1 max-h-[200px] overflow-y-auto"},IE=["onClick"],RE={key:0,class:"text-amber-400 text-sm"},FE={key:1,class:"w-3.5"},NE={class:"flex-1 min-w-0"},BE={class:"text-sm font-medium text-white truncate"},VE={key:0,class:"text-[10px] text-gray-500 truncate"},UE={key:1,class:"py-4 text-center"},zE={key:0,class:"p-3 rounded-lg bg-gray-900/40"},HE={class:"mt-2 space-y-1"},GE={class:"text-gray-600 w-16 shrink-0"},WE={class:"text-gray-400 truncate"},qE={key:1,class:"p-3 rounded-lg bg-gray-900/40"},KE={class:"mt-2 space-y-1"},YE={class:"flex-1 min-w-0"},ZE={class:"text-xs font-medium text-white truncate"},XE={class:"text-[10px] text-gray-500"},QE=Pe({__name:"LabStrainCardExpanded",props:{strain:{},plants:{default:()=>[]},plantsCount:{default:0},keepersCount:{default:0},avgScore:{default:0}},emits:["edit","select-plant"],setup(s,{emit:n}){const r=s,o=n,i=W(!1),d=W(null),g=W(!1);async function f(){i.value=!0;try{d.value=await $fetch(`/api/lab/strains/${r.strain.id}`)}catch{}finally{i.value=!1}}ot(f),He(()=>r.strain.id,f);const m=U(()=>{const y=d.value?.plants||r.plants;return g.value?y:y.slice(0,6)});function b(y){const h=d.value?.plants?.find(u=>u.id===y.id);h&&o("select-plant",h)}const x=U(()=>{const y={feminized:"bg-pink-500/20 text-pink-300",regular:"bg-blue-500/20 text-blue-300",autoflower:"bg-amber-500/20 text-amber-300"};return y[r.strain.seed_type||"feminized"]||y.feminized}),_=U(()=>({feminized:"Fem",regular:"Reg",autoflower:"Auto"})[r.strain.seed_type||"feminized"]||"Fem"),C=U(()=>{const y={easy:"bg-green-500/20 text-green-400",moderate:"bg-yellow-500/20 text-yellow-400",advanced:"bg-orange-500/20 text-orange-400",expert:"bg-red-500/20 text-red-400"};return y[r.strain.grow_difficulty||"moderate"]||y.moderate}),k=U(()=>({easy:"Easy",moderate:"Med",advanced:"Hard",expert:"Expert"})[r.strain.grow_difficulty||"moderate"]||"Med"),p=U(()=>r.strain.total_seeds?(r.strain.seeds_remaining??r.strain.total_seeds)/r.strain.total_seeds*100:0),T=U(()=>{const y=d.value?.stats?.avg_score||r.avgScore||0;return y>=80?"text-spider-green-400":y>=60?"text-yellow-400":y>=40?"text-orange-400":"text-gray-400"});function M(y){const h=Fe[y];if(!h)return"bg-gray-500/20 text-gray-300";const u=h.color.replace("text-","").replace("-400","");return`bg-${u}-500/20 text-${u}-300`}function P(y){return Fe[y]?.shortLabel||y}function w(y){return y>=80?"text-spider-green-400":y>=60?"text-yellow-400":y>=40?"text-orange-400":"text-red-400"}function $(y){const h={general:"bg-gray-500/20 text-gray-300",watering:"bg-blue-500/20 text-blue-300",nutrients:"bg-green-500/20 text-green-300",problem:"bg-red-500/20 text-red-300",training:"bg-purple-500/20 text-purple-300",photo:"bg-pink-500/20 text-pink-300"};return(h[y]||h.general)??""}function S(y){const h={planning:"bg-blue-500/20 text-blue-300",active:"bg-green-500/20 text-green-300",paused:"bg-yellow-500/20 text-yellow-300",completed:"bg-purple-500/20 text-purple-300",abandoned:"bg-gray-500/20 text-gray-300"};return(h[y]||h.planning)??""}function A(y){return y?new Date(y).toLocaleDateString("en-US",{month:"short",day:"numeric"}):""}return(y,h)=>(a(),l("div",TP,[i.value?(a(),l("div",AP,[...h[3]||(h[3]=[e("div",{class:"w-6 h-6 border-2 border-purple-500 border-t-transparent rounded-full animate-spin"},null,-1)])])):(a(),l(Q,{key:1},[e("div",DP,[h[5]||(h[5]=e("div",{class:"w-12 h-12 rounded-xl bg-gradient-to-br from-purple-500/30 to-pink-500/30 flex items-center justify-center shrink-0"},[e("span",{class:"text-xl"},"🧬")],-1)),e("div",MP,[e("div",OP,[e("h3",LP,c(s.strain.name),1),e("span",{class:V([[x.value],"px-2 py-0.5 rounded text-xs font-medium"])},c(_.value),3),s.strain.grow_difficulty?(a(),l("span",{key:0,class:V(["px-2 py-0.5 rounded text-xs font-bold",C.value])},c(k.value),3)):j("",!0)]),e("p",jP,[s.strain.breeder?(a(),l("span",IP,c(s.strain.breeder),1)):j("",!0),s.strain.breeder&&s.strain.lineage?(a(),l("span",RP," · ")):j("",!0),s.strain.lineage?(a(),l("span",FP,c(s.strain.lineage),1)):j("",!0)])]),e("button",{onClick:h[0]||(h[0]=Ve(u=>o("edit"),["stop"])),class:"flex items-center gap-2 px-3 py-2 rounded-lg bg-purple-600/20 hover:bg-purple-600/30 text-purple-400 hover:text-purple-300 transition-colors shrink-0"},[I(t(On),{class:"w-4 h-4"}),h[4]||(h[4]=e("span",{class:"text-sm"},"Edit",-1))])]),e("div",NP,[e("div",BP,[e("div",VP,[s.strain.indica_ratio!==void 0?(a(),l("div",UP,[h[7]||(h[7]=e("span",{class:"w-2 h-2 rounded-full bg-purple-500 shrink-0"},null,-1)),e("span",zP,c(s.strain.indica_ratio)+"% Ind",1),e("div",HP,[e("div",{class:"bg-purple-500",style:Te({width:`${s.strain.indica_ratio}%`})},null,4),h[6]||(h[6]=e("div",{class:"bg-green-500 flex-1"},null,-1))]),e("span",GP,c(100-s.strain.indica_ratio)+"% Sat",1),h[8]||(h[8]=e("span",{class:"w-2 h-2 rounded-full bg-green-500 shrink-0"},null,-1))])):j("",!0),e("div",WP,[e("div",{class:"flex items-center gap-1",title:`Expected: ${s.strain.expected_flowering_days||"N/A"} days`},[I(t(ks),{class:"w-3.5 h-3.5 text-blue-400"}),d.value?.stats?.avg_flowering_days?(a(),l("span",KP,[ce(c(d.value.stats.avg_flowering_days)+"d ",1),d.value.stats.flowering_diff?(a(),l("span",{key:0,class:V(d.value.stats.flowering_diff>0?"text-orange-400":"text-green-400")}," ("+c(d.value.stats.flowering_diff>0?"+":"")+c(d.value.stats.flowering_diff)+") ",3)):j("",!0)])):s.strain.expected_flowering_days?(a(),l("span",YP," ~"+c(s.strain.expected_flowering_days)+"d ",1)):(a(),l("span",ZP,"--"))],8,qP),h[9]||(h[9]=e("span",{class:"text-gray-700"},"|",-1)),e("div",XP,[I(t(Yc),{class:"w-3.5 h-3.5 text-green-400"}),d.value?.stats?.avg_height_cm?(a(),l("span",QP,c(d.value.stats.avg_height_cm)+"cm",1)):(a(),l("span",JP,"--"))]),h[10]||(h[10]=e("span",{class:"text-gray-700"},"|",-1)),e("div",eE,[I(t(An),{class:"w-3.5 h-3.5 text-gray-500"}),s.strain.total_seeds?(a(),l("span",{key:0,class:V(p.value<=20?"text-orange-400":"text-gray-300")},c(s.strain.seeds_remaining??s.strain.total_seeds)+"/"+c(s.strain.total_seeds),3)):(a(),l("span",tE,"--"))])]),d.value?.stats?.common_training?.length?(a(),l("div",sE,[h[11]||(h[11]=e("span",{class:"text-xs text-gray-500"},"Training:",-1)),(a(!0),l(Q,null,le(d.value.stats.common_training,u=>(a(),l("span",{key:u,class:"px-1.5 py-0.5 rounded bg-emerald-500/20 text-emerald-300 text-[10px]"},c(u),1))),128))])):j("",!0),s.strain.dominant_terpenes?.length?(a(),l("div",nE,[h[12]||(h[12]=e("span",{class:"text-xs text-gray-500"},"Terpenes:",-1)),(a(!0),l(Q,null,le(s.strain.dominant_terpenes,u=>(a(),l("span",{key:u,class:"px-1.5 py-0.5 rounded bg-orange-500/20 text-orange-300 text-[10px]"},c(u),1))),128))])):j("",!0)]),e("div",oE,[e("div",rE,[e("p",aE,c(d.value?.stats?.total_plants||s.plantsCount),1),h[13]||(h[13]=e("p",{class:"text-[10px] text-purple-300 uppercase"},"Total Plants",-1))]),e("div",lE,[e("p",iE,c(d.value?.stats?.keepers||s.keepersCount),1),h[14]||(h[14]=e("p",{class:"text-[10px] text-amber-300 uppercase"},"Keepers",-1))]),e("div",dE,[e("p",{class:V(["text-lg font-bold",T.value])},c(d.value?.stats?.avg_score||s.avgScore?(d.value?.stats?.avg_score||s.avgScore).toFixed(1):"--"),3),h[15]||(h[15]=e("p",{class:"text-[10px] text-spider-green-300 uppercase"},"Avg Score",-1))]),e("div",cE,[e("p",uE,c(d.value?.stats?.best_score?d.value.stats.best_score.toFixed(1):"--"),1),h[16]||(h[16]=e("p",{class:"text-[10px] text-blue-300 uppercase"},"Best Score",-1))])]),d.value?.stats?.best_plant?(a(),l("div",{key:0,onClick:h[1]||(h[1]=u=>b(d.value.stats.best_plant)),class:"p-2 rounded-lg bg-gradient-to-r from-amber-500/10 to-yellow-500/10 border border-amber-500/30 cursor-pointer hover:border-amber-400/50 transition-colors"},[e("div",pE,[h[18]||(h[18]=e("span",{class:"text-amber-400"},"★",-1)),e("div",gE,[h[17]||(h[17]=e("p",{class:"text-xs text-amber-300"},"Best Performer",-1)),e("p",fE,c(d.value.stats.best_plant.code),1)]),e("span",mE,c(d.value.stats.best_plant.score.toFixed(1)),1)])])):j("",!0),s.strain.description?(a(),l("div",hE,[h[19]||(h[19]=e("p",{class:"text-xs text-gray-500 mb-1"},"Notes",-1)),e("p",bE,c(s.strain.description),1)])):j("",!0)]),e("div",vE,[e("div",xE,[e("div",yE,[h[20]||(h[20]=e("span",{class:"text-xs text-gray-500 uppercase"},"Photo Gallery",-1)),d.value?.photos?.length?(a(),l("span",_E,c(d.value.photos.length)+" photos",1)):j("",!0)]),d.value?.photos?.length?(a(),l("div",wE,[(a(!0),l(Q,null,le(d.value.photos.slice(0,9),(u,v)=>(a(),l("div",{key:v,class:"aspect-square rounded-lg overflow-hidden bg-gray-800 cursor-pointer hover:opacity-80 transition-opacity relative group"},[e("img",{src:u.url,alt:u.plant_code,class:"w-full h-full object-cover"},null,8,kE),e("div",$E,[e("span",CE,c(u.plant_code),1)])]))),128)),d.value.photos.length>9?(a(),l("div",SE,[e("span",PE,"+"+c(d.value.photos.length-9),1)])):j("",!0)])):(a(),l("div",EE,[I(t(pt),{class:"w-8 h-8 text-gray-700 mx-auto mb-2"}),h[21]||(h[21]=e("p",{class:"text-xs text-gray-600"},"No photos yet",-1)),h[22]||(h[22]=e("p",{class:"text-[10px] text-gray-700"},"Add photos via plant observations",-1))]))])]),e("div",TE,[e("div",AE,[e("div",DE,[h[23]||(h[23]=e("span",{class:"text-xs text-gray-500 uppercase"},"Plants",-1)),e("div",ME,[d.value?.stats?.active_plants?(a(),l("span",OE,c(d.value.stats.active_plants)+" active",1)):j("",!0),d.value?.stats?.completed_plants?(a(),l("span",LE,c(d.value.stats.completed_plants)+" done",1)):j("",!0)])]),m.value.length>0?(a(),l("div",jE,[(a(!0),l(Q,null,le(m.value,u=>(a(),l("div",{key:u.id,onClick:v=>o("select-plant",u),class:"flex items-center gap-2 p-1.5 rounded-lg bg-gray-800/50 hover:bg-gray-800 cursor-pointer transition-colors group"},[u.is_keeper?(a(),l("span",RE,"★")):(a(),l("span",FE)),e("div",NE,[e("p",BE,c(u.plant_code),1),u.pheno_label?(a(),l("p",VE,'"'+c(u.pheno_label)+'"',1)):j("",!0)]),e("span",{class:V([M(u.status),"px-1.5 py-0.5 rounded text-[10px]"])},c(P(u.status)),3),u.final_score?(a(),l("span",{key:2,class:V(["text-xs font-medium",w(u.final_score)])},c(u.final_score.toFixed(1)),3)):j("",!0),I(t(nt),{class:"w-3.5 h-3.5 text-gray-600 opacity-0 group-hover:opacity-100 transition-opacity"})],8,IE))),128)),d.value?.plants&&d.value.plants.length>6?(a(),l("div",{key:0,class:"text-center py-1 text-xs text-gray-500 cursor-pointer hover:text-gray-300",onClick:h[2]||(h[2]=u=>g.value=!g.value)},c(g.value?"Show less":`+${d.value.plants.length-6} more`),1)):j("",!0)])):(a(),l("div",UE,[...h[24]||(h[24]=[e("p",{class:"text-xs text-gray-600"},"No plants yet",-1)])]))]),d.value?.recent_observations?.length?(a(),l("div",zE,[h[25]||(h[25]=e("span",{class:"text-xs text-gray-500 uppercase"},"Recent Activity",-1)),e("div",HE,[(a(!0),l(Q,null,le(d.value.recent_observations.slice(0,4),u=>(a(),l("div",{key:u.id,class:"flex items-center gap-2 text-xs"},[e("span",GE,c(A(u.observed_at)),1),e("span",WE,c(u.plant_code),1),e("span",{class:V([$(u.obs_type),"px-1 py-0.5 rounded text-[10px] shrink-0"])},c(u.obs_type),3)]))),128))])])):j("",!0),d.value?.breeding_projects?.length?(a(),l("div",qE,[h[26]||(h[26]=e("span",{class:"text-xs text-gray-500 uppercase"},"Breeding Projects",-1)),e("div",KE,[(a(!0),l(Q,null,le(d.value.breeding_projects,u=>(a(),l("div",{key:u.id,class:"flex items-center gap-2 p-1.5 rounded-lg bg-pink-500/10 border border-pink-500/20 cursor-pointer hover:border-pink-400/40 transition-colors"},[I(t(At),{class:"w-3.5 h-3.5 text-pink-400 shrink-0"}),e("div",YE,[e("p",ZE,c(u.name),1),e("p",XE,c(u.project_type),1)]),e("span",{class:V([S(u.status),"px-1.5 py-0.5 rounded text-[10px]"])},c(u.status),3)]))),128))])])):j("",!0)])])],64))]))}}),JE=Object.assign(QE,{__name:"LabStrainCardExpanded"}),e9={class:"relative"},t9={class:"flex items-start justify-between gap-3 mb-3"},s9={class:"relative"},n9={class:"flex-1 min-w-0"},o9={class:"text-base font-bold text-white truncate group-hover:text-purple-300 transition-colors"},r9={key:0,class:"text-xs text-gray-500 truncate flex items-center gap-1"},a9={key:0,class:"mb-3"},l9={class:"flex justify-between text-[10px] text-gray-500 mb-1"},i9={class:"flex items-center gap-1"},d9={class:"flex items-center gap-1"},c9={class:"h-2 rounded-full bg-gray-700/50 overflow-hidden flex"},u9={class:"flex items-center gap-3 text-[11px] mb-3"},p9={key:0,class:"flex items-center gap-1 text-gray-400"},g9={key:1,class:"flex items-center gap-1 text-gray-400"},f9={key:2,class:"flex items-center gap-1 text-amber-400"},m9={key:1,class:"p-2 rounded-xl bg-gray-800/50 border border-gray-700/30"},h9={class:"flex items-center justify-between mb-1.5"},b9={class:"text-[10px] text-gray-500 uppercase tracking-wider flex items-center gap-1"},v9={class:"text-xs font-bold text-white"},x9={class:"h-2 rounded-full bg-gray-700/50 overflow-hidden"},y9={key:0,class:"mt-1 text-[9px] text-orange-400 flex items-center gap-1"},_9={key:2,class:"mt-3 text-[10px] text-gray-500 truncate italic"},w9={class:"absolute bottom-3 right-3 opacity-0 group-hover:opacity-100 transition-opacity"},k9=Pe({__name:"LabStrainCard",props:{strain:{},plantsCount:{default:0},keepersCount:{default:0}},emits:["click"],setup(s,{emit:n}){const r=s,o=n,i=U(()=>{const m=r.strain.seed_type,b={feminized:{icon:"♀",bg:"bg-pink-500"},regular:{icon:"⚥",bg:"bg-blue-500"},autoflower:{icon:"⏱",bg:"bg-amber-500"}};return b[m||"regular"]||b.regular}),d=U(()=>{const m={easy:"bg-green-500/20 text-green-400",moderate:"bg-yellow-500/20 text-yellow-400",advanced:"bg-orange-500/20 text-orange-400",expert:"bg-red-500/20 text-red-400"};return m[r.strain.grow_difficulty||"moderate"]||m.moderate}),g=U(()=>({easy:"Easy",moderate:"Medium",advanced:"Hard",expert:"Expert"})[r.strain.grow_difficulty||"moderate"]||"Medium"),f=U(()=>r.strain.total_seeds?(r.strain.seeds_remaining??r.strain.total_seeds)/r.strain.total_seeds*100:0);return(m,b)=>(a(),l("button",{onClick:b[0]||(b[0]=x=>o("click")),class:"group relative p-4 rounded-2xl bg-gray-800/40 border border-gray-700/50 hover:border-purple-500/50 cursor-pointer transition-all hover:shadow-xl hover:scale-[1.02] text-left w-full"},[b[7]||(b[7]=e("div",{class:"absolute inset-0 rounded-2xl bg-gradient-to-br from-purple-500/5 to-pink-500/5 opacity-0 group-hover:opacity-100 transition-opacity"},null,-1)),e("div",e9,[e("div",t9,[e("div",s9,[b[1]||(b[1]=e("div",{class:"w-12 h-12 rounded-xl bg-gradient-to-br from-purple-500/30 to-pink-500/30 flex items-center justify-center"},[e("span",{class:"text-2xl"},"🧬")],-1)),e("div",{class:V(["absolute -bottom-1 -right-1 w-5 h-5 rounded-full flex items-center justify-center text-[10px] font-bold shadow-lg",t(i).bg])},c(t(i).icon),3)]),e("div",n9,[e("h3",o9,c(s.strain.name),1),s.strain.breeder?(a(),l("p",r9,[I(t(gd),{class:"w-3 h-3"}),ce(" "+c(s.strain.breeder),1)])):j("",!0)]),s.strain.grow_difficulty?(a(),l("div",{key:0,class:V(["px-2 py-1 rounded-lg text-[10px] font-bold",t(d)])},c(t(g)),3)):j("",!0)]),s.strain.indica_ratio!==void 0?(a(),l("div",a9,[e("div",l9,[e("span",i9,[b[2]||(b[2]=e("span",{class:"w-2 h-2 rounded-full bg-purple-500"},null,-1)),ce(" Indica "+c(s.strain.indica_ratio)+"% ",1)]),e("span",d9,[ce(" Sativa "+c(100-s.strain.indica_ratio)+"% ",1),b[3]||(b[3]=e("span",{class:"w-2 h-2 rounded-full bg-green-500"},null,-1))])]),e("div",c9,[e("div",{class:"bg-gradient-to-r from-purple-600 to-purple-400 rounded-l-full transition-all duration-500",style:Te({width:`${s.strain.indica_ratio}%`})},null,4),b[4]||(b[4]=e("div",{class:"bg-gradient-to-r from-green-500 to-green-400 rounded-r-full flex-1"},null,-1))])])):j("",!0),e("div",u9,[s.strain.expected_flowering_days?(a(),l("div",p9,[I(t(ks),{class:"w-3.5 h-3.5"}),e("span",null,c(s.strain.expected_flowering_days)+"d flower",1)])):j("",!0),s.plantsCount>0?(a(),l("div",g9,[I(t(Ne),{class:"w-3.5 h-3.5"}),e("span",null,c(s.plantsCount)+" plants",1)])):j("",!0),s.keepersCount>0?(a(),l("div",f9,[I(t(ct),{class:"w-3.5 h-3.5"}),e("span",null,c(s.keepersCount)+" keepers",1)])):j("",!0)]),s.strain.total_seeds?(a(),l("div",m9,[e("div",h9,[e("span",b9,[I(t(An),{class:"w-3 h-3"}),b[5]||(b[5]=ce(" Seed Bank ",-1))]),e("span",v9,c(s.strain.seeds_remaining??s.strain.total_seeds)+" / "+c(s.strain.total_seeds),1)]),e("div",x9,[e("div",{class:V(["h-full rounded-full transition-all duration-500",t(f)>50?"bg-gradient-to-r from-spider-green-600 to-spider-green-400":t(f)>20?"bg-gradient-to-r from-yellow-500 to-amber-400":"bg-gradient-to-r from-red-500 to-orange-400"]),style:Te({width:`${t(f)}%`})},null,6)]),t(f)<=20?(a(),l("p",y9,[I(t(hs),{class:"w-3 h-3"}),b[6]||(b[6]=ce(" Low stock! ",-1))])):j("",!0)])):j("",!0),s.strain.lineage?(a(),l("p",_9,c(s.strain.lineage),1)):j("",!0),e("div",w9,[I(t(nt),{class:"w-5 h-5 text-purple-400"})])])]))}}),$9=Object.assign(k9,{__name:"LabStrainCard"}),C9={class:"fixed top-0 right-0 bottom-0 left-0 desktop:left-[var(--sidebar-width,256px)] z-50 bg-gray-900 overflow-hidden flex flex-col"},S9={class:"h-1 bg-gray-800"},P9={class:"flex-shrink-0 border-b border-gray-800"},E9={class:"max-w-4xl mx-auto px-6 py-4"},T9={class:"flex items-center justify-between"},A9={class:"flex items-center gap-4"},D9={class:"w-12 h-12 rounded-2xl bg-gradient-to-br from-purple-500 to-purple-600 flex items-center justify-center shadow-lg shadow-purple-500/20"},M9={class:"text-sm text-gray-400"},O9={class:"flex-1 overflow-y-auto"},L9={class:"max-w-4xl mx-auto px-6 py-8"},j9={class:"p-5 rounded-2xl bg-purple-500/10 border border-purple-500/30 mb-8"},I9={class:"flex gap-4"},R9={class:"w-10 h-10 rounded-xl bg-purple-500/20 flex items-center justify-center flex-shrink-0"},F9={class:"space-y-6"},N9={class:"p-6 rounded-2xl bg-gray-800/50 border border-gray-700/50"},B9={class:"p-6 rounded-2xl bg-gray-800/50 border border-gray-700/50"},V9={class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},U9=["onClick"],z9={class:"text-3xl mb-3"},H9={class:"text-base font-semibold text-white mb-1"},G9={class:"text-xs text-gray-400"},W9={class:"p-6 rounded-2xl bg-gray-800/50 border border-gray-700/50"},q9={class:"mb-6"},K9={class:"flex items-center justify-between text-sm mb-3"},Y9={class:"text-purple-400 font-medium"},Z9={class:"text-orange-400 font-medium"},X9={class:"flex items-start gap-3"},Q9={class:"text-2xl"},J9={class:"font-medium text-white mb-1"},eT={class:"text-sm text-gray-300"},tT={class:"p-5 rounded-2xl bg-amber-500/10 border border-amber-500/30 mb-8"},sT={class:"flex gap-4"},nT={class:"w-10 h-10 rounded-xl bg-amber-500/20 flex items-center justify-center flex-shrink-0"},oT={class:"space-y-6"},rT={class:"p-6 rounded-2xl bg-gray-800/50 border border-gray-700/50"},aT={class:"p-6 rounded-2xl bg-gray-800/50 border border-gray-700/50"},lT={class:"grid grid-cols-1 sm:grid-cols-2 gap-6"},iT={class:"p-6 rounded-2xl bg-gray-800/50 border border-gray-700/50"},dT={class:"p-6 rounded-2xl bg-gray-800/50 border border-gray-700/50"},cT={class:"grid grid-cols-4 gap-2"},uT=["onClick","title"],pT={class:"text-2xl mb-1"},gT={class:"text-[10px] text-gray-400"},fT={class:"p-5 rounded-2xl bg-teal-500/10 border border-teal-500/30 mb-8"},mT={class:"flex gap-4"},hT={class:"w-10 h-10 rounded-xl bg-teal-500/20 flex items-center justify-center flex-shrink-0"},bT={class:"space-y-6"},vT={class:"p-6 rounded-2xl bg-gray-800/50 border border-gray-700/50"},xT={class:"grid grid-cols-2 gap-4"},yT=["max","placeholder"],_T={key:0,class:"mt-4 p-4 rounded-xl bg-gray-700/30"},wT={class:"flex items-center justify-between text-sm mb-2"},kT={class:"text-white font-medium"},$T={class:"h-2 bg-gray-600 rounded-full overflow-hidden"},CT={class:"p-6 rounded-2xl bg-gray-800/50 border border-gray-700/50"},ST={class:"p-6 rounded-2xl bg-gradient-to-br from-purple-500/10 to-purple-600/10 border border-purple-500/30"},PT={class:"font-semibold text-white mb-4 flex items-center gap-2"},ET={class:"grid grid-cols-2 sm:grid-cols-3 gap-4"},TT={class:"text-white font-medium"},AT={class:"text-white"},DT={class:"text-white"},MT={key:0},OT={class:"text-white"},LT={key:1},jT={class:"text-white"},IT={key:2},RT={class:"text-white"},FT={class:"flex-shrink-0 border-t border-gray-800 bg-gray-900/80 backdrop-blur-sm"},NT={class:"max-w-4xl mx-auto px-6 py-4"},BT={class:"flex items-center justify-between"},VT={key:1},UT={class:"flex items-center gap-3"},zT=["disabled"],HT=["disabled"],ro=3,GT=Pe({__name:"LabStrainWizard",emits:["close","created"],setup(s,{emit:n}){const r=n,o=rt(),i=W(1),d=W(!1),g=["Basic Info","Details","Inventory"],f=W({name:"",seed_type:"feminized",indica_ratio:50,breeder:"",lineage:"",expected_flowering_days:null,grow_difficulty:"moderate",total_seeds:null,seeds_remaining:null,description:""}),m=[{value:"feminized",label:"Feminized",icon:"♀️",description:"99%+ female seeds, no males to remove"},{value:"regular",label:"Regular",icon:"⚥",description:"Mix of male/female, good for breeding"},{value:"autoflower",label:"Autoflower",icon:"⏱️",description:"Flowers automatically, faster cycle"}],b=[{value:"easy",label:"Easy",icon:"🌱"},{value:"moderate",label:"Moderate",icon:"🌿"},{value:"advanced",label:"Advanced",icon:"🌳"},{value:"expert",label:"Expert",icon:"🏆"}],x=U(()=>i.value===1?f.value.name.trim().length>0:!0),_=U(()=>{const $=m.find(S=>S.value===f.value.seed_type);return $?$.label:"Unknown"}),C=U(()=>f.value.total_seeds?f.value.total_seeds-(f.value.seeds_remaining??f.value.total_seeds):0),k=U(()=>f.value.total_seeds?C.value/f.value.total_seeds*100:0),p=U(()=>{const $=f.value.indica_ratio;return $>=80?"💜":$>=60?"🟣":$>=40?"🔮":$>=20?"🟠":"🧡"}),T=U(()=>{const $=f.value.indica_ratio;return $>=90?"Pure Indica":$>=70?"Indica Dominant":$>=55?"Indica Leaning Hybrid":$>=45?"Balanced Hybrid":$>=30?"Sativa Leaning Hybrid":$>=10?"Sativa Dominant":"Pure Sativa"}),M=U(()=>{const $=f.value.indica_ratio;return $>=80?"Compact, bushy plants with broad leaves. Typically shorter flowering times and relaxing effects.":$>=60?"Predominantly indica traits with some sativa influence. Good balance of yield and manageable height.":$>=40?"A true hybrid combining traits from both parents. Versatile growth patterns and varied effects.":$>=20?"Predominantly sativa traits with some indica influence. Taller plants with energetic effects.":"Tall, stretchy plants with narrow leaves. Longer flowering times and uplifting, cerebral effects."}),P=U(()=>{const $=f.value.indica_ratio;return $>=60?"bg-purple-500/20 border border-purple-500/30":$>=40?"bg-violet-500/20 border border-violet-500/30":"bg-orange-500/20 border border-orange-500/30"});async function w(){if(x.value){d.value=!0;try{const $=await o.createStrain({name:f.value.name,seed_type:f.value.seed_type,indica_ratio:f.value.indica_ratio,breeder:f.value.breeder||void 0,lineage:f.value.lineage||void 0,expected_flowering_days:f.value.expected_flowering_days||void 0,grow_difficulty:f.value.grow_difficulty,total_seeds:f.value.total_seeds||void 0,seeds_remaining:f.value.seeds_remaining??f.value.total_seeds??void 0,description:f.value.description||void 0});r("created",$),r("close")}catch{}finally{d.value=!1}}}return($,S)=>(a(),l("div",C9,[e("div",S9,[e("div",{class:"h-full bg-gradient-to-r from-purple-600 to-purple-400 transition-all duration-500",style:Te({width:`${t(i)/ro*100}%`})},null,4)]),e("div",P9,[e("div",E9,[e("div",T9,[e("div",A9,[e("div",D9,[I(t(Mt),{class:"w-6 h-6 text-white"})]),e("div",null,[S[12]||(S[12]=e("h1",{class:"text-xl font-bold text-white"},"Add New Strain",-1)),e("p",M9,"Step "+c(t(i))+" of "+c(ro)+" — "+c(g[t(i)-1]),1)])]),e("button",{onClick:S[0]||(S[0]=A=>r("close")),class:"p-3 rounded-xl hover:bg-gray-800 text-gray-400 hover:text-white transition-colors"},[I(t(ze),{class:"w-6 h-6"})])])])]),e("div",O9,[e("div",L9,[t(i)===1?(a(),l(Q,{key:0},[S[22]||(S[22]=e("div",{class:"mb-8"},[e("h2",{class:"text-3xl font-bold text-white mb-3"},"Basic Strain Information"),e("p",{class:"text-lg text-gray-400"}," Let's start with the essentials. This information helps you identify and organize your strain collection. ")],-1)),e("div",j9,[e("div",I9,[e("div",R9,[I(t(wt),{class:"w-5 h-5 text-purple-400"})]),S[13]||(S[13]=e("div",null,[e("h4",{class:"font-semibold text-purple-300 mb-1"},"What is a Strain?"),e("p",{class:"text-sm text-purple-300/80"}," A strain is a specific genetic variety of cannabis with unique characteristics like growth patterns, flowering time, and effects. Keeping track of strains helps you learn which genetics work best in your environment and refine your growing techniques over time. ")],-1))])]),e("div",F9,[e("div",N9,[S[14]||(S[14]=e("label",{class:"block text-lg font-semibold text-white mb-2"},[ce(" Strain Name "),e("span",{class:"text-red-400"},"*")],-1)),S[15]||(S[15]=e("p",{class:"text-sm text-gray-400 mb-4"}," Enter the official name of the strain. This is usually provided by the breeder or seed bank. ",-1)),ye(e("input",{"onUpdate:modelValue":S[1]||(S[1]=A=>t(f).name=A),type:"text",placeholder:"e.g., Blue Dream, OG Kush, Girl Scout Cookies...",class:"w-full px-5 py-4 bg-gray-700/50 border border-gray-600 rounded-xl text-white text-lg placeholder-gray-500 focus:border-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-500/20 transition-all",autofocus:""},null,512),[[$e,t(f).name]]),S[16]||(S[16]=e("p",{class:"text-xs text-gray-500 mt-2"}," 💡 Tip: Use the exact name from the seed pack for accurate record-keeping ",-1))]),e("div",B9,[S[17]||(S[17]=e("label",{class:"block text-lg font-semibold text-white mb-2"},"Seed Type",-1)),S[18]||(S[18]=e("p",{class:"text-sm text-gray-400 mb-4"}," What type of seeds do you have? This affects flowering behavior and growing approach. ",-1)),e("div",V9,[(a(),l(Q,null,le(m,A=>e("button",{key:A.value,onClick:y=>t(f).seed_type=A.value,class:V(["p-5 rounded-xl border-2 transition-all text-left",t(f).seed_type===A.value?"border-purple-500 bg-purple-500/20":"border-gray-600 bg-gray-700/30 hover:border-gray-500"])},[e("div",z9,c(A.icon),1),e("div",H9,c(A.label),1),e("div",G9,c(A.description),1)],10,U9)),64))]),S[19]||(S[19]=yt('<div class="mt-4 p-4 rounded-xl bg-gray-700/30 border border-gray-600/50" data-v-94581dcc><h5 class="text-sm font-medium text-gray-300 mb-2" data-v-94581dcc>Understanding Seed Types:</h5><ul class="text-xs text-gray-400 space-y-1" data-v-94581dcc><li data-v-94581dcc><span class="text-purple-400" data-v-94581dcc>♀ Feminized:</span> 99%+ female, no need to identify sex</li><li data-v-94581dcc><span class="text-purple-400" data-v-94581dcc>⚥ Regular:</span> Mix of male/female, for breeding or traditional growing</li><li data-v-94581dcc><span class="text-purple-400" data-v-94581dcc>⏱️ Autoflower:</span> Flowers based on age, not light cycle</li></ul></div>',1))]),e("div",W9,[S[20]||(S[20]=e("label",{class:"block text-lg font-semibold text-white mb-2"},"Genetic Profile",-1)),S[21]||(S[21]=e("p",{class:"text-sm text-gray-400 mb-4"}," Adjust the slider to indicate the Indica/Sativa ratio of this strain. ",-1)),e("div",q9,[e("div",K9,[e("span",Y9,c(t(f).indica_ratio)+"% Indica",1),e("span",Z9,c(100-t(f).indica_ratio)+"% Sativa",1)]),ye(e("input",{"onUpdate:modelValue":S[2]||(S[2]=A=>t(f).indica_ratio=A),type:"range",min:"0",max:"100",step:"5",class:"w-full h-3 rounded-full appearance-none cursor-pointer bg-gradient-to-r from-purple-500 to-orange-500"},null,512),[[$e,t(f).indica_ratio,void 0,{number:!0}]])]),e("div",{class:V(["p-4 rounded-xl",t(P)])},[e("div",X9,[e("div",Q9,c(t(p)),1),e("div",null,[e("h5",J9,c(t(T)),1),e("p",eT,c(t(M)),1)])])],2)])])],64)):j("",!0),t(i)===2?(a(),l(Q,{key:1},[S[35]||(S[35]=e("div",{class:"mb-8"},[e("h2",{class:"text-3xl font-bold text-white mb-3"},"Breeder & Growing Details"),e("p",{class:"text-lg text-gray-400"}," Optional but valuable information that helps you track performance and plan your grow. ")],-1)),e("div",tT,[e("div",sT,[e("div",nT,[I(t(ct),{class:"w-5 h-5 text-amber-400"})]),S[23]||(S[23]=e("div",null,[e("h4",{class:"font-semibold text-amber-300 mb-1"},"Pro Tip"),e("p",{class:"text-sm text-amber-300/80"}," Recording the breeder and lineage helps you understand genetic traits and predict how plants will perform. This becomes invaluable when comparing results across grows. ")],-1))])]),e("div",oT,[e("div",rT,[S[24]||(S[24]=e("label",{class:"block text-lg font-semibold text-white mb-2"},"Breeder / Seed Bank",-1)),S[25]||(S[25]=e("p",{class:"text-sm text-gray-400 mb-4"}," Where did these seeds come from? The breeder's name helps verify authenticity and track genetics. ",-1)),ye(e("input",{"onUpdate:modelValue":S[3]||(S[3]=A=>t(f).breeder=A),type:"text",placeholder:"e.g., Humboldt Seed Co, Barney's Farm, Mephisto...",class:"w-full px-5 py-4 bg-gray-700/50 border border-gray-600 rounded-xl text-white placeholder-gray-500 focus:border-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-500/20 transition-all"},null,512),[[$e,t(f).breeder]])]),e("div",aT,[S[26]||(S[26]=e("label",{class:"block text-lg font-semibold text-white mb-2"},"Lineage / Parent Strains",-1)),S[27]||(S[27]=e("p",{class:"text-sm text-gray-400 mb-4"}," If known, the genetic parents of this strain. Helps predict growth characteristics. ",-1)),ye(e("input",{"onUpdate:modelValue":S[4]||(S[4]=A=>t(f).lineage=A),type:"text",placeholder:"e.g., Blueberry x Super Silver Haze",class:"w-full px-5 py-4 bg-gray-700/50 border border-gray-600 rounded-xl text-white placeholder-gray-500 focus:border-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-500/20 transition-all"},null,512),[[$e,t(f).lineage]]),S[28]||(S[28]=e("p",{class:"text-xs text-gray-500 mt-2"}," 💡 Format: Parent 1 x Parent 2 (mother x father for breeding records) ",-1))]),e("div",lT,[e("div",iT,[S[29]||(S[29]=e("label",{class:"block text-lg font-semibold text-white mb-2"},"Flowering Days",-1)),S[30]||(S[30]=e("p",{class:"text-sm text-gray-400 mb-4"}," Expected flowering period in days. Usually listed on seed pack. ",-1)),ye(e("input",{"onUpdate:modelValue":S[5]||(S[5]=A=>t(f).expected_flowering_days=A),type:"number",min:"40",max:"120",placeholder:"e.g., 65",class:"w-full px-5 py-4 bg-gray-700/50 border border-gray-600 rounded-xl text-white placeholder-gray-500 focus:border-purple-500 focus:outline-none transition-all"},null,512),[[$e,t(f).expected_flowering_days,void 0,{number:!0}]]),S[31]||(S[31]=e("p",{class:"text-xs text-gray-500 mt-2"}," Typical range: 45-75 days ",-1))]),e("div",dT,[S[32]||(S[32]=e("label",{class:"block text-lg font-semibold text-white mb-2"},"Growing Difficulty",-1)),S[33]||(S[33]=e("p",{class:"text-sm text-gray-400 mb-4"}," How challenging is this strain to grow successfully? ",-1)),e("div",cT,[(a(),l(Q,null,le(b,A=>e("button",{key:A.value,onClick:y=>t(f).grow_difficulty=A.value,class:V(["p-3 rounded-xl border-2 transition-all text-center",t(f).grow_difficulty===A.value?"border-purple-500 bg-purple-500/20":"border-gray-600 bg-gray-700/30 hover:border-gray-500"]),title:A.label},[e("div",pT,c(A.icon),1),e("div",gT,c(A.label),1)],10,uT)),64))])])]),S[34]||(S[34]=yt('<div class="p-5 rounded-2xl bg-gray-800/30 border border-gray-700/30" data-v-94581dcc><h4 class="font-medium text-gray-300 mb-3" data-v-94581dcc>Difficulty Guide</h4><div class="grid grid-cols-2 sm:grid-cols-4 gap-4 text-sm" data-v-94581dcc><div data-v-94581dcc><div class="text-lg mb-1" data-v-94581dcc>🌱</div><div class="text-gray-300 font-medium" data-v-94581dcc>Easy</div><div class="text-xs text-gray-500" data-v-94581dcc>Forgiving, good for beginners</div></div><div data-v-94581dcc><div class="text-lg mb-1" data-v-94581dcc>🌿</div><div class="text-gray-300 font-medium" data-v-94581dcc>Moderate</div><div class="text-xs text-gray-500" data-v-94581dcc>Some experience needed</div></div><div data-v-94581dcc><div class="text-lg mb-1" data-v-94581dcc>🌳</div><div class="text-gray-300 font-medium" data-v-94581dcc>Advanced</div><div class="text-xs text-gray-500" data-v-94581dcc>Specific requirements</div></div><div data-v-94581dcc><div class="text-lg mb-1" data-v-94581dcc>🏆</div><div class="text-gray-300 font-medium" data-v-94581dcc>Expert</div><div class="text-xs text-gray-500" data-v-94581dcc>Challenging, precise control</div></div></div></div>',1))])],64)):j("",!0),t(i)===3?(a(),l(Q,{key:2},[S[51]||(S[51]=e("div",{class:"mb-8"},[e("h2",{class:"text-3xl font-bold text-white mb-3"},"Inventory & Notes"),e("p",{class:"text-lg text-gray-400"}," Track your seed inventory and add any notes about this strain. ")],-1)),e("div",fT,[e("div",mT,[e("div",hT,[I(t(Ne),{class:"w-5 h-5 text-teal-400"})]),S[36]||(S[36]=e("div",null,[e("h4",{class:"font-semibold text-teal-300 mb-1"},"Seed Inventory Tracking"),e("p",{class:"text-sm text-teal-300/80"}," Keeping track of your seed inventory helps you plan future grows and know when to restock. The system will automatically decrement your count when you create new plants from this strain. ")],-1))])]),e("div",bT,[e("div",vT,[S[40]||(S[40]=e("label",{class:"block text-lg font-semibold text-white mb-2"},"Seed Inventory",-1)),S[41]||(S[41]=e("p",{class:"text-sm text-gray-400 mb-4"}," How many seeds did you purchase, and how many remain? ",-1)),e("div",xT,[e("div",null,[S[37]||(S[37]=e("label",{class:"block text-sm font-medium text-gray-400 mb-2"},"Total Seeds Purchased",-1)),ye(e("input",{"onUpdate:modelValue":S[6]||(S[6]=A=>t(f).total_seeds=A),type:"number",min:"0",placeholder:"e.g., 10",class:"w-full px-4 py-3 bg-gray-700/50 border border-gray-600 rounded-xl text-white placeholder-gray-500 focus:border-purple-500 focus:outline-none transition-all"},null,512),[[$e,t(f).total_seeds,void 0,{number:!0}]])]),e("div",null,[S[38]||(S[38]=e("label",{class:"block text-sm font-medium text-gray-400 mb-2"},"Seeds Remaining",-1)),ye(e("input",{"onUpdate:modelValue":S[7]||(S[7]=A=>t(f).seeds_remaining=A),type:"number",min:"0",max:t(f).total_seeds||999,placeholder:t(f).total_seeds?String(t(f).total_seeds):"10",class:"w-full px-4 py-3 bg-gray-700/50 border border-gray-600 rounded-xl text-white placeholder-gray-500 focus:border-purple-500 focus:outline-none transition-all"},null,8,yT),[[$e,t(f).seeds_remaining,void 0,{number:!0}]])])]),t(f).total_seeds&&t(f).seeds_remaining!==null?(a(),l("div",_T,[e("div",wT,[S[39]||(S[39]=e("span",{class:"text-gray-400"},"Seed Usage",-1)),e("span",kT,c(t(C))+" of "+c(t(f).total_seeds)+" used",1)]),e("div",$T,[e("div",{class:"h-full bg-gradient-to-r from-purple-500 to-purple-400 transition-all",style:Te({width:`${t(k)}%`})},null,4)])])):j("",!0)]),e("div",CT,[S[42]||(S[42]=e("label",{class:"block text-lg font-semibold text-white mb-2"},"Notes & Description",-1)),S[43]||(S[43]=e("p",{class:"text-sm text-gray-400 mb-4"}," Any additional information about this strain - expected effects, grow tips, purchase info, etc. ",-1)),ye(e("textarea",{"onUpdate:modelValue":S[8]||(S[8]=A=>t(f).description=A),rows:"4",placeholder:`Add your notes here...

Examples:
• Expected effects or terpene profile
• Where/when you purchased
• Growing tips you've learned
• Special care requirements`,class:"w-full px-4 py-3 bg-gray-700/50 border border-gray-600 rounded-xl text-white placeholder-gray-500 focus:border-purple-500 focus:outline-none resize-none"},null,512),[[$e,t(f).description]])]),e("div",ST,[e("h4",PT,[I(t(St),{class:"w-5 h-5 text-purple-400"}),S[44]||(S[44]=ce(" Strain Summary ",-1))]),e("div",ET,[e("div",null,[S[45]||(S[45]=e("div",{class:"text-xs text-gray-400 mb-1"},"Name",-1)),e("div",TT,c(t(f).name||"Not set"),1)]),e("div",null,[S[46]||(S[46]=e("div",{class:"text-xs text-gray-400 mb-1"},"Type",-1)),e("div",AT,c(t(_)),1)]),e("div",null,[S[47]||(S[47]=e("div",{class:"text-xs text-gray-400 mb-1"},"Genetics",-1)),e("div",DT,c(t(f).indica_ratio)+"% Indica / "+c(100-t(f).indica_ratio)+"% Sativa",1)]),t(f).breeder?(a(),l("div",MT,[S[48]||(S[48]=e("div",{class:"text-xs text-gray-400 mb-1"},"Breeder",-1)),e("div",OT,c(t(f).breeder),1)])):j("",!0),t(f).expected_flowering_days?(a(),l("div",LT,[S[49]||(S[49]=e("div",{class:"text-xs text-gray-400 mb-1"},"Flowering",-1)),e("div",jT,c(t(f).expected_flowering_days)+" days",1)])):j("",!0),t(f).total_seeds?(a(),l("div",IT,[S[50]||(S[50]=e("div",{class:"text-xs text-gray-400 mb-1"},"Seeds",-1)),e("div",RT,c(t(f).seeds_remaining??t(f).total_seeds)+" remaining",1)])):j("",!0)])])])],64)):j("",!0)])]),e("div",FT,[e("div",NT,[e("div",BT,[t(i)>1?(a(),l("button",{key:0,onClick:S[9]||(S[9]=A=>i.value--),class:"flex items-center gap-2 px-5 py-3 text-gray-400 hover:text-white transition-colors rounded-xl hover:bg-gray-800"},[I(t(os),{class:"w-5 h-5"}),S[52]||(S[52]=ce(" Back ",-1))])):(a(),l("div",VT)),e("div",UT,[e("button",{onClick:S[10]||(S[10]=A=>r("close")),class:"px-5 py-3 text-gray-400 hover:text-white transition-colors rounded-xl hover:bg-gray-800"}," Cancel "),t(i)<ro?(a(),l("button",{key:0,onClick:S[11]||(S[11]=A=>i.value++),disabled:!t(x),class:V(["flex items-center gap-2 px-6 py-3 rounded-xl font-semibold transition-all",t(x)?"bg-purple-600 hover:bg-purple-500 text-white shadow-lg shadow-purple-500/20":"bg-gray-700 text-gray-500 cursor-not-allowed"])},[S[53]||(S[53]=ce(" Continue ",-1)),I(t(nt),{class:"w-5 h-5"})],10,zT)):(a(),l("button",{key:1,onClick:w,disabled:t(d)||!t(x),class:"flex items-center gap-2 px-6 py-3 rounded-xl font-semibold bg-gradient-to-r from-purple-600 to-purple-500 hover:from-purple-500 hover:to-purple-400 text-white transition-all shadow-lg shadow-purple-500/20 disabled:opacity-50 disabled:cursor-not-allowed"},[t(d)?(a(),pe(t(ut),{key:1,class:"w-5 h-5 animate-spin"})):(a(),pe(t(Ne),{key:0,class:"w-5 h-5"})),ce(" "+c(t(d)?"Adding...":"Add Strain"),1)],8,HT))])])])])]))}}),Qi=Object.assign(Pt(GT,[["__scopeId","data-v-94581dcc"]]),{__name:"LabStrainWizard"}),WT={class:"space-y-4"},qT={class:"flex items-center justify-between"},KT={class:"text-sm font-semibold text-white flex items-center gap-2"},YT={class:"flex items-center gap-1 p-0.5 rounded-lg bg-gray-800/60"},ZT=["onClick"],XT={class:"h-48 p-3 rounded-xl bg-gray-800/40 border border-gray-700/50"},QT={key:3,class:"h-full flex flex-col items-center justify-center text-center"},JT={class:"w-12 h-12 rounded-xl bg-purple-500/20 flex items-center justify-center mb-3"},eA={class:"text-xs text-gray-500"},tA={class:"grid grid-cols-4 gap-2"},sA={class:"p-2 rounded-lg bg-gray-800/40 text-center"},nA={class:"text-lg font-bold text-purple-400"},oA={class:"p-2 rounded-lg bg-gray-800/40 text-center"},rA={class:"text-lg font-bold text-amber-400"},aA={class:"p-2 rounded-lg bg-gray-800/40 text-center"},lA={class:"text-lg font-bold text-spider-green-400"},iA={class:"p-2 rounded-lg bg-gray-800/40 text-center"},dA={class:"text-lg font-bold text-blue-400"},cA=Pe({__name:"LabStrainPerformanceChart",props:{strain:{},plants:{default:()=>[]},stats:{default:()=>({totalPlants:0,keepers:0,avgScore:null,avgFlowerDays:null})}},setup(s){Fo.register(Ml,Ol,Ll,No,Bo,jl,Il,Vo,Uo,zo);const n=s,r=[{id:"traits",label:"Traits"},{id:"scores",label:"Scores"},{id:"timeline",label:"Timeline"}],o=W("traits"),i=U(()=>n.stats?.scores||n.plants?.some(k=>k.final_score)),d=U(()=>n.plants?.length>0),g=U(()=>{const k=n.stats?.scores||{vigor:7,structure:6.5,resistance:7.5,production:8,aroma:7,clonability:6};return{labels:["Vigor","Structure","Resistance","Production","Aroma","Clonability"],datasets:[{label:n.strain.name,data:[k.vigor,k.structure,k.resistance,k.production,k.aroma,k.clonability],fill:!0,backgroundColor:"rgba(168, 85, 247, 0.2)",borderColor:"rgba(168, 85, 247, 0.8)",pointBackgroundColor:"rgba(168, 85, 247, 1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgba(168, 85, 247, 1)"}]}}),f={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{r:{angleLines:{color:"rgba(75, 85, 99, 0.3)"},grid:{color:"rgba(75, 85, 99, 0.3)"},pointLabels:{color:"#9ca3af",font:{size:9}},ticks:{display:!1,stepSize:2},suggestedMin:0,suggestedMax:10}}},m=U(()=>{const k=n.plants?.filter(p=>p.final_score)||[];return{labels:k.map(p=>p.plant_code),datasets:[{label:"Score",data:k.map(p=>p.final_score),backgroundColor:k.map(p=>p.is_keeper?"rgba(251, 191, 36, 0.6)":"rgba(34, 197, 94, 0.6)"),borderColor:k.map(p=>p.is_keeper?"rgba(251, 191, 36, 1)":"rgba(34, 197, 94, 1)"),borderWidth:1,borderRadius:4}]}}),b={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:"#1f2937",borderColor:"#374151",borderWidth:1}},scales:{x:{grid:{display:!1},ticks:{color:"#9ca3af",font:{size:9}}},y:{grid:{color:"rgba(55, 65, 81, 0.3)"},ticks:{color:"#9ca3af",font:{size:9}},suggestedMin:0,suggestedMax:100}}},x=U(()=>{const k=[...n.plants||[]].sort((p,T)=>new Date(p.date_started).getTime()-new Date(T.date_started).getTime());return{labels:k.map(p=>new Date(p.date_started).toLocaleDateString("en-US",{month:"short",year:"2-digit"})),datasets:[{label:"Plants Started",data:k.map((p,T)=>T+1),fill:!0,backgroundColor:"rgba(34, 197, 94, 0.1)",borderColor:"rgba(34, 197, 94, 0.8)",tension:.4,pointRadius:3,pointBackgroundColor:k.map(p=>p.is_keeper?"rgba(251, 191, 36, 1)":"rgba(34, 197, 94, 1)")}]}}),_={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{x:{grid:{display:!1},ticks:{color:"#9ca3af",font:{size:9}}},y:{grid:{color:"rgba(55, 65, 81, 0.3)"},ticks:{color:"#9ca3af",font:{size:9},stepSize:1}}}},C=U(()=>n.stats||{totalPlants:n.plants?.length||0,keepers:n.plants?.filter(k=>k.is_keeper).length||0,avgScore:n.plants?.filter(k=>k.final_score).length>0?Math.round(n.plants.filter(k=>k.final_score).reduce((k,p)=>k+p.final_score,0)/n.plants.filter(k=>k.final_score).length*10)/10:null,avgFlowerDays:null});return(k,p)=>(a(),l("div",WT,[e("div",qT,[e("h3",KT,[I(t(Ot),{class:"w-4 h-4 text-purple-400"}),p[0]||(p[0]=ce(" Performance Analytics ",-1))]),e("div",YT,[(a(),l(Q,null,le(r,T=>e("button",{key:T.id,onClick:M=>o.value=T.id,class:V(["px-2 py-1 rounded-md text-[10px] font-medium transition-all",t(o)===T.id?"bg-purple-500/30 text-purple-300":"text-gray-500 hover:text-gray-300"])},c(T.label),11,ZT)),64))])]),e("div",XT,[t(o)==="traits"&&t(i)?(a(),pe(t(Tl),{key:0,data:t(g),options:f},null,8,["data"])):t(o)==="scores"&&t(i)?(a(),pe(t(Al),{key:1,data:t(m),options:b},null,8,["data"])):t(o)==="timeline"&&t(d)?(a(),pe(t(Dl),{key:2,data:t(x),options:_},null,8,["data"])):(a(),l("div",QT,[e("div",JT,[I(t(Ot),{class:"w-6 h-6 text-purple-400"})]),p[1]||(p[1]=e("p",{class:"text-sm text-gray-400 mb-1"},"No data yet",-1)),e("p",eA,c(t(o)==="timeline"?"Grow plants from this strain to see timeline":"Score plants to see analytics"),1)]))]),e("div",tA,[e("div",sA,[e("p",nA,c(t(C).totalPlants),1),p[2]||(p[2]=e("p",{class:"text-[9px] text-gray-500 uppercase"},"Plants",-1))]),e("div",oA,[e("p",rA,c(t(C).keepers),1),p[3]||(p[3]=e("p",{class:"text-[9px] text-gray-500 uppercase"},"Keepers",-1))]),e("div",aA,[e("p",lA,c(t(C).avgScore||"--"),1),p[4]||(p[4]=e("p",{class:"text-[9px] text-gray-500 uppercase"},"Avg Score",-1))]),e("div",iA,[e("p",dA,c(t(C).avgFlowerDays||"--"),1),p[5]||(p[5]=e("p",{class:"text-[9px] text-gray-500 uppercase"},"Avg Days",-1))])])]))}}),uA=Object.assign(cA,{__name:"LabStrainPerformanceChart"}),pA={class:"h-full flex flex-col"},gA={class:"flex-shrink-0 p-4 space-y-4"},fA={class:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3"},mA={class:"relative flex-1 sm:flex-none sm:w-64"},hA={class:"flex items-center gap-3"},bA={class:"flex items-center bg-gray-800/50 rounded-xl p-1"},vA=["onClick"],xA={class:"flex gap-2 overflow-x-auto pb-1 scrollbar-hide"},yA=["onClick"],_A={key:0,class:"px-1.5 py-0.5 rounded bg-black/20 text-xs"},wA={class:"flex-1 overflow-y-auto p-4 pt-0"},kA={key:0,class:"flex flex-col items-center justify-center py-20 text-center"},$A={class:"w-20 h-20 rounded-2xl bg-gradient-to-br from-purple-500/20 to-purple-600/20 flex items-center justify-center mb-4"},CA={key:1,class:"flex flex-col items-center justify-center py-16 text-center"},SA={class:"w-16 h-16 rounded-2xl bg-gray-800/50 flex items-center justify-center mb-4"},PA={key:2},EA={key:1,class:"space-y-2"},TA=["onClick"],AA={class:"flex-1 min-w-0"},DA={class:"flex items-center gap-2"},MA={class:"text-base font-medium text-white truncate"},OA={class:"text-sm text-gray-500 truncate"},LA={key:0},jA={class:"flex items-center gap-6 text-sm shrink-0"},IA={key:0,class:"text-center hidden lg:block"},RA={class:"text-gray-400"},FA={key:1,class:"text-center hidden sm:block"},NA={class:"text-white"},BA={key:2,class:"text-center"},VA={class:"text-white"},UA={class:"w-full max-w-lg bg-gray-900 rounded-2xl shadow-2xl border border-gray-800 overflow-hidden"},zA={class:"flex items-center justify-between px-6 py-4 border-b border-gray-800"},HA={class:"flex items-center gap-3"},GA={class:"text-lg font-semibold text-white"},WA={key:0,class:"text-sm text-gray-500"},qA={class:"p-6 space-y-5 max-h-[60vh] overflow-y-auto"},KA={key:0,class:"flex items-center justify-center py-8"},YA={class:"flex flex-wrap items-center gap-2"},ZA={key:0,class:"grid grid-cols-4 gap-3"},XA={class:"p-3 rounded-xl bg-gradient-to-br from-purple-500/10 to-purple-600/5 border border-purple-500/20 text-center"},QA={class:"text-xl font-bold text-white"},JA={class:"p-3 rounded-xl bg-gradient-to-br from-amber-500/10 to-amber-600/5 border border-amber-500/20 text-center"},eD={class:"text-xl font-bold text-white"},tD={class:"p-3 rounded-xl bg-gradient-to-br from-spider-green-500/10 to-spider-green-600/5 border border-spider-green-500/20 text-center"},sD={class:"text-xl font-bold text-white"},nD={class:"p-3 rounded-xl bg-gradient-to-br from-blue-500/10 to-blue-600/5 border border-blue-500/20 text-center"},oD={class:"text-xl font-bold text-white"},rD={key:1},aD={class:"p-3 rounded-xl bg-gray-800/50"},lD={class:"flex justify-between text-sm text-gray-400 mb-2"},iD={class:"flex items-center gap-1.5"},dD={class:"flex items-center gap-1.5"},cD={class:"h-4 rounded-full bg-gray-700 overflow-hidden flex"},uD={key:2},pD={class:"p-3 rounded-xl bg-gray-800/50 border border-gray-700/50"},gD={class:"text-white text-sm"},fD={key:3},mD={class:"flex flex-wrap gap-2"},hD={key:4},bD={class:"p-3 rounded-xl bg-gray-800/50"},vD={class:"flex justify-between text-sm mb-2"},xD={class:"text-white font-medium"},yD={class:"h-2 rounded-full bg-gray-700 overflow-hidden"},_D={key:5},wD={class:"p-3 rounded-xl bg-gray-800/50 border border-gray-700/50"},kD={class:"text-gray-300 text-sm whitespace-pre-wrap"},$D={key:6},CD={key:7},SD={class:"block text-sm font-medium text-gray-400 mb-2"},PD={class:"space-y-2 max-h-48 overflow-y-auto"},ED={class:"flex items-center gap-3"},TD={key:0,class:"text-amber-400"},AD={key:1,class:"w-4"},DD={class:"text-sm font-medium text-white"},MD={key:0,class:"text-xs text-gray-500"},OD={class:"flex items-center gap-3"},LD={key:0,class:"text-sm font-medium text-spider-green-400"},jD={key:1,class:"text-sm text-gray-600"},ID={class:"flex items-center justify-between px-6 py-4 border-t border-gray-800 bg-gray-900/50"},RD={class:"w-full max-w-2xl max-h-[90vh] bg-gray-900 rounded-2xl shadow-2xl border border-gray-800 flex flex-col overflow-hidden"},FD={class:"flex items-center justify-between px-6 py-4 border-b border-gray-800"},ND={class:"flex-1 overflow-y-auto p-6 space-y-6"},BD={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},VD={class:"flex gap-3"},UD=["onClick"],zD={class:"block text-sm font-medium text-gray-400 mb-2"},HD={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},GD={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},WD={class:"flex items-center justify-end gap-3 px-6 py-4 border-t border-gray-800 bg-gray-900/50"},qD=["disabled"],KD=Pe({__name:"LabStrains",emits:["selectPlant"],setup(s,{emit:n}){const r=n,o=rt(),i=W(""),d=W(null),g=W("cards"),f=W(!1),m=W(null),b=W(null),x=W(!1),_=W(!1),C=W(null),k=W(!1),p=W({name:"",breeder:"",lineage:"",seed_type:"feminized",indica_ratio:50,expected_flowering_days:null,grow_difficulty:"moderate",total_seeds:null,seeds_remaining:null,dominant_terpenes:"",description:""}),T=[{value:"feminized",label:"Feminized",icon:"♀"},{value:"regular",label:"Regular",icon:"⚥"},{value:"autoflower",label:"Autoflower",icon:"⏱"}],M=[{id:"feminized",label:"Feminized",icon:"♀",bgActive:"bg-pink-500/20",textActive:"text-pink-300"},{id:"regular",label:"Regular",icon:"⚥",bgActive:"bg-blue-500/20",textActive:"text-blue-300"},{id:"autoflower",label:"Autoflower",icon:"⏱",bgActive:"bg-amber-500/20",textActive:"text-amber-300"}],P=U(()=>{let L=[...o.strains];if(d.value&&(L=L.filter(F=>F.seed_type===d.value)),i.value){const F=i.value.toLowerCase();L=L.filter(be=>be.name.toLowerCase().includes(F)||be.breeder?.toLowerCase().includes(F)||be.lineage?.toLowerCase().includes(F))}return L});function w(L){return o.strains.filter(F=>F.seed_type===L).length}function $(L){return o.plants.filter(F=>F.strain_id===L)}function S(L){return o.plants.filter(F=>F.strain_id===L).length}function A(L){return o.plants.filter(F=>F.strain_id===L&&F.is_keeper).length}function y(L){const F=o.plants.filter(ie=>ie.strain_id===L&&ie.final_score&&ie.final_score>0);return F.length===0?0:F.reduce((ie,de)=>ie+(de.final_score||0),0)/F.length}function h(L){r("selectPlant",L)}function u(L){C.value=L.id,p.value={name:L.name||"",breeder:L.breeder||"",lineage:L.lineage||"",seed_type:L.seed_type||"feminized",indica_ratio:L.indica_ratio??50,expected_flowering_days:L.expected_flowering_days||null,grow_difficulty:L.grow_difficulty||"moderate",total_seeds:L.total_seeds||null,seeds_remaining:L.seeds_remaining||null,dominant_terpenes:L.dominant_terpenes?.join(", ")||"",description:L.description||""},_.value=!0}function v(L){return L?{feminized:"Feminized",regular:"Regular",autoflower:"Autoflower"}[L]||L:"Regular"}function D(L){return{feminized:"bg-pink-500/20 text-pink-300",regular:"bg-blue-500/20 text-blue-300",autoflower:"bg-amber-500/20 text-amber-300"}[L||"regular"]||"bg-gray-500/20 text-gray-300"}function z(L){return{easy:"Easy",moderate:"Moderate",advanced:"Advanced",expert:"Expert"}[L||"moderate"]||L||""}function G(L){return{easy:"bg-green-500/20 text-green-300",moderate:"bg-yellow-500/20 text-yellow-300",advanced:"bg-orange-500/20 text-orange-300",expert:"bg-red-500/20 text-red-300"}[L||"moderate"]||"bg-gray-500/20 text-gray-300"}function B(L){return{germinating:"Germ",seedling:"Seedling",early_veg:"Veg",mid_veg:"Veg",late_veg:"Veg",pre_flower:"Pre-F",early_flower:"Flower",mid_flower:"Flower",late_flower:"Flower",flush:"Flush",harvest:"Harvest",drying:"Drying",curing:"Curing",archived:"Done",culled:"Culled"}[L||""]||L||"Unknown"}function O(L){return{germinating:"bg-lime-500/20 text-lime-300",seedling:"bg-green-500/20 text-green-300",early_veg:"bg-emerald-500/20 text-emerald-300",mid_veg:"bg-emerald-500/20 text-emerald-300",late_veg:"bg-teal-500/20 text-teal-300",pre_flower:"bg-purple-500/20 text-purple-300",early_flower:"bg-pink-500/20 text-pink-300",mid_flower:"bg-pink-500/20 text-pink-300",late_flower:"bg-fuchsia-500/20 text-fuchsia-300",flush:"bg-blue-500/20 text-blue-300",harvest:"bg-amber-500/20 text-amber-300",drying:"bg-orange-500/20 text-orange-300",curing:"bg-yellow-500/20 text-yellow-300",archived:"bg-gray-500/20 text-gray-300",culled:"bg-red-500/20 text-red-300"}[L||""]||"bg-gray-500/20 text-gray-300"}async function R(L){m.value=L,x.value=!0;try{const F=await $fetch(`/api/lab/strains/${L.id}`);b.value=F}catch{b.value=L}finally{x.value=!1}}function X(){m.value=null,b.value=null}function oe(L){f.value=!1}function we(){m.value&&(C.value=m.value.id,p.value={name:m.value.name||"",breeder:m.value.breeder||"",lineage:m.value.lineage||"",seed_type:m.value.seed_type||"feminized",indica_ratio:m.value.indica_ratio??50,expected_flowering_days:m.value.expected_flowering_days||null,grow_difficulty:m.value.grow_difficulty||"moderate",total_seeds:m.value.total_seeds||null,seeds_remaining:m.value.seeds_remaining||null,dominant_terpenes:m.value.dominant_terpenes?.join(", ")||"",description:m.value.description||""},_.value=!0)}function re(){_.value=!1,C.value=null}async function E(){const L=C.value||m.value?.id;if(!L||!p.value.name?.trim())return;const F=p.value.dominant_terpenes?p.value.dominant_terpenes.split(",").map(be=>be.trim()).filter(be=>be.length>0):void 0;k.value=!0;try{const be=await o.updateStrain(L,{name:p.value.name,breeder:p.value.breeder||void 0,lineage:p.value.lineage||void 0,seed_type:p.value.seed_type,indica_ratio:p.value.indica_ratio,expected_flowering_days:p.value.expected_flowering_days||void 0,grow_difficulty:p.value.grow_difficulty,total_seeds:p.value.total_seeds||void 0,seeds_remaining:p.value.seeds_remaining||void 0,dominant_terpenes:F,description:p.value.description||void 0});m.value?.id===L&&(m.value=be),_.value=!1,C.value=null}catch{}finally{k.value=!1}}return(L,F)=>{const be=JE,ie=$9,de=Qi,te=uA;return a(),l("div",pA,[e("div",gA,[e("div",fA,[e("div",mA,[I(t(Us),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),ye(e("input",{"onUpdate:modelValue":F[0]||(F[0]=K=>We(i)?i.value=K:null),type:"text",placeholder:"Search strains...",class:"w-full pl-10 pr-4 py-3 rounded-xl bg-gray-800/50 border border-gray-700/50 text-base text-white placeholder-gray-500 focus:border-purple-500/50 focus:outline-none transition-colors"},null,512),[[$e,t(i)]])]),e("div",hA,[e("div",bA,[(a(),l(Q,null,le(["cards","list"],K=>e("button",{key:K,onClick:ue=>g.value=K,class:V(["p-2 rounded-lg transition-colors",t(g)===K?"bg-purple-600/30 text-purple-400":"text-gray-500 hover:text-gray-300"])},[K==="cards"?(a(),pe(t(xn),{key:0,class:"w-5 h-5"})):(a(),pe(t(Mn),{key:1,class:"w-5 h-5"}))],10,vA)),64))]),e("button",{onClick:F[1]||(F[1]=K=>f.value=!0),class:"flex items-center gap-2 px-4 py-3 rounded-xl bg-gradient-to-r from-purple-600 to-purple-500 hover:from-purple-500 hover:to-purple-400 text-white text-sm font-medium shadow-lg shadow-purple-500/20 transition-all"},[I(t(st),{class:"w-5 h-5"}),F[16]||(F[16]=e("span",{class:"hidden sm:inline"},"Add Strain",-1))])])]),e("div",xA,[e("button",{onClick:F[2]||(F[2]=K=>d.value=null),class:V(["px-3 py-2 rounded-xl text-sm font-medium whitespace-nowrap transition-all",t(d)?"bg-gray-700/50 text-gray-400 hover:bg-gray-600/50":"bg-purple-600 text-white"])}," All Strains ",2),(a(),l(Q,null,le(M,K=>e("button",{key:K.id,onClick:ue=>d.value=K.id,class:V(["flex items-center gap-2 px-3 py-2 rounded-xl text-sm font-medium whitespace-nowrap transition-all",t(d)===K.id?`${K.bgActive} ${K.textActive}`:"bg-gray-700/50 text-gray-400 hover:bg-gray-600/50"])},[e("span",null,c(K.icon),1),e("span",null,c(K.label),1),w(K.id)>0?(a(),l("span",_A,c(w(K.id)),1)):j("",!0)],10,yA)),64))])]),e("div",wA,[t(P).length===0&&!t(i)?(a(),l("div",kA,[e("div",$A,[I(t(Mt),{class:"w-10 h-10 text-purple-400"})]),F[18]||(F[18]=e("h2",{class:"text-xl font-bold text-white mb-2"},"Strain Catalog",-1)),F[19]||(F[19]=e("p",{class:"text-gray-400 max-w-md mb-6"}," Build your personal strain library with genetics, growing notes, and performance data. ",-1)),e("button",{onClick:F[3]||(F[3]=K=>f.value=!0),class:"flex items-center gap-2 px-4 py-2.5 rounded-xl bg-gradient-to-r from-purple-600 to-purple-500 hover:from-purple-500 hover:to-purple-400 text-white text-sm font-medium shadow-lg shadow-purple-500/20 transition-all"},[I(t(st),{class:"w-5 h-5"}),F[17]||(F[17]=ce(" Add Your First Strain ",-1))]),F[20]||(F[20]=yt('<div class="grid grid-cols-2 lg:grid-cols-4 gap-4 mt-12 w-full max-w-3xl" data-v-27509d5e><div class="p-4 rounded-xl bg-gray-800/40 border border-gray-700/50 text-center" data-v-27509d5e><div class="text-2xl mb-2" data-v-27509d5e>🧬</div><p class="text-xs text-gray-400" data-v-27509d5e>Track genetics &amp; lineage</p></div><div class="p-4 rounded-xl bg-gray-800/40 border border-gray-700/50 text-center" data-v-27509d5e><div class="text-2xl mb-2" data-v-27509d5e>📦</div><p class="text-xs text-gray-400" data-v-27509d5e>Seed batch inventory</p></div><div class="p-4 rounded-xl bg-gray-800/40 border border-gray-700/50 text-center" data-v-27509d5e><div class="text-2xl mb-2" data-v-27509d5e>📊</div><p class="text-xs text-gray-400" data-v-27509d5e>Performance stats</p></div><div class="p-4 rounded-xl bg-gray-800/40 border border-gray-700/50 text-center" data-v-27509d5e><div class="text-2xl mb-2" data-v-27509d5e>📝</div><p class="text-xs text-gray-400" data-v-27509d5e>Growing notes</p></div></div>',1))])):t(P).length===0&&t(i)?(a(),l("div",CA,[e("div",SA,[I(t(Us),{class:"w-8 h-8 text-gray-600"})]),F[21]||(F[21]=e("h3",{class:"text-lg font-semibold text-gray-300 mb-2"},"No strains found",-1)),F[22]||(F[22]=e("p",{class:"text-base text-gray-500 mb-4"},"Try adjusting your search or filters",-1)),e("button",{onClick:F[4]||(F[4]=K=>{i.value="",d.value=null}),class:"px-4 py-2 rounded-lg bg-gray-700 hover:bg-gray-600 text-white text-sm transition-colors"}," Clear filters ")])):(a(),l("div",PA,[t(g)==="cards"?(a(),l("div",{key:0,class:V(["gap-4",t(P).length<=3?"flex flex-col":t(P).length<=6?"grid grid-cols-1 md:grid-cols-2":"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"])},[t(P).length<=3?(a(!0),l(Q,{key:0},le(t(P),K=>(a(),pe(be,{key:K.id,strain:K,plants:$(K.id),"plants-count":S(K.id),"keepers-count":A(K.id),"avg-score":y(K.id),onEdit:ue=>u(K),onSelectPlant:h},null,8,["strain","plants","plants-count","keepers-count","avg-score","onEdit"]))),128)):(a(!0),l(Q,{key:1},le(t(P),K=>(a(),pe(ie,{key:K.id,strain:K,"plants-count":S(K.id),"keepers-count":A(K.id),onClick:ue=>R(K)},null,8,["strain","plants-count","keepers-count","onClick"]))),128))],2)):(a(),l("div",EA,[(a(!0),l(Q,null,le(t(P),K=>(a(),l("div",{key:K.id,onClick:ue=>R(K),class:"flex items-center gap-4 p-3 rounded-xl bg-gray-800/40 border border-gray-700/50 hover:border-purple-500/50 cursor-pointer transition-all"},[F[26]||(F[26]=e("div",{class:"w-10 h-10 rounded-lg bg-purple-500/20 flex items-center justify-center shrink-0"},[e("span",{class:"text-lg"},"🧬")],-1)),e("div",AA,[e("div",DA,[e("h3",MA,c(K.name),1),e("span",{class:V([D(K.seed_type),"px-2 py-0.5 rounded text-xs font-medium"])},c(v(K.seed_type)),3)]),e("p",OA,[ce(c(K.breeder||"Unknown breeder")+" ",1),K.lineage?(a(),l("span",LA," · "+c(K.lineage),1)):j("",!0)])]),e("div",jA,[K.indica_ratio!==void 0?(a(),l("div",IA,[e("p",RA,c(K.indica_ratio)+"% / "+c(100-K.indica_ratio)+"%",1),F[23]||(F[23]=e("p",{class:"text-xs text-gray-600"},"I / S",-1))])):j("",!0),K.expected_flowering_days?(a(),l("div",FA,[e("p",NA,c(K.expected_flowering_days),1),F[24]||(F[24]=e("p",{class:"text-xs text-gray-600"},"Days",-1))])):j("",!0),K.total_seeds?(a(),l("div",BA,[e("p",VA,c(K.seeds_remaining??K.total_seeds),1),F[25]||(F[25]=e("p",{class:"text-xs text-gray-600"},"Seeds",-1))])):j("",!0),I(t(nt),{class:"w-5 h-5 text-gray-600"})])],8,TA))),128))]))]))]),t(f)?(a(),pe(de,{key:0,onClose:F[5]||(F[5]=K=>f.value=!1),onCreated:oe})):j("",!0),(a(),pe(Qe,{to:"body"},[I(Ke,{"enter-active-class":"transition-all duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-all duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:je(()=>[t(m)?(a(),l("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70",onClick:Ve(X,["self"])},[e("div",UA,[e("div",zA,[e("div",HA,[F[27]||(F[27]=e("div",{class:"w-10 h-10 rounded-lg bg-purple-500/20 flex items-center justify-center"},[e("span",{class:"text-xl"},"🧬")],-1)),e("div",null,[e("h2",GA,c(t(m).name),1),t(m).breeder?(a(),l("p",WA,c(t(m).breeder),1)):j("",!0)])]),e("button",{onClick:X,class:"p-2 rounded-lg hover:bg-gray-800 text-gray-400 hover:text-white transition-colors"},[I(t(ze),{class:"w-5 h-5"})])]),e("div",qA,[t(x)?(a(),l("div",KA,[...F[28]||(F[28]=[e("div",{class:"w-8 h-8 border-2 border-purple-500 border-t-transparent rounded-full animate-spin"},null,-1)])])):(a(),l(Q,{key:1},[e("div",YA,[e("span",{class:V([D(t(m).seed_type),"px-3 py-1.5 rounded-lg text-sm font-medium"])},c(v(t(m).seed_type)),3),t(m).grow_difficulty?(a(),l("span",{key:0,class:V([G(t(m).grow_difficulty),"px-3 py-1.5 rounded-lg text-sm font-medium"])},c(z(t(m).grow_difficulty)),3)):j("",!0)]),t(b)?.stats?(a(),l("div",ZA,[e("div",XA,[e("p",QA,c(t(b).stats.total_plants),1),F[29]||(F[29]=e("p",{class:"text-[10px] text-purple-300 uppercase tracking-wider"},"Plants",-1))]),e("div",JA,[e("p",eD,c(t(b).stats.keepers),1),F[30]||(F[30]=e("p",{class:"text-[10px] text-amber-300 uppercase tracking-wider"},"Keepers",-1))]),e("div",tD,[e("p",sD,c(t(b).stats.avg_score||"--"),1),F[31]||(F[31]=e("p",{class:"text-[10px] text-spider-green-300 uppercase tracking-wider"},"Avg Score",-1))]),e("div",nD,[e("p",oD,c(t(m).expected_flowering_days||"--"),1),F[32]||(F[32]=e("p",{class:"text-[10px] text-blue-300 uppercase tracking-wider"},"Flower Days",-1))])])):j("",!0),t(m).indica_ratio!==void 0?(a(),l("div",rD,[F[36]||(F[36]=e("label",{class:"block text-sm font-medium text-gray-400 mb-2"},"Genetics Profile",-1)),e("div",aD,[e("div",lD,[e("span",iD,[F[33]||(F[33]=e("span",{class:"w-2 h-2 rounded-full bg-purple-500"},null,-1)),ce(" Indica "+c(t(m).indica_ratio)+"% ",1)]),e("span",dD,[F[34]||(F[34]=e("span",{class:"w-2 h-2 rounded-full bg-green-500"},null,-1)),ce(" Sativa "+c(100-t(m).indica_ratio)+"% ",1)])]),e("div",cD,[e("div",{class:"bg-gradient-to-r from-purple-600 to-purple-400 transition-all",style:Te({width:`${t(m).indica_ratio}%`})},null,4),F[35]||(F[35]=e("div",{class:"bg-gradient-to-r from-green-500 to-green-400 flex-1"},null,-1))])])])):j("",!0),t(m).lineage?(a(),l("div",uD,[F[37]||(F[37]=e("label",{class:"block text-sm font-medium text-gray-400 mb-2"},"Lineage",-1)),e("div",pD,[e("p",gD,c(t(m).lineage),1)])])):j("",!0),t(b)?.dominant_terpenes?.length>0?(a(),l("div",fD,[F[38]||(F[38]=e("label",{class:"block text-sm font-medium text-gray-400 mb-2"},"Dominant Terpenes",-1)),e("div",mD,[(a(!0),l(Q,null,le(t(b).dominant_terpenes,K=>(a(),l("span",{key:K,class:"px-3 py-1.5 rounded-lg bg-gradient-to-r from-orange-500/20 to-yellow-500/20 border border-orange-500/30 text-orange-200 text-sm"},c(K),1))),128))])])):j("",!0),t(m).total_seeds?(a(),l("div",hD,[F[40]||(F[40]=e("label",{class:"block text-sm font-medium text-gray-400 mb-2"},"Seed Inventory",-1)),e("div",bD,[e("div",vD,[F[39]||(F[39]=e("span",{class:"text-gray-400"},"Available",-1)),e("span",xD,c(t(m).seeds_remaining??t(m).total_seeds)+" / "+c(t(m).total_seeds)+" seeds",1)]),e("div",yD,[e("div",{class:"h-full bg-gradient-to-r from-spider-green-600 to-spider-green-400 rounded-full transition-all",style:Te({width:`${(t(m).seeds_remaining??t(m).total_seeds)/t(m).total_seeds*100}%`})},null,4)])])])):j("",!0),t(m).description?(a(),l("div",_D,[F[41]||(F[41]=e("label",{class:"block text-sm font-medium text-gray-400 mb-2"},"Growing Notes",-1)),e("div",wD,[e("p",kD,c(t(m).description),1)])])):j("",!0),t(b)?.plants?.length>0||t(b)?.stats?(a(),l("div",$D,[I(te,{strain:t(m),plants:t(b).plants||[],stats:t(b).stats},null,8,["strain","plants","stats"])])):j("",!0),t(b)?.plants?.length>0?(a(),l("div",CD,[e("label",SD," Plants & Phenotypes ("+c(t(b).plants.length)+") ",1),e("div",PD,[(a(!0),l(Q,null,le(t(b).plants,K=>(a(),l("div",{key:K.id,class:"flex items-center justify-between p-2.5 rounded-lg bg-gray-800/50 hover:bg-gray-800 transition-colors"},[e("div",ED,[K.is_keeper?(a(),l("span",TD,"★")):(a(),l("span",AD)),e("div",null,[e("p",DD,c(K.plant_code),1),K.pheno_label?(a(),l("p",MD,'"'+c(K.pheno_label)+'"',1)):j("",!0)])]),e("div",OD,[e("span",{class:V([O(K.status),"px-2 py-0.5 rounded text-xs font-medium"])},c(B(K.status)),3),K.final_score?(a(),l("span",LD,c(K.final_score.toFixed(1)),1)):(a(),l("span",jD,"--"))])]))),128))])])):j("",!0)],64))]),e("div",ID,[e("button",{onClick:we,class:"flex items-center gap-2 px-4 py-2 rounded-lg bg-purple-600/20 hover:bg-purple-600/30 text-purple-300 transition-colors"},[I(t(On),{class:"w-4 h-4"}),F[42]||(F[42]=ce(" Edit Strain ",-1))]),e("button",{onClick:X,class:"px-4 py-2 rounded-lg bg-gray-700 hover:bg-gray-600 text-white transition-colors"}," Close ")])])])):j("",!0)]),_:1})])),(a(),pe(Qe,{to:"body"},[I(Ke,{"enter-active-class":"transition-all duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-all duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:je(()=>[t(_)?(a(),l("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70",onClick:Ve(re,["self"])},[e("div",RD,[e("div",FD,[F[43]||(F[43]=e("h2",{class:"text-lg font-semibold text-white"},"Edit Strain",-1)),e("button",{onClick:re,class:"p-2 rounded-lg hover:bg-gray-800 text-gray-400 hover:text-white transition-colors"},[I(t(ze),{class:"w-5 h-5"})])]),e("div",ND,[e("div",BD,[e("div",null,[F[44]||(F[44]=e("label",{class:"block text-sm font-medium text-gray-400 mb-2"},"Name *",-1)),ye(e("input",{"onUpdate:modelValue":F[6]||(F[6]=K=>t(p).name=K),type:"text",class:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl text-white placeholder-gray-500 focus:border-purple-500 focus:outline-none",placeholder:"Strain name"},null,512),[[$e,t(p).name]])]),e("div",null,[F[45]||(F[45]=e("label",{class:"block text-sm font-medium text-gray-400 mb-2"},"Breeder",-1)),ye(e("input",{"onUpdate:modelValue":F[7]||(F[7]=K=>t(p).breeder=K),type:"text",class:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl text-white placeholder-gray-500 focus:border-purple-500 focus:outline-none",placeholder:"Breeder name"},null,512),[[$e,t(p).breeder]])])]),e("div",null,[F[46]||(F[46]=e("label",{class:"block text-sm font-medium text-gray-400 mb-2"},"Seed Type",-1)),e("div",VD,[(a(),l(Q,null,le(T,K=>e("button",{key:K.value,onClick:ue=>t(p).seed_type=K.value,class:V(["flex-1 py-3 rounded-xl border-2 transition-colors text-sm font-medium",t(p).seed_type===K.value?"border-purple-500 bg-purple-500/20 text-purple-300":"border-gray-700 bg-gray-800 text-gray-400 hover:border-gray-600"])},c(K.icon)+" "+c(K.label),11,UD)),64))])]),e("div",null,[F[47]||(F[47]=e("label",{class:"block text-sm font-medium text-gray-400 mb-2"},"Lineage",-1)),ye(e("input",{"onUpdate:modelValue":F[8]||(F[8]=K=>t(p).lineage=K),type:"text",class:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl text-white placeholder-gray-500 focus:border-purple-500 focus:outline-none",placeholder:"Parent strains (e.g., Girl Scout Cookies x Chem Dog)"},null,512),[[$e,t(p).lineage]])]),e("div",null,[e("label",zD," Genetics: "+c(t(p).indica_ratio)+"% Indica / "+c(100-t(p).indica_ratio)+"% Sativa ",1),ye(e("input",{"onUpdate:modelValue":F[9]||(F[9]=K=>t(p).indica_ratio=K),type:"range",min:"0",max:"100",class:"w-full h-3 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-purple-500"},null,512),[[$e,t(p).indica_ratio,void 0,{number:!0}]]),F[48]||(F[48]=e("div",{class:"flex justify-between text-xs text-gray-500 mt-1"},[e("span",null,"100% Sativa"),e("span",null,"100% Indica")],-1))]),e("div",HD,[e("div",null,[F[49]||(F[49]=e("label",{class:"block text-sm font-medium text-gray-400 mb-2"},"Expected Flowering (days)",-1)),ye(e("input",{"onUpdate:modelValue":F[10]||(F[10]=K=>t(p).expected_flowering_days=K),type:"number",min:"30",max:"120",class:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl text-white placeholder-gray-500 focus:border-purple-500 focus:outline-none",placeholder:"e.g., 63"},null,512),[[$e,t(p).expected_flowering_days,void 0,{number:!0}]])]),e("div",null,[F[51]||(F[51]=e("label",{class:"block text-sm font-medium text-gray-400 mb-2"},"Grow Difficulty",-1)),ye(e("select",{"onUpdate:modelValue":F[11]||(F[11]=K=>t(p).grow_difficulty=K),class:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl text-white focus:border-purple-500 focus:outline-none"},[...F[50]||(F[50]=[e("option",{value:"easy"},"Easy",-1),e("option",{value:"moderate"},"Moderate",-1),e("option",{value:"advanced"},"Advanced",-1),e("option",{value:"expert"},"Expert",-1)])],512),[[dt,t(p).grow_difficulty]])])]),e("div",GD,[e("div",null,[F[52]||(F[52]=e("label",{class:"block text-sm font-medium text-gray-400 mb-2"},"Total Seeds",-1)),ye(e("input",{"onUpdate:modelValue":F[12]||(F[12]=K=>t(p).total_seeds=K),type:"number",min:"0",class:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl text-white placeholder-gray-500 focus:border-purple-500 focus:outline-none",placeholder:"0"},null,512),[[$e,t(p).total_seeds,void 0,{number:!0}]])]),e("div",null,[F[53]||(F[53]=e("label",{class:"block text-sm font-medium text-gray-400 mb-2"},"Seeds Remaining",-1)),ye(e("input",{"onUpdate:modelValue":F[13]||(F[13]=K=>t(p).seeds_remaining=K),type:"number",min:"0",class:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl text-white placeholder-gray-500 focus:border-purple-500 focus:outline-none",placeholder:"0"},null,512),[[$e,t(p).seeds_remaining,void 0,{number:!0}]])])]),e("div",null,[F[54]||(F[54]=e("label",{class:"block text-sm font-medium text-gray-400 mb-2"},"Dominant Terpenes",-1)),ye(e("input",{"onUpdate:modelValue":F[14]||(F[14]=K=>t(p).dominant_terpenes=K),type:"text",class:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl text-white placeholder-gray-500 focus:border-purple-500 focus:outline-none",placeholder:"e.g., Myrcene, Limonene, Caryophyllene"},null,512),[[$e,t(p).dominant_terpenes]]),F[55]||(F[55]=e("p",{class:"text-xs text-gray-500 mt-1"},"Comma-separated list of terpenes",-1))]),e("div",null,[F[56]||(F[56]=e("label",{class:"block text-sm font-medium text-gray-400 mb-2"},"Notes / Description",-1)),ye(e("textarea",{"onUpdate:modelValue":F[15]||(F[15]=K=>t(p).description=K),rows:"3",class:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl text-white placeholder-gray-500 focus:border-purple-500 focus:outline-none resize-none",placeholder:"Your notes about this strain..."},null,512),[[$e,t(p).description]])])]),e("div",WD,[e("button",{onClick:re,class:"px-4 py-2 rounded-lg bg-gray-700 hover:bg-gray-600 text-white transition-colors"}," Cancel "),e("button",{onClick:E,disabled:t(k)||!t(p).name?.trim(),class:"flex items-center gap-2 px-5 py-2 rounded-lg bg-purple-600 hover:bg-purple-500 text-white font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[t(k)?(a(),pe(t(ut),{key:0,class:"w-4 h-4 animate-spin"})):(a(),pe(t(lt),{key:1,class:"w-4 h-4"})),ce(" "+c(t(k)?"Saving...":"Save Changes"),1)],8,qD)])])])):j("",!0)]),_:1})]))])}}}),YD=Object.assign(Pt(KD,[["__scopeId","data-v-27509d5e"]]),{__name:"LabStrains"}),ZD={class:"h-full relative"},XD={class:"absolute top-3 right-3 z-10 flex items-center gap-2"},QD={class:"flex items-center justify-center gap-2 mb-1"},JD={class:"text-lg"},eM={class:"text-sm font-semibold text-white truncate"},tM={key:0,class:"text-[10px] text-gray-500 truncate"},sM={key:1,class:"mt-1.5 pt-1.5 border-t border-gray-700/50"},nM={class:"text-[10px] px-2 py-0.5 rounded-full bg-purple-500/30 text-purple-300"},oM={key:2,class:"absolute -top-2 -right-2"},rM={class:"relative"},aM={class:"w-10 h-10 rounded-full bg-gradient-to-br from-pink-500 to-blue-500 flex items-center justify-center shadow-lg shadow-purple-500/30 cursor-pointer hover:scale-110 transition-transform"},lM={class:"absolute -bottom-5 left-1/2 -translate-x-1/2 whitespace-nowrap"},iM={class:"text-[9px] px-2 py-0.5 rounded-full bg-gray-800 text-gray-400 border border-gray-700"},dM={key:0,class:"absolute inset-0 flex flex-col items-center justify-center text-center p-4"},cM={class:"w-16 h-16 rounded-2xl bg-purple-500/20 flex items-center justify-center mb-4"},uM=Pe({__name:"LabGeneticTree",props:{strains:{default:()=>[]},projects:{default:()=>[]},selectedStrainId:{default:null}},emits:["selectStrain","selectProject"],setup(s,{emit:n}){const r=s,o=n,{fitView:i,zoomIn:d,zoomOut:g}=Bd(),f={strain:"strain",cross:"cross"},m=W([]),b=W([]);function x(){const w=[],$=new Map,S={parent:0,cross:150,offspring:300};r.projects.forEach((y,h)=>{const u=h*400,v={id:`female-${y.id}`,type:"strain",position:{x:u,y:S.parent},data:{name:y.female_strain_name||"Female",breeder:"",sex:"female",projectId:y.id}};w.push(v),$.set(`female-${y.id}`,v.position);const D={id:`male-${y.id}`,type:"strain",position:{x:u+200,y:S.parent},data:{name:y.male_strain_name||"Male",breeder:"",sex:"male",projectId:y.id}};w.push(D),$.set(`male-${y.id}`,D.position);const z={id:`cross-${y.id}`,type:"cross",position:{x:u+100,y:S.cross},data:{year:y.started_at?new Date(y.started_at).getFullYear():"",projectId:y.id}};w.push(z);const G={id:`offspring-${y.id}`,type:"strain",position:{x:u+100,y:S.offspring},data:{name:y.name,generation:y.generation||"F1",sex:null,projectId:y.id,isOffspring:!0}};w.push(G)}),r.strains.forEach((y,h)=>{r.projects.some(v=>v.female_strain_name===y.name||v.male_strain_name===y.name)||w.push({id:`strain-${y.id}`,type:"strain",position:{x:r.projects.length*400+h*180,y:0},data:{name:y.name,breeder:y.breeder||"",sex:y.seed_type==="feminized"?"female":null,strainId:y.id}})});const A=[];r.projects.forEach(y=>{A.push({id:`e-female-cross-${y.id}`,source:`female-${y.id}`,target:`cross-${y.id}`,targetHandle:"target-left",type:"smoothstep",animated:!0,style:{stroke:"#ec4899",strokeWidth:2}}),A.push({id:`e-male-cross-${y.id}`,source:`male-${y.id}`,target:`cross-${y.id}`,targetHandle:"target-right",type:"smoothstep",animated:!0,style:{stroke:"#3b82f6",strokeWidth:2}}),A.push({id:`e-cross-offspring-${y.id}`,source:`cross-${y.id}`,target:`offspring-${y.id}`,type:"smoothstep",animated:!0,style:{stroke:"#a855f7",strokeWidth:2}})}),m.value=w,b.value=A}He(()=>[r.strains,r.projects],x,{immediate:!0,deep:!0});function _(w){return w.isKeeper?"bg-gradient-to-br from-amber-500/30 to-amber-600/20 border-amber-500/60 shadow-lg shadow-amber-500/20":w.sex==="female"?"bg-gradient-to-br from-pink-500/20 to-pink-600/10 border-pink-500/50":w.sex==="male"?"bg-gradient-to-br from-blue-500/20 to-blue-600/10 border-blue-500/50":w.isOffspring?"bg-gradient-to-br from-purple-500/20 to-purple-600/10 border-purple-500/50":"bg-gray-800/60 border-gray-600/50"}function C(w){return w.isKeeper?"🌟":w.isOffspring?"🧬":"🌿"}function k(w){const $=w.node?.data;$?.strainId?o("selectStrain",$.strainId):$?.projectId&&o("selectProject",$.projectId)}function p(){setTimeout(()=>{i({padding:.3,duration:400})},100)}function T(){i({padding:.2,duration:300})}function M(){d({duration:200})}function P(){g({duration:200})}return(w,$)=>{const S=Cl;return a(),l("div",ZD,[e("div",XD,[e("button",{onClick:T,class:"p-2 rounded-lg bg-gray-800/80 hover:bg-gray-700 text-gray-300 hover:text-white backdrop-blur-sm transition-colors",title:"Fit view"},[I(t(fd),{class:"w-4 h-4"})]),e("button",{onClick:M,class:"p-2 rounded-lg bg-gray-800/80 hover:bg-gray-700 text-gray-300 hover:text-white backdrop-blur-sm transition-colors",title:"Zoom in"},[I(t(st),{class:"w-4 h-4"})]),e("button",{onClick:P,class:"p-2 rounded-lg bg-gray-800/80 hover:bg-gray-700 text-gray-300 hover:text-white backdrop-blur-sm transition-colors",title:"Zoom out"},[I(t(mn),{class:"w-4 h-4"})])]),$[5]||($[5]=yt('<div class="absolute bottom-3 left-3 z-10 p-2 rounded-lg bg-gray-800/80 backdrop-blur-sm"><div class="flex items-center gap-4 text-[10px]"><div class="flex items-center gap-1.5"><div class="w-3 h-3 rounded-full bg-pink-500"></div><span class="text-gray-400">Female</span></div><div class="flex items-center gap-1.5"><div class="w-3 h-3 rounded-full bg-blue-500"></div><span class="text-gray-400">Male</span></div><div class="flex items-center gap-1.5"><div class="w-3 h-3 rounded-full bg-purple-500"></div><span class="text-gray-400">Offspring</span></div><div class="flex items-center gap-1.5"><div class="w-3 h-3 rounded-full bg-amber-500"></div><span class="text-gray-400">Keeper</span></div></div></div>',1)),I(S,null,{fallback:je(()=>[...$[2]||($[2]=[e("div",{class:"h-full flex items-center justify-center"},[e("div",{class:"text-gray-500 text-sm"},"Loading genetic tree...")],-1)])]),default:je(()=>[I(t(Vd),{nodes:t(m),"onUpdate:nodes":$[0]||($[0]=A=>We(m)?m.value=A:null),edges:t(b),"onUpdate:edges":$[1]||($[1]=A=>We(b)?b.value=A:null),"node-types":f,"default-viewport":{zoom:.8,x:100,y:50},"min-zoom":.2,"max-zoom":2,"fit-view-on-init":!1,"nodes-draggable":!0,"zoom-on-scroll":!0,"pan-on-scroll":!0,class:"vue-flow-genetic",onNodeClick:k,onNodesInitialized:p},{"node-strain":je(A=>[e("div",{class:V(["px-4 py-3 rounded-xl border-2 cursor-pointer transition-all min-w-[140px] text-center",_(A.data)])},[e("div",QD,[e("span",JD,c(C(A.data)),1),A.data.sex?(a(),l("span",{key:0,class:V(["text-xs font-bold",A.data.sex==="female"?"text-pink-400":"text-blue-400"])},c(A.data.sex==="female"?"♀":"♂"),3)):j("",!0)]),e("p",eM,c(A.data.name),1),A.data.breeder?(a(),l("p",tM,c(A.data.breeder),1)):j("",!0),A.data.generation?(a(),l("div",sM,[e("span",nM,c(A.data.generation),1)])):j("",!0),A.data.isKeeper?(a(),l("div",oM,[I(t(ct),{class:"w-5 h-5 text-amber-400 drop-shadow-lg"})])):j("",!0),I(t(Ds),{type:"target",position:t(Ms).Top,class:"!bg-gray-600 !w-3 !h-3 !border-2 !border-gray-500"},null,8,["position"]),I(t(Ds),{type:"source",position:t(Ms).Bottom,class:"!bg-gray-600 !w-3 !h-3 !border-2 !border-gray-500"},null,8,["position"])],2)]),"node-cross":je(A=>[e("div",rM,[e("div",aM,[I(t(At),{class:"w-5 h-5 text-white"})]),e("div",lM,[e("span",iM,c(A.data.year||"Cross"),1)]),I(t(Ds),{id:"target-left",type:"target",position:t(Ms).Left,class:"!bg-pink-500 !w-2 !h-2"},null,8,["position"]),I(t(Ds),{id:"target-right",type:"target",position:t(Ms).Right,class:"!bg-blue-500 !w-2 !h-2"},null,8,["position"]),I(t(Ds),{type:"source",position:t(Ms).Bottom,class:"!bg-purple-500 !w-2 !h-2"},null,8,["position"])])]),default:je(()=>[I(t(Ud),{"pattern-color":"rgba(75, 85, 99, 0.3)",gap:20})]),_:1},8,["nodes","edges"])]),_:1}),t(m).length===0?(a(),l("div",dM,[e("div",cM,[I(t(xo),{class:"w-8 h-8 text-purple-400"})]),$[3]||($[3]=e("h3",{class:"text-base font-semibold text-gray-300 mb-2"},"No lineage data",-1)),$[4]||($[4]=e("p",{class:"text-sm text-gray-500 max-w-sm"}," Create breeding projects with parent strains to see their genetic lineage tree. ",-1))])):j("",!0)])}}}),ll=Object.assign(uM,{__name:"LabGeneticTree"}),pM={class:"space-y-4"},gM={class:"flex items-center justify-between"},fM={class:"text-sm font-semibold text-white flex items-center gap-2"},mM={class:"text-xs text-gray-500"},hM={class:"relative"},bM={class:"h-2 rounded-full bg-gray-700/50 overflow-hidden"},vM={class:"relative h-8 mt-1"},xM={class:"grid grid-cols-1 gap-2"},yM={class:"flex items-start gap-3"},_M={class:"flex-1 min-w-0"},wM={class:"flex items-center justify-between gap-2 mb-1"},kM={key:1,class:"text-[10px] px-2 py-0.5 rounded-full bg-gray-700/50 text-gray-500"},$M={class:"text-xs text-gray-500"},CM={key:0,class:"mt-2"},SM={class:"flex items-center justify-between text-[10px] mb-1"},PM={class:"text-purple-300"},EM={class:"h-1 rounded-full bg-gray-700/50 overflow-hidden"},TM=["onClick"],AM={class:"flex gap-2 pt-2"},DM=Pe({__name:"LabBreedingTimeline",props:{project:{}},emits:["milestone-action","log-event","add-photo"],setup(s,{emit:n}){const r=s,o=n,i=U(()=>{const b=r.project,x=!!b.started_at,_=!!b.pollination_date,C=!!b.seed_harvest_date,k=(b.total_seeds_produced||0)>0,p=(b.seeds_tested||0)>0;return[{id:"start",label:"Project Started",description:"Selected parents and documented goals",icon:vi,completed:x,active:!x,date:b.started_at,actionLabel:x?void 0:"Start Project",position:0},{id:"pollinate",label:"Pollination",description:"Apply pollen to selected female branches",icon:At,completed:_,active:x&&!_,date:b.pollination_date,estimatedDays:14,actionLabel:"Log Pollination",position:25},{id:"harvest",label:"Seed Harvest",description:"Collect mature seeds from pollinated flowers",icon:Ne,completed:C,active:_&&!C,date:b.seed_harvest_date,estimatedDays:42,subProgress:_&&!C?f(b.pollination_date):void 0,actionLabel:"Log Harvest",position:50},{id:"germinate",label:"Germination Test",description:"Test seed viability and germination rate",icon:Je,completed:k,active:C&&!k,estimatedDays:7,actionLabel:"Log Results",position:75},{id:"pheno",label:"Pheno Hunt",description:"Grow out and select best phenotypes",icon:ct,completed:p,active:k&&!p,estimatedDays:90,subProgress:k?Math.round((b.seeds_tested||0)/(b.total_seeds_produced||1)*100):void 0,position:100}]}),d=U(()=>{const b=i.value.filter(k=>k.completed).length,x=i.value.find(k=>k.active)?.subProgress||0,_=b/i.value.length*100,C=x/100*(100/i.value.length);return Math.min(100,_+C)}),g=U(()=>{if(!r.project.started_at)return 0;const b=new Date(r.project.started_at);return Math.floor((new Date().getTime()-b.getTime())/(1e3*60*60*24))});function f(b){if(!b)return 0;const x=new Date(b),C=Math.floor((new Date().getTime()-x.getTime())/(1e3*60*60*24));return Math.min(100,Math.round(C/42*100))}function m(b){return b?new Date(b).toLocaleDateString("en-US",{month:"short",day:"numeric"}):""}return(b,x)=>(a(),l("div",pM,[e("div",gM,[e("h4",fM,[I(t(ks),{class:"w-4 h-4 text-pink-400"}),x[2]||(x[2]=ce(" Project Timeline ",-1))]),e("span",mM,c(t(g))+" days total",1)]),e("div",hM,[e("div",bM,[e("div",{class:"h-full rounded-full bg-gradient-to-r from-pink-500 via-purple-500 to-spider-green-500 transition-all duration-500",style:Te({width:`${t(d)}%`})},null,4)]),e("div",vM,[(a(!0),l(Q,null,le(t(i),(_,C)=>(a(),l("div",{key:_.id,class:"absolute top-0 -translate-x-1/2 flex flex-col items-center",style:Te({left:`${_.position}%`})},[e("div",{class:V(["w-4 h-4 rounded-full border-2 transition-all",_.completed?"bg-spider-green-500 border-spider-green-400 shadow-lg shadow-spider-green-500/40":_.active?"bg-purple-500 border-purple-400 animate-pulse shadow-lg shadow-purple-500/40":"bg-gray-700 border-gray-600"])},[_.completed?(a(),pe(t(lt),{key:0,class:"w-2.5 h-2.5 text-white m-auto mt-0.5"})):j("",!0)],2)],4))),128))])]),e("div",xM,[(a(!0),l(Q,null,le(t(i),(_,C)=>(a(),l("div",{key:_.id,class:V(["p-3 rounded-xl border transition-all",_.completed?"bg-spider-green-500/10 border-spider-green-500/30":_.active?"bg-purple-500/10 border-purple-500/30":"bg-gray-800/40 border-gray-700/30 opacity-60"])},[e("div",yM,[e("div",{class:V(["w-10 h-10 rounded-xl flex items-center justify-center flex-shrink-0",_.completed?"bg-spider-green-500/20":_.active?"bg-purple-500/20":"bg-gray-700/50"])},[(a(),pe(_t(_.icon),{class:V(["w-5 h-5",_.completed?"text-spider-green-400":_.active?"text-purple-400":"text-gray-500"])},null,8,["class"]))],2),e("div",_M,[e("div",wM,[e("h5",{class:V(["text-sm font-medium",_.completed||_.active?"text-white":"text-gray-400"])},c(_.label),3),_.date?(a(),l("span",{key:0,class:V(["text-[10px] px-2 py-0.5 rounded-full",_.completed?"bg-spider-green-500/20 text-spider-green-300":_.active?"bg-purple-500/20 text-purple-300":"bg-gray-700/50 text-gray-500"])},c(m(_.date)),3)):_.estimatedDays&&!_.completed?(a(),l("span",kM," ~"+c(_.estimatedDays)+"d ",1)):j("",!0)]),e("p",$M,c(_.description),1),_.active&&_.subProgress?(a(),l("div",CM,[e("div",SM,[x[3]||(x[3]=e("span",{class:"text-gray-400"},"Progress",-1)),e("span",PM,c(_.subProgress)+"%",1)]),e("div",EM,[e("div",{class:"h-full rounded-full bg-purple-500 transition-all",style:Te({width:`${_.subProgress}%`})},null,4)])])):j("",!0)]),_.active&&_.actionLabel?(a(),l("button",{key:0,onClick:k=>o("milestone-action",_.id),class:"px-3 py-1.5 rounded-lg bg-purple-500/20 hover:bg-purple-500/30 text-purple-300 text-xs font-medium transition-colors"},c(_.actionLabel),9,TM)):j("",!0)])],2))),128))]),e("div",AM,[e("button",{onClick:x[0]||(x[0]=_=>o("log-event")),class:"flex-1 flex items-center justify-center gap-2 px-3 py-2.5 rounded-xl bg-gray-800/60 hover:bg-gray-700/60 border border-gray-700/50 text-gray-300 text-sm transition-colors"},[I(t(_s),{class:"w-4 h-4"}),x[4]||(x[4]=ce(" Log Event ",-1))]),e("button",{onClick:x[1]||(x[1]=_=>o("add-photo")),class:"flex-1 flex items-center justify-center gap-2 px-3 py-2.5 rounded-xl bg-gray-800/60 hover:bg-gray-700/60 border border-gray-700/50 text-gray-300 text-sm transition-colors"},[I(t(pt),{class:"w-4 h-4"}),x[5]||(x[5]=ce(" Add Photo ",-1))])])]))}}),MM=Object.assign(DM,{__name:"LabBreedingTimeline"}),OM={class:"flex items-start gap-3"},LM={class:"flex-1 min-w-0"},jM={class:"flex items-start justify-between gap-2 mb-1"},IM={class:"text-sm font-semibold text-white truncate group-hover:text-yellow-300 transition-colors"},RM={class:"text-[10px] text-gray-500 font-mono"},FM={class:"mb-2"},NM={class:"flex items-center justify-between text-[10px] mb-1"},BM={class:"h-1.5 rounded-full bg-gray-700/50 overflow-hidden"},VM={class:"flex items-center gap-3 text-[10px] text-gray-500"},UM={class:"flex items-center gap-1"},zM={class:"flex items-center gap-1"},HM={key:0,class:"flex items-center gap-1"},GM={key:1,class:"mt-2 pt-2 border-t border-gray-700/30"},WM={class:"text-[10px] text-gray-500 mb-1"},qM={class:"flex flex-wrap gap-1"},KM={key:0,class:"text-[9px] text-gray-500"},YM=Pe({__name:"LabPollenCard",props:{pollen:{},usedInProjects:{default:()=>[]}},emits:["click"],setup(s,{emit:n}){const r=s,o=n,i={refrigerated:{icon:en,label:"4°C",shelfLife:30},frozen:{icon:Je,label:"-20°C",shelfLife:180},deep_frozen:{icon:An,label:"-80°C",shelfLife:365},desiccated:{icon:en,label:"Desiccant",shelfLife:14}},d=U(()=>{if(!r.pollen?.storage_method)return en;const P=r.pollen.storage_method.toLowerCase().replace(" ","_");return i[P]?.icon||en}),g=U(()=>{if(!r.pollen?.storage_method)return"Unknown";const P=r.pollen.storage_method.toLowerCase().replace(" ","_");return i[P]?.label||r.pollen.storage_method}),f=U(()=>{if(!r.pollen?.storage_method)return 30;const P=r.pollen.storage_method.toLowerCase().replace(" ","_");return i[P]?.shelfLife||30}),m=U(()=>{if(!r.pollen.collection_date)return 0;const P=new Date(r.pollen.collection_date);return Math.floor((new Date().getTime()-P.getTime())/(1e3*60*60*24))}),b=U(()=>r.pollen.status==="expired"||(r.pollen.current_viability??0)<10),x=U(()=>r.pollen.status==="low"||(r.pollen.current_viability??0)<50&&(r.pollen.current_viability??0)>=10),_=U(()=>{switch(r.pollen.status){case"available":return"bg-spider-green-500/20 text-spider-green-300";case"low":return"bg-yellow-500/20 text-yellow-300";case"depleted":return"bg-red-500/20 text-red-300";case"expired":return"bg-gray-500/20 text-gray-400";default:return"bg-gray-500/20 text-gray-400"}}),C=U(()=>(r.pollen.current_viability??0)>=70?"text-spider-green-400":(r.pollen.current_viability??0)>=40?"text-yellow-400":"text-red-400"),k=U(()=>(r.pollen.current_viability??0)>=70?"bg-gradient-to-r from-spider-green-600 to-spider-green-400":(r.pollen.current_viability??0)>=40?"bg-gradient-to-r from-yellow-600 to-yellow-400":"bg-gradient-to-r from-red-600 to-red-400"),p=U(()=>{if(b.value)return"Pollen may no longer be viable";if(m.value>f.value*.8){const P=f.value-m.value;return P>0?`~${P} days remaining at optimal viability`:"Past optimal storage time"}return(r.pollen.current_viability??0)<50?"Low viability - use soon":null}),T=U(()=>b.value?"text-red-400":x.value?"text-yellow-400":"text-orange-400");function M(P){return P?new Date(P).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"2-digit"}):"-"}return(P,w)=>(a(),l("div",{class:V(["p-4 rounded-xl border transition-all cursor-pointer group",t(b)?"bg-red-500/10 border-red-500/30 opacity-75":t(x)?"bg-yellow-500/10 border-yellow-500/30":"bg-gray-800/40 border-gray-700/50 hover:border-yellow-500/30"]),onClick:w[0]||(w[0]=$=>o("click"))},[e("div",OM,[e("div",{class:V(["w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0",t(b)?"bg-red-500/20":t(x)?"bg-yellow-500/20":"bg-yellow-500/10"])},[(a(),pe(_t(t(d)),{class:V(["w-6 h-6",t(b)?"text-red-400":t(x)?"text-yellow-400":"text-yellow-500"])},null,8,["class"]))],2),e("div",LM,[e("div",jM,[e("div",null,[e("h4",IM,c(s.pollen.strain_name||s.pollen.strainName||"Unknown"),1),e("p",RM,c(s.pollen.batch_code),1)]),e("span",{class:V(["px-2 py-0.5 rounded-full text-[10px] font-bold uppercase",t(_)])},c(s.pollen.status),3)]),e("div",FM,[e("div",NM,[w[1]||(w[1]=e("span",{class:"text-gray-500"},"Viability",-1)),e("span",{class:V(t(C))},c(s.pollen.current_viability??0)+"%",3)]),e("div",BM,[e("div",{class:V(["h-full rounded-full transition-all",t(k)]),style:Te({width:`${s.pollen.current_viability??0}%`})},null,6)])]),e("div",VM,[e("div",UM,[I(t(Hc),{class:"w-3 h-3"}),e("span",null,c(M(s.pollen.collection_date)),1)]),e("div",zM,[(a(),pe(_t(t(d)),{class:"w-3 h-3"})),e("span",null,c(t(g)),1)]),t(m)>0?(a(),l("div",HM,[I(t(Gc),{class:"w-3 h-3"}),e("span",null,c(t(m))+"d old",1)])):j("",!0)]),t(p)?(a(),l("div",{key:0,class:V(["mt-2 flex items-center gap-1.5 text-[10px]",t(T)])},[I(t(Wc),{class:"w-3 h-3"}),e("span",null,c(t(p)),1)],2)):j("",!0),s.usedInProjects?.length?(a(),l("div",GM,[e("p",WM,"Used in "+c(s.usedInProjects.length)+" project(s)",1),e("div",qM,[(a(!0),l(Q,null,le(s.usedInProjects.slice(0,3),$=>(a(),l("span",{key:$,class:"px-1.5 py-0.5 rounded bg-pink-500/20 text-pink-300 text-[9px]"},c($),1))),128)),s.usedInProjects.length>3?(a(),l("span",KM," +"+c(s.usedInProjects.length-3)+" more ",1)):j("",!0)])])):j("",!0)])])],2))}}),ZM=Object.assign(YM,{__name:"LabPollenCard"}),XM={class:"h-full flex overflow-hidden"},QM={class:"flex-shrink-0 p-4 space-y-4"},JM={class:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3"},eO={class:"text-xl font-bold text-white flex items-center gap-2"},tO={class:"w-8 h-8 rounded-lg bg-gradient-to-br from-pink-500 to-purple-500 flex items-center justify-center"},sO={class:"flex items-center gap-2"},nO={class:"flex gap-2 p-1 rounded-xl bg-gray-800/40"},oO=["onClick"],rO={key:0,class:"px-1.5 py-0.5 rounded-full text-[10px] font-bold bg-pink-500/40"},aO={class:"flex-1 overflow-y-auto p-4 pt-0"},lO={key:0,class:"space-y-4"},iO={key:0,class:"space-y-3"},dO=["onClick"],cO={class:"flex items-start justify-between mb-2"},uO={class:"font-medium text-white"},pO={class:"text-xs text-gray-500"},gO={class:"flex items-center gap-4 text-xs text-gray-400"},fO={class:"flex items-center gap-1"},mO={class:"flex items-center gap-1"},hO={class:"flex items-center gap-3 mt-3 pt-3 border-t border-gray-700/50 text-xs text-gray-500"},bO={class:"flex items-center gap-1"},vO={class:"flex items-center gap-1"},xO={key:1,class:"flex flex-col items-center justify-center py-12 text-center"},yO={class:"w-16 h-16 rounded-2xl bg-pink-500/10 flex items-center justify-center mb-4"},_O={key:1,class:"space-y-4"},wO={class:"grid grid-cols-3 gap-3"},kO={class:"p-3 rounded-xl bg-gray-800/40 border border-gray-700/50"},$O={class:"text-xl font-bold text-white"},CO={class:"p-3 rounded-xl bg-gray-800/40 border border-gray-700/50"},SO={class:"text-xl font-bold text-spider-green-400"},PO={class:"p-3 rounded-xl bg-gray-800/40 border border-gray-700/50"},EO={class:"text-xl font-bold text-yellow-400"},TO={key:0,class:"space-y-3"},AO={key:1,class:"flex flex-col items-center justify-center py-12 text-center"},DO={class:"w-16 h-16 rounded-2xl bg-yellow-500/10 flex items-center justify-center mb-4"},MO={key:2,class:"flex-1 min-h-[400px]"},OO={key:0,class:"hidden lg:flex flex-1 flex-col overflow-hidden bg-gray-900/30"},LO={class:"flex-shrink-0 p-4 border-b border-gray-800/50"},jO={class:"flex items-center justify-between"},IO={class:"flex items-center gap-3"},RO={class:"w-12 h-12 rounded-xl bg-gradient-to-br from-pink-500/30 to-purple-500/30 flex items-center justify-center"},FO={class:"text-lg font-bold text-white"},NO={class:"text-sm text-gray-400 font-mono"},BO={class:"flex items-center gap-2"},VO={class:"flex-1 overflow-y-auto p-4 space-y-6"},UO={class:"bg-gray-800/40 rounded-2xl border border-gray-700/50 p-4"},zO={class:"text-sm font-semibold text-white mb-4 flex items-center gap-2"},HO={class:"flex items-center justify-center gap-4"},GO={class:"flex-1 p-4 rounded-xl bg-pink-500/10 border border-pink-500/30 text-center"},WO={class:"text-sm font-semibold text-white"},qO={class:"flex-1 p-4 rounded-xl bg-blue-500/10 border border-blue-500/30 text-center"},KO={class:"text-sm font-semibold text-white"},YO={class:"mt-4 pt-4 border-t border-gray-700/30 text-center"},ZO={class:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-purple-500/20 border border-purple-500/30"},XO={class:"text-purple-300 text-sm font-medium"},QO={class:"px-2 py-0.5 rounded-full bg-purple-500/40 text-purple-200 text-xs"},JO={class:"bg-gray-800/40 rounded-2xl border border-gray-700/50 p-4"},eL={class:"bg-gray-800/40 rounded-2xl border border-gray-700/50 p-4"},tL={class:"text-sm font-semibold text-white mb-3 flex items-center gap-2"},sL={class:"space-y-4"},nL={class:"text-sm text-gray-300"},oL={key:0},rL={class:"flex flex-wrap gap-2"},aL={class:"grid grid-cols-2 gap-3"},lL={class:"p-4 rounded-xl bg-purple-500/10 border border-purple-500/30 text-center"},iL={class:"text-2xl font-bold text-purple-300"},dL={class:"p-4 rounded-xl bg-spider-green-500/10 border border-spider-green-500/30 text-center"},cL={class:"text-2xl font-bold text-spider-green-300"},uL={class:"p-4 rounded-xl bg-amber-500/10 border border-amber-500/30 text-center"},pL={class:"text-2xl font-bold text-amber-300"},gL={class:"p-4 rounded-xl bg-blue-500/10 border border-blue-500/30 text-center"},fL={class:"text-2xl font-bold text-blue-300"},mL={class:"flex gap-3"},hL={class:"flex-shrink-0 p-4 border-b border-gray-800/50"},bL={class:"text-sm font-semibold text-gray-300 flex items-center gap-2"},vL={class:"flex-1"},xL={class:"bg-gray-900 rounded-2xl border border-gray-700 w-full max-w-lg max-h-[85vh] flex flex-col overflow-hidden"},yL={class:"flex items-center justify-between p-4 border-b border-gray-800"},_L={class:"grid grid-cols-2 gap-4"},wL=["value"],kL=["value"],$L={class:"flex gap-3 pt-2"},CL={class:"bg-gray-900 rounded-2xl border border-gray-700 w-full max-w-md max-h-[85vh] flex flex-col overflow-hidden"},SL={class:"flex items-center justify-between p-4 border-b border-gray-800"},PL=["value"],EL={class:"flex gap-3 pt-2"},TL={class:"bg-gray-900 rounded-2xl border border-gray-700 w-full max-w-lg max-h-[85vh] flex flex-col overflow-hidden"},AL={class:"px-6 py-4 border-b border-gray-700 flex items-center justify-between"},DL={class:"flex gap-3 pt-2"},ML={class:"bg-gray-900 rounded-2xl border border-gray-700 w-full max-w-lg max-h-[85vh] flex flex-col overflow-hidden"},OL={class:"px-6 py-4 border-b border-gray-700 flex items-center justify-between"},LL={class:"p-6 space-y-4 overflow-y-auto flex-1"},jL={class:"p-4 rounded-xl bg-pink-500/10 border border-pink-500/30"},IL={class:"text-sm text-pink-300"},RL={class:"font-bold"},FL=["placeholder"],NL={class:"flex gap-3 pt-2"},BL={class:"bg-gray-900 rounded-2xl border border-gray-700 w-full max-w-lg max-h-[85vh] flex flex-col overflow-hidden"},VL={class:"px-6 py-4 border-b border-gray-700 flex items-center justify-between"},UL={key:0},zL={key:1},HL={class:"flex gap-3 pt-2"},GL={class:"bg-gray-900 rounded-2xl border border-gray-700 w-full max-w-md max-h-[85vh] flex flex-col overflow-hidden"},WL={class:"px-6 py-4 border-b border-gray-700 flex items-center justify-between"},qL={class:"flex flex-col items-center justify-center gap-3 p-8 border-2 border-dashed border-gray-700 rounded-xl cursor-pointer hover:border-pink-500/50 hover:bg-pink-500/5 transition-all"},KL=["disabled"],YL={class:"w-16 h-16 rounded-2xl bg-pink-500/20 flex items-center justify-center"},ZL={class:"text-center"},XL={class:"text-sm font-medium text-white"},QL={key:0,class:"mt-3"},JL=["src"],ej={class:"flex gap-3 pt-2"},tj=["disabled"],sj=Pe({__name:"LabBreeding",setup(s){const n=rt();ot(()=>{n.fetchBreedingProjects(),n.fetchPollenInventory()});const r=U(()=>n.breedingProjects),o=U(()=>n.pollenInventory),i=U(()=>[{id:"projects",label:"Projects",icon:Zc,count:r.value.length},{id:"pollen",label:"Pollen",icon:Ne,count:o.value.length},{id:"lineage",label:"Lineage",icon:xo,count:0}]),d=W("projects"),g=W(!1),f=W(!1),m=W(!1),b=W(!1),x=W(!1),_=W(!1),C=W(null),k=W(null),p=W(null),T=W({name:"",femaleId:"",maleId:"",type:"line_creation",goal:""}),M=W({strainId:"",collectionDate:"",storageMethod:"refrigerated"}),P=W({name:"",goal:"",status:"active"}),w=W({name:"",goal:""}),$=W({eventType:"pollination",date:new Date().toISOString().split("T")[0],seedCount:0,germinationRate:0,notes:""}),S=W(""),A=W(""),y=W(!1);He(x,re=>{re&&C.value&&(P.value={name:C.value.name||"",goal:C.value.primary_goal||"",status:C.value.status||"active"})}),He(_,re=>{if(re&&C.value){const E=C.value.project_type||"F1",L=E==="F1"?"F2":E==="F2"?"F3":"Next Gen";w.value={name:`${C.value.name} - ${L}`,goal:""}}}),He(m,re=>{re&&($.value={eventType:"pollination",date:new Date().toISOString().split("T")[0],seedCount:0,germinationRate:0,notes:""})}),He(b,re=>{re&&(S.value="",A.value="")});function h(re){switch(re){case"active":return"bg-spider-green-500/20 text-spider-green-300";case"completed":return"bg-blue-500/20 text-blue-300";case"paused":return"bg-yellow-500/20 text-yellow-300";case"abandoned":return"bg-red-500/20 text-red-300";default:return"bg-gray-500/20 text-gray-300"}}function u(re){return r.value.filter(E=>E.male_strain_name===re).map(E=>E.name)}function v(re){p.value=re}function D(re){const E=r.value.find(L=>L.id===re);E&&(C.value=E,d.value="projects")}function z(re){switch(re){case"start":C.value&&n.updateBreedingProject(C.value.id,{started_at:new Date().toISOString(),status:"active"});break;case"pollinate":$.value.eventType="pollination",m.value=!0;break;case"harvest":$.value.eventType="seed_harvest",m.value=!0;break;case"germinate":$.value.eventType="germination_test",m.value=!0;break;case"pheno":$.value.eventType="selection",m.value=!0;break;default:$.value.eventType="note",m.value=!0}}async function G(){T.value.name&&(await n.createBreedingProject({name:T.value.name,project_type:T.value.type,primary_goal:T.value.goal,female_strain_id:T.value.femaleId,male_strain_id:T.value.maleId,status:"active"}),g.value=!1,T.value={name:"",femaleId:"",maleId:"",type:"line_creation",goal:""})}async function B(){M.value.strainId&&(await n.createPollenRecord({strain_id:M.value.strainId,collection_date:M.value.collectionDate||new Date().toISOString().split("T")[0],storage_method:M.value.storageMethod,viability_at_collection:90,status:"available"}),f.value=!1,M.value={strainId:"",collectionDate:"",storageMethod:"refrigerated"})}async function O(){if(!C.value)return;await n.updateBreedingProject(C.value.id,{name:P.value.name,primary_goal:P.value.goal,status:P.value.status})&&(C.value={...C.value,name:P.value.name,primary_goal:P.value.goal,status:P.value.status},x.value=!1)}async function R(){if(!C.value)return;const re=C.value.project_type||"F1";let E="F2";re==="F1"?E="F2":re==="F2"?E="F3":re==="F3"?E="F4":re==="F4"?E="F5":E=re;const L=await n.createBreedingProject({name:w.value.name||`${C.value.name} - ${E}`,project_type:E,primary_goal:w.value.goal||C.value.primary_goal,female_strain_id:C.value.female_strain_id,male_strain_id:C.value.male_strain_id,parent_project_id:C.value.id,target_traits:C.value.target_traits,traits_to_avoid:C.value.traits_to_avoid,status:"active"});if(L){_.value=!1,w.value={name:"",goal:""};const F=r.value.find(be=>be.id===L.id);F&&(C.value=F)}}async function X(){if(!C.value)return;const re={};switch($.value.eventType){case"pollination":re.pollination_date=$.value.date,re.status="active";break;case"seed_harvest":re.seed_harvest_date=$.value.date,re.total_seeds_produced=$.value.seedCount;break;case"germination_test":re.seeds_tested=$.value.seedCount,re.germination_rate=$.value.germinationRate;break}if($.value.notes){const L=C.value.notes||"",F=new Date($.value.date||Date.now()).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),be=$.value.eventType.replace("_"," ").replace(/\b\w/g,ie=>ie.toUpperCase());re.notes=L+`
[${F}] ${be}: ${$.value.notes}`}await n.updateBreedingProject(C.value.id,re)&&(C.value={...C.value,...re},m.value=!1)}async function oe(re){const E=re.target;if(!(!E.files?.length||!C.value)){y.value=!0;try{const{getAuthHeaders:L}=Ue(),F=L(),be=E.files[0],ie=new FormData;ie.append("file",be),ie.append("project_id",C.value.id),ie.append("project_code",C.value.code);const de=await fetch("/api/lab/upload-photo",{method:"POST",headers:F,body:ie});if(!de.ok)throw new Error(`Upload failed: ${de.status}`);const te=await de.json();te.path&&(S.value=te.path)}catch{}finally{y.value=!1,E.value=""}}}async function we(){if(!C.value||!S.value)return;const re=C.value.photos||[],E={url:S.value,caption:A.value,date:new Date().toISOString()};await n.updateBreedingProject(C.value.id,{photos:[...re,E]})&&(C.value={...C.value,photos:[...re,E]},b.value=!1,S.value="",A.value="")}return(re,E)=>(a(),l("div",XM,[e("div",{class:V(["flex flex-col transition-all duration-300 overflow-hidden border-r border-gray-800/50",t(C)?"w-full lg:w-2/5":t(d)==="lineage"?"w-full":"w-full lg:w-1/2"])},[e("div",QM,[e("div",JM,[e("div",null,[e("h2",eO,[e("div",tO,[I(t(At),{class:"w-4 h-4 text-white"})]),E[46]||(E[46]=ce(" Breeding Journal ",-1))]),E[47]||(E[47]=e("p",{class:"text-sm text-gray-400 mt-1"},"Plan crosses, track genetics, develop new lines",-1))]),e("div",sO,[e("button",{onClick:E[0]||(E[0]=L=>f.value=!0),class:"flex items-center gap-2 px-3 py-2.5 rounded-xl bg-yellow-500/20 hover:bg-yellow-500/30 text-yellow-300 text-sm font-medium transition-all"},[I(t(Ne),{class:"w-4 h-4"}),E[48]||(E[48]=ce(" Add Pollen ",-1))]),e("button",{onClick:E[1]||(E[1]=L=>g.value=!0),class:"flex items-center gap-2 px-4 py-2.5 rounded-xl bg-gradient-to-r from-pink-500 to-pink-400 hover:from-pink-400 hover:to-pink-300 text-white text-sm font-medium shadow-lg shadow-pink-500/20 transition-all"},[I(t(st),{class:"w-5 h-5"}),E[49]||(E[49]=ce(" New Project ",-1))])])]),e("div",nO,[(a(!0),l(Q,null,le(t(i),L=>(a(),l("button",{key:L.id,onClick:F=>d.value=L.id,class:V(["flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all flex-1 justify-center",t(d)===L.id?"bg-pink-500/30 text-pink-300 shadow-lg":"text-gray-400 hover:text-gray-300 hover:bg-gray-700/30"])},[(a(),pe(_t(L.icon),{class:"w-4 h-4"})),ce(" "+c(L.label)+" ",1),L.count>0?(a(),l("span",rO,c(L.count),1)):j("",!0)],10,oO))),128))])]),e("div",aO,[t(d)==="projects"?(a(),l("div",lO,[t(r).length>0?(a(),l("div",iO,[(a(!0),l(Q,null,le(t(r),L=>(a(),l("div",{key:L.id,onClick:F=>C.value=L,class:V(["p-4 rounded-xl cursor-pointer transition-all",t(C)?.id===L.id?"bg-pink-500/20 border border-pink-500/50":"bg-gray-800/40 hover:bg-gray-700/40 border border-gray-700/50"])},[e("div",cO,[e("div",null,[e("h3",uO,c(L.name),1),e("p",pO,c(L.code),1)]),e("span",{class:V(["px-2 py-1 rounded-lg text-xs font-medium",h(L.status)])},c(L.status),3)]),e("div",gO,[e("div",fO,[E[50]||(E[50]=e("span",null,"♀",-1)),e("span",null,c(L.female_strain_name||"Not set"),1)]),E[52]||(E[52]=e("span",null,"×",-1)),e("div",mO,[E[51]||(E[51]=e("span",null,"♂",-1)),e("span",null,c(L.male_strain_name||"Not set"),1)])]),e("div",hO,[e("div",bO,[I(t(Je),{class:"w-3 h-3"}),e("span",null,c(L.project_type||"F1"),1)]),e("div",vO,[I(t(Ne),{class:"w-3 h-3"}),e("span",null,c(L.total_seeds_produced||0)+" seeds",1)])])],10,dO))),128))])):(a(),l("div",xO,[e("div",yO,[I(t(At),{class:"w-8 h-8 text-pink-400"})]),E[54]||(E[54]=e("h3",{class:"text-base font-semibold text-gray-300 mb-2"},"No breeding projects",-1)),E[55]||(E[55]=e("p",{class:"text-sm text-gray-500 max-w-sm mb-4"}," Create your first breeding project to start documenting crosses and developing new lines. ",-1)),e("button",{onClick:E[2]||(E[2]=L=>g.value=!0),class:"flex items-center gap-2 px-4 py-2 rounded-xl bg-pink-500/20 text-pink-300 hover:bg-pink-500/30 transition-colors"},[I(t(st),{class:"w-4 h-4"}),E[53]||(E[53]=ce(" Create Project ",-1))])]))])):j("",!0),t(d)==="pollen"?(a(),l("div",_O,[e("div",wO,[e("div",kO,[E[56]||(E[56]=e("p",{class:"text-[10px] text-gray-500 uppercase tracking-wider mb-1"},"Total Batches",-1)),e("p",$O,c(t(o).length),1)]),e("div",CO,[E[57]||(E[57]=e("p",{class:"text-[10px] text-gray-500 uppercase tracking-wider mb-1"},"Available",-1)),e("p",SO,c(t(o).filter(L=>L.status==="available").length),1)]),e("div",PO,[E[58]||(E[58]=e("p",{class:"text-[10px] text-gray-500 uppercase tracking-wider mb-1"},"Low/Expiring",-1)),e("p",EO,c(t(o).filter(L=>L.status==="low"||L.current_viability&&L.current_viability<50).length),1)])]),t(o).length>0?(a(),l("div",TO,[(a(!0),l(Q,null,le(t(o),L=>(a(),pe(ZM,{key:L.id,pollen:L,"used-in-projects":u(L.strain_name||L.strainName||""),onClick:F=>k.value=L},null,8,["pollen","used-in-projects","onClick"]))),128))])):(a(),l("div",AO,[e("div",DO,[I(t(Ne),{class:"w-8 h-8 text-yellow-400"})]),E[60]||(E[60]=e("h3",{class:"text-base font-semibold text-gray-300 mb-2"},"No pollen stored",-1)),E[61]||(E[61]=e("p",{class:"text-sm text-gray-500 max-w-sm mb-4"}," Track your pollen inventory for future breeding projects and preserve genetics. ",-1)),e("button",{onClick:E[3]||(E[3]=L=>f.value=!0),class:"flex items-center gap-2 px-4 py-2 rounded-xl bg-yellow-500/20 text-yellow-300 hover:bg-yellow-500/30 transition-colors"},[I(t(st),{class:"w-4 h-4"}),E[59]||(E[59]=ce(" Add First Pollen ",-1))])]))])):j("",!0),t(d)==="lineage"?(a(),l("div",MO,[I(ll,{strains:t(n).strains,projects:t(r),"selected-strain-id":t(p),onSelectStrain:v,onSelectProject:D},null,8,["strains","projects","selected-strain-id"])])):j("",!0)])],2),t(C)||t(d)!=="lineage"&&!t(C)?(a(),l("div",OO,[t(C)?(a(),l(Q,{key:0},[e("div",LO,[e("div",jO,[e("div",IO,[e("div",RO,[I(t(At),{class:"w-6 h-6 text-pink-400"})]),e("div",null,[e("h3",FO,c(t(C).name),1),e("p",NO,c(t(C).code),1)])]),e("div",BO,[e("span",{class:V(["px-3 py-1 rounded-full text-xs font-bold",h(t(C).status)])},c(t(C).status),3),e("button",{onClick:E[4]||(E[4]=L=>C.value=null),class:"p-2 rounded-lg hover:bg-gray-800 text-gray-400 hover:text-white transition-colors"},[I(t(ze),{class:"w-5 h-5"})])])])]),e("div",VO,[e("div",UO,[e("h4",zO,[I(t(Je),{class:"w-4 h-4 text-purple-400"}),E[62]||(E[62]=ce(" Genetic Cross ",-1))]),e("div",HO,[e("div",GO,[E[63]||(E[63]=e("div",{class:"w-10 h-10 rounded-full bg-pink-500/30 flex items-center justify-center mx-auto mb-2"},[e("span",{class:"text-lg"},"♀")],-1)),e("p",WO,c(t(C).female_strain_name||"Not set"),1),E[64]||(E[64]=e("p",{class:"text-[10px] text-gray-500"},"Mother plant",-1))]),E[67]||(E[67]=e("div",{class:"w-12 h-12 rounded-full bg-gradient-to-br from-pink-500 to-blue-500 flex items-center justify-center shadow-lg"},[e("span",{class:"text-white font-bold text-lg"},"×")],-1)),e("div",qO,[E[65]||(E[65]=e("div",{class:"w-10 h-10 rounded-full bg-blue-500/30 flex items-center justify-center mx-auto mb-2"},[e("span",{class:"text-lg"},"♂")],-1)),e("p",KO,c(t(C).male_strain_name||"Not set"),1),E[66]||(E[66]=e("p",{class:"text-[10px] text-gray-500"},"Pollen donor",-1))])]),e("div",YO,[e("div",ZO,[e("span",XO,"→ "+c(t(C).project_type||"F1")+" Offspring",1),e("span",QO,c(t(C).total_seeds_produced||0)+" seeds",1)])])]),e("div",JO,[I(MM,{project:t(C),onMilestoneAction:z,onLogEvent:E[5]||(E[5]=L=>m.value=!0),onAddPhoto:E[6]||(E[6]=L=>b.value=!0)},null,8,["project"])]),e("div",eL,[e("h4",tL,[I(t(ct),{class:"w-4 h-4 text-amber-400"}),E[68]||(E[68]=ce(" Goals & Targets ",-1))]),e("div",sL,[e("div",null,[E[69]||(E[69]=e("p",{class:"text-[10px] text-gray-500 uppercase tracking-wider mb-1"},"Primary Goal",-1)),e("p",nL,c(t(C).primary_goal||"No goal set"),1)]),t(C).target_traits?.length?(a(),l("div",oL,[E[70]||(E[70]=e("p",{class:"text-[10px] text-gray-500 uppercase tracking-wider mb-2"},"Target Traits",-1)),e("div",rL,[(a(!0),l(Q,null,le(t(C).target_traits,L=>(a(),l("span",{key:L,class:"px-3 py-1.5 rounded-lg bg-spider-green-500/20 text-spider-green-300 text-xs font-medium"},c(L),1))),128))])])):j("",!0)])]),e("div",aL,[e("div",lL,[e("p",iL,c(t(C).project_type||"F1"),1),E[71]||(E[71]=e("p",{class:"text-[10px] text-gray-500 uppercase"},"Type",-1))]),e("div",dL,[e("p",cL,c(t(C).successful_phenos||0),1),E[72]||(E[72]=e("p",{class:"text-[10px] text-gray-500 uppercase"},"Selected Phenos",-1))]),e("div",uL,[e("p",pL,c(t(C).total_seeds_produced||0),1),E[73]||(E[73]=e("p",{class:"text-[10px] text-gray-500 uppercase"},"Seeds Produced",-1))]),e("div",gL,[e("p",fL,c(t(C).seeds_tested||0),1),E[74]||(E[74]=e("p",{class:"text-[10px] text-gray-500 uppercase"},"Seeds Tested",-1))])]),e("div",mL,[e("button",{onClick:E[7]||(E[7]=L=>x.value=!0),class:"flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-xl bg-gray-800 hover:bg-gray-700 text-gray-300 text-sm font-medium transition-colors"},[I(t(_s),{class:"w-4 h-4"}),E[75]||(E[75]=ce(" Edit Project ",-1))]),e("button",{onClick:E[8]||(E[8]=L=>_.value=!0),class:"flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-xl bg-pink-500/20 hover:bg-pink-500/30 text-pink-300 text-sm font-medium transition-colors"},[I(t(ut),{class:"w-4 h-4"}),E[76]||(E[76]=ce(" New Generation ",-1))])])])],64)):(a(),l(Q,{key:1},[e("div",hL,[e("h3",bL,[I(t(xo),{class:"w-4 h-4 text-purple-400"}),E[77]||(E[77]=ce(" Genetic Lineage Preview ",-1))])]),e("div",vL,[I(ll,{strains:t(n).strains,projects:t(r),onSelectProject:D},null,8,["strains","projects"])])],64))])):j("",!0),(a(),pe(Qe,{to:"body"},[t(g)?(a(),l("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80",onClick:E[16]||(E[16]=Ve(L=>g.value=!1,["self"]))},[e("div",xL,[e("div",yL,[E[78]||(E[78]=e("h3",{class:"text-lg font-bold text-white"},"New Breeding Project",-1)),e("button",{onClick:E[9]||(E[9]=L=>g.value=!1),class:"p-2 rounded-lg hover:bg-gray-800 text-gray-400 hover:text-white"},[I(t(ze),{class:"w-5 h-5"})])]),e("form",{onSubmit:Ve(G,["prevent"]),class:"p-4 space-y-4 overflow-y-auto flex-1"},[e("div",null,[E[79]||(E[79]=e("label",{class:"block text-sm text-gray-400 mb-2"},"Project Name",-1)),ye(e("input",{"onUpdate:modelValue":E[10]||(E[10]=L=>t(T).name=L),type:"text",placeholder:"e.g., GSC x OG Kush Line",class:"w-full px-4 py-3 rounded-xl bg-gray-800/50 border border-gray-700/50 text-white placeholder-gray-500 focus:border-pink-500/50 focus:outline-none"},null,512),[[$e,t(T).name]])]),e("div",_L,[e("div",null,[E[81]||(E[81]=e("label",{class:"block text-sm text-gray-400 mb-2"},"Female Parent",-1)),ye(e("select",{"onUpdate:modelValue":E[11]||(E[11]=L=>t(T).femaleId=L),class:"w-full px-4 py-3 rounded-xl bg-gray-800/50 border border-gray-700/50 text-white focus:border-pink-500/50 focus:outline-none"},[E[80]||(E[80]=e("option",{value:""},"Select strain...",-1)),(a(!0),l(Q,null,le(t(n).strains,L=>(a(),l("option",{key:L.id,value:L.id},c(L.name),9,wL))),128))],512),[[dt,t(T).femaleId]])]),e("div",null,[E[83]||(E[83]=e("label",{class:"block text-sm text-gray-400 mb-2"},"Male Parent",-1)),ye(e("select",{"onUpdate:modelValue":E[12]||(E[12]=L=>t(T).maleId=L),class:"w-full px-4 py-3 rounded-xl bg-gray-800/50 border border-gray-700/50 text-white focus:border-pink-500/50 focus:outline-none"},[E[82]||(E[82]=e("option",{value:""},"Select strain...",-1)),(a(!0),l(Q,null,le(t(n).strains,L=>(a(),l("option",{key:L.id,value:L.id},c(L.name),9,kL))),128))],512),[[dt,t(T).maleId]])])]),e("div",null,[E[85]||(E[85]=e("label",{class:"block text-sm text-gray-400 mb-2"},"Project Type",-1)),ye(e("select",{"onUpdate:modelValue":E[13]||(E[13]=L=>t(T).type=L),class:"w-full px-4 py-3 rounded-xl bg-gray-800/50 border border-gray-700/50 text-white focus:border-pink-500/50 focus:outline-none"},[...E[84]||(E[84]=[e("option",{value:"line_creation"},"New Line Creation",-1),e("option",{value:"stabilization"},"Line Stabilization",-1),e("option",{value:"trait_hunting"},"Trait Hunting",-1),e("option",{value:"preservation"},"Preservation",-1)])],512),[[dt,t(T).type]])]),e("div",null,[E[86]||(E[86]=e("label",{class:"block text-sm text-gray-400 mb-2"},"Primary Goal",-1)),ye(e("textarea",{"onUpdate:modelValue":E[14]||(E[14]=L=>t(T).goal=L),rows:"2",placeholder:"What are you trying to achieve?",class:"w-full px-4 py-3 rounded-xl bg-gray-800/50 border border-gray-700/50 text-white placeholder-gray-500 focus:border-pink-500/50 focus:outline-none resize-none"},null,512),[[$e,t(T).goal]])]),e("div",$L,[e("button",{type:"button",onClick:E[15]||(E[15]=L=>g.value=!1),class:"flex-1 px-4 py-3 rounded-xl bg-gray-800 hover:bg-gray-700 text-gray-300 font-medium transition-colors"}," Cancel "),E[87]||(E[87]=e("button",{type:"submit",class:"flex-1 px-4 py-3 rounded-xl bg-pink-500 hover:bg-pink-400 text-white font-medium transition-colors"}," Create Project ",-1))])],32)])])):j("",!0)])),(a(),pe(Qe,{to:"body"},[t(f)?(a(),l("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80",onClick:E[22]||(E[22]=Ve(L=>f.value=!1,["self"]))},[e("div",CL,[e("div",SL,[E[88]||(E[88]=e("h3",{class:"text-lg font-bold text-white"},"Add Pollen to Inventory",-1)),e("button",{onClick:E[17]||(E[17]=L=>f.value=!1),class:"p-2 rounded-lg hover:bg-gray-800 text-gray-400 hover:text-white"},[I(t(ze),{class:"w-5 h-5"})])]),e("form",{onSubmit:Ve(B,["prevent"]),class:"p-4 space-y-4 overflow-y-auto flex-1"},[e("div",null,[E[90]||(E[90]=e("label",{class:"block text-sm text-gray-400 mb-2"},"Source Strain",-1)),ye(e("select",{"onUpdate:modelValue":E[18]||(E[18]=L=>t(M).strainId=L),class:"w-full px-4 py-3 rounded-xl bg-gray-800/50 border border-gray-700/50 text-white focus:border-yellow-500/50 focus:outline-none"},[E[89]||(E[89]=e("option",{value:""},"Select strain...",-1)),(a(!0),l(Q,null,le(t(n).strains,L=>(a(),l("option",{key:L.id,value:L.id},c(L.name),9,PL))),128))],512),[[dt,t(M).strainId]])]),e("div",null,[E[91]||(E[91]=e("label",{class:"block text-sm text-gray-400 mb-2"},"Collection Date",-1)),ye(e("input",{"onUpdate:modelValue":E[19]||(E[19]=L=>t(M).collectionDate=L),type:"date",class:"w-full px-4 py-3 rounded-xl bg-gray-800/50 border border-gray-700/50 text-white focus:border-yellow-500/50 focus:outline-none"},null,512),[[$e,t(M).collectionDate]])]),e("div",null,[E[93]||(E[93]=e("label",{class:"block text-sm text-gray-400 mb-2"},"Storage Method",-1)),ye(e("select",{"onUpdate:modelValue":E[20]||(E[20]=L=>t(M).storageMethod=L),class:"w-full px-4 py-3 rounded-xl bg-gray-800/50 border border-gray-700/50 text-white focus:border-yellow-500/50 focus:outline-none"},[...E[92]||(E[92]=[e("option",{value:"refrigerated"},"Refrigerated (4°C)",-1),e("option",{value:"frozen"},"Frozen (-20°C)",-1),e("option",{value:"deep_frozen"},"Deep Frozen (-80°C)",-1),e("option",{value:"desiccated"},"Room Temp + Desiccant",-1)])],512),[[dt,t(M).storageMethod]])]),e("div",EL,[e("button",{type:"button",onClick:E[21]||(E[21]=L=>f.value=!1),class:"flex-1 px-4 py-3 rounded-xl bg-gray-800 hover:bg-gray-700 text-gray-300 font-medium transition-colors"}," Cancel "),E[94]||(E[94]=e("button",{type:"submit",class:"flex-1 px-4 py-3 rounded-xl bg-yellow-500 hover:bg-yellow-400 text-gray-900 font-medium transition-colors"}," Add Pollen ",-1))])],32)])])):j("",!0)])),(a(),pe(Qe,{to:"body"},[t(x)&&t(C)?(a(),l("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80",onClick:E[28]||(E[28]=Ve(L=>x.value=!1,["self"]))},[e("div",TL,[e("div",AL,[E[95]||(E[95]=e("h3",{class:"text-lg font-bold text-white"},"Edit Project",-1)),e("button",{onClick:E[23]||(E[23]=L=>x.value=!1),class:"p-2 rounded-lg hover:bg-gray-800 text-gray-400 hover:text-white transition-colors"},[I(t(ze),{class:"w-5 h-5"})])]),e("form",{onSubmit:Ve(O,["prevent"]),class:"p-6 space-y-4 overflow-y-auto flex-1"},[e("div",null,[E[96]||(E[96]=e("label",{class:"block text-sm text-gray-400 mb-2"},"Project Name",-1)),ye(e("input",{"onUpdate:modelValue":E[24]||(E[24]=L=>t(P).name=L),type:"text",class:"w-full px-4 py-3 rounded-xl bg-gray-800/50 border border-gray-700/50 text-white placeholder-gray-500 focus:border-pink-500/50 focus:outline-none"},null,512),[[$e,t(P).name]])]),e("div",null,[E[97]||(E[97]=e("label",{class:"block text-sm text-gray-400 mb-2"},"Primary Goal",-1)),ye(e("textarea",{"onUpdate:modelValue":E[25]||(E[25]=L=>t(P).goal=L),rows:"2",class:"w-full px-4 py-3 rounded-xl bg-gray-800/50 border border-gray-700/50 text-white placeholder-gray-500 focus:border-pink-500/50 focus:outline-none resize-none"},null,512),[[$e,t(P).goal]])]),e("div",null,[E[99]||(E[99]=e("label",{class:"block text-sm text-gray-400 mb-2"},"Status",-1)),ye(e("select",{"onUpdate:modelValue":E[26]||(E[26]=L=>t(P).status=L),class:"w-full px-4 py-3 rounded-xl bg-gray-800/50 border border-gray-700/50 text-white focus:border-pink-500/50 focus:outline-none"},[...E[98]||(E[98]=[e("option",{value:"planning"},"Planning",-1),e("option",{value:"active"},"Active",-1),e("option",{value:"paused"},"Paused",-1),e("option",{value:"completed"},"Completed",-1),e("option",{value:"abandoned"},"Abandoned",-1)])],512),[[dt,t(P).status]])]),e("div",DL,[e("button",{type:"button",onClick:E[27]||(E[27]=L=>x.value=!1),class:"flex-1 px-4 py-3 rounded-xl bg-gray-800 hover:bg-gray-700 text-gray-300 font-medium transition-colors"}," Cancel "),E[100]||(E[100]=e("button",{type:"submit",class:"flex-1 px-4 py-3 rounded-xl bg-pink-500 hover:bg-pink-400 text-white font-medium transition-colors"}," Save Changes ",-1))])],32)])])):j("",!0)])),(a(),pe(Qe,{to:"body"},[t(_)&&t(C)?(a(),l("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80",onClick:E[33]||(E[33]=Ve(L=>_.value=!1,["self"]))},[e("div",ML,[e("div",OL,[E[101]||(E[101]=e("h3",{class:"text-lg font-bold text-white"},"Create Next Generation",-1)),e("button",{onClick:E[29]||(E[29]=L=>_.value=!1),class:"p-2 rounded-lg hover:bg-gray-800 text-gray-400 hover:text-white transition-colors"},[I(t(ze),{class:"w-5 h-5"})])]),e("div",LL,[e("div",jL,[e("p",IL,[E[102]||(E[102]=ce(" This will create a new breeding project using the offspring from ",-1)),e("span",RL,c(t(C).name),1),E[103]||(E[103]=ce(" as the parent generation. ",-1))])]),e("div",null,[E[104]||(E[104]=e("label",{class:"block text-sm text-gray-400 mb-2"},"New Generation Name",-1)),ye(e("input",{"onUpdate:modelValue":E[30]||(E[30]=L=>t(w).name=L),type:"text",placeholder:`${t(C).name} - F2`,class:"w-full px-4 py-3 rounded-xl bg-gray-800/50 border border-gray-700/50 text-white placeholder-gray-500 focus:border-pink-500/50 focus:outline-none"},null,8,FL),[[$e,t(w).name]])]),e("div",null,[E[105]||(E[105]=e("label",{class:"block text-sm text-gray-400 mb-2"},"Goal for This Generation",-1)),ye(e("textarea",{"onUpdate:modelValue":E[31]||(E[31]=L=>t(w).goal=L),rows:"2",placeholder:"What traits are you selecting for?",class:"w-full px-4 py-3 rounded-xl bg-gray-800/50 border border-gray-700/50 text-white placeholder-gray-500 focus:border-pink-500/50 focus:outline-none resize-none"},null,512),[[$e,t(w).goal]])]),e("div",NL,[e("button",{type:"button",onClick:E[32]||(E[32]=L=>_.value=!1),class:"flex-1 px-4 py-3 rounded-xl bg-gray-800 hover:bg-gray-700 text-gray-300 font-medium transition-colors"}," Cancel "),e("button",{onClick:R,class:"flex-1 px-4 py-3 rounded-xl bg-pink-500 hover:bg-pink-400 text-white font-medium transition-colors"}," Create Generation ")])])])])):j("",!0)])),(a(),pe(Qe,{to:"body"},[t(m)&&t(C)?(a(),l("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80",onClick:E[41]||(E[41]=Ve(L=>m.value=!1,["self"]))},[e("div",BL,[e("div",VL,[E[106]||(E[106]=e("h3",{class:"text-lg font-bold text-white"},"Log Breeding Event",-1)),e("button",{onClick:E[34]||(E[34]=L=>m.value=!1),class:"p-2 rounded-lg hover:bg-gray-800 text-gray-400 hover:text-white transition-colors"},[I(t(ze),{class:"w-5 h-5"})])]),e("form",{onSubmit:Ve(X,["prevent"]),class:"p-6 space-y-4 overflow-y-auto flex-1"},[e("div",null,[E[108]||(E[108]=e("label",{class:"block text-sm text-gray-400 mb-2"},"Event Type",-1)),ye(e("select",{"onUpdate:modelValue":E[35]||(E[35]=L=>t($).eventType=L),class:"w-full px-4 py-3 rounded-xl bg-gray-800/50 border border-gray-700/50 text-white focus:border-pink-500/50 focus:outline-none"},[...E[107]||(E[107]=[e("option",{value:"pollination"},"Pollination",-1),e("option",{value:"seed_harvest"},"Seed Harvest",-1),e("option",{value:"germination_test"},"Germination Test",-1),e("option",{value:"selection"},"Pheno Selection",-1),e("option",{value:"note"},"General Note",-1)])],512),[[dt,t($).eventType]])]),e("div",null,[E[109]||(E[109]=e("label",{class:"block text-sm text-gray-400 mb-2"},"Date",-1)),ye(e("input",{"onUpdate:modelValue":E[36]||(E[36]=L=>t($).date=L),type:"date",class:"w-full px-4 py-3 rounded-xl bg-gray-800/50 border border-gray-700/50 text-white focus:border-pink-500/50 focus:outline-none"},null,512),[[$e,t($).date]])]),t($).eventType==="seed_harvest"||t($).eventType==="germination_test"?(a(),l("div",UL,[E[110]||(E[110]=e("label",{class:"block text-sm text-gray-400 mb-2"},"Seed Count",-1)),ye(e("input",{"onUpdate:modelValue":E[37]||(E[37]=L=>t($).seedCount=L),type:"number",min:"0",placeholder:"Number of seeds",class:"w-full px-4 py-3 rounded-xl bg-gray-800/50 border border-gray-700/50 text-white placeholder-gray-500 focus:border-pink-500/50 focus:outline-none"},null,512),[[$e,t($).seedCount,void 0,{number:!0}]])])):j("",!0),t($).eventType==="germination_test"?(a(),l("div",zL,[E[111]||(E[111]=e("label",{class:"block text-sm text-gray-400 mb-2"},"Germination Rate (%)",-1)),ye(e("input",{"onUpdate:modelValue":E[38]||(E[38]=L=>t($).germinationRate=L),type:"number",min:"0",max:"100",placeholder:"e.g., 85",class:"w-full px-4 py-3 rounded-xl bg-gray-800/50 border border-gray-700/50 text-white placeholder-gray-500 focus:border-pink-500/50 focus:outline-none"},null,512),[[$e,t($).germinationRate,void 0,{number:!0}]])])):j("",!0),e("div",null,[E[112]||(E[112]=e("label",{class:"block text-sm text-gray-400 mb-2"},"Notes",-1)),ye(e("textarea",{"onUpdate:modelValue":E[39]||(E[39]=L=>t($).notes=L),rows:"3",placeholder:"Details about this event...",class:"w-full px-4 py-3 rounded-xl bg-gray-800/50 border border-gray-700/50 text-white placeholder-gray-500 focus:border-pink-500/50 focus:outline-none resize-none"},null,512),[[$e,t($).notes]])]),e("div",HL,[e("button",{type:"button",onClick:E[40]||(E[40]=L=>m.value=!1),class:"flex-1 px-4 py-3 rounded-xl bg-gray-800 hover:bg-gray-700 text-gray-300 font-medium transition-colors"}," Cancel "),E[113]||(E[113]=e("button",{type:"submit",class:"flex-1 px-4 py-3 rounded-xl bg-pink-500 hover:bg-pink-400 text-white font-medium transition-colors"}," Save Event ",-1))])],32)])])):j("",!0)])),(a(),pe(Qe,{to:"body"},[t(b)&&t(C)?(a(),l("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80",onClick:E[45]||(E[45]=Ve(L=>b.value=!1,["self"]))},[e("div",GL,[e("div",WL,[E[114]||(E[114]=e("h3",{class:"text-lg font-bold text-white"},"Add Project Photo",-1)),e("button",{onClick:E[42]||(E[42]=L=>b.value=!1),class:"p-2 rounded-lg hover:bg-gray-800 text-gray-400 hover:text-white transition-colors"},[I(t(ze),{class:"w-5 h-5"})])]),e("form",{onSubmit:Ve(we,["prevent"]),class:"p-6 space-y-4 overflow-y-auto flex-1"},[e("div",null,[e("label",qL,[e("input",{type:"file",accept:"image/*",class:"hidden",onChange:oe,disabled:t(y)},null,40,KL),e("div",YL,[t(y)?(a(),pe(t(ut),{key:1,class:"w-8 h-8 text-pink-400 animate-spin"})):(a(),pe(t(pt),{key:0,class:"w-8 h-8 text-pink-400"}))]),e("div",ZL,[e("p",XL,c(t(y)?"Uploading...":t(S)?"Photo uploaded":"Click to add photo"),1),E[115]||(E[115]=e("p",{class:"text-xs text-gray-500 mt-1"},"JPG, PNG, WEBP up to 10MB",-1))])]),t(S)?(a(),l("div",QL,[e("img",{src:t(S),class:"w-full h-48 object-cover rounded-xl"},null,8,JL)])):j("",!0)]),e("div",null,[E[116]||(E[116]=e("label",{class:"block text-sm text-gray-400 mb-2"},"Caption (optional)",-1)),ye(e("input",{"onUpdate:modelValue":E[43]||(E[43]=L=>We(A)?A.value=L:null),type:"text",placeholder:"Describe this photo...",class:"w-full px-4 py-3 rounded-xl bg-gray-800/50 border border-gray-700/50 text-white placeholder-gray-500 focus:border-pink-500/50 focus:outline-none"},null,512),[[$e,t(A)]])]),e("div",ej,[e("button",{type:"button",onClick:E[44]||(E[44]=L=>{b.value=!1,S.value="",A.value=""}),class:"flex-1 px-4 py-3 rounded-xl bg-gray-800 hover:bg-gray-700 text-gray-300 font-medium transition-colors"}," Cancel "),e("button",{type:"submit",disabled:!t(S),class:V(["flex-1 px-4 py-3 rounded-xl font-medium transition-colors",t(S)?"bg-pink-500 hover:bg-pink-400 text-white":"bg-gray-700 text-gray-500 cursor-not-allowed"])}," Save Photo ",10,tj)])],32)])])):j("",!0)]))]))}}),nj=Object.assign(sj,{__name:"LabBreeding"}),oj={class:"space-y-4"},rj={class:"h-64"},aj={class:"flex flex-wrap justify-center gap-4"},lj={class:"text-sm text-gray-300"},ij={class:"text-xs text-gray-500"},dj={key:0,class:"text-amber-400"},cj=Pe({__name:"LabPhenoRadarChart",props:{plants:{default:()=>[]},scores:{default:()=>new Map}},setup(s){Fo.register(Ml,No,Bo,zo,Vo,Uo);const n=s,r=["rgba(74, 222, 128, 1)","rgba(168, 85, 247, 1)","rgba(251, 191, 36, 1)","rgba(96, 165, 250, 1)"],o=["rgba(74, 222, 128, 0.2)","rgba(168, 85, 247, 0.2)","rgba(251, 191, 36, 0.2)","rgba(96, 165, 250, 0.2)"],i=["Vigor","Structure","Resistance","Production","Aroma","Clonability"],d=["vigor","structure","resistance","production","aroma","clonability"];function g(b,x){const _=n.scores.get(b.id);if(_&&_[x]!==void 0)return _[x];const C=b.final_score||50,p=(b.id.charCodeAt(0)+x.charCodeAt(0))%20-10;return Math.max(1,Math.min(10,C/10+p/5))}const f=U(()=>({labels:i,datasets:n.plants.slice(0,4).map((b,x)=>({label:b.plant_code,data:d.map(_=>g(b,_)),fill:!0,backgroundColor:o[x],borderColor:r[x],borderWidth:2,pointBackgroundColor:r[x],pointBorderColor:"#fff",pointRadius:4,pointHoverRadius:6}))})),m={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:"#1f2937",borderColor:"#374151",borderWidth:1,titleColor:"#fff",bodyColor:"#9ca3af",callbacks:{label:b=>`${b.dataset.label}: ${b.parsed.r.toFixed(1)}/10`}}},scales:{r:{min:0,max:10,ticks:{stepSize:2,display:!1},pointLabels:{color:"#9ca3af",font:{size:11}},grid:{color:"rgba(75, 85, 99, 0.4)"},angleLines:{color:"rgba(75, 85, 99, 0.4)"}}}};return(b,x)=>(a(),l("div",oj,[e("div",rj,[I(t(Tl),{data:t(f),options:m},null,8,["data"])]),e("div",aj,[(a(!0),l(Q,null,le(s.plants.slice(0,4),(_,C)=>(a(),l("div",{key:_.id,class:"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-gray-800/50"},[e("div",{class:"w-3 h-3 rounded-full",style:Te({backgroundColor:r[C]})},null,4),e("span",lj,c(_.plant_code),1),e("span",ij,"("+c((_.final_score||0).toFixed(1))+")",1),_.is_keeper?(a(),l("span",dj,"⭐")):j("",!0)]))),128))])]))}}),il=Object.assign(cj,{__name:"LabPhenoRadarChart"}),uj={class:"space-y-4"},pj={class:"flex items-center justify-between"},gj={class:"text-sm font-semibold text-white flex items-center gap-2"},fj={class:"flex items-center gap-1 p-0.5 rounded-lg bg-gray-800/60"},mj=["onClick"],hj={class:"aspect-square relative"},bj={key:1,class:"w-full h-full flex flex-col items-center justify-center bg-gray-800/60"},vj={class:"absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/80 to-transparent p-3"},xj={class:"flex items-center justify-between"},yj={class:"text-sm font-semibold text-white"},_j={class:"text-[10px] text-gray-400"},wj={class:"text-right"},kj={key:0,class:"px-1.5 py-0.5 rounded bg-amber-500/30 text-amber-300 text-[9px] font-medium"},$j={class:"text-lg"},Cj={key:1,class:"relative aspect-video rounded-xl overflow-hidden bg-gray-800/40"},Sj={class:"absolute inset-0 flex"},Pj=["src","alt"],Ej={key:1,class:"w-full h-full flex items-center justify-center bg-gray-800"},Tj={class:"absolute top-3 left-3 px-2 py-1 rounded-lg bg-black/60 backdrop-blur-sm"},Aj={class:"text-sm font-semibold text-white"},Dj=["src","alt"],Mj={key:1,class:"w-full h-full flex items-center justify-center bg-gray-800"},Oj={class:"absolute top-3 right-3 px-2 py-1 rounded-lg bg-black/60 backdrop-blur-sm text-right"},Lj={class:"text-sm font-semibold text-white"},jj={class:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-8 h-8 rounded-full bg-white shadow-lg flex items-center justify-center"},Ij={key:2,class:"space-y-4"},Rj={class:"flex items-center gap-3 mb-3"},Fj={class:"w-10 h-10 rounded-lg bg-gray-700/50 flex items-center justify-center"},Nj={class:"text-lg"},Bj={class:"flex-1"},Vj={class:"text-sm font-semibold text-white"},Uj={class:"text-[10px] text-gray-500"},zj={class:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide"},Hj=["src","alt"],Gj={class:"text-[9px] text-gray-500 text-center mt-1"},Wj={key:0,class:"flex-shrink-0 w-20 h-20 rounded-lg bg-gray-700/50 flex items-center justify-center"},qj={key:3,class:"p-6 rounded-xl bg-gray-800/40 border border-gray-700/50 text-center"},Kj=Pe({__name:"LabPhenoPhotoCompare",props:{plants:{default:()=>[]}},setup(s){const n=s,r=[{id:"grid",label:"Grid"},{id:"slider",label:"Slider"},{id:"timeline",label:"Timeline"}],o=W("grid"),i=W(50);let d=!1;const g=U(()=>(Math.min(4,n.plants.length)<=2,"grid-cols-2"));function f(k){}function m(k){return[]}function b(k){d=!0;const p=k.target.parentElement;if(!p)return;const T=P=>{if(!d)return;const w=p.getBoundingClientRect(),$=P.clientX-w.left;i.value=Math.max(10,Math.min(90,$/w.width*100))},M=()=>{d=!1,document.removeEventListener("mousemove",T),document.removeEventListener("mouseup",M)};document.addEventListener("mousemove",T),document.addEventListener("mouseup",M)}function x(k){return k?k>=85?"text-spider-green-400":k>=70?"text-yellow-400":k>=55?"text-orange-400":"text-red-400":"text-gray-500"}function _(k){return k===0?"bg-yellow-500/80":k===1?"bg-gray-400/80":k===2?"bg-amber-600/80":"bg-gray-700/80"}function C(k){return k===0?"🥇":k===1?"🥈":k===2?"🥉":"🌿"}return(k,p)=>(a(),l("div",uj,[e("div",pj,[e("h4",gj,[I(t(pt),{class:"w-4 h-4 text-amber-400"}),p[0]||(p[0]=ce(" Photo Comparison ",-1))]),e("div",fj,[(a(),l(Q,null,le(r,T=>e("button",{key:T.id,onClick:M=>o.value=T.id,class:V(["px-2 py-1 rounded-md text-[10px] font-medium transition-all",t(o)===T.id?"bg-amber-500/30 text-amber-300":"text-gray-500 hover:text-gray-300"])},c(T.label),11,mj)),64))])]),t(o)==="grid"?(a(),l("div",{key:0,class:V(["grid gap-3",t(g)])},[(a(!0),l(Q,null,le(s.plants.slice(0,4),T=>(a(),l("div",{key:T.id,class:"relative rounded-xl overflow-hidden bg-gray-800/40 border border-gray-700/50 group"},[e("div",hj,[(a(),l("div",bj,[I(t(As),{class:"w-12 h-12 text-gray-600 mb-2"}),p[1]||(p[1]=e("p",{class:"text-xs text-gray-500"},"No photo",-1))])),e("div",vj,[e("div",xj,[e("div",null,[e("p",yj,c(T.plant_code),1),e("p",_j,c(T.strain_name||"Unknown"),1)]),e("div",wj,[e("p",{class:V(["text-lg font-bold",x(T.final_score)])},c((T.final_score||0).toFixed(1)),3),T.is_keeper?(a(),l("span",kj," KEEPER ")):j("",!0)])])]),s.plants.indexOf(T)<3?(a(),l("div",{key:2,class:V(["absolute top-2 left-2 w-8 h-8 rounded-full flex items-center justify-center",_(s.plants.indexOf(T))])},[e("span",$j,c(C(s.plants.indexOf(T))),1)],2)):j("",!0)])]))),128))],2)):t(o)==="slider"&&s.plants.length>=2?(a(),l("div",Cj,[e("div",Sj,[e("div",{class:"h-full overflow-hidden",style:Te({width:`${t(i)}%`})},[(s.plants[0],void 0)?(a(),l("img",{key:0,src:(s.plants[0],void 0),alt:s.plants[0].plant_code,class:"h-full object-cover",style:Te({width:`${100/(t(i)/100)}%`})},null,12,Pj)):(a(),l("div",Ej,[I(t(As),{class:"w-16 h-16 text-gray-600"})])),e("div",Tj,[e("p",Aj,c(s.plants[0].plant_code),1),e("p",{class:V(["text-xs",x(s.plants[0].final_score)])},c((s.plants[0].final_score||0).toFixed(1)),3)])],4),e("div",{class:"absolute inset-0 overflow-hidden",style:Te({clipPath:`inset(0 0 0 ${t(i)}%)`})},[(s.plants[1],void 0)?(a(),l("img",{key:0,src:(s.plants[1],void 0),alt:s.plants[1].plant_code,class:"h-full object-cover w-full"},null,8,Dj)):(a(),l("div",Mj,[I(t(As),{class:"w-16 h-16 text-gray-600"})])),e("div",Oj,[e("p",Lj,c(s.plants[1].plant_code),1),e("p",{class:V(["text-xs",x(s.plants[1].final_score)])},c((s.plants[1].final_score||0).toFixed(1)),3)])],4),e("div",{class:"absolute top-0 bottom-0 w-1 bg-white cursor-ew-resize z-10",style:Te({left:`${t(i)}%`}),onMousedown:b},[e("div",jj,[I(t(Kc),{class:"w-4 h-4 text-gray-800"})])],36)])])):t(o)==="timeline"?(a(),l("div",Ij,[(a(!0),l(Q,null,le(s.plants.slice(0,4),T=>(a(),l("div",{key:T.id,class:"p-3 rounded-xl bg-gray-800/40 border border-gray-700/50"},[e("div",Rj,[e("div",Fj,[e("span",Nj,c(C(s.plants.indexOf(T))),1)]),e("div",Bj,[e("p",Vj,c(T.plant_code),1),e("p",Uj,c(T.strain_name),1)]),e("div",{class:V(["text-lg font-bold",x(T.final_score)])},c((T.final_score||0).toFixed(1)),3)]),e("div",zj,[(a(!0),l(Q,null,le(m(),(M,P)=>(a(),l("div",{key:P,class:"flex-shrink-0 w-20 h-20 rounded-lg overflow-hidden bg-gray-700/50"},[e("img",{src:M.url,alt:M.label,class:"w-full h-full object-cover"},null,8,Hj),e("p",Gj,c(M.label),1)]))),128)),m().length===0?(a(),l("div",Wj,[I(t(As),{class:"w-8 h-8 text-gray-600"})])):j("",!0)])]))),128))])):(a(),l("div",qj,[I(t(As),{class:"w-12 h-12 text-gray-600 mx-auto mb-3"}),p[2]||(p[2]=e("p",{class:"text-sm text-gray-400"},"Select at least 2 plants to compare photos",-1))]))]))}}),Yj=Object.assign(Pt(Kj,[["__scopeId","data-v-ea3dda99"]]),{__name:"LabPhenoPhotoCompare"}),Zj={class:"space-y-4"},Xj={class:"flex items-center justify-between"},Qj={class:"text-sm font-semibold text-white flex items-center gap-2"},Jj={key:0,class:"p-3 rounded-xl bg-gray-800/40 border border-gray-700/50 space-y-3"},eI={class:"flex items-center justify-between text-xs"},tI={class:"text-gray-400"},sI={class:"text-white font-medium"},nI=["onUpdate:modelValue","min","max","step"],oI={class:"pt-2 flex gap-2"},rI={class:"flex items-start gap-3"},aI={class:"text-2xl"},lI={class:"flex-1 min-w-0"},iI={class:"flex items-center gap-2 mb-1"},dI={class:"text-sm font-bold text-white"},cI={class:"text-sm text-gray-300 mb-3"},uI={class:"flex flex-wrap gap-2"},pI={key:2,class:"space-y-3"},gI={class:"space-y-2"},fI={class:"text-lg w-6"},mI={class:"flex-1"},hI={class:"flex items-center justify-between text-xs mb-1"},bI={class:"text-gray-400"},vI={class:"h-1.5 rounded-full bg-gray-700/50 overflow-hidden"},xI={key:0},yI={key:3,class:"p-3 rounded-xl bg-gray-800/40 border border-gray-700/50"},_I={class:"flex items-start gap-2"},wI={class:"text-xs text-gray-400 space-y-1"},kI=Pe({__name:"LabPhenoKeeperEngine",props:{plants:{default:()=>[]},scores:{default:()=>new Map}},emits:["mark-keeper","continue-observation","view-details"],setup(s,{emit:n}){const r=s,o=n,i=W(!1),d=W([{key:"minScore",label:"Minimum Score",value:80,min:50,max:95,step:5},{key:"minTraits",label:"Min Traits Above 7",value:4,min:1,max:6,step:1},{key:"noWeakTraits",label:"Max Weak Traits (<5)",value:1,min:0,max:3,step:1}]);function g(){d.value=[{key:"minScore",label:"Minimum Score",value:80,min:50,max:95,step:5},{key:"minTraits",label:"Min Traits Above 7",value:4,min:1,max:6,step:1},{key:"noWeakTraits",label:"Max Weak Traits (<5)",value:1,min:0,max:3,step:1}]}const f=U(()=>r.plants.length===0?null:[...r.plants].sort((k,p)=>(p.final_score||0)-(k.final_score||0))[0]),m=U(()=>{if(!f.value)return null;const k=f.value.final_score||0,p=d.value.find(T=>T.key==="minScore")?.value||80;return k>=p&&!f.value.is_keeper?{type:"keeper",plantId:f.value.id,emoji:"🌟",title:f.value.plant_code,badge:"Keeper Candidate",message:`Exceptional overall score of ${k.toFixed(1)}. Strong performance across all traits makes this an excellent keeper candidate.`}:k>=p-10?{type:"strong",plantId:f.value.id,emoji:"💪",title:f.value.plant_code,badge:"Strong Performer",message:`Solid score of ${k.toFixed(1)}. Consider this plant for breeding projects or as a backup keeper.`}:k>=p-20?{type:"potential",plantId:f.value.id,emoji:"👀",title:f.value.plant_code,badge:"Has Potential",message:`Score of ${k.toFixed(1)} shows potential. Continue observation and consider environmental factors.`}:{type:"standard",plantId:f.value.id,emoji:"🌿",title:f.value.plant_code,badge:"Standard",message:`Score of ${k.toFixed(1)} is below keeper threshold. May have specific traits worth preserving.`}}),b=U(()=>f.value?[{key:"vigor",label:"Vigor & Health",icon:"💪"},{key:"structure",label:"Structure",icon:"🌿"},{key:"resistance",label:"Resistance",icon:"🛡️"},{key:"production",label:"Production",icon:"🌸"},{key:"aroma",label:"Aroma",icon:"👃"},{key:"clonability",label:"Clonability",icon:"🧬"}].map(p=>{const T=r.scores.get(f.value.id);let M=7;if(T&&T[p.key]!==void 0)M=T[p.key];else{const P=f.value.id.charCodeAt(0)+p.key.charCodeAt(0),w=(f.value.final_score||50)/10;M=Math.max(3,Math.min(10,Math.round(w+P%4-2)))}return{...p,score:M,trend:0}}):[]),x=U(()=>{const k=[];if(r.plants.length<2)return k;const p=[...r.plants].sort((A,y)=>(y.final_score||0)-(A.final_score||0)),T=p[0],M=p[1],P=(T.final_score||0)-(M.final_score||0);P>10?k.push(`${T.plant_code} leads by ${P.toFixed(1)} points - clear standout`):P<3&&k.push(`${T.plant_code} and ${M.plant_code} are very close - consider trait priorities`);const w=r.plants.filter(A=>A.is_keeper).length;w>0&&k.push(`${w} keeper(s) already marked in this selection`);const $=[...new Set(r.plants.map(A=>A.strain_name))].filter(Boolean);$.length>1?k.push(`Comparing across ${$.length} different strains`):$.length===1&&k.push(`All plants from ${$[0]} - good for pheno hunting`);const S=r.plants.reduce((A,y)=>A+(y.final_score||0),0)/r.plants.length;return k.push(`Average score: ${S.toFixed(1)} across ${r.plants.length} plants`),k.slice(0,4)});function _(k){return k>=8?"text-spider-green-400 font-semibold":k>=6?"text-yellow-400":k>=4?"text-orange-400":"text-red-400"}function C(k){return k>=8?"bg-gradient-to-r from-spider-green-600 to-spider-green-400":k>=6?"bg-gradient-to-r from-yellow-600 to-yellow-400":k>=4?"bg-gradient-to-r from-orange-600 to-orange-400":"bg-gradient-to-r from-red-600 to-red-400"}return(k,p)=>(a(),l("div",Zj,[e("div",Xj,[e("h4",Qj,[I(t(Ne),{class:"w-4 h-4 text-amber-400"}),p[5]||(p[5]=ce(" Keeper Analysis ",-1))]),e("button",{onClick:p[0]||(p[0]=T=>i.value=!t(i)),class:"p-1.5 rounded-lg hover:bg-gray-700/50 text-gray-400 hover:text-white transition-colors"},[I(t(El),{class:"w-4 h-4"})])]),t(i)?(a(),l("div",Jj,[p[6]||(p[6]=e("p",{class:"text-xs text-gray-500 uppercase tracking-wider"},"Keeper Thresholds",-1)),(a(!0),l(Q,null,le(t(d),T=>(a(),l("div",{key:T.key,class:"space-y-1"},[e("div",eI,[e("span",tI,c(T.label),1),e("span",sI,c(T.value),1)]),ye(e("input",{type:"range","onUpdate:modelValue":M=>T.value=M,min:T.min,max:T.max,step:T.step,class:"w-full h-1 rounded-full bg-gray-700 appearance-none cursor-pointer accent-amber-500"},null,8,nI),[[$e,T.value]])]))),128)),e("div",oI,[e("button",{onClick:g,class:"flex-1 px-3 py-2 rounded-lg bg-gray-700/50 text-gray-300 text-xs font-medium hover:bg-gray-600/50 transition-colors"}," Reset "),e("button",{onClick:p[1]||(p[1]=T=>i.value=!1),class:"flex-1 px-3 py-2 rounded-lg bg-amber-500/20 text-amber-300 text-xs font-medium hover:bg-amber-500/30 transition-colors"}," Apply ")])])):j("",!0),t(m)?(a(),l("div",{key:1,class:V(["p-4 rounded-xl border transition-all",t(m).type==="keeper"?"bg-gradient-to-br from-amber-500/20 to-orange-500/10 border-amber-500/30":t(m).type==="strong"?"bg-gradient-to-br from-spider-green-500/20 to-emerald-500/10 border-spider-green-500/30":t(m).type==="potential"?"bg-gradient-to-br from-blue-500/20 to-cyan-500/10 border-blue-500/30":"bg-gray-800/40 border-gray-700/50"])},[e("div",rI,[e("div",{class:V(["w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0",t(m).type==="keeper"?"bg-amber-500/30":t(m).type==="strong"?"bg-spider-green-500/30":t(m).type==="potential"?"bg-blue-500/30":"bg-gray-700/50"])},[e("span",aI,c(t(m).emoji),1)],2),e("div",lI,[e("div",iI,[e("h5",dI,c(t(m).title),1),e("span",{class:V(["px-2 py-0.5 rounded-full text-[10px] font-bold uppercase",t(m).type==="keeper"?"bg-amber-500/40 text-amber-200":t(m).type==="strong"?"bg-spider-green-500/40 text-spider-green-200":t(m).type==="potential"?"bg-blue-500/40 text-blue-200":"bg-gray-600 text-gray-300"])},c(t(m).badge),3)]),e("p",cI,c(t(m).message),1),e("div",uI,[t(m).type==="keeper"?(a(),l("button",{key:0,onClick:p[2]||(p[2]=T=>o("mark-keeper",t(m).plantId)),class:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-amber-500 hover:bg-amber-400 text-gray-900 text-xs font-semibold transition-colors"},[I(t(ct),{class:"w-3.5 h-3.5"}),p[7]||(p[7]=ce(" Mark as Keeper ",-1))])):j("",!0),t(m).type==="potential"?(a(),l("button",{key:1,onClick:p[3]||(p[3]=T=>o("continue-observation",t(m).plantId)),class:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-blue-500/20 hover:bg-blue-500/30 text-blue-300 text-xs font-medium transition-colors"},[I(t(bi),{class:"w-3.5 h-3.5"}),p[8]||(p[8]=ce(" Continue Observation ",-1))])):j("",!0),e("button",{onClick:p[4]||(p[4]=T=>o("view-details",t(m).plantId)),class:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-gray-700/50 hover:bg-gray-600/50 text-gray-300 text-xs font-medium transition-colors"},[I(t(Ot),{class:"w-3.5 h-3.5"}),p[9]||(p[9]=ce(" View Scores ",-1))])])])])],2)):j("",!0),t(f)?(a(),l("div",pI,[p[10]||(p[10]=e("p",{class:"text-xs text-gray-500 uppercase tracking-wider"},"Trait Analysis",-1)),e("div",gI,[(a(!0),l(Q,null,le(t(b),T=>(a(),l("div",{key:T.key,class:"flex items-center gap-3"},[e("span",fI,c(T.icon),1),e("div",mI,[e("div",hI,[e("span",bI,c(T.label),1),e("span",{class:V(_(T.score))},c(T.score)+"/10",3)]),e("div",vI,[e("div",{class:V(["h-full rounded-full transition-all",C(T.score)]),style:Te({width:`${T.score*10}%`})},null,6)])]),T.trend?(a(),l("div",{key:0,class:V(["flex items-center gap-0.5 text-[10px]",T.trend>0?"text-spider-green-400":T.trend<0?"text-red-400":"text-gray-500"])},[(a(),pe(_t(T.trend>0?t(vo):T.trend<0?t(mi):t(mn)),{class:"w-3 h-3"})),T.trend!==0?(a(),l("span",xI,c(Math.abs(T.trend)),1)):j("",!0)],2)):j("",!0)]))),128))])])):j("",!0),s.plants.length>=2?(a(),l("div",yI,[e("div",_I,[I(t(wt),{class:"w-4 h-4 text-yellow-400 flex-shrink-0 mt-0.5"}),e("div",null,[p[12]||(p[12]=e("p",{class:"text-xs font-medium text-white mb-1"},"Quick Insights",-1)),e("ul",wI,[(a(!0),l(Q,null,le(t(x),(T,M)=>(a(),l("li",{key:M,class:"flex items-start gap-1.5"},[p[11]||(p[11]=e("span",{class:"text-gray-500"},"•",-1)),e("span",null,c(T),1)]))),128))])])])])):j("",!0)]))}}),$I=Object.assign(kI,{__name:"LabPhenoKeeperEngine"}),CI={class:"h-full flex overflow-hidden"},SI={class:"flex-shrink-0 p-4 border-b border-gray-800/50"},PI={class:"flex items-center justify-between gap-4"},EI={class:"text-xl font-bold text-white flex items-center gap-2"},TI={class:"flex items-center gap-2"},AI={key:0,class:"flex gap-2 overflow-x-auto pb-1 scrollbar-hide mt-4"},DI=["onClick"],MI={class:"px-1.5 py-0.5 rounded bg-black/20 text-[10px]"},OI={class:"flex-1 overflow-y-auto p-4"},LI={key:0,class:"h-full"},jI={class:"grid grid-cols-1 lg:grid-cols-2 gap-4 h-full"},II={class:"space-y-4"},RI={class:"bg-gradient-to-br from-amber-500/10 to-orange-500/10 rounded-xl border border-amber-500/20 p-4"},FI={class:"flex items-center gap-3 mb-3"},NI={class:"w-10 h-10 rounded-lg bg-amber-500/20 flex items-center justify-center flex-shrink-0"},BI={class:"bg-gray-800/40 rounded-xl border border-gray-700/50 p-4"},VI={class:"grid grid-cols-3 gap-2"},UI={class:"text-base"},zI={class:"min-w-0"},HI={class:"text-[10px] font-medium text-white truncate"},GI={class:"text-[9px] text-gray-500"},WI={class:"bg-gray-800/40 rounded-xl border border-gray-700/50 p-4"},qI={class:"text-xs font-medium text-gray-400 mb-3 flex items-center gap-2"},KI={class:"space-y-2"},YI={class:"flex items-center gap-2"},ZI={key:1},XI={class:"flex items-center gap-2"},QI={key:1},JI={class:"flex flex-col min-h-0"},eR={class:"bg-gray-800/40 rounded-xl border border-gray-700/50 p-4 flex-1 flex flex-col min-h-0"},tR={class:"flex items-center justify-between mb-3"},sR={class:"text-xs font-medium text-white flex items-center gap-2"},nR={key:0,class:"px-2 py-0.5 rounded-full bg-amber-500/20 text-amber-300 text-[10px] font-medium"},oR={key:0,class:"flex-1 overflow-y-auto space-y-2 min-h-0"},rR={class:"flex items-center gap-2.5 min-w-0"},aR={class:"w-8 h-8 rounded-lg bg-gray-600/50 flex items-center justify-center flex-shrink-0"},lR={class:"text-sm"},iR={class:"min-w-0"},dR={class:"text-sm font-medium text-white truncate"},cR={class:"text-[10px] text-gray-500 truncate"},uR=["onClick"],pR={key:1,class:"flex-1 flex flex-col items-center justify-center text-center py-8"},gR={key:1,class:"space-y-4"},fR={class:"flex items-center justify-between mb-3"},mR={class:"text-sm font-medium text-gray-300 flex items-center gap-2"},hR={class:"space-y-2"},bR=["onClick"],vR={key:0,class:"text-lg"},xR={key:1,class:"text-lg"},yR={key:2,class:"text-lg"},_R={key:3,class:"text-sm font-bold text-gray-400"},wR={class:"flex-1 min-w-0"},kR={class:"flex items-center gap-2"},$R={class:"text-sm font-medium text-white truncate"},CR={key:0,class:"px-1.5 py-0.5 rounded bg-purple-500/20 text-purple-300 text-[9px] font-medium"},SR={class:"text-xs text-gray-500 truncate"},PR={class:"bg-gray-800/40 rounded-xl border border-gray-700/50 p-4"},ER={class:"text-xs font-medium text-gray-400 mb-3 flex items-center gap-2"},TR={class:"grid grid-cols-3 lg:grid-cols-6 gap-2"},AR={class:"text-base"},DR={class:"text-[10px] text-white font-medium truncate mt-1"},MR={key:0,class:"flex items-center justify-between p-3 rounded-xl bg-blue-500/10 border border-blue-500/20"},OR={class:"flex items-center gap-2"},LR={class:"text-xs text-blue-300"},jR={key:0,class:"hidden lg:flex flex-1 flex-col overflow-hidden bg-gray-900/30"},IR={class:"flex-shrink-0 p-4 border-b border-gray-800/50"},RR={class:"flex items-center justify-between"},FR={class:"text-xs text-gray-400"},NR={class:"flex-1 overflow-y-auto p-4 space-y-4"},BR={class:"bg-gray-800/40 rounded-xl border border-gray-700/50 p-4"},VR={class:"bg-gray-800/40 rounded-xl border border-gray-700/50 p-4"},UR={class:"bg-gray-800/40 rounded-xl border border-gray-700/50 p-4"},zR={class:"text-xs font-medium text-gray-300 mb-3 flex items-center gap-2"},HR={class:"bg-gray-800/40 rounded-xl border border-gray-700/50 overflow-hidden"},GR={class:"w-full text-xs"},WR={class:"text-gray-500 text-left border-b border-gray-700/50"},qR={class:"text-gray-400"},KR={class:"p-2.5 flex items-center gap-1.5"},YR={class:"text-[10px]"},ZR={class:"border-t border-gray-700/50 font-medium"},XR={class:"bg-gradient-to-br from-amber-500/10 to-orange-500/10 rounded-xl border border-amber-500/20 p-3"},QR={class:"flex items-start gap-2"},JR={class:"text-[10px] text-gray-300 leading-relaxed"},eF={class:"bg-gray-900 rounded-2xl border border-gray-700 w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col"},tF={class:"flex items-center justify-between p-4 border-b border-gray-800"},sF={class:"flex-1 overflow-y-auto p-4 space-y-4"},nF={class:"bg-gray-800/40 rounded-xl border border-gray-700/50 p-4"},oF={class:"bg-gray-800/40 rounded-xl border border-gray-700/50 overflow-hidden"},rF={class:"w-full text-sm"},aF={class:"text-gray-400 bg-gray-800/50"},lF={class:"font-medium text-white"},iF={class:"text-xs text-gray-500"},dF={class:"p-3"},cF={class:"flex items-center gap-2"},uF={class:"text-white"},pF={class:"text-xs text-gray-500"},gF={class:"border-t-2 border-gray-700 bg-gray-800/30"},fF=Pe({__name:"LabPheno",emits:["openPlant","addObservation"],setup(s,{emit:n}){const r=rt(),o=n,i=W([]),d=W(null),g=W(!1),f=W(!1),m=W(null),b=[{key:"vigor",label:"Vigor",icon:"💪",weight:15},{key:"structure",label:"Structure",icon:"🌿",weight:20},{key:"resistance",label:"Resist",icon:"🛡️",weight:15},{key:"production",label:"Yield",icon:"🌸",weight:25},{key:"aroma",label:"Aroma",icon:"👃",weight:15},{key:"clonability",label:"Clone",icon:"🧬",weight:10}],x=U(()=>{const B=new Map;for(const O of r.plants)if(O.final_score&&O.final_score>0&&O.strain_id){const R=B.get(O.strain_id);R?R.plantCount++:B.set(O.strain_id,{id:O.strain_id,name:O.strain_name||"Unknown",plantCount:1})}return Array.from(B.values()).sort((O,R)=>R.plantCount-O.plantCount)}),_=U(()=>{let B=r.plants.filter(O=>O.final_score&&O.final_score>0);return d.value&&(B=B.filter(O=>O.strain_id===d.value)),B.sort((O,R)=>(R.final_score||0)-(O.final_score||0))}),C=U(()=>{const B=["early_veg","mid_veg","late_veg","pre_flower","early_flower","mid_flower","late_flower","flush","harvest","drying","curing"];return r.activePlants.filter(O=>(!O.final_score||O.final_score===0)&&B.includes(O.status))});function k(B){m.value=B,f.value=!0}function p(){f.value=!1,m.value=null}async function T(){p(),P.value.clear(),await r.fetchPlants()}function M(){r.activeTab="plants"}const P=W(new Map),w=U(()=>{const B=new Map;for(const[O,R]of P.value){if(!R)continue;const X={vigor:"vigor_health_total",structure:"structure_total",resistance:"resistance_total",production:"flower_production_total",aroma:"aroma_total",clonability:"clone_stability_total"},oe={};for(const[we,re]of Object.entries(X))R[re]!==void 0&&(oe[we]=Math.max(1,Math.min(10,Math.round(R[re]/5))));B.set(O,oe)}return B});async function $(B){const O=i.value.findIndex(R=>R.id===B.id);if(O>=0)i.value.splice(O,1);else if(i.value.length<4&&(i.value.push(B),!P.value.has(B.id))){const R=await r.fetchPlantScores(B.id);R&&P.value.set(B.id,R)}}function S(B){return Fe[B]}function A(B){return B===0?"bg-yellow-500/20":B===1?"bg-gray-400/20":B===2?"bg-amber-600/20":"bg-gray-700/50"}function y(B){return B?B>=85?"text-spider-green-400":B>=70?"text-yellow-400":B>=55?"text-orange-400":"text-red-400":"text-gray-500"}function h(B){return _.value[0]}function u(B,O){if(!B.final_score||B.final_score===0)return 0;const R=P.value.get(B.id);if(R){const oe={vigor:"vigor_health_total",structure:"structure_total",resistance:"resistance_total",production:"flower_production_total",aroma:"aroma_total",clonability:"clone_stability_total"}[O];if(oe&&R[oe]!==void 0)return Math.round(R[oe]/50*100)}return 0}function v(){if(i.value.length<2)return"Select at least 2 plants to compare.";const B=[...i.value].sort((re,E)=>(E.final_score||0)-(re.final_score||0)),O=B[0],R=B[1],X=O.final_score||0,oe=R.final_score||0,we=X-oe;return X>=85?we>10?`${O.plant_code} is a clear winner (${X.toFixed(1)}). Strong keeper candidate.`:`Both ${O.plant_code} and ${R.plant_code} are excellent. Consider keeping both.`:X>=70?`${O.plant_code} leads with ${X.toFixed(1)}. Good but room for improvement.`:"Scores below keeper threshold. Continue observation or seek better phenos."}async function D(B){try{await r.updatePlant(B,{is_keeper:!0})}catch{}}function z(B){o("addObservation",B)}function G(B){const O=r.plants.find(R=>R.id===B);O&&o("openPlant",O)}return(B,O)=>(a(),l("div",CI,[e("div",{class:V(["flex flex-col transition-all duration-300 overflow-hidden",t(i).length>0?"w-full lg:w-1/2 border-r border-gray-800/50":"w-full"])},[e("div",SI,[e("div",PI,[e("div",null,[e("h2",EI,[I(t(ss),{class:"w-5 h-5 text-amber-400"}),O[7]||(O[7]=ce(" Pheno Hunt ",-1))]),O[8]||(O[8]=e("p",{class:"text-sm text-gray-400"},"Compare phenotypes, find keepers",-1))]),e("div",TI,[t(C).length>0&&t(_).length>0?(a(),l("button",{key:0,onClick:O[0]||(O[0]=R=>k(t(C)[0])),class:"flex items-center gap-2 px-3 py-2 rounded-xl bg-amber-500/20 hover:bg-amber-500/30 text-amber-300 text-sm font-medium transition-colors"},[I(t(ct),{class:"w-4 h-4"}),O[9]||(O[9]=ce(" Score Plant ",-1))])):j("",!0),t(i).length>=2?(a(),l("button",{key:1,onClick:O[1]||(O[1]=R=>g.value=!0),class:"flex items-center gap-2 px-4 py-2 rounded-xl bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-400 hover:to-orange-400 text-white text-sm font-medium shadow-lg shadow-amber-500/20 transition-all"},[I(t(Ot),{class:"w-4 h-4"}),ce(" Compare ("+c(t(i).length)+") ",1)])):j("",!0)])]),t(_).length>0?(a(),l("div",AI,[e("button",{onClick:O[2]||(O[2]=R=>d.value=null),class:V(["px-3 py-1.5 rounded-lg text-xs font-medium whitespace-nowrap transition-all",t(d)?"bg-gray-700/50 text-gray-400 hover:bg-gray-600/50":"bg-amber-500 text-white"])}," All Strains ",2),(a(!0),l(Q,null,le(t(x),R=>(a(),l("button",{key:R.id,onClick:X=>d.value=R.id,class:V(["flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-medium whitespace-nowrap transition-all",t(d)===R.id?"bg-amber-500 text-white":"bg-gray-700/50 text-gray-400 hover:bg-gray-600/50"])},[ce(c(R.name)+" ",1),e("span",MI,c(R.plantCount),1)],10,DI))),128))])):j("",!0)]),e("div",OI,[t(_).length===0?(a(),l("div",LI,[e("div",jI,[e("div",II,[e("div",RI,[e("div",FI,[e("div",NI,[I(t(ss),{class:"w-5 h-5 text-amber-400"})]),O[10]||(O[10]=e("div",null,[e("h3",{class:"text-sm font-semibold text-white"},"What is Pheno Hunt?"),e("p",{class:"text-xs text-gray-400"},"Find your best phenotypes")],-1))]),O[11]||(O[11]=e("p",{class:"text-xs text-gray-300 leading-relaxed"},[ce(" Score plants across "),e("span",{class:"text-amber-400"},"6 categories"),ce(" to compare and rank them. Find your "),e("span",{class:"text-purple-400"},"keepers"),ce(" - the best phenotypes worth keeping as mothers. ")],-1))]),e("div",BI,[O[12]||(O[12]=e("h4",{class:"text-xs font-medium text-gray-400 mb-3"},"Scoring Categories",-1)),e("div",VI,[(a(),l(Q,null,le(b,R=>e("div",{key:R.key,class:"flex items-center gap-2 p-2 rounded-lg bg-gray-700/30"},[e("span",UI,c(R.icon),1),e("div",zI,[e("p",HI,c(R.label),1),e("p",GI,c(R.weight)+"%",1)])])),64))])]),e("div",WI,[e("h4",qI,[I(t(or),{class:"w-3.5 h-3.5"}),O[13]||(O[13]=ce(" Getting Started ",-1))]),e("div",KI,[e("div",YI,[e("div",{class:V(["w-5 h-5 rounded-full flex items-center justify-center text-[10px]",t(r).activePlants.length>0?"bg-spider-green-500/20 text-spider-green-400":"bg-gray-700 text-gray-500"])},[t(r).activePlants.length>0?(a(),pe(t(lt),{key:0,class:"w-3 h-3"})):(a(),l("span",ZI,"1"))],2),e("span",{class:V(["text-xs",t(r).activePlants.length>0?"text-spider-green-400":"text-gray-400"])}," Have active plants ("+c(t(r).activePlants.length)+") ",3)]),e("div",XI,[e("div",{class:V(["w-5 h-5 rounded-full flex items-center justify-center text-[10px]",t(C).length>0?"bg-spider-green-500/20 text-spider-green-400":"bg-gray-700 text-gray-500"])},[t(C).length>0?(a(),pe(t(lt),{key:0,class:"w-3 h-3"})):(a(),l("span",QI,"2"))],2),e("span",{class:V(["text-xs",t(C).length>0?"text-spider-green-400":"text-gray-400"])}," Plants in veg/flower stage ("+c(t(C).length)+") ",3)]),O[14]||(O[14]=e("div",{class:"flex items-center gap-2"},[e("div",{class:"w-5 h-5 rounded-full flex items-center justify-center text-[10px] bg-gray-700 text-gray-500"},"3"),e("span",{class:"text-xs text-gray-400"},"Score your plants")],-1))])])]),e("div",JI,[e("div",eR,[e("div",tR,[e("h4",sR,[I(t(Ne),{class:"w-3.5 h-3.5 text-amber-400"}),O[15]||(O[15]=ce(" Plants Ready to Score ",-1))]),t(C).length>0?(a(),l("span",nR,c(t(C).length),1)):j("",!0)]),t(C).length>0?(a(),l("div",oR,[(a(!0),l(Q,null,le(t(C),R=>(a(),l("div",{key:R.id,class:"flex items-center justify-between p-2.5 rounded-lg bg-gray-700/30 hover:bg-gray-700/50 transition-colors group"},[e("div",rR,[e("div",aR,[e("span",lR,c(S(R.status)?.icon||"🌱"),1)]),e("div",iR,[e("p",dR,c(R.plant_code),1),e("p",cR,c(R.strain_name||"Unknown"),1)])]),e("button",{onClick:X=>k(R),class:"flex items-center gap-1 px-2.5 py-1.5 rounded-lg bg-amber-500/20 hover:bg-amber-500/40 text-amber-300 text-xs font-medium transition-all opacity-80 group-hover:opacity-100"},[I(t(ct),{class:"w-3 h-3"}),O[16]||(O[16]=ce(" Score ",-1))],8,uR)]))),128))])):(a(),l("div",pR,[I(t(Je),{class:"w-10 h-10 text-gray-600 mb-3"}),O[18]||(O[18]=e("p",{class:"text-sm text-gray-400 mb-1"},"No plants ready to score",-1)),O[19]||(O[19]=e("p",{class:"text-xs text-gray-500 mb-4"},"Plants need to be in veg or flower stage",-1)),e("button",{onClick:M,class:"flex items-center gap-1.5 px-3 py-2 rounded-lg bg-spider-green-600 hover:bg-spider-green-500 text-white text-xs font-medium transition-colors"},[I(t(st),{class:"w-3.5 h-3.5"}),O[17]||(O[17]=ce(" Add Plants ",-1))])]))])])])])):(a(),l("div",gR,[e("div",null,[e("div",fR,[e("h3",mR,[I(t(ss),{class:"w-4 h-4 text-yellow-400"}),O[20]||(O[20]=ce(" Rankings ",-1))]),O[21]||(O[21]=e("span",{class:"text-[10px] text-gray-500"},"Click to compare",-1))]),e("div",hR,[(a(!0),l(Q,null,le(t(_),(R,X)=>(a(),l("div",{key:R.id,onClick:oe=>$(R),class:V(["flex items-center gap-3 p-3 rounded-xl cursor-pointer transition-all",t(i).some(oe=>oe.id===R.id)?"bg-amber-500/20 border border-amber-500/50 ring-1 ring-amber-500/30":X<3?"bg-gradient-to-r from-gray-800/60 to-gray-800/40 hover:from-gray-700/60 border border-gray-700/50":"bg-gray-800/40 hover:bg-gray-700/40 border border-transparent"])},[e("div",{class:V(["flex-shrink-0 w-8 h-8 rounded-lg flex items-center justify-center",A(X)])},[X===0?(a(),l("span",vR,"🥇")):X===1?(a(),l("span",xR,"🥈")):X===2?(a(),l("span",yR,"🥉")):(a(),l("span",_R,c(X+1),1))],2),e("div",wR,[e("div",kR,[e("p",$R,c(R.plant_code),1),R.is_keeper?(a(),l("span",CR,"KEEPER")):j("",!0)]),e("p",SR,c(R.strain_name||"Unknown"),1)]),e("div",{class:V(["text-lg font-bold tabular-nums",y(R.final_score)])},c((R.final_score||0).toFixed(1)),3),e("div",{class:V(["w-5 h-5 rounded-full border-2 flex items-center justify-center transition-all flex-shrink-0",t(i).some(oe=>oe.id===R.id)?"border-amber-500 bg-amber-500":"border-gray-600"])},[t(i).some(oe=>oe.id===R.id)?(a(),pe(t(lt),{key:0,class:"w-3 h-3 text-white"})):j("",!0)],2)],10,bR))),128))])]),e("div",PR,[e("h4",ER,[I(t(ct),{class:"w-3.5 h-3.5 text-amber-400"}),O[22]||(O[22]=ce(" Category Leaders ",-1))]),e("div",TR,[(a(),l(Q,null,le(b,R=>e("div",{key:R.key,class:"text-center p-2 rounded-lg bg-gray-700/30"},[e("span",AR,c(R.icon),1),e("p",DR,c(h(R.key)?.plant_code||"-"),1)])),64))])]),t(C).length>0?(a(),l("div",MR,[e("div",OR,[I(t(Ne),{class:"w-4 h-4 text-blue-400"}),e("span",LR,c(t(C).length)+" plant(s) ready to score",1)]),e("button",{onClick:O[3]||(O[3]=R=>k(t(C)[0])),class:"px-3 py-1.5 rounded-lg bg-blue-500/20 hover:bg-blue-500/30 text-blue-300 text-xs font-medium transition-colors"}," Score Next ")])):j("",!0)]))])],2),t(i).length>0?(a(),l("div",jR,[e("div",IR,[e("div",RR,[e("div",null,[O[23]||(O[23]=e("h3",{class:"text-base font-bold text-white"},"Comparison",-1)),e("p",FR,c(t(i).length)+" selected",1)]),e("button",{onClick:O[4]||(O[4]=R=>i.value=[]),class:"px-3 py-1.5 rounded-lg text-xs text-gray-400 hover:text-white hover:bg-gray-800 transition-colors"}," Clear ")])]),e("div",NR,[e("div",BR,[I($I,{plants:t(i),scores:t(w),onMarkKeeper:D,onContinueObservation:z,onViewDetails:G},null,8,["plants","scores"])]),e("div",VR,[I(Yj,{plants:t(i)},null,8,["plants"])]),e("div",UR,[e("h4",zR,[I(t(Ot),{class:"w-3.5 h-3.5 text-amber-400"}),O[24]||(O[24]=ce(" Trait Comparison ",-1))]),I(il,{plants:t(i)},null,8,["plants"])]),e("div",HR,[e("table",GR,[e("thead",null,[e("tr",WR,[O[25]||(O[25]=e("th",{class:"p-3"},"Trait",-1)),(a(!0),l(Q,null,le(t(i).slice(0,4),R=>(a(),l("th",{key:"th-"+R.id,class:"p-3 text-center"},c(R.plant_code),1))),128))])]),e("tbody",qR,[(a(),l(Q,null,le(b,R=>e("tr",{key:R.key,class:"border-t border-gray-700/30"},[e("td",KR,[e("span",null,c(R.icon),1),e("span",YR,c(R.label),1)]),(a(!0),l(Q,null,le(t(i).slice(0,4),X=>(a(),l("td",{key:"td-"+X.id+"-"+R.key,class:"p-2.5 text-center"},[e("span",{class:V(y(u(X,R.key)))},c(u(X,R.key)),3)]))),128))])),64)),e("tr",ZR,[O[26]||(O[26]=e("td",{class:"p-2.5 text-white text-[10px]"},"TOTAL",-1)),(a(!0),l(Q,null,le(t(i).slice(0,4),R=>(a(),l("td",{key:"total-"+R.id,class:"p-2.5 text-center"},[e("span",{class:V(["text-sm",y(R.final_score)])},c((R.final_score||0).toFixed(1)),3)]))),128))])])])]),e("div",XR,[e("div",QR,[I(t(wt),{class:"w-4 h-4 text-yellow-400 flex-shrink-0 mt-0.5"}),e("div",null,[O[27]||(O[27]=e("h4",{class:"text-xs font-medium text-white mb-1"},"Recommendation",-1)),e("p",JR,c(v()),1)])])])])])):j("",!0),I(_i,{show:t(f),plant:t(m),onClose:p,onSaved:T},null,8,["show","plant"]),(a(),pe(Qe,{to:"body"},[t(g)?(a(),l("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80",onClick:O[6]||(O[6]=Ve(R=>g.value=!1,["self"]))},[e("div",eF,[e("div",tF,[O[28]||(O[28]=e("h3",{class:"text-lg font-bold text-white"},"Phenotype Comparison",-1)),e("button",{onClick:O[5]||(O[5]=R=>g.value=!1),class:"p-2 rounded-lg hover:bg-gray-800 text-gray-400 hover:text-white"},[I(t(ze),{class:"w-5 h-5"})])]),e("div",sF,[e("div",nF,[I(il,{plants:t(i)},null,8,["plants"])]),e("div",oF,[e("table",rF,[e("thead",null,[e("tr",aF,[O[29]||(O[29]=e("th",{class:"p-3 text-left"},"Category",-1)),(a(!0),l(Q,null,le(t(i).slice(0,4),R=>(a(),l("th",{key:"modal-th-"+R.id,class:"p-3 text-center"},[e("div",lF,c(R.plant_code),1),e("div",iF,c(R.strain_name),1)]))),128))])]),e("tbody",null,[(a(),l(Q,null,le(b,R=>e("tr",{key:"modal-row-"+R.key,class:"border-t border-gray-700/30"},[e("td",dF,[e("div",cF,[e("span",null,c(R.icon),1),e("span",uF,c(R.label),1),e("span",pF,c(R.weight)+"%",1)])]),(a(!0),l(Q,null,le(t(i).slice(0,4),X=>(a(),l("td",{key:"modal-td-"+X.id+"-"+R.key,class:"p-3 text-center"},[e("span",{class:V(["text-lg font-bold",y(u(X,R.key))])},c(u(X,R.key)),3)]))),128))])),64)),e("tr",gF,[O[30]||(O[30]=e("td",{class:"p-3 font-bold text-white"},"FINAL SCORE",-1)),(a(!0),l(Q,null,le(t(i).slice(0,4),R=>(a(),l("td",{key:"modal-total-"+R.id,class:"p-3 text-center"},[e("span",{class:V(["text-2xl font-bold",y(R.final_score)])},c((R.final_score||0).toFixed(1)),3)]))),128))])])])])])])])):j("",!0)]))]))}}),mF=Object.assign(Pt(fF,[["__scopeId","data-v-b3f2c2c8"]]),{__name:"LabPheno"}),hF={class:"space-y-4"},bF={class:"flex items-center justify-between"},vF={class:"text-sm font-semibold text-white flex items-center gap-2"},xF={class:"flex items-center gap-1 p-0.5 rounded-lg bg-gray-800/60"},yF=["onClick"],_F={class:"h-48 p-3 rounded-xl bg-gray-800/40 border border-gray-700/50"},wF={class:"grid grid-cols-4 gap-2"},kF={class:"text-[9px] text-gray-500 uppercase"},$F=Pe({__name:"LabReportsTrendChart",props:{title:{default:"Trend Chart"},data:{default:()=>[]},type:{default:"line"}},setup(s){Fo.register(Ol,Ll,No,Bo,jl,Nd,Il,Vo,Uo,zo);const n=s,r=[{id:"line",label:"Line"},{id:"bar",label:"Bar"},{id:"doughnut",label:"Donut"}],o=W(n.type),i=["rgba(74, 222, 128, 0.8)","rgba(168, 85, 247, 0.8)","rgba(251, 191, 36, 0.8)","rgba(96, 165, 250, 0.8)","rgba(244, 114, 182, 0.8)","rgba(251, 146, 60, 0.8)"],d=U(()=>({labels:n.data.map(C=>C.label),datasets:[{label:n.title,data:n.data.map(C=>C.value),fill:!0,backgroundColor:"rgba(74, 222, 128, 0.1)",borderColor:"rgba(74, 222, 128, 0.8)",borderWidth:2,tension:.4,pointRadius:4,pointBackgroundColor:"rgba(74, 222, 128, 1)"}]})),g={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:"#1f2937",borderColor:"#374151",borderWidth:1}},scales:{x:{grid:{display:!1},ticks:{color:"#9ca3af",font:{size:10}}},y:{grid:{color:"rgba(55, 65, 81, 0.3)"},ticks:{color:"#9ca3af",font:{size:10}},beginAtZero:!0}}},f=U(()=>({labels:n.data.map(C=>C.label),datasets:[{label:n.title,data:n.data.map(C=>C.value),backgroundColor:n.data.map((C,k)=>C.color||i[k%i.length]),borderRadius:4}]})),m={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:"#1f2937",borderColor:"#374151",borderWidth:1}},scales:{x:{grid:{display:!1},ticks:{color:"#9ca3af",font:{size:10}}},y:{grid:{color:"rgba(55, 65, 81, 0.3)"},ticks:{color:"#9ca3af",font:{size:10}},beginAtZero:!0}}},b=U(()=>({labels:n.data.map(C=>C.label),datasets:[{data:n.data.map(C=>C.value),backgroundColor:n.data.map((C,k)=>C.color||i[k%i.length]),borderWidth:0,hoverOffset:4}]})),x={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"right",labels:{color:"#9ca3af",font:{size:10},boxWidth:12,padding:8}},tooltip:{backgroundColor:"#1f2937",borderColor:"#374151",borderWidth:1}}},_=U(()=>{const C=n.data.map(P=>P.value),k=C.reduce((P,w)=>P+w,0),p=k/C.length||0,T=Math.max(...C,0),M=Math.min(...C,0);return[{label:"Total",value:k.toFixed(0),colorClass:"text-white"},{label:"Average",value:p.toFixed(1),colorClass:"text-blue-400"},{label:"Peak",value:T.toFixed(0),colorClass:"text-spider-green-400"},{label:"Low",value:M.toFixed(0),colorClass:"text-orange-400"}]});return(C,k)=>(a(),l("div",hF,[e("div",bF,[e("h4",vF,[I(t(Ot),{class:"w-4 h-4 text-blue-400"}),ce(" "+c(s.title),1)]),e("div",xF,[(a(),l(Q,null,le(r,p=>e("button",{key:p.id,onClick:T=>o.value=p.id,class:V(["px-2 py-1 rounded-md text-[10px] font-medium transition-all",t(o)===p.id?"bg-blue-500/30 text-blue-300":"text-gray-500 hover:text-gray-300"])},c(p.label),11,yF)),64))])]),e("div",_F,[t(o)==="line"?(a(),pe(t(Dl),{key:0,data:t(d),options:g},null,8,["data"])):t(o)==="bar"?(a(),pe(t(Al),{key:1,data:t(f),options:m},null,8,["data"])):t(o)==="doughnut"?(a(),pe(t(Fd),{key:2,data:t(b),options:x},null,8,["data"])):j("",!0)]),e("div",wF,[(a(!0),l(Q,null,le(t(_),p=>(a(),l("div",{key:p.label,class:"p-2 rounded-lg bg-gray-800/40 text-center"},[e("p",{class:V(["text-lg font-bold",p.colorClass])},c(p.value),3),e("p",kF,c(p.label),1)]))),128))])]))}}),ao=Object.assign($F,{__name:"LabReportsTrendChart"}),CF={class:"space-y-4"},SF={class:"flex items-center justify-between"},PF={class:"text-sm font-semibold text-white flex items-center gap-2"},EF=["disabled"],TF={key:0,class:"space-y-3"},AF={key:1,class:"space-y-3"},DF=["onClick"],MF={class:"flex items-start gap-3"},OF={class:"flex-1 min-w-0"},LF={class:"flex items-center gap-2 mb-1"},jF={class:"text-sm font-semibold text-white"},IF={class:"text-xs text-gray-300"},RF={key:0,class:"mt-3 pt-3 border-t border-gray-700/30 space-y-3"},FF={class:"text-sm text-gray-400"},NF={key:0,class:"flex flex-wrap gap-2"},BF={class:"text-gray-500"},VF={class:"text-white font-medium ml-1"},UF=["onClick"],zF={class:"flex items-center gap-2 mt-2"},HF={class:"text-[10px] text-gray-500"},GF={class:"flex flex-col items-end"},WF={class:"flex items-center gap-1"},qF={class:"flex"},KF={class:"text-[9px] text-gray-500 mt-1"},YF={key:0,class:"p-6 rounded-xl bg-gray-800/40 border border-gray-700/50 text-center"},ZF=Pe({__name:"LabReportsInsights",props:{plants:{default:()=>[]},strains:{default:()=>[]}},emits:["action"],setup(s,{emit:n}){const r=s,o=n,i=W(!1),d=W(null),g=W([]);function f(){const C=[],k=r.plants.filter(w=>w.final_score&&w.final_score>0),p=r.plants.filter(w=>w.is_keeper),T=r.plants.filter(w=>!["harvested","disposed","curing"].includes(w.status));if(p.length>0&&k.length>0){const w=p.length/k.length*100;w>=20&&C.push({title:"Strong Keeper Rate",summary:`${w.toFixed(0)}% of your scored plants are keepers - excellent selection!`,details:`You've identified ${p.length} keeper(s) out of ${k.length} scored plants. This indicates strong genetics in your collection or excellent phenotype selection skills.`,type:"success",icon:St,confidence:5,timestamp:"Just now",data:{Keepers:p.length,Scored:k.length,Rate:`${w.toFixed(0)}%`}})}if(k.length>0){const w=[...k].sort(($,S)=>(S.final_score||0)-($.final_score||0))[0];w.final_score&&w.final_score>=85&&C.push({title:"Exceptional Phenotype Found",summary:`${w.plant_code} scored ${w.final_score.toFixed(1)} - consider this for breeding!`,details:"This plant shows exceptional traits that could be valuable for your breeding program. Consider taking clones and documenting its characteristics thoroughly.",type:"discovery",icon:ct,confidence:4,timestamp:"Based on scores",data:{Plant:w.plant_code,Score:w.final_score.toFixed(1),Strain:w.strain_name||"Unknown"},action:{type:"view_plant",label:"View Plant Details",target:w.id}})}const M=new Set(T.map(w=>w.strain_id).filter(Boolean));T.length>5&&M.size<=2&&C.push({title:"Low Genetic Diversity",summary:"Consider adding more strain variety to your garden",details:`You have ${T.length} active plants but only ${M.size} different strain(s). Diversifying your genetics can help you discover new favorites and reduce risk from strain-specific issues.`,type:"warning",icon:hs,confidence:3,timestamp:"Based on active plants",data:{"Active Plants":T.length,Strains:M.size},action:{type:"add_strain",label:"Add New Strain"}});const P=r.plants.filter(w=>["harvested","curing"].includes(w.status)&&(!w.final_score||w.final_score===0));if(P.length>0&&C.push({title:"Unscored Harvests",summary:`${P.length} plant(s) completed without scores`,details:"Scoring your plants helps track performance over time and identify keepers. Consider scoring these plants while the memory is fresh.",type:"tip",icon:fn,confidence:4,timestamp:"Based on harvest data",data:{Unscored:P.length},action:{type:"score_plants",label:"Score Plants"}}),T.filter(w=>!0),T.length>3&&C.push({title:"Regular Observations Help",summary:"Daily check-ins improve your grow outcomes",details:`With ${T.length} active plants, regular observations can help you catch issues early and optimize your environment. Consider logging observations at least weekly.`,type:"tip",icon:Ot,confidence:3,timestamp:"Pro tip",action:{type:"add_observation",label:"Add Observation"}}),r.strains.length>0){const w=new Map;for(const S of k)if(S.strain_id&&S.final_score){const A=w.get(S.strain_id)||[];A.push(S.final_score),w.set(S.strain_id,A)}let $={name:"",avgScore:0};for(const[S,A]of w){const y=A.reduce((h,u)=>h+u,0)/A.length;if(y>$.avgScore){const h=r.strains.find(u=>u.id===S);$={id:S,name:h?.name||"Unknown",avgScore:y}}}$.avgScore>=75&&C.push({title:"Top Performing Strain",summary:`${$.name} consistently scores well in your garden`,details:`This strain has an average score of ${$.avgScore.toFixed(1)}, making it your best performer. Consider growing more of this strain or using it in breeding projects.`,type:"discovery",icon:hi,confidence:4,timestamp:"Based on averages",data:{Strain:$.name,"Avg Score":$.avgScore.toFixed(1)}})}g.value=C}function m(){i.value=!0,setTimeout(()=>{f(),i.value=!1},1e3)}function b(){i.value=!0,setTimeout(()=>{f(),i.value=!1},500)}function x(C){o("action",C)}function _(C){return C>=4?"bg-spider-green-400":C>=3?"bg-yellow-400":"bg-orange-400"}return ot(()=>{m()}),He(()=>[r.plants,r.strains],()=>{f()},{deep:!0}),(C,k)=>(a(),l("div",CF,[e("div",SF,[e("h4",PF,[I(t(wt),{class:"w-4 h-4 text-yellow-400"}),k[0]||(k[0]=ce(" AI Insights ",-1))]),e("button",{onClick:m,disabled:t(i),class:"flex items-center gap-1 px-2 py-1 rounded-lg bg-gray-800/60 hover:bg-gray-700/60 text-gray-400 hover:text-white text-xs transition-colors"},[I(t(ut),{class:V(["w-3 h-3",t(i)&&"animate-spin"])},null,8,["class"]),k[1]||(k[1]=ce(" Refresh ",-1))],8,EF)]),t(i)?(a(),l("div",TF,[(a(),l(Q,null,le(3,p=>e("div",{key:p,class:"p-4 rounded-xl bg-gray-800/40 border border-gray-700/50 animate-pulse"},[...k[2]||(k[2]=[yt('<div class="flex items-start gap-3"><div class="w-10 h-10 rounded-xl bg-gray-700/50"></div><div class="flex-1 space-y-2"><div class="h-4 bg-gray-700/50 rounded w-1/2"></div><div class="h-3 bg-gray-700/50 rounded w-3/4"></div></div></div>',1)])])),64))])):(a(),l("div",AF,[(a(!0),l(Q,null,le(t(g),(p,T)=>(a(),l("div",{key:T,class:V(["p-4 rounded-xl border transition-all cursor-pointer hover:scale-[1.01]",p.type==="success"?"bg-gradient-to-br from-spider-green-500/20 to-emerald-500/10 border-spider-green-500/30":p.type==="warning"?"bg-gradient-to-br from-yellow-500/20 to-amber-500/10 border-yellow-500/30":p.type==="tip"?"bg-gradient-to-br from-blue-500/20 to-cyan-500/10 border-blue-500/30":"bg-gradient-to-br from-purple-500/20 to-pink-500/10 border-purple-500/30"]),onClick:M=>d.value=t(d)===T?null:T},[e("div",MF,[e("div",{class:V(["w-10 h-10 rounded-xl flex items-center justify-center flex-shrink-0",p.type==="success"?"bg-spider-green-500/30":p.type==="warning"?"bg-yellow-500/30":p.type==="tip"?"bg-blue-500/30":"bg-purple-500/30"])},[(a(),pe(_t(p.icon),{class:V(["w-5 h-5",p.type==="success"?"text-spider-green-400":p.type==="warning"?"text-yellow-400":p.type==="tip"?"text-blue-400":"text-purple-400"])},null,8,["class"]))],2),e("div",OF,[e("div",LF,[e("h5",jF,c(p.title),1),e("span",{class:V(["px-1.5 py-0.5 rounded text-[9px] font-bold uppercase",p.type==="success"?"bg-spider-green-500/40 text-spider-green-200":p.type==="warning"?"bg-yellow-500/40 text-yellow-200":p.type==="tip"?"bg-blue-500/40 text-blue-200":"bg-purple-500/40 text-purple-200"])},c(p.type),3)]),e("p",IF,c(p.summary),1),t(d)===T?(a(),l("div",RF,[e("p",FF,c(p.details),1),p.data?(a(),l("div",NF,[(a(!0),l(Q,null,le(p.data,(M,P)=>(a(),l("span",{key:P,class:"px-2 py-1 rounded-lg bg-gray-800/60 text-xs"},[e("span",BF,c(P)+":",1),e("span",VF,c(M),1)]))),128))])):j("",!0),p.action?(a(),l("button",{key:1,onClick:Ve(M=>x(p.action),["stop"]),class:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-white/10 hover:bg-white/20 text-white text-xs font-medium transition-colors"},[ce(c(p.action.label)+" ",1),I(t(ud),{class:"w-3 h-3"})],8,UF)):j("",!0)])):j("",!0),e("div",zF,[e("span",HF,c(p.timestamp),1),I(t(Gt),{class:V(["w-4 h-4 text-gray-500 transition-transform",t(d)===T&&"rotate-180"])},null,8,["class"])])]),e("div",GF,[e("div",WF,[e("div",qF,[(a(),l(Q,null,le(5,M=>e("div",{key:M,class:V(["w-1.5 h-1.5 rounded-full mr-0.5",M<=p.confidence?_(p.confidence):"bg-gray-700"])},null,2)),64))])]),e("span",KF,c(p.confidence*20)+"% conf",1)])])],10,DF))),128)),t(g).length===0?(a(),l("div",YF,[I(t(wt),{class:"w-12 h-12 text-gray-600 mx-auto mb-3"}),k[3]||(k[3]=e("p",{class:"text-sm text-gray-400"},"No insights available",-1)),k[4]||(k[4]=e("p",{class:"text-xs text-gray-500 mt-1"},"Add more data to generate insights",-1))])):j("",!0)])),t(g).length>0?(a(),l("button",{key:2,onClick:b,class:"w-full px-4 py-3 rounded-xl bg-gray-800/40 hover:bg-gray-700/40 border border-gray-700/50 text-gray-400 hover:text-white text-sm font-medium transition-colors flex items-center justify-center gap-2"},[I(t(Ne),{class:"w-4 h-4"}),k[5]||(k[5]=ce(" Generate More Insights ",-1))])):j("",!0)]))}}),XF=Object.assign(ZF,{__name:"LabReportsInsights"}),QF={class:"h-full flex overflow-hidden"},JF={class:"flex-shrink-0 p-4 space-y-4"},eN={class:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3"},tN={class:"flex-shrink-0 px-4 pb-4"},sN={class:"grid grid-cols-2 lg:grid-cols-4 gap-3"},nN={class:"p-3 rounded-xl bg-gray-800/40 border border-gray-700/50"},oN={class:"text-2xl font-bold text-white"},rN={class:"text-xs text-spider-green-400 mt-1"},aN={class:"p-3 rounded-xl bg-gray-800/40 border border-gray-700/50"},lN={class:"text-2xl font-bold text-white"},iN={class:"text-xs text-blue-400 mt-1"},dN={class:"p-3 rounded-xl bg-gray-800/40 border border-gray-700/50"},cN={class:"text-2xl font-bold text-white"},uN={class:"text-xs text-purple-400 mt-1"},pN={class:"p-3 rounded-xl bg-gray-800/40 border border-gray-700/50"},gN={class:"text-2xl font-bold text-spider-green-400"},fN={class:"text-xs text-gray-500 mt-1"},mN={class:"flex-1 overflow-y-auto p-4 pt-0 space-y-4"},hN={class:"space-y-2"},bN=["onClick"],vN={class:"flex items-start gap-3"},xN={class:"flex-1"},yN={class:"font-medium text-white mb-1"},_N={class:"text-xs text-gray-500"},wN={class:"mt-6 space-y-3"},kN={class:"space-y-2"},$N={class:"w-24 text-xs text-gray-400 truncate"},CN={class:"flex-1 h-2 bg-gray-800 rounded-full overflow-hidden"},SN={class:"w-8 text-right text-xs text-gray-500"},PN={class:"mt-6"},EN={class:"mt-6 space-y-3"},TN={class:"space-y-2"},AN={class:"text-sm"},DN={class:"flex-1 min-w-0"},MN={class:"text-sm text-white truncate"},ON={class:"text-xs text-gray-500"},LN={key:0,class:"hidden lg:flex flex-1 flex-col overflow-hidden bg-gray-900/30"},jN={class:"flex-shrink-0 p-4 border-b border-gray-800/50"},IN={class:"flex items-center justify-between"},RN={class:"text-lg font-bold text-white"},FN={class:"text-sm text-gray-400"},NN={class:"flex-1 overflow-y-auto p-4 space-y-6"},BN={class:"bg-gray-800/40 rounded-2xl border border-gray-700/50 p-4"},VN={class:"bg-gray-800/40 rounded-2xl border border-gray-700/50 p-4"},UN={class:"space-y-3"},zN={class:"flex items-center justify-between text-sm"},HN={class:"flex items-center gap-2"},GN={class:"text-gray-300"},WN={class:"text-white font-medium"},qN={class:"h-2 bg-gray-700/50 rounded-full overflow-hidden"},KN={class:"bg-gray-800/40 rounded-2xl border border-gray-700/50 p-4"},YN={class:"bg-gray-800/40 rounded-2xl border border-gray-700/50 p-4"},ZN={class:"bg-gray-800/40 rounded-2xl border border-gray-700/50 overflow-hidden"},XN={class:"p-4 border-b border-gray-700/50"},QN={class:"text-sm font-medium text-gray-300 flex items-center gap-2"},JN={class:"divide-y divide-gray-700/30"},eB={key:0,class:"text-lg"},tB={key:1,class:"text-lg"},sB={key:2,class:"text-lg"},nB={key:3,class:"text-sm text-gray-400 font-bold"},oB={class:"flex-1 min-w-0"},rB={class:"text-sm font-medium text-white truncate"},aB={class:"flex items-center gap-2 mt-0.5"},lB={class:"text-xs text-gray-500"},iB={key:0,class:"px-1.5 py-0.5 rounded bg-amber-500/20 text-amber-300 text-[10px]"},dB={class:"text-right"},cB={class:"bg-gray-800/40 rounded-2xl border border-gray-700/50 p-4"},uB={class:"space-y-3"},pB={class:"flex-1 min-w-0"},gB={class:"text-sm font-medium text-white truncate"},fB={class:"text-xs text-gray-500"},mB={class:"text-right"},hB={class:"text-lg font-bold text-spider-green-400"},bB={key:0,class:"text-center py-8"},vB={class:"bg-gray-800/40 rounded-2xl border border-gray-700/50 p-4"},xB={class:"grid grid-cols-2 gap-3"},yB={class:"p-3 rounded-xl bg-gray-700/30"},_B={class:"text-lg font-bold text-white"},wB={class:"p-3 rounded-xl bg-gray-700/30"},kB={class:"text-lg font-bold text-white"},$B={class:"p-3 rounded-xl bg-gray-700/30"},CB={class:"text-lg font-bold text-spider-green-400"},SB={class:"p-3 rounded-xl bg-gray-700/30"},PB={class:"text-lg font-bold text-white"},EB={class:"flex gap-3"},TB=Pe({__name:"LabReports",emits:["navigate"],setup(s,{emit:n}){const r=rt(),{requireAuth:o}=Ao(),i=n,d=W(null),g=[{id:"growth",name:"Growth Overview",description:"Plant distribution by stage and growth timeline",icon:Ot,bgClass:"bg-spider-green-500/20",iconClass:"text-spider-green-400"},{id:"strain",name:"Strain Performance",description:"Compare strains by average scores and success rate",icon:Je,bgClass:"bg-purple-500/20",iconClass:"text-purple-400"},{id:"environment",name:"Environmental Correlations",description:"How temperature and humidity affect your plants",icon:Xt,bgClass:"bg-amber-500/20",iconClass:"text-amber-400"},{id:"harvest",name:"Harvest Summary",description:"Yield data and harvest statistics",icon:ds,bgClass:"bg-blue-500/20",iconClass:"text-blue-400"}],f=U(()=>r.activePlants.filter(B=>["early_flower","mid_flower","late_flower","flush"].includes(B.status)).length),m=U(()=>r.plants.filter(B=>B.is_keeper).length),b=U(()=>r.plants.filter(B=>B.final_score&&B.final_score>0)),x=U(()=>b.value.length),_=U(()=>b.value.length===0?0:b.value.reduce((O,R)=>O+(R.final_score||0),0)/b.value.length),C=U(()=>b.value.sort((B,O)=>(O.final_score||0)-(B.final_score||0))[0]),k=U(()=>C.value?.final_score||0),p=U(()=>{const B=[],O=r.activePlants.length||1,R=[{statuses:["germinating","seedling"],label:"Seedling",barClass:"bg-lime-400"},{statuses:["early_veg","mid_veg","late_veg"],label:"Vegetative",barClass:"bg-green-500"},{statuses:["pre_flower","early_flower"],label:"Early Flower",barClass:"bg-purple-400"},{statuses:["mid_flower","late_flower"],label:"Mid/Late Flower",barClass:"bg-pink-500"},{statuses:["flush","harvest"],label:"Harvest",barClass:"bg-amber-500"},{statuses:["drying","curing"],label:"Post-Harvest",barClass:"bg-orange-400"}];for(const X of R){const oe=r.activePlants.filter(we=>X.statuses.includes(we.status)).length;oe>0&&B.push({status:X.statuses[0],label:X.label,count:oe,percentage:oe/O*100,barClass:X.barClass})}return B}),T=U(()=>p.value.map(B=>({label:B.label,value:B.count,color:B.barClass.includes("lime")?"rgba(163, 230, 53, 0.8)":B.barClass.includes("green")?"rgba(74, 222, 128, 0.8)":B.barClass.includes("purple")?"rgba(168, 85, 247, 0.8)":B.barClass.includes("pink")?"rgba(244, 114, 182, 0.8)":B.barClass.includes("amber")?"rgba(251, 191, 36, 0.8)":"rgba(251, 146, 60, 0.8)"}))),M=U(()=>{const B=[],O=new Date;for(let R=7;R>=0;R--){const X=new Date(O);X.setDate(X.getDate()-R*7);const oe=new Date(X);oe.setDate(oe.getDate()-7);const we=r.plants.filter(re=>{if(!re.date_started)return!1;const E=new Date(re.date_started);return E>=oe&&E<X}).length;B.push({label:`W${8-R}`,value:we})}return B}),P=U(()=>{const B=new Map;for(const O of r.plants)if(O.strain_id&&O.final_score&&O.final_score>0){const R=B.get(O.strain_id);R?R.plants.push(O):B.set(O.strain_id,{id:O.strain_id,name:O.strain_name||"Unknown",plants:[O]})}return Array.from(B.values()).map(O=>({id:O.id,name:O.name,plantCount:O.plants.length,keeperCount:O.plants.filter(R=>R.is_keeper).length,avgScore:O.plants.reduce((R,X)=>R+(X.final_score||0),0)/O.plants.length})).sort((O,R)=>R.avgScore-O.avgScore).slice(0,10)}),w=U(()=>P.value.map((B,O)=>({label:B.name.length>12?B.name.substring(0,12)+"...":B.name,value:B.avgScore,color:O===0?"rgba(251, 191, 36, 0.8)":O===1?"rgba(156, 163, 175, 0.8)":O===2?"rgba(251, 146, 60, 0.8)":"rgba(168, 85, 247, 0.8)"}))),$=U(()=>{const B=[];for(const O of r.allObservations.slice(0,5))B.push({id:O.id,title:`Observation on ${O.plant_id?.slice(0,8)||"plant"}`,time:v(O.observed_at),icon:"📝",bgClass:"bg-blue-500/20"});return B.length===0&&B.push({id:"1",title:"No recent activity",time:"Add observations to see activity",icon:"📊",bgClass:"bg-gray-500/20"}),B.slice(0,5)});ot(()=>{r.fetchHarvests()});const S=U(()=>r.harvests),A=U(()=>({total:S.value.length,avgWeight:S.value.length>0?Math.round(S.value.reduce((B,O)=>B+(O.dryWeight||0),0)/S.value.length):0,bestWeight:S.value.length>0?Math.max(...S.value.map(B=>B.dryWeight||0)):0,avgFlowerDays:S.value.length>0?Math.round(S.value.reduce((B,O)=>B+(O.flowerDays||0),0)/S.value.length):0}));function y(B){return Fe[B]}function h(B){return B>=85?"text-spider-green-400":B>=70?"text-yellow-400":B>=55?"text-orange-400":"text-red-400"}function u(B){return B===0?"bg-yellow-500/30":B===1?"bg-gray-400/30":B===2?"bg-amber-600/30":"bg-gray-700/50"}function v(B){if(!B)return"Unknown";const O=new Date(B),X=new Date().getTime()-O.getTime(),oe=Math.floor(X/(1e3*60*60*24));return oe===0?"Today":oe===1?"Yesterday":oe<7?`${oe} days ago`:oe<30?`${Math.floor(oe/7)} weeks ago`:`${Math.floor(oe/30)} months ago`}function D(B){switch(B.type){case"view_plant":B.target&&(r.activeTab="plants",i("navigate",{tab:"plants",plantId:B.target}));break;case"add_strain":i("navigate",{tab:"strains",action:"add"});break;case"score_plants":r.activeTab="pheno",i("navigate",{tab:"pheno"});break;case"add_observation":B.target?i("navigate",{tab:"plants",plantId:B.target,action:"observe"}):i("navigate",{tab:"plants",action:"observe"});break}}async function z(){try{await o()}catch{return}const B={plants:r.plants,strains:r.strains,observations:r.allObservations,exportedAt:new Date().toISOString()},O=new Blob([JSON.stringify(B,null,2)],{type:"application/json"}),R=URL.createObjectURL(O),X=document.createElement("a");X.href=R,X.download=`grow-journal-export-${new Date().toISOString().split("T")[0]}.json`,X.click(),URL.revokeObjectURL(R)}async function G(B){try{await o()}catch{return}if(!d.value)return;let O,R;switch(d.value.id){case"growth":O={stageDistribution:p.value,activePlants:r.activePlants.length,totalPlants:r.plants.length},R="growth-report";break;case"strain":O=P.value,R="strain-performance";break;case"environment":O={optimalVPD:"1.0-1.2 kPa",optimalDayTemp:"78°F",optimalNightTemp:"68°F",optimalVegHumidity:"60%",optimalFlowerHumidity:"50%"},R="environment-report";break;case"harvest":O={harvests:S.value,stats:A.value},R="harvest-summary";break;default:O={},R="report"}if(B==="json"){const X=new Blob([JSON.stringify(O,null,2)],{type:"application/json"}),oe=URL.createObjectURL(X),we=document.createElement("a");we.href=oe,we.download=`${R}-${new Date().toISOString().split("T")[0]}.json`,we.click(),URL.revokeObjectURL(oe)}else{const X=L=>{const F=String(L??"");return F.includes(",")||F.includes('"')||F.includes(`
`)||F.includes("\r")?`"${F.replace(/"/g,'""')}"`:F};let oe="";if(Array.isArray(O)){const L=Object.keys(O[0]||{});oe=L.map(X).join(",")+`
`;for(const F of O)oe+=L.map(be=>X(F[be])).join(",")+`
`}else oe=Object.entries(O).map(([L,F])=>`${X(L)},${X(F)}`).join(`
`);const we=new Blob([oe],{type:"text/csv"}),re=URL.createObjectURL(we),E=document.createElement("a");E.href=re,E.download=`${R}-${new Date().toISOString().split("T")[0]}.csv`,E.click(),URL.revokeObjectURL(re)}}return(B,O)=>(a(),l("div",QF,[e("div",{class:V(["flex flex-col transition-all duration-300 overflow-hidden border-r border-gray-800/50",t(d)?"w-full lg:w-2/5":"w-full"])},[e("div",JF,[e("div",eN,[O[4]||(O[4]=e("div",null,[e("h2",{class:"text-xl font-bold text-white"},"Reports & Analytics"),e("p",{class:"text-sm text-gray-400"},"Track performance, analyze trends")],-1)),e("button",{onClick:z,class:"flex items-center gap-2 px-4 py-3 rounded-xl bg-gradient-to-r from-blue-500 to-blue-400 hover:from-blue-400 hover:to-blue-300 text-white text-sm font-medium shadow-lg shadow-blue-500/20 transition-all"},[I(t(Bs),{class:"w-5 h-5"}),O[3]||(O[3]=ce(" Export Data ",-1))])])]),e("div",tN,[e("div",sN,[e("div",nN,[O[5]||(O[5]=e("p",{class:"text-xs text-gray-500 mb-1"},"Active Plants",-1)),e("p",oN,c(t(r).activePlants.length),1),e("p",rN,c(t(f))+" in flower",1)]),e("div",aN,[O[6]||(O[6]=e("p",{class:"text-xs text-gray-500 mb-1"},"Total Strains",-1)),e("p",lN,c(t(r).strains.length),1),e("p",iN,c(t(m))+" keepers",1)]),e("div",dN,[O[7]||(O[7]=e("p",{class:"text-xs text-gray-500 mb-1"},"Avg Score",-1)),e("p",cN,c(t(_).toFixed(1)),1),e("p",uN,c(t(x))+" scored",1)]),e("div",pN,[O[8]||(O[8]=e("p",{class:"text-xs text-gray-500 mb-1"},"Top Score",-1)),e("p",gN,c(t(k).toFixed(1)),1),e("p",fN,c(t(C)?.plant_code||"-"),1)])])]),e("div",mN,[O[11]||(O[11]=e("h3",{class:"text-sm font-medium text-gray-400"},"Available Reports",-1)),e("div",hN,[(a(),l(Q,null,le(g,R=>e("div",{key:R.id,onClick:X=>d.value=R,class:V(["p-4 rounded-xl cursor-pointer transition-all",t(d)?.id===R.id?"bg-blue-500/20 border border-blue-500/50":"bg-gray-800/40 hover:bg-gray-700/40 border border-gray-700/50"])},[e("div",vN,[e("div",{class:V(["w-10 h-10 rounded-xl flex items-center justify-center",R.bgClass])},[(a(),pe(_t(R.icon),{class:V(["w-5 h-5",R.iconClass])},null,8,["class"]))],2),e("div",xN,[e("h4",yN,c(R.name),1),e("p",_N,c(R.description),1)]),I(t(nt),{class:"w-5 h-5 text-gray-600"})])],10,bN)),64))]),e("div",wN,[O[9]||(O[9]=e("h3",{class:"text-sm font-medium text-gray-400"},"Stage Distribution",-1)),e("div",kN,[(a(!0),l(Q,null,le(t(p),R=>(a(),l("div",{key:R.status,class:"flex items-center gap-3"},[e("div",$N,c(R.label),1),e("div",CN,[e("div",{class:V(["h-full rounded-full",R.barClass]),style:Te({width:`${R.percentage}%`})},null,6)]),e("div",SN,c(R.count),1)]))),128))])]),e("div",PN,[I(XF,{plants:t(r).plants,strains:t(r).strains,onAction:D},null,8,["plants","strains"])]),e("div",EN,[O[10]||(O[10]=e("h3",{class:"text-sm font-medium text-gray-400"},"Recent Activity",-1)),e("div",TN,[(a(!0),l(Q,null,le(t($),R=>(a(),l("div",{key:R.id,class:"flex items-center gap-3 p-3 rounded-xl bg-gray-800/40 border border-gray-700/50"},[e("div",{class:V(["w-8 h-8 rounded-lg flex items-center justify-center",R.bgClass])},[e("span",AN,c(R.icon),1)],2),e("div",DN,[e("p",MN,c(R.title),1),e("p",ON,c(R.time),1)])]))),128))])])])],2),t(d)?(a(),l("div",LN,[e("div",jN,[e("div",IN,[e("div",null,[e("h3",RN,c(t(d).name),1),e("p",FN,c(t(d).description),1)]),e("button",{onClick:O[0]||(O[0]=R=>d.value=null),class:"p-2 rounded-lg hover:bg-gray-800 text-gray-400 hover:text-white transition-colors"},[I(t(ze),{class:"w-5 h-5"})])])]),e("div",NN,[t(d).id==="growth"?(a(),l(Q,{key:0},[e("div",BN,[I(ao,{title:"Plants by Growth Stage",data:t(T),type:"doughnut"},null,8,["data"])]),e("div",VN,[O[12]||(O[12]=e("h4",{class:"text-sm font-medium text-gray-300 mb-4"},"Stage Breakdown",-1)),e("div",UN,[(a(!0),l(Q,null,le(t(p),R=>(a(),l("div",{key:R.status,class:"space-y-2"},[e("div",zN,[e("div",HN,[e("span",null,c(y(R.status)?.icon),1),e("span",GN,c(R.label),1)]),e("span",WN,c(R.count),1)]),e("div",qN,[e("div",{class:V(["h-full rounded-full transition-all",R.barClass]),style:Te({width:`${R.percentage}%`})},null,6)])]))),128))])]),e("div",KN,[I(ao,{title:"Growth Timeline",data:t(M),type:"line"},null,8,["data"])])],64)):j("",!0),t(d).id==="strain"?(a(),l(Q,{key:1},[e("div",YN,[I(ao,{title:"Strain Performance",data:t(w),type:"bar"},null,8,["data"])]),e("div",ZN,[e("div",XN,[e("h4",QN,[I(t(Je),{class:"w-4 h-4 text-purple-400"}),O[13]||(O[13]=ce(" Strain Rankings ",-1))])]),e("div",JN,[(a(!0),l(Q,null,le(t(P),(R,X)=>(a(),l("div",{key:R.id,class:"flex items-center gap-3 p-4 hover:bg-gray-700/20 transition-colors"},[e("div",{class:V(["w-8 h-8 rounded-lg flex items-center justify-center",X<3?u(X):"bg-gray-700/50"])},[X===0?(a(),l("span",eB,"🥇")):X===1?(a(),l("span",tB,"🥈")):X===2?(a(),l("span",sB,"🥉")):(a(),l("span",nB,c(X+1),1))],2),e("div",oB,[e("p",rB,c(R.name),1),e("div",aB,[e("span",lB,c(R.plantCount)+" plants",1),R.keeperCount>0?(a(),l("span",iB,c(R.keeperCount)+" keeper"+c(R.keeperCount>1?"s":""),1)):j("",!0)])]),e("div",dB,[e("p",{class:V(["text-lg font-bold",h(R.avgScore)])},c(R.avgScore.toFixed(1)),3),O[14]||(O[14]=e("p",{class:"text-xs text-gray-500"},"avg score",-1))])]))),128))])])],64)):j("",!0),t(d).id==="environment"?(a(),l(Q,{key:2},[O[15]||(O[15]=yt('<div class="bg-blue-500/10 border border-blue-500/30 rounded-xl p-3 mb-4"><div class="flex items-start gap-2"><span class="text-blue-400 text-lg">ℹ</span><p class="text-xs text-blue-300/80"> These are general cultivation guidelines based on industry best practices. Personalized correlation analysis based on your sensor data is coming soon. </p></div></div><div class="bg-gray-800/40 rounded-2xl border border-gray-700/50 p-4"><h4 class="text-sm font-medium text-gray-300 mb-4">Cultivation Guidelines</h4><div class="space-y-3"><div class="p-3 rounded-xl bg-spider-green-500/10 border border-spider-green-500/20"><div class="flex items-center gap-2 mb-2"><span class="text-spider-green-400">↑</span><p class="text-sm font-medium text-white">VPD Targets by Stage</p></div><p class="text-xs text-gray-400"><span class="text-spider-green-400">Seedling:</span> 0.4-0.8 kPa • <span class="text-spider-green-400">Veg:</span> 0.8-1.2 kPa • <span class="text-spider-green-400">Flower:</span> 1.0-1.5 kPa </p></div><div class="p-3 rounded-xl bg-blue-500/10 border border-blue-500/20"><div class="flex items-center gap-2 mb-2"><span class="text-blue-400">○</span><p class="text-sm font-medium text-white">Temperature Differential</p></div><p class="text-xs text-gray-400"> A <span class="text-blue-400">5-10°F drop</span> at night can enhance resin production and encourage color expression in strains with anthocyanin potential. </p></div><div class="p-3 rounded-xl bg-amber-500/10 border border-amber-500/20"><div class="flex items-center gap-2 mb-2"><span class="text-amber-400">!</span><p class="text-sm font-medium text-white">Humidity Guidelines</p></div><p class="text-xs text-gray-400"> Keep RH <span class="text-amber-400">&lt;55%</span> in late flower to reduce mold risk. Good airflow is critical for dense colas. </p></div></div></div><div class="bg-gray-800/40 rounded-2xl border border-gray-700/50 p-4"><h4 class="text-sm font-medium text-gray-300 mb-4">Recommended Ranges</h4><div class="grid grid-cols-2 gap-3"><div class="p-3 rounded-xl bg-gray-700/30"><p class="text-xs text-gray-500 mb-1">Day Temperature</p><p class="text-lg font-bold text-white">75-85°F</p><p class="text-[10px] text-gray-500">24-29°C</p></div><div class="p-3 rounded-xl bg-gray-700/30"><p class="text-xs text-gray-500 mb-1">Night Temperature</p><p class="text-lg font-bold text-white">65-75°F</p><p class="text-[10px] text-gray-500">18-24°C</p></div><div class="p-3 rounded-xl bg-gray-700/30"><p class="text-xs text-gray-500 mb-1">RH (Vegetative)</p><p class="text-lg font-bold text-white">50-70%</p><p class="text-[10px] text-gray-500">Higher for clones</p></div><div class="p-3 rounded-xl bg-gray-700/30"><p class="text-xs text-gray-500 mb-1">RH (Flower)</p><p class="text-lg font-bold text-white">40-55%</p><p class="text-[10px] text-gray-500">Lower in late flower</p></div></div></div>',3))],64)):j("",!0),t(d).id==="harvest"?(a(),l(Q,{key:3},[e("div",cB,[O[19]||(O[19]=e("h4",{class:"text-sm font-medium text-gray-300 mb-4"},"Recent Harvests",-1)),e("div",uB,[(a(!0),l(Q,null,le(t(S),R=>(a(),l("div",{key:R.id,class:"flex items-center gap-3 p-3 rounded-xl bg-gray-700/30"},[O[17]||(O[17]=e("div",{class:"w-10 h-10 rounded-lg bg-spider-green-500/20 flex items-center justify-center"},[e("span",{class:"text-lg"},"🌿")],-1)),e("div",pB,[e("p",gB,c(R.plantCode),1),e("p",fB,c(R.strain)+" • "+c(R.flowerDays)+" days flower",1)]),e("div",mB,[e("p",hB,c(R.dryWeight)+"g",1),O[16]||(O[16]=e("p",{class:"text-xs text-gray-500"},"dry weight",-1))])]))),128)),t(S).length===0?(a(),l("div",bB,[...O[18]||(O[18]=[e("p",{class:"text-sm text-gray-500"},"No harvests recorded yet",-1)])])):j("",!0)])]),e("div",vB,[O[24]||(O[24]=e("h4",{class:"text-sm font-medium text-gray-300 mb-4"},"Harvest Stats",-1)),e("div",xB,[e("div",yB,[O[20]||(O[20]=e("p",{class:"text-xs text-gray-500 mb-1"},"Total Harvests",-1)),e("p",_B,c(t(A).total),1)]),e("div",wB,[O[21]||(O[21]=e("p",{class:"text-xs text-gray-500 mb-1"},"Avg Dry Weight",-1)),e("p",kB,c(t(A).avgWeight)+"g",1)]),e("div",$B,[O[22]||(O[22]=e("p",{class:"text-xs text-gray-500 mb-1"},"Best Yield",-1)),e("p",CB,c(t(A).bestWeight)+"g",1)]),e("div",SB,[O[23]||(O[23]=e("p",{class:"text-xs text-gray-500 mb-1"},"Avg Flower Time",-1)),e("p",PB,c(t(A).avgFlowerDays)+"d",1)])])])],64)):j("",!0),e("div",EB,[e("button",{onClick:O[1]||(O[1]=R=>G("csv")),class:"flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-xl bg-gray-800 hover:bg-gray-700 text-gray-300 text-sm font-medium transition-colors"},[I(t($a),{class:"w-4 h-4"}),O[25]||(O[25]=ce(" Export CSV ",-1))]),e("button",{onClick:O[2]||(O[2]=R=>G("json")),class:"flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-xl bg-gray-800 hover:bg-gray-700 text-gray-300 text-sm font-medium transition-colors"},[I(t($a),{class:"w-4 h-4"}),O[26]||(O[26]=ce(" Export JSON ",-1))])])])])):j("",!0)]))}}),AB=Object.assign(TB,{__name:"LabReports"}),DB={class:"fixed top-0 right-0 bottom-0 left-0 desktop:left-[var(--sidebar-width,256px)] z-50 bg-gray-900 overflow-hidden flex flex-col"},MB={class:"h-1 bg-gray-800"},OB={class:"flex-shrink-0 border-b border-gray-800"},LB={class:"max-w-4xl mx-auto px-6 py-4"},jB={class:"flex items-center justify-between"},IB={class:"flex items-center gap-4"},RB={class:"w-12 h-12 rounded-2xl bg-gradient-to-br from-spider-green-500 to-emerald-600 flex items-center justify-center shadow-lg shadow-spider-green-500/20"},FB={class:"text-sm text-gray-400"},NB={class:"flex-1 overflow-y-auto"},BB={class:"max-w-4xl mx-auto px-6 py-8"},VB={class:"p-5 rounded-2xl bg-spider-green-500/10 border border-spider-green-500/30 mb-8"},UB={class:"flex gap-4"},zB={class:"w-10 h-10 rounded-xl bg-spider-green-500/20 flex items-center justify-center flex-shrink-0"},HB={class:"space-y-6"},GB={key:0,class:"p-6 rounded-2xl bg-gray-800/50 border border-gray-700/50"},WB={class:"max-h-64 overflow-y-auto space-y-2"},qB=["onClick"],KB={class:"w-12 h-12 rounded-xl bg-purple-500/20 flex items-center justify-center flex-shrink-0"},YB={class:"flex-1 min-w-0"},ZB={class:"text-base font-semibold text-white truncate"},XB={class:"text-sm text-gray-400"},QB={key:0},JB={key:1},eV={key:0,class:"mt-4 p-4 rounded-xl bg-spider-green-500/10 border border-spider-green-500/20"},tV={class:"flex items-center gap-3"},sV={class:"text-sm font-medium text-white"},nV={key:0,class:"text-xs text-gray-400"},oV={key:1,class:"p-8 rounded-2xl bg-gray-800/50 border border-gray-700/50 text-center"},rV={class:"w-16 h-16 mx-auto mb-4 rounded-2xl bg-purple-500/20 flex items-center justify-center"},aV={key:2,class:"p-5 rounded-2xl bg-gray-800/30 border border-gray-700/30"},lV={class:"p-5 rounded-2xl bg-amber-500/10 border border-amber-500/30 mb-8"},iV={class:"flex gap-4"},dV={class:"w-10 h-10 rounded-xl bg-amber-500/20 flex items-center justify-center flex-shrink-0"},cV={class:"space-y-6"},uV={class:"p-6 rounded-2xl bg-gray-800/50 border border-gray-700/50"},pV={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},gV=["onClick"],fV={class:"text-3xl mb-3"},mV={class:"text-base font-semibold text-white mb-1"},hV={class:"text-sm text-gray-400"},bV={class:"p-6 rounded-2xl bg-gray-800/50 border border-gray-700/50"},vV={class:"grid grid-cols-2 sm:grid-cols-4 gap-3"},xV=["onClick"],yV={class:"text-2xl mb-2"},_V={class:"text-xs font-medium text-gray-300"},wV={class:"p-5 rounded-2xl bg-teal-500/10 border border-teal-500/30 mb-8"},kV={class:"flex gap-4"},$V={class:"w-10 h-10 rounded-xl bg-teal-500/20 flex items-center justify-center flex-shrink-0"},CV={class:"space-y-6"},SV={class:"grid grid-cols-1 sm:grid-cols-2 gap-6"},PV={class:"p-6 rounded-2xl bg-gray-800/50 border border-gray-700/50"},EV={class:"flex gap-2"},TV={class:"p-6 rounded-2xl bg-gray-800/50 border border-gray-700/50"},AV={class:"p-6 rounded-2xl bg-gray-800/50 border border-gray-700/50"},DV={key:0,class:"p-6 rounded-2xl bg-gray-800/50 border border-gray-700/50"},MV={class:"grid grid-cols-2 sm:grid-cols-3 gap-3"},OV=["onClick"],LV={class:"p-6 rounded-2xl bg-gray-800/50 border border-gray-700/50"},jV={class:"grid grid-cols-2 sm:grid-cols-4 gap-3"},IV=["onClick"],RV={class:"text-2xl mb-2"},FV={class:"text-xs font-medium text-gray-300"},NV={class:"p-6 rounded-2xl bg-gray-800/50 border border-gray-700/50"},BV={class:"flex flex-wrap gap-2"},VV=["onClick"],UV={class:"p-6 rounded-2xl bg-gradient-to-br from-spider-green-500/10 to-emerald-600/10 border border-spider-green-500/30"},zV={class:"font-semibold text-white mb-4 flex items-center gap-2"},HV={class:"grid grid-cols-2 sm:grid-cols-3 gap-4"},GV={class:"text-white font-medium"},WV={class:"text-white"},qV={class:"text-white"},KV={class:"text-white flex items-center gap-1"},YV={class:"text-white"},ZV={key:0},XV={class:"text-white capitalize"},QV={class:"flex-shrink-0 border-t border-gray-800 bg-gray-900/80 backdrop-blur-sm"},JV={class:"max-w-4xl mx-auto px-6 py-4"},eU={class:"flex items-center justify-between"},tU={key:1},sU={class:"flex items-center gap-3"},nU=["disabled"],oU=["disabled"],lo=3,rU=Pe({__name:"LabPlantWizard",emits:["close","created","openStrainWizard"],setup(s,{emit:n}){const r=n,o=rt(),i=W(1),d=W(!1),g=W(""),f=["Select Strain","Origin & Stage","Plant Details"],m=W({strain_id:"",origin_type:"seed",status:"germinating",plant_code:"",pheno_label:"",date_started:new Date().toISOString().split("T")[0],grow_medium:"",container_size:null,room_id:""}),b=U(()=>o.rooms.filter(y=>y.status==="active"));ot(()=>{w(),o.fetchRooms()});const x=[{value:"seed",label:"From Seed",icon:"🌰",desc:"Germinated from a seed. Full lifecycle tracking from day 1."},{value:"clone",label:"From Clone",icon:"✂️",desc:"Cutting from a mother plant. Skips germination stage."}],_=U(()=>{const y=[{value:"germinating",label:"Germinating",icon:"🌰"},{value:"seedling",label:"Seedling",icon:"🌱"},{value:"early_veg",label:"Early Veg",icon:"🌿"},{value:"mid_veg",label:"Mid Veg",icon:"🪴"},{value:"late_veg",label:"Late Veg",icon:"🌳"},{value:"pre_flower",label:"Pre-Flower",icon:"🌸"},{value:"early_flower",label:"Early Flower",icon:"💮"},{value:"mid_flower",label:"Mid Flower",icon:"🌺"}];return m.value.origin_type==="clone"?y.filter(h=>h.value!=="germinating"):y}),C=[{value:"soil",label:"Soil",icon:"🪴"},{value:"coco",label:"Coco",icon:"🥥"},{value:"hydro",label:"Hydro",icon:"💧"},{value:"dwc",label:"DWC",icon:"🫧"}],k=[1,3,5,7,10,15,20],p=U(()=>{if(!g.value)return o.strains;const y=g.value.toLowerCase();return o.strains.filter(h=>h.name.toLowerCase().includes(y)||h.breeder?.toLowerCase().includes(y))}),T=U(()=>m.value.strain_id?o.strains.find(y=>y.id===m.value.strain_id):null),M=U(()=>(i.value===1,!0)),P=U(()=>m.value.plant_code.trim().length>0);function w(){const y=m.value.strain_id&&o.strains.find(u=>u.id===m.value.strain_id)?.name?.substring(0,2).toUpperCase()||"P",h=Math.floor(Math.random()*900)+100;m.value.plant_code=`${y}${h}`}function $(y){return Fe[y]?.icon||"🌱"}function S(y){return Fe[y]?.label||y}He(()=>m.value.origin_type,y=>{y==="clone"&&m.value.status==="germinating"&&(m.value.status="early_veg")});async function A(){if(P.value){d.value=!0;try{const y=await o.createPlant({strain_id:m.value.strain_id||void 0,origin_type:m.value.origin_type,status:m.value.status,plant_code:m.value.plant_code,pheno_label:m.value.pheno_label||void 0,date_started:m.value.date_started,grow_medium:m.value.grow_medium||void 0,container_size:m.value.container_size||void 0,zone_id:m.value.room_id||void 0});if(m.value.room_id&&y?.id){const h=o.rooms.find(u=>u.id===m.value.room_id);if(h){const u=[...h.active_plant_ids||[]];u.includes(y.id)||(u.push(y.id),await o.updateRoom(h.id,{active_plant_ids:u}).catch(()=>{}))}}r("created",y),r("close")}catch{}finally{d.value=!1}}}return(y,h)=>(a(),l("div",DB,[e("div",MB,[e("div",{class:"h-full bg-gradient-to-r from-spider-green-600 to-spider-green-400 transition-all duration-500",style:Te({width:`${t(i)/lo*100}%`})},null,4)]),e("div",OB,[e("div",LB,[e("div",jB,[e("div",IB,[e("div",RB,[I(t(Ne),{class:"w-6 h-6 text-white"})]),e("div",null,[h[11]||(h[11]=e("h1",{class:"text-xl font-bold text-white"},"Create New Plant",-1)),e("p",FB,"Step "+c(t(i))+" of "+c(lo)+" — "+c(f[t(i)-1]),1)])]),e("button",{onClick:h[0]||(h[0]=u=>r("close")),class:"p-3 rounded-xl hover:bg-gray-800 text-gray-400 hover:text-white transition-colors"},[I(t(ze),{class:"w-6 h-6"})])])])]),e("div",NB,[e("div",BB,[t(i)===1?(a(),l(Q,{key:0},[h[18]||(h[18]=e("div",{class:"mb-8"},[e("h2",{class:"text-3xl font-bold text-white mb-3"},"Select a Strain"),e("p",{class:"text-lg text-gray-400"}," Choose the genetic variety for this plant. This helps track performance and predict growth behavior. ")],-1)),e("div",VB,[e("div",UB,[e("div",zB,[I(t(wt),{class:"w-5 h-5 text-spider-green-400"})]),h[12]||(h[12]=e("div",null,[e("h4",{class:"font-semibold text-spider-green-300 mb-1"},"Why Track Strains?"),e("p",{class:"text-sm text-spider-green-300/80"}," Linking plants to strains allows you to compare performance across grows, learn which genetics thrive in your setup, and build a knowledge base for future cultivation decisions. ")],-1))])]),e("div",HB,[t(o).strains.length>0?(a(),l("div",GB,[h[13]||(h[13]=e("label",{class:"block text-lg font-semibold text-white mb-2"},"Your Strain Collection",-1)),h[14]||(h[14]=e("p",{class:"text-sm text-gray-400 mb-4"}," Select from your saved strains, or skip if you don't know the genetics. ",-1)),ye(e("input",{"onUpdate:modelValue":h[1]||(h[1]=u=>We(g)?g.value=u:null),type:"text",placeholder:"Search your strains...",class:"w-full px-5 py-4 bg-gray-700/50 border border-gray-600 rounded-xl text-white placeholder-gray-500 focus:border-spider-green-500 focus:outline-none focus:ring-2 focus:ring-spider-green-500/20 transition-all mb-4"},null,512),[[$e,t(g)]]),e("div",WB,[(a(!0),l(Q,null,le(t(p),u=>(a(),l("button",{key:u.id,onClick:v=>t(m).strain_id=u.id,class:V(["w-full p-4 rounded-xl border-2 transition-all text-left flex items-center gap-4",t(m).strain_id===u.id?"border-spider-green-500 bg-spider-green-500/20":"border-gray-600 bg-gray-700/30 hover:border-gray-500"])},[e("div",KB,[I(t(Mt),{class:"w-6 h-6 text-purple-400"})]),e("div",YB,[e("p",ZB,c(u.name),1),e("p",XB,[ce(c(u.seed_type||"Unknown type")+" ",1),u.breeder?(a(),l("span",QB," · "+c(u.breeder),1)):j("",!0),u.indica_ratio!==void 0?(a(),l("span",JB," · "+c(u.indica_ratio)+"% Indica",1)):j("",!0)])]),t(m).strain_id===u.id?(a(),pe(t(St),{key:0,class:"w-6 h-6 text-spider-green-400 flex-shrink-0"})):j("",!0)],10,qB))),128))]),t(T)?(a(),l("div",eV,[e("div",tV,[I(t(St),{class:"w-5 h-5 text-spider-green-400"}),e("div",null,[e("p",sV,"Selected: "+c(t(T).name),1),t(T).expected_flowering_days?(a(),l("p",nV," Expected flowering: "+c(t(T).expected_flowering_days)+" days ",1)):j("",!0)])])])):j("",!0)])):(a(),l("div",oV,[e("div",rV,[I(t(Mt),{class:"w-8 h-8 text-purple-400"})]),h[15]||(h[15]=e("h4",{class:"text-lg font-semibold text-white mb-2"},"No Strains Yet",-1)),h[16]||(h[16]=e("p",{class:"text-sm text-gray-400 mb-4"}," You haven't added any strains to your collection. You can add one now, or continue without a strain. ",-1)),e("button",{onClick:h[2]||(h[2]=u=>r("openStrainWizard")),class:"px-5 py-3 rounded-xl bg-purple-600 hover:bg-purple-500 text-white font-medium transition-colors"}," Add a Strain First ")])),t(o).strains.length>0?(a(),l("div",aV,[e("button",{onClick:h[3]||(h[3]=u=>{t(m).strain_id="",i.value++}),class:"w-full p-4 rounded-xl border-2 border-dashed border-gray-600 text-gray-400 hover:text-gray-300 hover:border-gray-500 transition-all text-center"},[...h[17]||(h[17]=[e("div",{class:"text-2xl mb-2"},"❓",-1),e("div",{class:"font-medium"},"Skip — I don't know the strain",-1),e("div",{class:"text-xs text-gray-500 mt-1"},"You can update this later when you identify it",-1)])])])):j("",!0)])],64)):j("",!0),t(i)===2?(a(),l(Q,{key:1},[h[26]||(h[26]=e("div",{class:"mb-8"},[e("h2",{class:"text-3xl font-bold text-white mb-3"},"Origin & Current Stage"),e("p",{class:"text-lg text-gray-400"}," Tell us how this plant started and what stage it's currently in. ")],-1)),e("div",lV,[e("div",iV,[e("div",dV,[I(t(ct),{class:"w-5 h-5 text-amber-400"})]),h[19]||(h[19]=e("div",null,[e("h4",{class:"font-semibold text-amber-300 mb-1"},"Why This Matters"),e("p",{class:"text-sm text-amber-300/80"}," Knowing whether a plant came from seed or clone affects how you calculate its age and expected development timeline. The current stage helps track progression through the growth cycle. ")],-1))])]),e("div",cV,[e("div",uV,[h[20]||(h[20]=e("label",{class:"block text-lg font-semibold text-white mb-2"},"How did you start this plant?",-1)),h[21]||(h[21]=e("p",{class:"text-sm text-gray-400 mb-4"}," Select the origin — this affects which growth stages are available. ",-1)),e("div",pV,[(a(),l(Q,null,le(x,u=>e("button",{key:u.value,onClick:v=>t(m).origin_type=u.value,class:V(["p-5 rounded-xl border-2 transition-all text-left",t(m).origin_type===u.value?"border-spider-green-500 bg-spider-green-500/20":"border-gray-600 bg-gray-700/30 hover:border-gray-500"])},[e("div",fV,c(u.icon),1),e("div",mV,c(u.label),1),e("div",hV,c(u.desc),1)],10,gV)),64))]),h[22]||(h[22]=yt('<div class="mt-4 p-4 rounded-xl bg-gray-700/30 border border-gray-600/50"><h5 class="text-sm font-medium text-gray-300 mb-2">Understanding Origins:</h5><div class="text-xs text-gray-400 space-y-2"><p><span class="text-spider-green-400">🌰 From Seed:</span> Plant started by germinating a seed. Full lifecycle from Day 1.</p><p><span class="text-spider-green-400">✂️ From Clone:</span> Cutting taken from a mother plant. Skips germination phase, typically starts in early veg.</p></div></div>',1))]),e("div",bV,[h[23]||(h[23]=e("label",{class:"block text-lg font-semibold text-white mb-2"},"Current Growth Stage",-1)),h[24]||(h[24]=e("p",{class:"text-sm text-gray-400 mb-4"}," What stage is this plant currently in? This determines how the system tracks progress. ",-1)),e("div",vV,[(a(!0),l(Q,null,le(t(_),u=>(a(),l("button",{key:u.value,onClick:v=>t(m).status=u.value,class:V(["p-4 rounded-xl border-2 transition-all text-center",t(m).status===u.value?"border-spider-green-500 bg-spider-green-500/20":"border-gray-600 bg-gray-700/30 hover:border-gray-500"])},[e("div",yV,c(u.icon),1),e("div",_V,c(u.label),1)],10,xV))),128))])]),h[25]||(h[25]=yt('<div class="p-5 rounded-2xl bg-gray-800/30 border border-gray-700/30"><h4 class="font-medium text-gray-300 mb-4">Growth Stage Guide</h4><div class="grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm"><div class="space-y-3"><div class="flex items-start gap-3"><div class="text-lg">🌰</div><div><div class="text-gray-300 font-medium">Germinating</div><div class="text-xs text-gray-500">Seed is sprouting, root emerging</div></div></div><div class="flex items-start gap-3"><div class="text-lg">🌱</div><div><div class="text-gray-300 font-medium">Seedling</div><div class="text-xs text-gray-500">First leaves, delicate stage (1-2 weeks)</div></div></div><div class="flex items-start gap-3"><div class="text-lg">🌿</div><div><div class="text-gray-300 font-medium">Early Veg</div><div class="text-xs text-gray-500">Rapid leaf growth begins (2-4 weeks)</div></div></div><div class="flex items-start gap-3"><div class="text-lg">🪴</div><div><div class="text-gray-300 font-medium">Mid Veg</div><div class="text-xs text-gray-500">Strong vegetative growth (4-6 weeks)</div></div></div></div><div class="space-y-3"><div class="flex items-start gap-3"><div class="text-lg">🌳</div><div><div class="text-gray-300 font-medium">Late Veg</div><div class="text-xs text-gray-500">Preparing for flower transition</div></div></div><div class="flex items-start gap-3"><div class="text-lg">🌸</div><div><div class="text-gray-300 font-medium">Pre-Flower</div><div class="text-xs text-gray-500">Light cycle changed, stretch begins</div></div></div><div class="flex items-start gap-3"><div class="text-lg">💮</div><div><div class="text-gray-300 font-medium">Early Flower</div><div class="text-xs text-gray-500">Bud sites forming (weeks 1-3)</div></div></div><div class="flex items-start gap-3"><div class="text-lg">🌺</div><div><div class="text-gray-300 font-medium">Mid Flower</div><div class="text-xs text-gray-500">Buds filling out (weeks 4-6)</div></div></div></div></div></div>',1))])],64)):j("",!0),t(i)===3?(a(),l(Q,{key:2},[h[52]||(h[52]=e("div",{class:"mb-8"},[e("h2",{class:"text-3xl font-bold text-white mb-3"},"Plant Details"),e("p",{class:"text-lg text-gray-400"}," Final details to identify and track this plant throughout its lifecycle. ")],-1)),e("div",wV,[e("div",kV,[e("div",$V,[I(t(Ne),{class:"w-5 h-5 text-teal-400"})]),h[27]||(h[27]=e("div",null,[e("h4",{class:"font-semibold text-teal-300 mb-1"},"Tracking Made Easy"),e("p",{class:"text-sm text-teal-300/80"}," The plant code helps you quickly identify each plant. Use a system that works for you — many growers use position codes (A1, B2) or strain abbreviations + numbers (BD001 for Blue Dream). ")],-1))])]),e("div",CV,[e("div",SV,[e("div",PV,[h[28]||(h[28]=e("label",{class:"block text-lg font-semibold text-white mb-2"},[ce(" Plant Code "),e("span",{class:"text-red-400"},"*")],-1)),h[29]||(h[29]=e("p",{class:"text-sm text-gray-400 mb-4"}," A unique identifier for this plant. ",-1)),e("div",EV,[ye(e("input",{"onUpdate:modelValue":h[4]||(h[4]=u=>t(m).plant_code=u),type:"text",placeholder:"e.g., BD001, A1, Plant-1",class:"flex-1 px-4 py-3 bg-gray-700/50 border border-gray-600 rounded-xl text-white placeholder-gray-500 focus:border-spider-green-500 focus:outline-none transition-all"},null,512),[[$e,t(m).plant_code]]),e("button",{onClick:w,class:"px-4 py-3 bg-gray-700 hover:bg-gray-600 border border-gray-600 rounded-xl text-gray-300 transition-colors flex items-center gap-2",title:"Auto-generate code"},[I(t(ut),{class:"w-5 h-5"})])]),h[30]||(h[30]=e("p",{class:"text-xs text-gray-500 mt-2"}," 💡 Click the refresh button to auto-generate a code ",-1))]),e("div",TV,[h[31]||(h[31]=e("label",{class:"block text-lg font-semibold text-white mb-2"},"Start Date",-1)),h[32]||(h[32]=e("p",{class:"text-sm text-gray-400 mb-4"}," When did this plant's journey begin? ",-1)),ye(e("input",{"onUpdate:modelValue":h[5]||(h[5]=u=>t(m).date_started=u),type:"date",class:"w-full px-4 py-3 bg-gray-700/50 border border-gray-600 rounded-xl text-white focus:border-spider-green-500 focus:outline-none transition-all"},null,512),[[$e,t(m).date_started]]),h[33]||(h[33]=e("p",{class:"text-xs text-gray-500 mt-2"}," Day count will be calculated from this date ",-1))])]),e("div",AV,[h[34]||(h[34]=e("label",{class:"block text-lg font-semibold text-white mb-2"},"Phenotype Label (Optional)",-1)),h[35]||(h[35]=e("p",{class:"text-sm text-gray-400 mb-4"}," If growing multiple plants of the same strain, use labels to identify different phenotypes. ",-1)),ye(e("input",{"onUpdate:modelValue":h[6]||(h[6]=u=>t(m).pheno_label=u),type:"text",placeholder:'e.g., "Purple Pheno", "Fast Finisher", "Tall One"',class:"w-full px-4 py-3 bg-gray-700/50 border border-gray-600 rounded-xl text-white placeholder-gray-500 focus:border-spider-green-500 focus:outline-none transition-all"},null,512),[[$e,t(m).pheno_label]]),h[36]||(h[36]=e("div",{class:"mt-3 p-3 rounded-lg bg-gray-700/30 text-xs text-gray-400"},[e("strong",{class:"text-gray-300"},"What's a phenotype?"),ce(" Even plants from the same strain can express different traits (height, color, smell, yield). Labeling helps you track and compare these variations. ")],-1))]),t(b).length>0?(a(),l("div",DV,[h[37]||(h[37]=e("label",{class:"block text-lg font-semibold text-white mb-2"},"Grow Room (Optional)",-1)),h[38]||(h[38]=e("p",{class:"text-sm text-gray-400 mb-4"}," Assign this plant to a grow room for organized tracking. ",-1)),e("div",MV,[e("button",{onClick:h[7]||(h[7]=u=>t(m).room_id=""),class:V(["p-3 rounded-xl border-2 transition-all text-center text-sm",t(m).room_id?"border-gray-600 bg-gray-700/30 text-gray-400 hover:border-gray-500":"border-teal-500 bg-teal-500/10 text-white"])}," None ",2),(a(!0),l(Q,null,le(t(b),u=>(a(),l("button",{key:u.id,onClick:v=>t(m).room_id=u.id,class:V(["p-3 rounded-xl border-2 transition-all text-center text-sm",t(m).room_id===u.id?"border-teal-500 bg-teal-500/10 text-white":"border-gray-600 bg-gray-700/30 text-gray-400 hover:border-gray-500"])},c(u.name),11,OV))),128))])])):j("",!0),e("div",LV,[h[39]||(h[39]=e("label",{class:"block text-lg font-semibold text-white mb-2"},"Growing Medium",-1)),h[40]||(h[40]=e("p",{class:"text-sm text-gray-400 mb-4"}," What are you growing in? This affects watering and feeding schedules. ",-1)),e("div",jV,[(a(),l(Q,null,le(C,u=>e("button",{key:u.value,onClick:v=>t(m).grow_medium=u.value,class:V(["p-4 rounded-xl border-2 transition-all text-center",t(m).grow_medium===u.value?"border-spider-green-500 bg-spider-green-500/20":"border-gray-600 bg-gray-700/30 hover:border-gray-500"])},[e("div",RV,c(u.icon),1),e("div",FV,c(u.label),1)],10,IV)),64))]),h[41]||(h[41]=yt('<div class="mt-4 p-4 rounded-xl bg-gray-700/30 border border-gray-600/50"><h5 class="text-sm font-medium text-gray-300 mb-2">Growing Medium Guide:</h5><div class="text-xs text-gray-400 space-y-1"><p><span class="text-spider-green-400">🪴 Soil:</span> Forgiving, good for beginners, natural buffer</p><p><span class="text-spider-green-400">🥥 Coco:</span> Inert medium, faster growth, needs cal-mag</p><p><span class="text-spider-green-400">💧 Hydro:</span> Roots in water/nutrients, fastest growth</p><p><span class="text-spider-green-400">🫧 DWC:</span> Deep Water Culture, roots suspended in aerated nutrient solution</p></div></div>',1))]),e("div",NV,[h[42]||(h[42]=e("label",{class:"block text-lg font-semibold text-white mb-2"},"Container Size",-1)),h[43]||(h[43]=e("p",{class:"text-sm text-gray-400 mb-4"}," What size pot is this plant in? (in gallons) ",-1)),e("div",BV,[(a(),l(Q,null,le(k,u=>e("button",{key:u,onClick:v=>t(m).container_size=u,class:V(["px-5 py-3 rounded-xl border-2 transition-all font-medium",t(m).container_size===u?"border-spider-green-500 bg-spider-green-500/20 text-white":"border-gray-600 bg-gray-700/30 text-gray-400 hover:border-gray-500"])},c(u)+" gal ",11,VV)),64))]),h[44]||(h[44]=e("p",{class:"text-xs text-gray-500 mt-3"}," 💡 Tip: Larger containers = bigger plants but slower dry-back between waterings ",-1))]),e("div",UV,[e("h4",zV,[I(t(St),{class:"w-5 h-5 text-spider-green-400"}),h[45]||(h[45]=ce(" Plant Summary ",-1))]),e("div",HV,[e("div",null,[h[46]||(h[46]=e("div",{class:"text-xs text-gray-400 mb-1"},"Code",-1)),e("div",GV,c(t(m).plant_code||"Not set"),1)]),e("div",null,[h[47]||(h[47]=e("div",{class:"text-xs text-gray-400 mb-1"},"Strain",-1)),e("div",WV,c(t(T)?.name||"Unknown"),1)]),e("div",null,[h[48]||(h[48]=e("div",{class:"text-xs text-gray-400 mb-1"},"Origin",-1)),e("div",qV,c(t(m).origin_type==="seed"?"From Seed":"From Clone"),1)]),e("div",null,[h[49]||(h[49]=e("div",{class:"text-xs text-gray-400 mb-1"},"Stage",-1)),e("div",KV,[e("span",null,c($(t(m).status)),1),ce(" "+c(S(t(m).status)),1)])]),e("div",null,[h[50]||(h[50]=e("div",{class:"text-xs text-gray-400 mb-1"},"Start Date",-1)),e("div",YV,c(t(m).date_started),1)]),t(m).grow_medium?(a(),l("div",ZV,[h[51]||(h[51]=e("div",{class:"text-xs text-gray-400 mb-1"},"Medium",-1)),e("div",XV,c(t(m).grow_medium),1)])):j("",!0)])])])],64)):j("",!0)])]),e("div",QV,[e("div",JV,[e("div",eU,[t(i)>1?(a(),l("button",{key:0,onClick:h[8]||(h[8]=u=>i.value--),class:"flex items-center gap-2 px-5 py-3 text-gray-400 hover:text-white transition-colors rounded-xl hover:bg-gray-800"},[I(t(os),{class:"w-5 h-5"}),h[53]||(h[53]=ce(" Back ",-1))])):(a(),l("div",tU)),e("div",sU,[e("button",{onClick:h[9]||(h[9]=u=>r("close")),class:"px-5 py-3 text-gray-400 hover:text-white transition-colors rounded-xl hover:bg-gray-800"}," Cancel "),t(i)<lo?(a(),l("button",{key:0,onClick:h[10]||(h[10]=u=>i.value++),disabled:!t(M),class:V(["flex items-center gap-2 px-6 py-3 rounded-xl font-semibold transition-all",t(M)?"bg-spider-green-600 hover:bg-spider-green-500 text-white shadow-lg shadow-spider-green-500/20":"bg-gray-700 text-gray-500 cursor-not-allowed"])},[h[54]||(h[54]=ce(" Continue ",-1)),I(t(nt),{class:"w-5 h-5"})],10,nU)):(a(),l("button",{key:1,onClick:A,disabled:t(d)||!t(P),class:"flex items-center gap-2 px-6 py-3 rounded-xl font-semibold bg-gradient-to-r from-spider-green-600 to-spider-green-500 hover:from-spider-green-500 hover:to-spider-green-400 text-white transition-all shadow-lg shadow-spider-green-500/20 disabled:opacity-50 disabled:cursor-not-allowed"},[t(d)?(a(),pe(t(ut),{key:1,class:"w-5 h-5 animate-spin"})):(a(),pe(t(Ne),{key:0,class:"w-5 h-5"})),ce(" "+c(t(d)?"Creating...":"Create Plant"),1)],8,oU))])])])])]))}}),aU=Object.assign(rU,{__name:"LabPlantWizard"}),lU={class:"fixed top-0 right-0 bottom-0 left-0 desktop:left-[var(--sidebar-width,256px)] z-50 bg-gray-900 overflow-hidden flex flex-col"},iU={class:"h-1 bg-gray-800"},dU={class:"flex-shrink-0 border-b border-gray-800"},cU={class:"max-w-4xl mx-auto px-6 py-4"},uU={class:"flex items-center justify-between"},pU={class:"flex items-center gap-4"},gU={class:"w-12 h-12 rounded-2xl bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center shadow-lg shadow-blue-500/20"},fU={class:"text-sm text-gray-400"},mU={class:"flex-1 overflow-y-auto"},hU={class:"max-w-4xl mx-auto px-6 py-8"},bU={class:"p-5 rounded-2xl bg-blue-500/10 border border-blue-500/30 mb-8"},vU={class:"flex gap-4"},xU={class:"w-10 h-10 rounded-xl bg-blue-500/20 flex items-center justify-center flex-shrink-0"},yU={class:"space-y-6"},_U={key:0,class:"p-6 rounded-2xl bg-blue-500/10 border border-blue-500/30"},wU={class:"flex items-center gap-4"},kU={class:"text-4xl"},$U={class:"flex-1"},CU={class:"text-lg font-semibold text-white"},SU={class:"text-sm text-gray-400"},PU={key:0},EU={key:1},TU={key:1,class:"p-6 rounded-2xl bg-gray-800/50 border border-gray-700/50"},AU={key:0,class:"max-h-64 overflow-y-auto space-y-2"},DU=["onClick"],MU={class:"text-3xl"},OU={class:"flex-1 min-w-0"},LU={class:"text-base font-semibold text-white truncate"},jU={class:"text-sm text-gray-400"},IU={key:0},RU={key:1,class:"text-center py-8"},FU={class:"w-16 h-16 mx-auto mb-4 rounded-2xl bg-gray-700/50 flex items-center justify-center"},NU={class:"p-4 rounded-xl bg-amber-500/10 border border-amber-500/20"},BU={class:"flex items-start gap-3"},VU={class:"p-5 rounded-2xl bg-teal-500/10 border border-teal-500/30 mb-8"},UU={class:"flex gap-4"},zU={class:"w-10 h-10 rounded-xl bg-teal-500/20 flex items-center justify-center flex-shrink-0"},HU={class:"space-y-6"},GU={class:"p-6 rounded-2xl bg-gray-800/50 border border-gray-700/50"},WU={class:"block text-lg font-semibold text-white mb-2"},qU={class:"flex gap-1 sm:gap-2"},KU=["onClick"],YU={class:"p-6 rounded-2xl bg-gray-800/50 border border-gray-700/50"},ZU={class:"block text-lg font-semibold text-white mb-2"},XU={class:"text-2xl ml-2 font-bold text-spider-green-400"},QU={class:"flex gap-1 sm:gap-2"},JU=["onClick"],ez={class:"p-6 rounded-2xl bg-gray-800/50 border border-gray-700/50"},tz={class:"grid grid-cols-3 gap-4"},sz={key:0,class:"mt-4 p-4 rounded-xl bg-red-500/10 border border-red-500/20"},nz={key:0,class:"p-6 rounded-2xl bg-gray-800/50 border border-gray-700/50"},oz={class:"flex items-center gap-3 mb-4"},rz={class:"w-10 h-10 rounded-xl bg-gradient-to-br from-spider-green-500 to-emerald-600 flex items-center justify-center"},az={class:"text-lg"},lz={class:"block text-lg font-semibold text-white"},iz={class:"space-y-2"},dz=["onClick"],cz={class:"flex-1 min-w-0"},uz={key:0,class:"text-xs text-gray-500 mt-0.5"},pz={class:"mt-4 pt-4 border-t border-gray-700/50"},gz={class:"flex items-center justify-between text-sm"},fz={class:"mt-2 h-2 bg-gray-700 rounded-full overflow-hidden"},mz={class:"space-y-4"},hz={class:"p-4 rounded-xl bg-gray-800/50 border border-gray-700/50"},bz={class:"flex items-center gap-4"},vz={class:"flex items-center gap-2"},xz=["onClick"],yz={class:"flex-1"},_z={class:"flex items-center gap-2"},wz={class:"font-medium text-white"},kz={class:"text-sm text-gray-400"},$z={key:0,class:"px-4 pb-4 border-t border-gray-700/50"},Cz={class:"pt-4"},Sz={key:0,class:"grid grid-cols-2 gap-3 mb-3"},Pz={key:1,class:"grid grid-cols-2 gap-3 mb-3"},Ez={key:2,class:"mb-3"},Tz={class:"flex flex-wrap gap-2"},Az=["onClick"],Dz={key:3,class:"mb-3"},Mz={class:"flex items-center justify-center gap-2 p-4 border-2 border-dashed border-gray-600 rounded-xl cursor-pointer hover:border-amber-500/50 hover:bg-amber-500/5 transition-all"},Oz=["disabled"],Lz={class:"text-sm text-gray-400"},jz={key:0,class:"mt-3 grid grid-cols-3 gap-2"},Iz=["src"],Rz=["onClick"],Fz={class:"mt-2 text-xs text-gray-500"},Nz=["onUpdate:modelValue","placeholder"],Bz={class:"p-4 rounded-xl bg-gray-800/50 border border-gray-700/50"},Vz={class:"p-4 rounded-xl bg-gradient-to-br from-blue-500/10 to-blue-600/10 border border-blue-500/30"},Uz={class:"font-medium text-white mb-3 flex items-center gap-2"},zz={class:"grid grid-cols-2 sm:grid-cols-4 gap-3 text-sm"},Hz={class:"text-white font-medium"},Gz={class:"text-spider-green-400 font-medium"},Wz={class:"text-white"},qz={key:0,class:"mt-3 pt-3 border-t border-gray-700/50"},Kz={class:"flex flex-wrap gap-2"},Yz={key:1,class:"mt-3 pt-3 border-t border-gray-700/50"},Zz={class:"text-red-400 text-sm"},Xz={key:2,class:"mt-3 pt-3 border-t border-gray-700/50"},Qz={class:"text-xs text-gray-400 mb-1"},Jz={class:"flex items-center gap-2"},eH={class:"flex-1 h-1.5 bg-gray-700 rounded-full overflow-hidden"},tH={class:"flex-shrink-0 border-t border-gray-800 bg-gray-900/80 backdrop-blur-sm"},sH={class:"max-w-4xl mx-auto px-6 py-4"},nH={class:"flex items-center justify-between"},oH={key:1},rH={class:"flex items-center gap-3"},aH=["disabled"],lH=["disabled"],dl=3,iH=Pe({__name:"LabObservationWizard",props:{plant:{}},emits:["close","created"],setup(s,{emit:n}){const r=s,o=n,i=rt(),d=r.plant?2:1,g=W(d),f=W(!1),m=W(""),b=W(r.plant||null),x=["Select Plant","Health Check","Details & Notes"],_=dl-d+1,C=U(()=>g.value-d+1),k=U(()=>x[g.value-1]),p=U(()=>C.value/_*100),T=U(()=>r.plant),M=[{id:"general",icon:"📋",label:"General Check",description:"Routine daily/weekly observation",color:"blue",placeholder:"General observations about the plant..."},{id:"watering",icon:"💧",label:"Watering",description:"Watered the plant",color:"cyan",placeholder:"Runoff, drainage, soil moisture..."},{id:"feeding",icon:"🧪",label:"Feeding",description:"Applied nutrients or supplements",color:"green",placeholder:"Plant response, dosage adjustments..."},{id:"training",icon:"✂️",label:"Training",description:"LST, HST, topping, defoliation",color:"purple",placeholder:"Technique used, plant response..."},{id:"problem",icon:"⚠️",label:"Problem",description:"Issue or concern to document",color:"red",placeholder:"Describe the issue, affected areas..."},{id:"photo",icon:"📸",label:"Photo Log",description:"Visual documentation",color:"amber",placeholder:"What the photos show..."}],P=["LST","HST","Topping","FIM","Defoliation","Lollipopping","Supercropping","Mainlining","SCROG"],w={germinating:[{id:"taproot_visible",label:"Taproot emerged",tip:"White root tip breaking through shell"},{id:"shell_cracked",label:"Seed shell cracked",tip:"Shell is opening or removed"},{id:"cotyledons_open",label:"Cotyledons opening",tip:"First round leaves spreading"},{id:"proper_moisture",label:"Proper moisture level",tip:"Moist but not waterlogged"},{id:"no_mold",label:"No mold or rot",tip:"Check for fuzzy growth"}],seedling:[{id:"first_true_leaves",label:"First true leaves",tip:"Serrated cannabis leaves appearing"},{id:"healthy_color",label:"Healthy green color",tip:"No yellowing or pale spots"},{id:"stem_sturdy",label:"Stem is sturdy",tip:"Not stretching excessively"},{id:"root_tips_visible",label:"Roots at container edge",tip:"Healthy white root tips"},{id:"no_damping_off",label:"No damping off",tip:"Stem base is firm, not mushy"}],early_veg:[{id:"node_development",label:"New node developing",tip:"Active growth at top"},{id:"healthy_leaf_color",label:"Vibrant leaf color",tip:"Rich green without spots"},{id:"good_internode",label:"Tight internode spacing",tip:"Not stretching too much"},{id:"branching_started",label:"Side branching visible",tip:"Lower nodes producing branches"},{id:"ready_for_training",label:"Ready for training",tip:"Enough nodes (4+) for LST/topping"}],mid_veg:[{id:"vigorous_growth",label:"Vigorous daily growth",tip:"Visible changes day to day"},{id:"multiple_branches",label:"Multiple branches",tip:"Bush structure developing"},{id:"thick_stem",label:"Thick main stem",tip:"Can support future buds"},{id:"no_deficiencies",label:"No deficiency signs",tip:"Check lower leaves especially"},{id:"responding_to_training",label:"Responding to training",tip:"Even canopy forming"}],late_veg:[{id:"canopy_filled",label:"Canopy filling in",tip:"Good coverage across space"},{id:"healthy_lower_growth",label:"Healthy lower growth",tip:"Lower branches receiving light"},{id:"pre_flower_signs",label:"Pre-flower signs",tip:"Checking for sex"},{id:"root_bound_check",label:"Root bound check",tip:"May need transplant"},{id:"flip_ready",label:"Ready for flower flip",tip:"Reached target size"}],pre_flower:[{id:"sex_confirmed",label:"Sex confirmed",tip:"Pistils (female) or pollen sacs (male)"},{id:"stretch_started",label:"Stretch started",tip:"Rapid height increase"},{id:"preflowers_forming",label:"Preflowers forming",tip:"Small calyxes at nodes"},{id:"feeding_adjusted",label:"Bloom nutrients started",tip:"Transitioning feed schedule"},{id:"defoliation_done",label:"Pre-flower defoliation done",tip:"Larf and lower removed"}],early_flower:[{id:"pistils_visible",label:"White pistils abundant",tip:"Hair-like pistils at bud sites"},{id:"bud_sites_forming",label:"Bud sites forming",tip:"Clear cola structure"},{id:"stretch_continuing",label:"Stretch continuing",tip:"Still gaining height"},{id:"trichomes_starting",label:"Trichomes starting",tip:"Frosty appearance beginning"},{id:"no_nanners",label:"No hermie signs",tip:"Check for bananas/balls"}],mid_flower:[{id:"buds_swelling",label:"Buds swelling",tip:"Calyxes stacking and fattening"},{id:"trichomes_milky",label:"Trichomes developing",tip:"Becoming cloudy/milky"},{id:"pistils_changing",label:"Pistils curling/darkening",tip:"Orange/brown color starting"},{id:"aroma_strong",label:"Strong aroma",tip:"Terpene production in full swing"},{id:"no_bud_rot",label:"No bud rot",tip:"Check dense colas carefully"}],late_flower:[{id:"trichomes_checked",label:"Trichomes checked",tip:"Monitor for amber percentage"},{id:"pistils_mostly_dark",label:"Pistils 70%+ dark",tip:"Most pistils curled/brown"},{id:"buds_dense",label:"Buds dense and heavy",tip:"May need support"},{id:"foxtailing_check",label:"No excessive foxtailing",tip:"Watch for light/heat stress"},{id:"harvest_window_check",label:"Harvest window assessment",tip:"Days remaining estimate"}],flush:[{id:"flush_started",label:"Flush started",tip:"Plain water or flushing agent"},{id:"fan_leaves_yellowing",label:"Fan leaves yellowing",tip:"Natural fade beginning"},{id:"trichomes_monitored",label:"Trichomes monitored daily",tip:"Watching for target amber %"},{id:"harvest_date_set",label:"Harvest date planned",tip:"Based on trichome readiness"},{id:"drying_space_ready",label:"Drying space ready",tip:"Dark, 60°F/60% RH prepared"}],harvest:[{id:"plant_chopped",label:"Plant chopped",tip:"Cut at base or branch by branch"},{id:"wet_trim_done",label:"Wet trim completed",tip:"Fan leaves removed"},{id:"wet_weight_recorded",label:"Wet weight recorded",tip:"Document for yield calc"},{id:"hung_to_dry",label:"Hung to dry",tip:"Dark space, good airflow"},{id:"drying_conditions_set",label:"Drying conditions set",tip:"60°F temp, 60% humidity"}],drying:[{id:"rh_in_range",label:"Humidity in range",tip:"55-65% RH target"},{id:"temp_in_range",label:"Temperature in range",tip:"60-70°F target"},{id:"no_mold_forming",label:"No mold forming",tip:"Check daily for gray fuzz"},{id:"stem_snap_test",label:"Stem snap test",tip:"Small stems snap, not bend"},{id:"outer_dry",label:"Outer buds dry to touch",tip:"Not squishy or damp"}],curing:[{id:"jars_burped",label:"Jars burped",tip:"Daily first week, then less"},{id:"humidity_packs",label:"Humidity packs working",tip:"58-62% boveda or similar"},{id:"smell_developing",label:"Smell developing",tip:"Terpenes maturing"},{id:"no_ammonia_smell",label:"No ammonia smell",tip:"Would indicate too wet"},{id:"texture_check",label:"Texture check",tip:"Properly dried, not crispy"}]},$=U(()=>(b.value||T.value)?.status||null),S=U(()=>$.value?w[$.value]||[]:[]),A=U(()=>S.value.filter(de=>h.value.checklist[de.id]).length),y=U(()=>S.value.length===0?0:Math.round(A.value/S.value.length*100)),h=W({plant_id:r.plant?.id||"",health_score:7,vigor_score:7,pest_issues:!1,disease_issues:!1,deficiency_issues:!1,height_cm:null,general_notes:"",checklist:{},activities:{general:{enabled:!1,notes:""},watering:{enabled:!1,notes:"",amount:"",ph:""},feeding:{enabled:!1,notes:"",nutrients:"",ec:""},training:{enabled:!1,notes:"",methods:[]},problem:{enabled:!1,notes:""},photo:{enabled:!1,notes:""}}});r.plant&&(h.value.plant_id=r.plant.id);const u=W([]),v=W(!1),{requireAuth:D}=Ao();async function z(de){const te=de.target;if(!te.files?.length)return;try{await D()}catch{return}const K=h.value.plant_id,ue=b.value||T.value||i.activePlants.find(Y=>Y.id===K);if(!K||!ue)return;const{getAuthHeaders:N}=Ue(),H=N();v.value=!0;try{for(const Y of Array.from(te.files)){const me=new FormData;me.append("file",Y),me.append("plant_id",K),me.append("plant_code",ue.plant_code);const J=await fetch("/api/lab/upload-photo",{method:"POST",headers:H,body:me});if(!J.ok)throw new Error(`Upload failed: ${J.status}`);const Z=await J.json();Z.path&&u.value.push(Z.path)}}catch{}finally{v.value=!1,te.value=""}}function G(de){u.value.splice(de,1)}function B(de){h.value.activities[de].enabled=!h.value.activities[de].enabled}function O(de){const te=h.value.activities.training.methods,K=te.indexOf(de);K>=0?te.splice(K,1):te.push(de)}const R=U(()=>M.filter(de=>h.value.activities[de.id].enabled)),X=U(()=>{if(!m.value)return i.activePlants.slice(0,10);const de=m.value.toLowerCase();return i.activePlants.filter(te=>te.plant_code.toLowerCase().includes(de)||te.strain_name?.toLowerCase().includes(de)||te.pheno_label?.toLowerCase().includes(de)).slice(0,10)}),oe=U(()=>g.value===1?!!h.value.plant_id:!0),we=U(()=>h.value.pest_issues||h.value.disease_issues||h.value.deficiency_issues),re=U(()=>{const de=[];return h.value.pest_issues&&de.push("Pests"),h.value.disease_issues&&de.push("Disease"),h.value.deficiency_issues&&de.push("Deficiency"),de.join(", ")});function E(de){return Fe[de]?.icon||"🌱"}function L(de){return Fe[de]?.label||de}function F(de){return de<=3?"bg-red-600 text-white":de<=5?"bg-yellow-600 text-white":de<=7?"bg-lime-600 text-white":"bg-spider-green-600 text-white"}function be(de){return de<=3?"text-red-400":de<=5?"text-yellow-400":de<=7?"text-lime-400":"text-spider-green-400"}async function ie(){try{await D()}catch{return}f.value=!0;try{const de=b.value||i.activePlants.find(q=>q.id===h.value.plant_id),te=R.value,K=te.length>0?te[0].id:"general";let ue="";if(h.value.activities.watering.enabled){const q=[];h.value.activities.watering.amount&&q.push(`Amount: ${h.value.activities.watering.amount}L`),h.value.activities.watering.ph&&q.push(`pH: ${h.value.activities.watering.ph}`),h.value.activities.watering.notes&&q.push(h.value.activities.watering.notes),ue=q.join(" | ")}let N="";if(h.value.activities.feeding.enabled){const q=[];h.value.activities.feeding.nutrients&&q.push(`Nutrients: ${h.value.activities.feeding.nutrients}`),h.value.activities.feeding.ec&&q.push(`EC: ${h.value.activities.feeding.ec}`),h.value.activities.feeding.notes&&q.push(h.value.activities.feeding.notes),N=q.join(" | ")}let H=null;h.value.activities.training.enabled&&h.value.activities.training.methods.length>0&&(H=h.value.activities.training.methods);const Y=[];h.value.general_notes&&Y.push(h.value.general_notes),h.value.activities.general.enabled&&h.value.activities.general.notes&&Y.push(h.value.activities.general.notes),h.value.activities.training.enabled&&h.value.activities.training.notes&&Y.push(`[Training] ${h.value.activities.training.notes}`),h.value.activities.problem.enabled&&h.value.activities.problem.notes&&Y.push(`[Problem] ${h.value.activities.problem.notes}`),h.value.activities.photo.enabled&&h.value.activities.photo.notes&&Y.push(`[Photo] ${h.value.activities.photo.notes}`);const me={};let J=!1;for(const q of S.value)h.value.checklist[q.id]&&(me[q.id]=!0,J=!0);const Z=await i.createObservation(h.value.plant_id,{health_score:h.value.health_score,vigor_score:h.value.vigor_score,pest_issues:h.value.pest_issues,disease_issues:h.value.disease_issues,deficiency_issues:h.value.deficiency_issues,height_cm:h.value.height_cm||void 0,obs_type:K,watering_notes:ue||void 0,feeding_notes:N||void 0,training_applied:H||void 0,general_notes:Y.join(`

`)||void 0,photos:u.value.length>0?u.value:void 0,stage:de?.status,week_number:de?.current_week,day_number:de?.current_day,checklist_data:J?me:void 0});o("created",Z),o("close")}catch{}finally{f.value=!1}}return(de,te)=>(a(),l("div",lU,[e("div",iU,[e("div",{class:"h-full bg-gradient-to-r from-blue-600 to-blue-400 transition-all duration-500",style:Te({width:`${t(p)}%`})},null,4)]),e("div",dU,[e("div",cU,[e("div",uU,[e("div",pU,[e("div",gU,[I(t(Dn),{class:"w-6 h-6 text-white"})]),e("div",null,[te[14]||(te[14]=e("h1",{class:"text-xl font-bold text-white"},"Log Observation",-1)),e("p",fU,"Step "+c(t(C))+" of "+c(_)+" — "+c(t(k)),1)])]),e("button",{onClick:te[0]||(te[0]=K=>o("close")),class:"p-3 rounded-xl hover:bg-gray-800 text-gray-400 hover:text-white transition-colors"},[I(t(ze),{class:"w-6 h-6"})])])])]),e("div",mU,[e("div",hU,[t(g)===1?(a(),l(Q,{key:0},[te[21]||(te[21]=e("div",{class:"mb-8"},[e("h2",{class:"text-3xl font-bold text-white mb-3"},"Select a Plant"),e("p",{class:"text-lg text-gray-400"}," Choose the plant you're observing. Regular observations help you track progress and catch issues early. ")],-1)),e("div",bU,[e("div",vU,[e("div",xU,[I(t(wt),{class:"w-5 h-5 text-blue-400"})]),te[15]||(te[15]=e("div",null,[e("h4",{class:"font-semibold text-blue-300 mb-1"},"Why Log Observations?"),e("p",{class:"text-sm text-blue-300/80"}," Daily or weekly observations create a timeline of your plant's health, growth, and any issues. This data helps you make better decisions, learn from past grows, and troubleshoot problems faster. ")],-1))])]),e("div",yU,[t(T)?(a(),l("div",_U,[e("div",wU,[e("div",kU,c(E(t(T).status)),1),e("div",$U,[e("p",CU,c(t(T).plant_code),1),e("p",SU,[ce(c(t(T).strain_name||"Unknown strain")+" ",1),t(T).current_day?(a(),l("span",PU," · Day "+c(t(T).current_day),1)):j("",!0),t(T).status?(a(),l("span",EU," · "+c(L(t(T).status)),1)):j("",!0)])]),I(t(St),{class:"w-8 h-8 text-blue-400"})])])):(a(),l("div",TU,[te[18]||(te[18]=e("label",{class:"block text-lg font-semibold text-white mb-2"},"Your Active Plants",-1)),te[19]||(te[19]=e("p",{class:"text-sm text-gray-400 mb-4"}," Select the plant you want to log an observation for. ",-1)),ye(e("input",{"onUpdate:modelValue":te[1]||(te[1]=K=>We(m)?m.value=K:null),type:"text",placeholder:"Search plants...",class:"w-full px-5 py-4 bg-gray-700/50 border border-gray-600 rounded-xl text-white placeholder-gray-500 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 transition-all mb-4"},null,512),[[$e,t(m)]]),t(i).activePlants.length>0?(a(),l("div",AU,[(a(!0),l(Q,null,le(t(X),K=>(a(),l("button",{key:K.id,onClick:ue=>{t(h).plant_id=K.id,b.value=K},class:V(["w-full p-4 rounded-xl border-2 transition-all text-left flex items-center gap-4",t(h).plant_id===K.id?"border-blue-500 bg-blue-500/20":"border-gray-600 bg-gray-700/30 hover:border-gray-500"])},[e("div",MU,c(E(K.status)),1),e("div",OU,[e("p",LU,c(K.plant_code),1),e("p",jU,[ce(c(K.strain_name||"Unknown strain")+" ",1),K.current_day?(a(),l("span",IU," · Day "+c(K.current_day),1)):j("",!0)])]),t(h).plant_id===K.id?(a(),pe(t(St),{key:0,class:"w-6 h-6 text-blue-400 flex-shrink-0"})):j("",!0)],10,DU))),128))])):(a(),l("div",RU,[e("div",FU,[I(t(Ne),{class:"w-8 h-8 text-gray-500"})]),te[16]||(te[16]=e("p",{class:"text-sm text-gray-400 mb-2"},"No active plants found",-1)),te[17]||(te[17]=e("p",{class:"text-xs text-gray-500"},"Create a plant first to log observations",-1))]))])),e("div",NU,[e("div",BU,[I(t(ct),{class:"w-5 h-5 text-amber-400 flex-shrink-0 mt-0.5"}),te[20]||(te[20]=e("div",null,[e("p",{class:"text-sm text-amber-300 font-medium mb-1"},"Pro Tip: Consistent Timing"),e("p",{class:"text-xs text-amber-300/70"}," Try to observe your plants at the same time each day (usually lights-on). This makes it easier to compare day-to-day changes and spot trends. ")],-1))])])])],64)):j("",!0),t(g)===2?(a(),l(Q,{key:1},[te[40]||(te[40]=e("div",{class:"mb-8"},[e("h2",{class:"text-3xl font-bold text-white mb-3"},"Health Assessment"),e("p",{class:"text-lg text-gray-400"}," Rate your plant's overall health and growth vigor. Check for any issues you've noticed. ")],-1)),e("div",VU,[e("div",UU,[e("div",zU,[I(t(At),{class:"w-5 h-5 text-teal-400"})]),te[22]||(te[22]=e("div",null,[e("h4",{class:"font-semibold text-teal-300 mb-1"},"What to Look For"),e("p",{class:"text-sm text-teal-300/80"}," Check leaf color (should be vibrant green), new growth vigor, stem strength, and overall posture. A healthy plant is perky, with leaves reaching toward the light. ")],-1))])]),e("div",HU,[e("div",GU,[e("label",WU,[te[23]||(te[23]=ce(" Overall Health Score ",-1)),e("span",{class:V(["text-2xl ml-2 font-bold",be(t(h).health_score)])},c(t(h).health_score)+"/10 ",3)]),te[24]||(te[24]=e("p",{class:"text-sm text-gray-400 mb-4"}," How healthy does your plant look right now? Consider leaf color, posture, and overall appearance. ",-1)),e("div",qU,[(a(),l(Q,null,le(10,K=>e("button",{key:K,onClick:ue=>t(h).health_score=K,class:V(["flex-1 py-4 rounded-lg transition-all text-sm sm:text-base font-semibold",t(h).health_score>=K?F(K):"bg-gray-700/30 text-gray-500 hover:bg-gray-700/50"])},c(K),11,KU)),64))]),te[25]||(te[25]=yt('<div class="flex justify-between text-xs text-gray-500 mt-2 px-1"><span>Poor / Critical</span><span>Average</span><span>Excellent</span></div><div class="mt-4 p-4 rounded-xl bg-gray-700/30 border border-gray-600/50"><h5 class="text-sm font-medium text-gray-300 mb-2">Health Score Guide:</h5><div class="grid grid-cols-2 gap-2 text-xs text-gray-400"><div><span class="text-red-400">1-3:</span> Severe issues, needs immediate attention</div><div><span class="text-yellow-400">4-5:</span> Some problems, monitor closely</div><div><span class="text-lime-400">6-7:</span> Good health, minor issues if any</div><div><span class="text-spider-green-400">8-10:</span> Excellent, thriving</div></div></div>',2))]),e("div",YU,[e("label",ZU,[te[26]||(te[26]=ce(" Growth Vigor ",-1)),e("span",XU,c(t(h).vigor_score)+"/10",1)]),te[27]||(te[27]=e("p",{class:"text-sm text-gray-400 mb-4"}," How fast and strong is new growth? Consider new leaves, stem thickness, and overall development pace. ",-1)),e("div",QU,[(a(),l(Q,null,le(10,K=>e("button",{key:K,onClick:ue=>t(h).vigor_score=K,class:V(["flex-1 py-4 rounded-lg transition-all text-sm sm:text-base font-semibold",t(h).vigor_score>=K?"bg-spider-green-600 text-white":"bg-gray-700/30 text-gray-500 hover:bg-gray-700/50"])},c(K),11,JU)),64))]),te[28]||(te[28]=e("div",{class:"flex justify-between text-xs text-gray-500 mt-2 px-1"},[e("span",null,"Slow / Stunted"),e("span",null,"Normal"),e("span",null,"Explosive")],-1))]),e("div",ez,[te[36]||(te[36]=e("label",{class:"block text-lg font-semibold text-white mb-2"},"Issues Detected",-1)),te[37]||(te[37]=e("p",{class:"text-sm text-gray-400 mb-4"}," Have you noticed any of these problems? Tap to mark if present. ",-1)),e("div",tz,[e("button",{onClick:te[2]||(te[2]=K=>t(h).pest_issues=!t(h).pest_issues),class:V(["p-5 rounded-xl border-2 transition-all text-center",t(h).pest_issues?"border-red-500 bg-red-500/20":"border-gray-600 bg-gray-700/30 hover:border-gray-500"])},[te[29]||(te[29]=e("div",{class:"text-3xl mb-2"},"🐛",-1)),e("div",{class:V(["text-sm font-medium",t(h).pest_issues?"text-red-300":"text-gray-400"])},"Pests",2),te[30]||(te[30]=e("div",{class:"text-[10px] text-gray-500 mt-1"},"Bugs, mites, etc.",-1))],2),e("button",{onClick:te[3]||(te[3]=K=>t(h).disease_issues=!t(h).disease_issues),class:V(["p-5 rounded-xl border-2 transition-all text-center",t(h).disease_issues?"border-red-500 bg-red-500/20":"border-gray-600 bg-gray-700/30 hover:border-gray-500"])},[te[31]||(te[31]=e("div",{class:"text-3xl mb-2"},"🦠",-1)),e("div",{class:V(["text-sm font-medium",t(h).disease_issues?"text-red-300":"text-gray-400"])},"Disease",2),te[32]||(te[32]=e("div",{class:"text-[10px] text-gray-500 mt-1"},"Mold, rot, spots",-1))],2),e("button",{onClick:te[4]||(te[4]=K=>t(h).deficiency_issues=!t(h).deficiency_issues),class:V(["p-5 rounded-xl border-2 transition-all text-center",t(h).deficiency_issues?"border-yellow-500 bg-yellow-500/20":"border-gray-600 bg-gray-700/30 hover:border-gray-500"])},[te[33]||(te[33]=e("div",{class:"text-3xl mb-2"},"🍂",-1)),e("div",{class:V(["text-sm font-medium",t(h).deficiency_issues?"text-yellow-300":"text-gray-400"])},"Deficiency",2),te[34]||(te[34]=e("div",{class:"text-[10px] text-gray-500 mt-1"},"Yellowing, browning",-1))],2)]),t(h).pest_issues||t(h).disease_issues||t(h).deficiency_issues?(a(),l("div",sz,[...te[35]||(te[35]=[e("h5",{class:"text-sm font-medium text-red-300 mb-2"},"Issue Detected!",-1),e("p",{class:"text-xs text-red-300/70"}," Make sure to document specifics in the notes section. Include which leaves/areas are affected and any patterns you notice. This helps track the issue and measure treatment effectiveness. ",-1)])])):j("",!0)]),t(S).length>0?(a(),l("div",nz,[e("div",oz,[e("div",rz,[e("span",az,c(E(t($))),1)]),e("div",null,[e("label",lz,c(L(t($)))+" Checklist",1),te[38]||(te[38]=e("p",{class:"text-sm text-gray-400"},"Key things to check at this stage",-1))])]),e("div",iz,[(a(!0),l(Q,null,le(t(S),K=>(a(),l("button",{key:K.id,onClick:ue=>t(h).checklist[K.id]=!t(h).checklist[K.id],class:V(["w-full p-4 rounded-xl border-2 transition-all text-left flex items-center gap-4",t(h).checklist[K.id]?"border-spider-green-500 bg-spider-green-500/10":"border-gray-600 bg-gray-700/30 hover:border-gray-500"])},[e("div",{class:V(["w-6 h-6 rounded-lg border-2 flex items-center justify-center transition-all flex-shrink-0",t(h).checklist[K.id]?"border-spider-green-500 bg-spider-green-500":"border-gray-500"])},[t(h).checklist[K.id]?(a(),pe(t(lt),{key:0,class:"w-4 h-4 text-white"})):j("",!0)],2),e("div",cz,[e("div",{class:V(["font-medium",t(h).checklist[K.id]?"text-spider-green-300":"text-white"])},c(K.label),3),K.tip?(a(),l("div",uz,c(K.tip),1)):j("",!0)])],10,dz))),128))]),e("div",pz,[e("div",gz,[te[39]||(te[39]=e("span",{class:"text-gray-400"},"Checklist Progress",-1)),e("span",{class:V(["font-medium",t(y)===100?"text-spider-green-400":"text-gray-300"])},c(t(A))+"/"+c(t(S).length)+" checked ",3)]),e("div",fz,[e("div",{class:"h-full bg-gradient-to-r from-spider-green-600 to-emerald-500 transition-all duration-300",style:Te({width:`${t(y)}%`})},null,4)])])])):j("",!0)])],64)):j("",!0),t(g)===3?(a(),l(Q,{key:2},[te[59]||(te[59]=e("div",{class:"mb-8"},[e("h2",{class:"text-3xl font-bold text-white mb-3"},"Activities & Notes"),e("p",{class:"text-lg text-gray-400"}," What did you do today? Select all activities and add details for each. ")],-1)),e("div",mz,[e("div",hz,[e("div",bz,[te[42]||(te[42]=e("div",{class:"text-2xl"},"📏",-1)),te[43]||(te[43]=e("div",{class:"flex-1"},[e("label",{class:"block text-sm font-medium text-white"},"Plant Height"),e("p",{class:"text-xs text-gray-500"},"Measure from soil to highest point")],-1)),e("div",vz,[ye(e("input",{"onUpdate:modelValue":te[5]||(te[5]=K=>t(h).height_cm=K),type:"number",min:"0",placeholder:"--",class:"w-20 px-3 py-2 bg-gray-700/50 border border-gray-600 rounded-lg text-white text-center placeholder-gray-500 focus:border-blue-500 focus:outline-none"},null,512),[[$e,t(h).height_cm,void 0,{number:!0}]]),te[41]||(te[41]=e("span",{class:"text-gray-400 text-sm"},"cm",-1))])])]),(a(),l(Q,null,le(M,K=>e("div",{key:K.id,class:V(["rounded-xl border-2 transition-all overflow-hidden",t(h).activities[K.id].enabled?`border-${K.color}-500 bg-${K.color}-500/10`:"border-gray-700 bg-gray-800/50 hover:border-gray-600"])},[e("button",{onClick:ue=>B(K.id),class:"w-full p-4 flex items-center gap-4 text-left"},[e("div",{class:V(["w-12 h-12 rounded-xl flex items-center justify-center text-2xl transition-all",t(h).activities[K.id].enabled?`bg-${K.color}-500/30`:"bg-gray-700/50"])},c(K.icon),3),e("div",yz,[e("div",_z,[e("span",wz,c(K.label),1),t(h).activities[K.id].enabled?(a(),l("span",{key:0,class:V(`text-${K.color}-400 text-xs`)},"✓ Added",2)):j("",!0)]),e("p",kz,c(K.description),1)]),e("div",{class:V(["w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all",t(h).activities[K.id].enabled?`border-${K.color}-500 bg-${K.color}-500`:"border-gray-600"])},[t(h).activities[K.id].enabled?(a(),pe(t(lt),{key:0,class:"w-4 h-4 text-white"})):j("",!0)],2)],8,xz),t(h).activities[K.id].enabled?(a(),l("div",$z,[e("div",Cz,[K.id==="watering"?(a(),l("div",Sz,[e("div",null,[te[44]||(te[44]=e("label",{class:"block text-xs text-gray-400 mb-1"},"Amount (L)",-1)),ye(e("input",{"onUpdate:modelValue":te[6]||(te[6]=ue=>t(h).activities.watering.amount=ue),type:"text",placeholder:"e.g., 2.5",class:"w-full px-3 py-2 bg-gray-700/50 border border-gray-600 rounded-lg text-white text-sm placeholder-gray-500 focus:border-blue-500 focus:outline-none"},null,512),[[$e,t(h).activities.watering.amount]])]),e("div",null,[te[45]||(te[45]=e("label",{class:"block text-xs text-gray-400 mb-1"},"pH Level",-1)),ye(e("input",{"onUpdate:modelValue":te[7]||(te[7]=ue=>t(h).activities.watering.ph=ue),type:"text",placeholder:"e.g., 6.2",class:"w-full px-3 py-2 bg-gray-700/50 border border-gray-600 rounded-lg text-white text-sm placeholder-gray-500 focus:border-blue-500 focus:outline-none"},null,512),[[$e,t(h).activities.watering.ph]])])])):j("",!0),K.id==="feeding"?(a(),l("div",Pz,[e("div",null,[te[46]||(te[46]=e("label",{class:"block text-xs text-gray-400 mb-1"},"Nutrients Used",-1)),ye(e("input",{"onUpdate:modelValue":te[8]||(te[8]=ue=>t(h).activities.feeding.nutrients=ue),type:"text",placeholder:"e.g., BioBizz Grow",class:"w-full px-3 py-2 bg-gray-700/50 border border-gray-600 rounded-lg text-white text-sm placeholder-gray-500 focus:border-blue-500 focus:outline-none"},null,512),[[$e,t(h).activities.feeding.nutrients]])]),e("div",null,[te[47]||(te[47]=e("label",{class:"block text-xs text-gray-400 mb-1"},"EC / PPM",-1)),ye(e("input",{"onUpdate:modelValue":te[9]||(te[9]=ue=>t(h).activities.feeding.ec=ue),type:"text",placeholder:"e.g., 1.2 EC",class:"w-full px-3 py-2 bg-gray-700/50 border border-gray-600 rounded-lg text-white text-sm placeholder-gray-500 focus:border-blue-500 focus:outline-none"},null,512),[[$e,t(h).activities.feeding.ec]])])])):j("",!0),K.id==="training"?(a(),l("div",Ez,[te[48]||(te[48]=e("label",{class:"block text-xs text-gray-400 mb-2"},"Training Type",-1)),e("div",Tz,[(a(),l(Q,null,le(P,ue=>e("button",{key:ue,onClick:N=>O(ue),class:V(["px-3 py-1.5 rounded-lg text-xs font-medium transition-all",t(h).activities.training.methods.includes(ue)?"bg-purple-500 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"])},c(ue),11,Az)),64))])])):j("",!0),K.id==="photo"?(a(),l("div",Dz,[te[49]||(te[49]=e("label",{class:"block text-xs text-gray-400 mb-2"},"Upload Photos",-1)),e("label",Mz,[e("input",{type:"file",accept:"image/*",multiple:"",class:"hidden",onChange:z,disabled:t(v)},null,40,Oz),t(v)?(a(),pe(t(ut),{key:1,class:"w-6 h-6 text-amber-400 animate-spin"})):(a(),pe(t(pt),{key:0,class:"w-6 h-6 text-gray-400"})),e("span",Lz,c(t(v)?"Uploading...":"Click to add photos"),1)]),t(u).length>0?(a(),l("div",jz,[(a(!0),l(Q,null,le(t(u),(ue,N)=>(a(),l("div",{key:N,class:"relative aspect-square rounded-lg overflow-hidden bg-gray-700"},[e("img",{src:ue,class:"w-full h-full object-cover"},null,8,Iz),e("button",{onClick:H=>G(N),class:"absolute top-1 right-1 w-6 h-6 bg-red-500 rounded-full flex items-center justify-center hover:bg-red-400 transition-colors"},[I(t(ze),{class:"w-4 h-4 text-white"})],8,Rz)]))),128))])):j("",!0),e("p",Fz," Photos saved to /data/uploads/"+c(t(h).plant_id?.slice(0,8))+"/ ",1)])):j("",!0),e("div",null,[te[50]||(te[50]=e("label",{class:"block text-xs text-gray-400 mb-1"},"Notes",-1)),ye(e("textarea",{"onUpdate:modelValue":ue=>t(h).activities[K.id].notes=ue,rows:"2",placeholder:K.placeholder,class:"w-full px-3 py-2 bg-gray-700/50 border border-gray-600 rounded-lg text-white text-sm placeholder-gray-500 focus:border-blue-500 focus:outline-none resize-none"},null,8,Nz),[[$e,t(h).activities[K.id].notes]])])])])):j("",!0)],2)),64)),e("div",Bz,[te[51]||(te[51]=e("label",{class:"block text-sm font-medium text-white mb-2"},"General Notes",-1)),ye(e("textarea",{"onUpdate:modelValue":te[10]||(te[10]=K=>t(h).general_notes=K),rows:"3",placeholder:"Any other observations or notes about this plant today...",class:"w-full px-3 py-2 bg-gray-700/50 border border-gray-600 rounded-lg text-white text-sm placeholder-gray-500 focus:border-blue-500 focus:outline-none resize-none"},null,512),[[$e,t(h).general_notes]])]),e("div",Vz,[e("h4",Uz,[I(t(St),{class:"w-4 h-4 text-blue-400"}),te[52]||(te[52]=ce(" Summary ",-1))]),e("div",zz,[e("div",null,[te[53]||(te[53]=e("div",{class:"text-xs text-gray-400"},"Plant",-1)),e("div",Hz,c(t(b)?.plant_code||t(T)?.plant_code||"--"),1)]),e("div",null,[te[54]||(te[54]=e("div",{class:"text-xs text-gray-400"},"Health",-1)),e("div",{class:V(["font-medium",be(t(h).health_score)])},c(t(h).health_score)+"/10",3)]),e("div",null,[te[55]||(te[55]=e("div",{class:"text-xs text-gray-400"},"Vigor",-1)),e("div",Gz,c(t(h).vigor_score)+"/10",1)]),e("div",null,[te[56]||(te[56]=e("div",{class:"text-xs text-gray-400"},"Height",-1)),e("div",Wz,c(t(h).height_cm?`${t(h).height_cm} cm`:"--"),1)])]),t(R).length>0?(a(),l("div",qz,[te[57]||(te[57]=e("div",{class:"text-xs text-gray-400 mb-2"},"Activities Logged",-1)),e("div",Kz,[(a(!0),l(Q,null,le(t(R),K=>(a(),l("span",{key:K.id,class:V(`px-2 py-1 rounded-lg text-xs bg-${K.color}-500/20 text-${K.color}-300`)},c(K.icon)+" "+c(K.label),3))),128))])])):j("",!0),t(we)?(a(),l("div",Yz,[te[58]||(te[58]=e("div",{class:"text-xs text-gray-400 mb-1"},"Issues Detected",-1)),e("div",Zz,c(t(re)),1)])):j("",!0),t(S).length>0?(a(),l("div",Xz,[e("div",Qz,c(L(t($)))+" Checklist",1),e("div",Jz,[e("div",eH,[e("div",{class:"h-full bg-spider-green-500 transition-all",style:Te({width:`${t(y)}%`})},null,4)]),e("span",{class:V(["text-sm font-medium",t(y)===100?"text-spider-green-400":"text-gray-400"])},c(t(A))+"/"+c(t(S).length),3)])])):j("",!0)])])],64)):j("",!0)])]),e("div",tH,[e("div",sH,[e("div",nH,[t(g)>t(d)?(a(),l("button",{key:0,onClick:te[11]||(te[11]=K=>g.value--),class:"flex items-center gap-2 px-5 py-3 text-gray-400 hover:text-white transition-colors rounded-xl hover:bg-gray-800"},[I(t(os),{class:"w-5 h-5"}),te[60]||(te[60]=ce(" Back ",-1))])):(a(),l("div",oH)),e("div",rH,[e("button",{onClick:te[12]||(te[12]=K=>o("close")),class:"px-5 py-3 text-gray-400 hover:text-white transition-colors rounded-xl hover:bg-gray-800"}," Cancel "),t(g)<dl?(a(),l("button",{key:0,onClick:te[13]||(te[13]=K=>g.value++),disabled:!t(oe),class:V(["flex items-center gap-2 px-6 py-3 rounded-xl font-semibold transition-all",t(oe)?"bg-blue-600 hover:bg-blue-500 text-white shadow-lg shadow-blue-500/20":"bg-gray-700 text-gray-500 cursor-not-allowed"])},[te[61]||(te[61]=ce(" Continue ",-1)),I(t(nt),{class:"w-5 h-5"})],10,aH)):(a(),l("button",{key:1,onClick:ie,disabled:t(f),class:"flex items-center gap-2 px-6 py-3 rounded-xl font-semibold bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-500 hover:to-blue-400 text-white transition-all shadow-lg shadow-blue-500/20 disabled:opacity-50 disabled:cursor-not-allowed"},[t(f)?(a(),pe(t(ut),{key:1,class:"w-5 h-5 animate-spin"})):(a(),pe(t(lt),{key:0,class:"w-5 h-5"})),ce(" "+c(t(f)?"Saving...":"Save Observation"),1)],8,lH))])])])])]))}}),dH=Object.assign(iH,{__name:"LabObservationWizard"}),cH={class:"flex-1 min-h-0 flex flex-col overflow-hidden bg-gradient-to-br from-gray-900 via-gray-900 to-gray-800"},uH={class:"shrink-0 backdrop-blur-xl bg-gray-800/70 border-b border-gray-700/50"},pH={class:"px-3 lg:px-6 py-3 lg:py-4"},gH={class:"flex items-center justify-between mb-3 lg:mb-4"},fH={class:"flex items-center gap-2 lg:gap-3"},mH={class:"w-8 h-8 lg:w-10 lg:h-10 rounded-xl bg-gradient-to-br from-spider-green-500 to-emerald-600 flex items-center justify-center shadow-lg shadow-spider-green-500/20"},hH={class:"flex items-center gap-2"},bH={key:0,class:"absolute -top-1 -right-1 w-2.5 h-2.5 bg-yellow-400 rounded-full animate-pulse"},vH={key:0,class:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full text-[10px] font-bold flex items-center justify-center text-white"},xH={class:"flex gap-1 lg:gap-2 overflow-x-auto pb-1 scrollbar-hide"},yH=["onClick","data-tutorial"],_H={key:0,class:"ml-1 w-5 h-5 bg-red-500 rounded-full text-[10px] flex items-center justify-center"},wH={class:"flex-1 min-h-0 flex flex-col overflow-hidden"},kH={key:0,class:"flex items-center justify-center h-64"},$H={key:0,class:"flex-1 overflow-y-auto"},CH={key:2,class:"flex-1 overflow-y-auto"},SH={key:3,class:"flex-1 overflow-y-auto"},PH={key:4,class:"flex-1 overflow-y-auto"},EH={key:5,class:"flex-1 overflow-y-auto"},TH={key:6,class:"flex-1 overflow-y-auto"},AH={key:7,class:"flex-1 overflow-y-auto"},DH={key:0,class:"fixed top-0 right-0 bottom-0 left-0 desktop:left-[var(--sidebar-width,256px)] z-50 bg-gray-900 overflow-hidden flex flex-col"},MH={class:"flex-shrink-0 border-b border-gray-800"},OH={class:"max-w-4xl mx-auto px-6 py-4"},LH={class:"flex items-center justify-between"},jH={class:"flex items-center gap-4"},IH={class:"w-12 h-12 rounded-2xl bg-gradient-to-br from-spider-green-500 to-emerald-600 flex items-center justify-center shadow-lg shadow-spider-green-500/20"},RH={class:"flex-1 overflow-y-auto"},FH={class:"max-w-4xl mx-auto px-6 py-8"},NH={key:0,class:"mb-8"},BH={class:"flex items-center gap-4"},VH={class:"flex-1"},UH={key:1},zH={class:"text-xs text-gray-400"},HH={class:"flex-1"},GH={key:1},WH={class:"text-xs text-gray-400"},qH={class:"flex-1"},KH={class:"mb-8"},YH={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},ZH={class:"flex items-start gap-4"},XH={class:"w-14 h-14 rounded-xl bg-gradient-to-br from-purple-500 to-purple-600 flex items-center justify-center shadow-lg shadow-purple-500/20 group-hover:scale-110 transition-transform"},QH={class:"flex-1"},JH={class:"flex items-center gap-2 mb-1"},eG={key:0,class:"px-2 py-0.5 bg-purple-500 text-white text-[10px] font-bold rounded-full"},tG={class:"flex items-center gap-4 text-xs text-gray-500"},sG={class:"flex items-center gap-1"},nG={class:"flex items-start gap-4"},oG={class:"w-14 h-14 rounded-xl bg-gradient-to-br from-spider-green-500 to-emerald-600 flex items-center justify-center shadow-lg shadow-spider-green-500/20 group-hover:scale-110 transition-transform"},rG={class:"flex-1"},aG={class:"flex items-center gap-2 mb-1"},lG={key:0,class:"px-2 py-0.5 bg-spider-green-500 text-white text-[10px] font-bold rounded-full"},iG={class:"flex items-center gap-4 text-xs text-gray-500"},dG={class:"flex items-center gap-1"},cG=["disabled"],uG={class:"flex items-start gap-4"},pG={class:"flex-1"},gG={key:0,class:"text-xs text-amber-400"},fG={key:1,class:"text-xs text-gray-500"},mG=["disabled"],hG={class:"flex items-start gap-4"},bG={class:"flex-1"},vG={key:0,class:"text-xs text-amber-400"},xG={key:1,class:"text-xs text-gray-500"},yG={class:"p-6 rounded-2xl bg-gradient-to-br from-spider-green-500/10 to-emerald-600/10 border border-spider-green-500/30"},_G={class:"flex items-start gap-4"},wG={class:"w-12 h-12 rounded-xl bg-spider-green-500/20 flex items-center justify-center flex-shrink-0"},kG={class:"flex-shrink-0 border-t border-gray-800 bg-gray-900/80 backdrop-blur-sm"},$G={class:"max-w-4xl mx-auto px-6 py-4"},CG={class:"flex items-center justify-between"},SG={class:"text-sm text-gray-400"},PG={key:0,class:"fixed top-16 right-4 z-50 w-80 max-h-96 bg-gray-800/95 backdrop-blur-xl rounded-2xl border border-gray-700/50 shadow-2xl overflow-hidden"},EG={class:"max-h-72 overflow-y-auto"},TG={key:0,class:"p-6 text-center text-gray-500 text-sm"},AG={key:1,class:"divide-y divide-gray-700/30"},DG=["onClick"],MG={class:"flex items-start gap-2"},OG={class:"flex-1 min-w-0"},LG={class:"text-sm text-gray-200 font-medium truncate"},jG={class:"text-xs text-gray-400 truncate"},IG={class:"text-[10px] text-gray-500 mt-1"},RG={class:"w-full max-w-md max-h-[85vh] flex flex-col bg-gray-900 rounded-2xl shadow-2xl border border-gray-800 overflow-hidden"},FG={class:"flex items-center justify-between px-6 py-4 border-b border-gray-800 shrink-0"},NG={class:"flex items-center gap-3"},BG={class:"w-10 h-10 rounded-lg bg-spider-green-500/20 flex items-center justify-center"},VG={class:"px-6 py-4 border-t border-gray-800 bg-gray-900/50"},UG=Pe({__name:"laboratory",setup(s){const n=rt(),r=W(!1),o=W(!1),i=W(!1),d=W(!1),g=W(!1),f=W(!1),m=W(!1),b=U(()=>n.plantIdForObservation&&n.plants.find(h=>h.id===n.plantIdForObservation)||null),x=U(()=>!n.loading&&n.plants.length===0&&n.strains.length===0);He(x,h=>{h&&(d.value=!0)});function _({strainId:h,plantId:u}){d.value=!1,n.fetchDashboard(),n.activeTab="plants"}const C=[{id:"dashboard",label:"Dashboard",icon:pd,activeGradient:"from-spider-green-600 to-spider-green-500",activeShadow:"shadow-spider-green-500/30"},{id:"rooms",label:"Grow Rooms",icon:nr,activeGradient:"from-teal-600 to-cyan-500",activeShadow:"shadow-teal-500/30"},{id:"cameras",label:"Cameras",icon:xi,activeGradient:"from-cyan-600 to-teal-500",activeShadow:"shadow-cyan-500/30"},{id:"plants",label:"Plants",icon:Mn,activeGradient:"from-green-600 to-emerald-500",activeShadow:"shadow-green-500/30"},{id:"strains",label:"Strains",icon:Mt,activeGradient:"from-purple-600 to-purple-500",activeShadow:"shadow-purple-500/30"},{id:"breeding",label:"Breeding",icon:At,activeGradient:"from-pink-600 to-pink-500",activeShadow:"shadow-pink-500/30"},{id:"pheno",label:"Pheno Hunt",icon:Ot,activeGradient:"from-amber-600 to-amber-500",activeShadow:"shadow-amber-500/30"},{id:"reports",label:"Reports",icon:zd,activeGradient:"from-blue-600 to-blue-500",activeShadow:"shadow-blue-500/30"}];function k(h){switch(r.value=!1,h){case"plant":g.value=!0;break;case"strain":f.value=!0;break;case"observation":m.value=!0;break}}function p(h){n.fetchDashboard(),n.activeTab="plants"}function T(h){n.fetchStrains(),g.value}function M(h){n.fetchDashboard(),P()}function P(){m.value=!1,n.clearPlantForObservation()}function w(h){h?n.setCurrentPlantForObservation(h):n.clearPlantForObservation(),m.value=!0}function $(h){n.activeTab="plants",h?.id&&n.fetchPlant(h.id)}function S(h){n.activeTab=h.tab,h.plantId&&n.fetchPlant(h.plantId),h.action==="observe"&&h.plantId?w(h.plantId):h.action==="add"&&h.tab==="strains"&&(f.value=!0)}function A(h){if(n.acknowledgeNotification(h.id),o.value=!1,h.plant_id||h.action_route)if(h.action_route?.startsWith("plants:")){n.activeTab="plants";const u=h.action_route.replace("plants:","");u&&n.fetchPlant(u)}else h.action_route?.startsWith("breeding")?n.activeTab="breeding":h.plant_id&&(n.activeTab="plants",n.fetchPlant(h.plant_id))}function y(h){const u=new Date,v=new Date(h),D=u.getTime()-v.getTime(),z=Math.floor(D/6e4);if(z<1)return"Just now";if(z<60)return`${z}m ago`;const G=Math.floor(z/60);if(G<24)return`${G}h ago`;const B=Math.floor(G/24);return B<7?`${B}d ago`:v.toLocaleDateString()}return ot(()=>{n.fetchDashboard()}),(h,u)=>{const v=Yg,D=Ob,z=H2,G=G7,B=EP,O=YD,R=nj,X=mF,oe=AB,we=Qi,re=aU,E=dH;return a(),l("div",cH,[t(d)?(a(),pe(v,{key:0,onComplete:_,onSkip:u[0]||(u[0]=L=>d.value=!1)})):j("",!0),e("div",uH,[e("div",pH,[e("div",gH,[e("div",fH,[e("div",mH,[I(t(Je),{class:"w-4 h-4 lg:w-5 lg:h-5 text-white"})]),u[20]||(u[20]=e("div",null,[e("h1",{class:"text-base lg:text-xl font-bold text-white"},"Laboratory"),e("p",{class:"text-[10px] lg:text-xs text-gray-400 hidden sm:block"},"Plant Journal & Pheno Hunting")],-1))]),e("div",hH,[e("button",{onClick:u[1]||(u[1]=L=>r.value=!0),class:"group relative flex items-center gap-1.5 px-3 py-2 rounded-xl bg-gradient-to-r from-spider-green-600 to-spider-green-500 hover:from-spider-green-500 hover:to-spider-green-400 text-white text-xs font-medium shadow-lg shadow-spider-green-500/25 transition-all duration-300 hover:shadow-spider-green-500/40 hover:scale-105"},[I(t(st),{class:"w-4 h-4"}),u[21]||(u[21]=e("span",{class:"hidden sm:inline"},"Quick Add",-1)),t(n).activePlants.length===0?(a(),l("span",bH)):j("",!0)]),e("button",{onClick:u[2]||(u[2]=L=>o.value=!t(o)),class:"relative p-2 rounded-xl bg-gray-700/50 hover:bg-gray-600/50 text-gray-300 hover:text-white transition-all"},[I(t(sr),{class:"w-5 h-5"}),t(n).unreadNotifications.length>0?(a(),l("span",vH,c(t(n).unreadNotifications.length>9?"9+":t(n).unreadNotifications.length),1)):j("",!0)]),e("button",{onClick:u[3]||(u[3]=L=>i.value=!0),class:"p-2 rounded-xl bg-gray-700/50 hover:bg-gray-600/50 text-gray-300 hover:text-white transition-all"},[I(t(hn),{class:"w-5 h-5"})])])]),e("div",xH,[(a(),l(Q,null,le(C,L=>e("button",{key:L.id,onClick:F=>t(n).activeTab=L.id,"data-tutorial":L.id+"-tab",class:V(["group flex items-center gap-1.5 lg:gap-2 px-3 lg:px-4 py-2 lg:py-2.5 rounded-xl text-xs lg:text-sm font-medium transition-all duration-300 whitespace-nowrap",t(n).activeTab===L.id?"bg-gradient-to-r shadow-lg text-white "+L.activeGradient+" "+L.activeShadow:"bg-gray-800/50 text-gray-400 hover:bg-gray-700/50 hover:text-gray-200"])},[(a(),pe(_t(L.icon),{class:V(["w-4 h-4 lg:w-5 lg:h-5 transition-transform duration-300",t(n).activeTab===L.id?"scale-110":"group-hover:scale-105"])},null,8,["class"])),e("span",null,c(L.label),1),L.id==="dashboard"&&t(n).urgentAlerts.length>0?(a(),l("span",_H,c(t(n).urgentAlerts.length),1)):j("",!0)],10,yH)),64))])])]),e("div",wH,[t(n).loading?(a(),l("div",kH,[...u[22]||(u[22]=[e("div",{class:"flex flex-col items-center gap-3"},[e("div",{class:"w-10 h-10 border-2 border-spider-green-500 border-t-transparent rounded-full animate-spin"}),e("span",{class:"text-sm text-gray-400"},"Loading laboratory...")],-1)])])):(a(),l(Q,{key:1},[t(n).activeTab==="dashboard"?(a(),l("div",$H,[I(D,{onOpenNewPlant:u[4]||(u[4]=L=>g.value=!0),onOpenNewStrain:u[5]||(u[5]=L=>f.value=!0),onAddObservation:w,onOpenPlant:$})])):t(n).activeTab==="plants"?(a(),pe(z,{key:1,class:"flex-1",onOpenNewPlant:u[6]||(u[6]=L=>g.value=!0),onAddObservation:w})):t(n).activeTab==="rooms"?(a(),l("div",CH,[I(G)])):t(n).activeTab==="cameras"?(a(),l("div",SH,[I(B)])):t(n).activeTab==="strains"?(a(),l("div",PH,[I(O)])):t(n).activeTab==="breeding"?(a(),l("div",EH,[I(R)])):t(n).activeTab==="pheno"?(a(),l("div",TH,[I(X)])):t(n).activeTab==="reports"?(a(),l("div",AH,[I(oe,{onNavigate:S})])):j("",!0)],64))]),(a(),pe(Qe,{to:"body"},[I(Ke,{"enter-active-class":"transition-all duration-300","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-all duration-200","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:je(()=>[t(r)?(a(),l("div",DH,[e("div",MH,[e("div",OH,[e("div",LH,[e("div",jH,[e("div",IH,[I(t(Ne),{class:"w-6 h-6 text-white"})]),u[23]||(u[23]=e("div",null,[e("h1",{class:"text-xl font-bold text-white"},"What would you like to do?"),e("p",{class:"text-sm text-gray-400"},"Choose an action to get started")],-1))]),e("button",{onClick:u[7]||(u[7]=L=>r.value=!1),class:"p-3 rounded-xl hover:bg-gray-800 text-gray-400 hover:text-white transition-colors"},[I(t(ze),{class:"w-6 h-6"})])])])]),e("div",RH,[e("div",FH,[t(n).strains.length===0||t(n).activePlants.length===0?(a(),l("div",NH,[u[26]||(u[26]=e("h2",{class:"text-lg font-semibold text-white mb-4"},"Getting Started",-1)),e("div",BH,[e("div",VH,[e("div",{class:V(["flex items-center gap-3 p-4 rounded-xl border-2 transition-all",t(n).strains.length===0?"border-purple-500 bg-purple-500/20":"border-spider-green-500 bg-spider-green-500/20"])},[e("div",{class:V(["w-10 h-10 rounded-full flex items-center justify-center font-bold text-lg",t(n).strains.length===0?"bg-purple-500 text-white":"bg-spider-green-500 text-white"])},[t(n).strains.length>0?(a(),pe(t(lt),{key:0,class:"w-5 h-5"})):(a(),l("span",UH,"1"))],2),e("div",null,[u[24]||(u[24]=e("p",{class:"font-medium text-white"},"Add a Strain",-1)),e("p",zH,c(t(n).strains.length>0?`${t(n).strains.length} strain(s) in catalog`:"Your genetics catalog"),1)])],2)]),I(t(nt),{class:"w-6 h-6 text-gray-600 flex-shrink-0"}),e("div",HH,[e("div",{class:V(["flex items-center gap-3 p-4 rounded-xl border-2 transition-all",t(n).strains.length>0&&t(n).activePlants.length===0||t(n).activePlants.length>0?"border-spider-green-500 bg-spider-green-500/20":"border-gray-700 bg-gray-800/50"])},[e("div",{class:V(["w-10 h-10 rounded-full flex items-center justify-center font-bold text-lg",t(n).activePlants.length>0||t(n).strains.length>0?"bg-spider-green-500 text-white":"bg-gray-700 text-gray-400"])},[t(n).activePlants.length>0?(a(),pe(t(lt),{key:0,class:"w-5 h-5"})):(a(),l("span",GH,"2"))],2),e("div",null,[e("p",{class:V(["font-medium",t(n).strains.length>0?"text-white":"text-gray-500"])},"Create a Plant",2),e("p",WH,c(t(n).activePlants.length>0?`${t(n).activePlants.length} active plant(s)`:"Start tracking growth"),1)])],2)]),I(t(nt),{class:"w-6 h-6 text-gray-600 flex-shrink-0"}),e("div",qH,[e("div",{class:V(["flex items-center gap-3 p-4 rounded-xl border-2 transition-all",t(n).activePlants.length>0?"border-blue-500 bg-blue-500/20":"border-gray-700 bg-gray-800/50"])},[e("div",{class:V(["w-10 h-10 rounded-full flex items-center justify-center font-bold text-lg",t(n).activePlants.length>0?"bg-blue-500 text-white":"bg-gray-700 text-gray-400"])}," 3 ",2),e("div",null,[e("p",{class:V(["font-medium",t(n).activePlants.length>0?"text-white":"text-gray-500"])},"Log Observations",2),u[25]||(u[25]=e("p",{class:"text-xs text-gray-400"},"Track health & progress",-1))])],2)])])])):j("",!0),e("div",KH,[u[35]||(u[35]=e("h2",{class:"text-lg font-semibold text-white mb-4"},"Available Actions",-1)),e("div",YH,[e("button",{onClick:u[8]||(u[8]=L=>k("strain")),class:V(["relative group p-6 rounded-2xl border-2 transition-all text-left",t(n).strains.length===0?"border-purple-500 bg-gradient-to-br from-purple-500/20 to-purple-600/20 hover:border-purple-400":"border-gray-700 bg-gray-800/50 hover:border-gray-600 hover:bg-gray-800"])},[e("div",ZH,[e("div",XH,[I(t(Mt),{class:"w-7 h-7 text-white"})]),e("div",QH,[e("div",JH,[u[27]||(u[27]=e("h3",{class:"text-lg font-semibold text-white"},"Add New Strain",-1)),t(n).strains.length===0?(a(),l("span",eG," START HERE ")):j("",!0)]),u[28]||(u[28]=e("p",{class:"text-sm text-gray-400 mb-3"}," Add a genetic variety to your catalog. Track breeder info, genetics, flowering times, and seed inventory. ",-1)),e("div",tG,[e("span",sG,[I(t(Mt),{class:"w-4 h-4"}),ce(" "+c(t(n).strains.length)+" in catalog ",1)])])])])],2),e("button",{onClick:u[9]||(u[9]=L=>k("plant")),class:V(["relative group p-6 rounded-2xl border-2 transition-all text-left",t(n).strains.length>0&&t(n).activePlants.length===0?"border-spider-green-500 bg-gradient-to-br from-spider-green-500/20 to-emerald-600/20 hover:border-spider-green-400":"border-gray-700 bg-gray-800/50 hover:border-gray-600 hover:bg-gray-800"])},[e("div",nG,[e("div",oG,[I(t(Ne),{class:"w-7 h-7 text-white"})]),e("div",rG,[e("div",aG,[u[29]||(u[29]=e("h3",{class:"text-lg font-semibold text-white"},"Create New Plant",-1)),t(n).strains.length>0&&t(n).activePlants.length===0?(a(),l("span",lG," NEXT STEP ")):j("",!0)]),u[30]||(u[30]=e("p",{class:"text-sm text-gray-400 mb-3"}," Start tracking a new plant from seed or clone. Monitor growth stages, log observations, and record data. ",-1)),e("div",iG,[e("span",dG,[I(t(Je),{class:"w-4 h-4"}),ce(" "+c(t(n).activePlants.length)+" active ",1)])])])])],2),e("button",{onClick:u[10]||(u[10]=L=>k("observation")),disabled:t(n).activePlants.length===0,class:V(["relative group p-6 rounded-2xl border-2 transition-all text-left",t(n).activePlants.length===0?"border-gray-700 bg-gray-800/30 opacity-50 cursor-not-allowed":"border-gray-700 bg-gray-800/50 hover:border-blue-500 hover:bg-blue-500/10"])},[e("div",uG,[e("div",{class:V(["w-14 h-14 rounded-xl flex items-center justify-center shadow-lg transition-transform",t(n).activePlants.length===0?"bg-gray-700":"bg-gradient-to-br from-blue-500 to-blue-600 shadow-blue-500/20 group-hover:scale-110"])},[I(t(Dn),{class:"w-7 h-7 text-white"})],2),e("div",pG,[u[31]||(u[31]=e("h3",{class:"text-lg font-semibold text-white mb-1"},"Log Observation",-1)),u[32]||(u[32]=e("p",{class:"text-sm text-gray-400 mb-3"}," Record plant health, growth metrics, and notes. Capture environment data automatically with each observation. ",-1)),t(n).activePlants.length===0?(a(),l("div",gG," ⚠️ Create a plant first to log observations ")):(a(),l("div",fG," Track health scores, height, and issues "))])])],10,cG),e("button",{onClick:u[11]||(u[11]=L=>k("project")),disabled:t(n).strains.length===0,class:V(["relative group p-6 rounded-2xl border-2 transition-all text-left",t(n).strains.length===0?"border-gray-700 bg-gray-800/30 opacity-50 cursor-not-allowed":"border-gray-700 bg-gray-800/50 hover:border-pink-500 hover:bg-pink-500/10"])},[e("div",hG,[e("div",{class:V(["w-14 h-14 rounded-xl flex items-center justify-center shadow-lg transition-transform",t(n).strains.length===0?"bg-gray-700":"bg-gradient-to-br from-pink-500 to-pink-600 shadow-pink-500/20 group-hover:scale-110"])},[I(t(At),{class:"w-7 h-7 text-white"})],2),e("div",bG,[u[33]||(u[33]=e("h3",{class:"text-lg font-semibold text-white mb-1"},"Start Breeding Project",-1)),u[34]||(u[34]=e("p",{class:"text-sm text-gray-400 mb-3"}," Plan and track breeding crosses. Document pollen collection, pollination, and seed development. ",-1)),t(n).strains.length===0?(a(),l("div",vG," ⚠️ Add strains first to start breeding ")):(a(),l("div",xG," Create new genetics through selective breeding "))])])],10,mG)])]),e("div",yG,[e("div",_G,[e("div",wG,[I(t(wt),{class:"w-6 h-6 text-spider-green-400"})]),u[36]||(u[36]=e("div",null,[e("h3",{class:"text-lg font-semibold text-white mb-2"},"How the Laboratory Works"),e("div",{class:"space-y-3 text-sm text-gray-300"},[e("p",null,[e("strong",{class:"text-spider-green-400"},"1. Strains"),ce(" are your genetics catalog — the varieties you grow. Track breeder info, genetics (Indica/Sativa ratio), flowering times, and seed inventory. ")]),e("p",null,[e("strong",{class:"text-spider-green-400"},"2. Plants"),ce(" are individual specimens you're currently growing. Each plant has a lifecycle from germination/clone through harvest. You can track multiple plants of the same strain. ")]),e("p",null,[e("strong",{class:"text-spider-green-400"},"3. Observations"),ce(" are your grow journal entries. Log health scores, measurements, and notes regularly. Environment data (temp, humidity, VPD) is captured automatically. ")]),e("p",null,[e("strong",{class:"text-spider-green-400"},"4. Breeding Projects"),ce(" let you plan and track crosses between strains. Document the entire process from pollination to seed development. ")])])],-1))])])])]),e("div",kG,[e("div",$G,[e("div",CG,[e("div",SG,[t(n).strains.length===0?(a(),l(Q,{key:0},[ce(" Start by adding your first strain to the catalog ")],64)):t(n).activePlants.length===0?(a(),l(Q,{key:1},[ce(" You have "+c(t(n).strains.length)+" strain(s). Create your first plant to start tracking! ",1)],64)):(a(),l(Q,{key:2},[ce(" You have "+c(t(n).activePlants.length)+" active plant(s). Keep logging observations! ",1)],64))]),e("button",{onClick:u[12]||(u[12]=L=>r.value=!1),class:"px-5 py-2.5 rounded-xl bg-gray-700 hover:bg-gray-600 text-white font-medium transition-colors"}," Close ")])])])])):j("",!0)]),_:1})])),(a(),pe(Qe,{to:"body"},[I(Ke,{"enter-active-class":"transition-all duration-200","enter-from-class":"opacity-0 translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition-all duration-150","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-2"},{default:je(()=>[t(o)?(a(),l("div",PG,[u[37]||(u[37]=e("div",{class:"p-3 border-b border-gray-700/50 flex items-center justify-between"},[e("span",{class:"text-sm font-medium text-white"},"Notifications"),e("button",{class:"text-xs text-spider-green-400 hover:text-spider-green-300"}," Mark all read ")],-1)),e("div",EG,[t(n).notifications.length===0?(a(),l("div",TG," No notifications yet ")):(a(),l("div",AG,[(a(!0),l(Q,null,le(t(n).notifications.slice(0,10),L=>(a(),l("div",{key:L.id,class:V(["p-3 hover:bg-gray-700/30 transition-colors cursor-pointer",!L.acknowledged&&"bg-gray-700/20"]),onClick:F=>A(L)},[e("div",MG,[e("div",{class:V(["w-2 h-2 rounded-full mt-1.5 shrink-0",L.level==="urgent"?"bg-red-500":L.level==="important"?"bg-yellow-500":L.level==="reminder"?"bg-blue-500":"bg-gray-500"])},null,2),e("div",OG,[e("p",LG,c(L.title),1),e("p",jG,c(L.message),1),e("p",IG,c(y(L.timestamp)),1)])])],10,DG))),128))]))])])):j("",!0)]),_:1})])),t(o)?(a(),l("div",{key:1,class:"fixed inset-0 z-40",onClick:u[13]||(u[13]=L=>o.value=!1)})):j("",!0),(a(),pe(Qe,{to:"body"},[t(f)?(a(),pe(we,{key:0,onClose:u[14]||(u[14]=L=>f.value=!1),onCreated:T})):j("",!0)])),(a(),pe(Qe,{to:"body"},[t(g)?(a(),pe(re,{key:0,onClose:u[15]||(u[15]=L=>g.value=!1),onCreated:p,onOpenStrainWizard:u[16]||(u[16]=L=>f.value=!0)})):j("",!0)])),(a(),pe(Qe,{to:"body"},[t(m)?(a(),pe(E,{key:0,plant:t(b),onClose:P,onCreated:M},null,8,["plant"])):j("",!0)])),(a(),pe(Qe,{to:"body"},[I(Ke,{"enter-active-class":"transition-all duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-all duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:je(()=>[t(i)?(a(),l("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70",onClick:u[19]||(u[19]=Ve(L=>i.value=!1,["self"]))},[e("div",RG,[e("div",FG,[e("div",NG,[e("div",BG,[I(t(hn),{class:"w-5 h-5 text-spider-green-400"})]),u[38]||(u[38]=e("h2",{class:"text-lg font-semibold text-white"},"Lab Settings",-1))]),e("button",{onClick:u[17]||(u[17]=L=>i.value=!1),class:"p-2 rounded-lg hover:bg-gray-800 text-gray-400 hover:text-white transition-colors"},[I(t(ze),{class:"w-5 h-5"})])]),u[39]||(u[39]=e("div",{class:"p-6 space-y-6 overflow-y-auto flex-1"},[e("div",null,[e("h3",{class:"text-sm font-medium text-gray-300 mb-3"},"Observation Reminders"),e("div",{class:"space-y-3"},[e("label",{class:"flex items-center justify-between p-3 rounded-lg bg-gray-800/50"},[e("span",{class:"text-sm text-gray-300"},"Remind to log observations"),e("input",{type:"checkbox",checked:"",class:"w-5 h-5 rounded border-gray-600 bg-gray-700 text-spider-green-500 focus:ring-spider-green-500"})]),e("div",{class:"p-3 rounded-lg bg-gray-800/50"},[e("div",{class:"flex items-center justify-between mb-2"},[e("span",{class:"text-sm text-gray-300"},"Reminder frequency"),e("span",{class:"text-sm text-spider-green-400"},"Every 3 days")]),e("input",{type:"range",min:"1",max:"7",value:"3",class:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-spider-green-500"})])])]),e("div",null,[e("h3",{class:"text-sm font-medium text-gray-300 mb-3"},"Display Preferences"),e("div",{class:"space-y-3"},[e("div",{class:"p-3 rounded-lg bg-gray-800/50"},[e("label",{class:"flex items-center justify-between"},[e("span",{class:"text-sm text-gray-300"},"Default plants view"),e("select",{class:"bg-gray-700 border-0 rounded-lg text-sm text-white px-3 py-1.5 focus:ring-spider-green-500"},[e("option",{value:"cards"},"Cards"),e("option",{value:"list"},"List")])])]),e("label",{class:"flex items-center justify-between p-3 rounded-lg bg-gray-800/50"},[e("span",{class:"text-sm text-gray-300"},"Show archived plants"),e("input",{type:"checkbox",class:"w-5 h-5 rounded border-gray-600 bg-gray-700 text-spider-green-500 focus:ring-spider-green-500"})])])]),e("div",null,[e("h3",{class:"text-sm font-medium text-gray-300 mb-3"},"Scoring"),e("div",{class:"p-3 rounded-lg bg-gray-800/50"},[e("label",{class:"flex items-center justify-between"},[e("span",{class:"text-sm text-gray-300"},"Default scoring profile"),e("select",{class:"bg-gray-700 border-0 rounded-lg text-sm text-white px-3 py-1.5 focus:ring-spider-green-500"},[e("option",{value:"standard"},"Standard"),e("option",{value:"commercial"},"Commercial"),e("option",{value:"breeder"},"Breeder"),e("option",{value:"connoisseur"},"Connoisseur")])])])]),e("p",{class:"text-xs text-gray-500 text-center"}," Settings are saved automatically ")],-1)),e("div",VG,[e("button",{onClick:u[18]||(u[18]=L=>i.value=!1),class:"w-full px-4 py-2.5 rounded-lg bg-spider-green-600 hover:bg-spider-green-500 text-white font-medium transition-colors"}," Done ")])])])):j("",!0)]),_:1})]))])}}}),kW=Pt(UG,[["__scopeId","data-v-e43fd05b"]]);export{kW as default};
