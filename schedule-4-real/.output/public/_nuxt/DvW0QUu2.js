import{_ as dt}from"./C0s9z9XP.js";import{_ as pt}from"./Cjwj_ux1.js";import{o as l,c as i,a as e,e as _e,aq as Ke,W as Je,J as Ae,A as oe,x as B,b as o,G as xe,w as R,h as s,I as re,n as w,F as j,t as d,f as b,d as r,r as U,T as ye,l as S,m as I,R as et,B as ut,i as de,v as ge,k as ve,a2 as gt,g as xt,K as Fe,ar as J,M as ct,V as mt}from"./C4Z1jz3b.js";import{u as $e}from"./BFaj8Loo.js";import{r as qe}from"./CypD1YFc.js";import{r as ke}from"./D6TnxOrq.js";import{a as ue,r as Le,c as me,b as ze,u as tt,d as Ge}from"./CrblyERJ.js";import{r as De}from"./BNbYE_59.js";import{r as Re}from"./Ds3bI5Kf.js";import{r as Ye}from"./CRJHiGRc.js";import{_ as he}from"./DlAUqK2U.js";import{r as Me}from"./DdTT3sq1.js";import{a as Oe,r as Be}from"./MRqsLT2S.js";import{Y as fe,X as Ne,_ as yt,Z as bt}from"./GX_aOqNe.js";import{r as ft}from"./DebMaqpV.js";import{a as ee,r as He}from"./CfeDZA3L.js";import{aI as M,aG as Te}from"./aa6uehi1.js";import{u as vt}from"./CpYeaF2M.js";import{u as ht}from"./68QvpR0p.js";import{u as wt,r as kt}from"./63XK7Lle.js";import{r as Ze}from"./pVJsrICm.js";import{r as Xe}from"./tzx-u63I.js";import"./CbYDcgIV.js";import"./C4r9P9D6.js";function Ie(E,D){return l(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 0 1 7.843 4.582M12 3a8.997 8.997 0 0 0-7.843 4.582m15.686 0A11.953 11.953 0 0 1 12 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0 1 21 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0 1 12 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 0 1 3 12c0-1.605.42-3.113 1.157-4.418"})])}function _t(E,D){return l(),i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M15.75 2.25H21a.75.75 0 0 1 .75.75v5.25a.75.75 0 0 1-1.5 0V4.81L8.03 17.03a.75.75 0 0 1-1.06-1.06L19.19 3.75h-3.44a.75.75 0 0 1 0-1.5Zm-10.5 4.5a1.5 1.5 0 0 0-1.5 1.5v10.5a1.5 1.5 0 0 0 1.5 1.5h10.5a1.5 1.5 0 0 0 1.5-1.5V10.5a.75.75 0 0 1 1.5 0v8.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V8.25a3 3 0 0 1 3-3h8.25a.75.75 0 0 1 0 1.5H5.25Z","clip-rule":"evenodd"})])}function st(E,D){return l(),i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{d:"M4.913 2.658c2.075-.27 4.19-.408 6.337-.408 2.147 0 4.262.139 6.337.408 1.922.25 3.291 1.861 3.405 3.727a4.403 4.403 0 0 0-1.032-.211 50.89 50.89 0 0 0-8.42 0c-2.358.196-4.04 2.19-4.04 4.434v4.286a4.47 4.47 0 0 0 2.433 3.984L7.28 21.53A.75.75 0 0 1 6 21v-4.03a48.527 48.527 0 0 1-1.087-.128C2.905 16.58 1.5 14.833 1.5 12.862V6.638c0-1.97 1.405-3.718 3.413-3.979Z"}),e("path",{d:"M15.75 7.5c-1.376 0-2.739.057-4.086.169C10.124 7.797 9 9.103 9 10.609v4.285c0 1.507 1.128 2.814 2.67 2.94 1.243.102 2.5.157 3.768.165l2.782 2.781a.75.75 0 0 0 1.28-.53v-2.39l.33-.026c1.542-.125 2.67-1.433 2.67-2.94v-4.286c0-1.505-1.125-2.811-2.664-2.94A49.392 49.392 0 0 0 15.75 7.5Z"})])}function te(E,D){return l(),i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M10.5 3A1.501 1.501 0 0 0 9 4.5h6A1.5 1.5 0 0 0 13.5 3h-3Zm-2.693.178A3 3 0 0 1 10.5 1.5h3a3 3 0 0 1 2.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 0 1-3 3H6.75a3 3 0 0 1-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15Z","clip-rule":"evenodd"})])}function Ee(E,D){return l(),i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M2.25 6a3 3 0 0 1 3-3h13.5a3 3 0 0 1 3 3v12a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V6Zm3.97.97a.75.75 0 0 1 1.06 0l2.25 2.25a.75.75 0 0 1 0 1.06l-2.25 2.25a.75.75 0 0 1-1.06-1.06l1.72-1.72-1.72-1.72a.75.75 0 0 1 0-1.06Zm4.28 4.28a.75.75 0 0 0 0 1.5h3a.75.75 0 0 0 0-1.5h-3Z","clip-rule":"evenodd"})])}function je(E,D){return l(),i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{d:"M4.08 5.227A3 3 0 0 1 6.979 3H17.02a3 3 0 0 1 2.9 2.227l2.113 7.926A5.228 5.228 0 0 0 18.75 12H5.25a5.228 5.228 0 0 0-3.284 1.153L4.08 5.227Z"}),e("path",{"fill-rule":"evenodd",d:"M5.25 13.5a3.75 3.75 0 1 0 0 7.5h13.5a3.75 3.75 0 1 0 0-7.5H5.25Zm10.5 4.5a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm3.75-.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z","clip-rule":"evenodd"})])}function $t(E,D){return l(),i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M8.25 6.75a3.75 3.75 0 1 1 7.5 0 3.75 3.75 0 0 1-7.5 0ZM15.75 9.75a3 3 0 1 1 6 0 3 3 0 0 1-6 0ZM2.25 9.75a3 3 0 1 1 6 0 3 3 0 0 1-6 0ZM6.31 15.117A6.745 6.745 0 0 1 12 12a6.745 6.745 0 0 1 6.709 7.498.75.75 0 0 1-.372.568A12.696 12.696 0 0 1 12 21.75c-2.305 0-4.47-.612-6.337-1.684a.75.75 0 0 1-.372-.568 6.787 6.787 0 0 1 1.019-4.38Z","clip-rule":"evenodd"}),e("path",{d:"M5.082 14.254a8.287 8.287 0 0 0-1.308 5.135 9.687 9.687 0 0 1-1.764-.44l-.115-.04a.563.563 0 0 1-.373-.487l-.01-.121a3.75 3.75 0 0 1 3.57-4.047ZM20.226 19.389a8.287 8.287 0 0 0-1.308-5.135 3.75 3.75 0 0 1 3.57 4.047l-.01.121a.563.563 0 0 1-.373.486l-.115.04c-.567.2-1.156.349-1.764.441Z"})])}function Pt(E,D){return l(),i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-1.72 6.97a.75.75 0 1 0-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 1 0 1.06 1.06L12 13.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L13.06 12l1.72-1.72a.75.75 0 1 0-1.06-1.06L12 10.94l-1.72-1.72Z","clip-rule":"evenodd"})])}const St={key:0,class:"bg-gradient-to-br from-gray-800/95 to-gray-900/95 rounded-2xl border border-gray-700/50 shadow-2xl shadow-black/50 w-full max-w-2xl max-h-[85vh] flex flex-col overflow-hidden relative"},Ct={key:0,class:"absolute inset-0 bg-gray-900/98 backdrop-blur-sm z-10 flex flex-col items-center justify-center px-8 text-center rounded-2xl"},Tt={class:"w-16 h-16 rounded-2xl bg-gradient-to-br from-blue-500/30 to-indigo-600/20 flex items-center justify-center mb-5 shadow-lg shadow-blue-500/20"},Rt={class:"text-base text-gray-400"},Dt={class:"w-16 h-16 rounded-2xl bg-gradient-to-br from-spider-green-500/30 to-spider-green-600/20 flex items-center justify-center mb-5 shadow-lg shadow-spider-green-500/20"},At={class:"text-base text-gray-400"},Nt={class:"w-16 h-16 rounded-2xl bg-gradient-to-br from-blue-500/30 to-indigo-600/20 flex items-center justify-center mb-5 shadow-lg shadow-blue-500/20"},It={class:"w-16 h-16 rounded-2xl bg-gradient-to-br from-spider-green-500/30 to-emerald-600/20 flex items-center justify-center mb-5 shadow-lg shadow-spider-green-500/20"},jt={class:"w-16 h-16 rounded-2xl bg-gradient-to-br from-red-500/30 to-red-600/20 flex items-center justify-center mb-5 shadow-lg shadow-red-500/20"},Lt={class:"text-base text-gray-400 mb-5 max-w-sm"},Ot={class:"px-6 pt-5 pb-4 border-b border-gray-700/30 relative"},Ht={class:"text-lg font-semibold text-white flex items-center gap-3"},Et={key:0,class:"text-sm text-gray-400 mt-2 ml-[52px]"},Mt={class:"text-gray-500 ml-1"},Ut={key:1,class:"text-sm text-spider-green-400/80 mt-2 ml-[52px] flex items-center gap-1.5"},Wt={class:"flex-1 overflow-y-auto px-6 py-5 scrollbar-thin relative"},Vt={class:"space-y-2 mb-5"},Ft={class:"text-sm text-gray-200 font-medium"},qt={class:"flex items-center gap-2.5"},zt={class:"text-xs font-mono text-gray-500 bg-gray-800/50 px-2 py-0.5 rounded"},Gt={class:"text-sm font-mono font-semibold text-spider-green-400 bg-spider-green-500/10 px-2 py-0.5 rounded"},Yt={key:0,class:"rounded-xl border border-gray-700/40 overflow-hidden bg-gray-800/30"},Bt={class:"px-4 py-3 bg-gradient-to-r from-spider-green-900/20 to-transparent border-b border-gray-700/30"},Zt={class:"text-xs font-semibold text-spider-green-400 uppercase tracking-wider flex items-center gap-2"},Xt={class:"divide-y divide-gray-700/20 max-h-64 overflow-y-auto scrollbar-thin"},Qt={class:"text-sm font-semibold text-gray-100 mb-3"},Kt={class:"space-y-2.5"},Jt={class:"text-[11px] font-mono text-spider-green-400 bg-spider-green-500/15 px-2 py-0.5 rounded-md shrink-0 h-fit border border-spider-green-500/20"},es={class:"space-y-1"},ts={key:1,class:"mt-4 flex items-start gap-3 p-4 bg-gradient-to-r from-yellow-900/20 to-transparent border border-yellow-700/30 rounded-xl"},ss={class:"flex flex-wrap gap-2 mb-5"},rs={class:"text-xs text-gray-400"},os={class:"text-xs font-mono font-semibold text-blue-400 bg-blue-500/10 px-1.5 py-0.5 rounded"},as={key:0,class:"rounded-xl border border-gray-700/40 overflow-hidden bg-gray-800/30"},ls={class:"px-5 py-3 bg-gradient-to-r from-purple-900/20 to-transparent border-b border-gray-700/30"},ns={class:"text-xs font-semibold text-purple-400 uppercase tracking-wider flex items-center gap-2"},is={class:"max-h-80 overflow-y-auto scrollbar-thin"},ds={class:"space-y-4"},ps={class:"flex items-center justify-between mb-2.5"},us={class:"text-sm font-semibold text-gray-200"},gs={key:0,class:"text-xs text-gray-500 font-mono bg-gray-800/50 px-2 py-0.5 rounded"},xs={class:"space-y-2 pl-3 border-l-2 border-purple-500/30"},cs={class:"text-[10px] font-mono text-purple-400/80 bg-purple-500/10 px-1.5 py-0.5 rounded shrink-0 mt-0.5"},ms={class:"text-sm text-gray-400 leading-relaxed"},ys={key:1,class:"text-center py-8"},bs={class:"w-12 h-12 mx-auto mb-3 rounded-xl bg-gray-800/50 flex items-center justify-center"},fs={key:1,class:"px-6 py-4 border-t border-gray-700/30 flex justify-end gap-3 bg-gray-900/30"},vs=_e({__name:"UpdateModal",props:{forceOpen:{type:Boolean,default:!1},forceOpenModifiers:{}},emits:["update:forceOpen"],setup(E){const D=Ke(E,"forceOpen"),f=$e(),{requireAuth:P}=Je(),{authenticated:C}=Ae(),k=S(!1),$=S(!1),h=S(""),A=I(()=>{if(h.value)return"error";const x=f.updateProgress;return x?x.phase:"idle"}),z=I(()=>h.value?h.value:f.updateProgress?.error||""),_=I(()=>f.updateProgress?.component||""),g=I(()=>f.updateProgress?.current||0),L=I(()=>f.updateProgress?.total||0),O={web:"Web App",ingest:"MQTT Ingestion",retention:"Data Retention",supervisor:"Supervisor",proxy:"MQTT Proxy",mosquitto:"Mosquitto",schema:"Database Schema"};function T(x){return O[x]||x}const Z=I(()=>f.updateStatus?.pending??[]),W=I(()=>Z.value.length>0),G=I(()=>Z.value.some(x=>x.component==="schema")),ae=I(()=>Z.value.reduce((x,m)=>x+(m.size||0),0)),ce=I(()=>f.updateStatus?.installed?Object.entries(O).map(([x,m])=>({id:x,label:m,version:f.updateStatus.installed[x]?.version||"?"})):[]),V=I(()=>Z.value.filter(x=>x.changelog&&x.changelog.length>0).map(x=>{const m=[];for(const p of x.changelog)if(typeof p=="object"&&"version"in p&&Array.isArray(p.changes))m.push({version:p.version,changes:p.changes});else if(typeof p=="string"){const a=m.find(v=>v.version===x.to);a?a.changes.push(p):m.push({version:x.to,changes:[p]})}return{id:x.component,label:T(x.component),versions:m}}).filter(x=>x.versions.length>0)),X=I(()=>{const x=f.updateStatus?.manifestChangelogs??{};if(Object.keys(x).length>0){const a=Object.entries(x).filter(([v,N])=>Array.isArray(N)&&N.length>0).map(([v,N])=>{const ie=N.map(y=>({version:y.version,message:Array.isArray(y.changes)?y.changes.join(", "):String(y.changes||"")})),se=f.updateStatus?.installed?.[v]?.version||"?";return{id:v,label:T(v),versionRange:`v${se}`,changes:ie}}).filter(v=>v.changes.length>0);if(a.length>0)return[{date:"Release History",components:a}]}const m=f.updateStatus?.history??[];if(!m.length)return[];const p=new Map;for(const a of m){const v=le(a.date);p.has(v)||p.set(v,[]),p.get(v).push(a)}return Array.from(p.entries()).map(([a,v])=>{const N=new Map;for(const se of v){for(const y of se.results||[])y.success&&(N.has(y.component)||N.set(y.component,{messages:new Set,versions:new Set}),y.version&&N.get(y.component).versions.add(y.version));for(const y of se.changelog||[]){const H=y.component;N.has(H)||N.set(H,{messages:new Set,versions:new Set});let q="";typeof y.message=="string"?q=y.message:typeof y.message=="object"&&y.message?.changes?q=y.message.changes.join(", "):q=String(y.message||""),q&&N.get(H).messages.add(q)}}const ie=Array.from(N.entries()).map(([se,y])=>{const H=Array.from(y.versions).sort((Y,Pe)=>{const Se=Y.split(".").map(Number),Ce=Pe.split(".").map(Number);for(let pe=0;pe<3;pe++)if((Ce[pe]||0)!==(Se[pe]||0))return(Ce[pe]||0)-(Se[pe]||0);return 0}),q=H.length>1?`${H[H.length-1]} â†’ ${H[0]}`:H[0]?`v${H[0]}`:"",c=Array.from(y.messages).map(Y=>({version:H[0]||"",message:Y}));return{id:se,label:T(se),versionRange:q,changes:c}});return{date:a,components:ie}})});function ne(x){return x<1024?`${x} B`:x<1048576?`${(x/1024).toFixed(0)} KB`:`${(x/1048576).toFixed(1)} MB`}function le(x){return new Date(x).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})}function F(){h.value="",f.updateProgress=null}function Q(){const x=A.value;x==="downloading"||x==="installing"||x==="restarting"||(k.value=!1,$.value=!0,D.value=!1,h.value="")}async function be(){try{await P()}catch{return}h.value="";try{await f.applyUpdates()}catch(x){h.value=x?.message||"An error occurred during the update"}}return oe(A,x=>{x==="done"&&k.value&&setTimeout(()=>{A.value==="done"&&Q()},2500)}),oe(()=>f.updateProgress,x=>{x&&["downloading","installing"].includes(x.phase)&&!k.value&&(k.value=!0)}),oe([Z,C],([x,m])=>{x.length>0&&m&&!$.value&&!k.value&&((f.updateStatus?.autoUpdate??!1)||(k.value=!0))},{immediate:!0}),oe(D,async x=>{if(x){k.value=!0;try{await f.checkForUpdates()}catch{}}}),(x,m)=>(l(),B(ye,{to:"body"},[o(xe,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:R(()=>[s(k)?(l(),i("div",{key:0,class:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-[90] p-4",onClick:m[0]||(m[0]=re(p=>s(A)==="idle"||s(A)==="error"?Q():void 0,["self"]))},[o(xe,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 scale-95 translate-y-4","enter-to-class":"opacity-100 scale-100 translate-y-0","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:R(()=>[s(k)?(l(),i("div",St,[e("div",{class:w(["absolute -top-20 -left-20 w-40 h-40 rounded-full blur-3xl pointer-events-none",s(W)?"bg-spider-green-500/20":"bg-blue-500/15"])},null,2),m[15]||(m[15]=e("div",{class:"absolute -bottom-20 -right-20 w-40 h-40 rounded-full blur-3xl pointer-events-none bg-purple-500/10"},null,-1)),s(A)!=="idle"?(l(),i("div",Ct,[s(A)==="downloading"?(l(),i(j,{key:0},[e("div",Tt,[o(s(qe),{class:"w-8 h-8 text-blue-400 animate-bounce"})]),m[1]||(m[1]=e("p",{class:"text-xl font-semibold text-white mb-2"},"Downloading updates...",-1)),e("p",Rt,d(T(s(_)))+" ("+d(s(g))+"/"+d(s(L))+")",1),m[2]||(m[2]=e("p",{class:"text-base text-gray-500 mt-1"},"Do not close this page.",-1))],64)):s(A)==="installing"?(l(),i(j,{key:1},[e("div",Dt,[o(s(ke),{class:"w-8 h-8 text-spider-green-400 animate-spin"})]),m[3]||(m[3]=e("p",{class:"text-xl font-semibold text-white mb-2"},"Installing updates...",-1)),e("p",At,d(T(s(_)))+" ("+d(s(g))+"/"+d(s(L))+")",1),m[4]||(m[4]=e("p",{class:"text-base text-gray-500 mt-1"},"Do not close this page.",-1))],64)):s(A)==="restarting"?(l(),i(j,{key:2},[e("div",Nt,[o(s(ke),{class:"w-8 h-8 text-blue-400 animate-spin"})]),m[5]||(m[5]=e("p",{class:"text-xl font-semibold text-white mb-2"},"Restarting application...",-1)),m[6]||(m[6]=e("p",{class:"text-base text-gray-400"},"Page will reload automatically.",-1))],64)):s(A)==="done"?(l(),i(j,{key:3},[e("div",It,[o(s(ue),{class:"w-8 h-8 text-spider-green-400"})]),m[7]||(m[7]=e("p",{class:"text-xl font-semibold text-white"},"Update complete!",-1))],64)):s(A)==="error"?(l(),i(j,{key:4},[e("div",jt,[o(s(Pt),{class:"w-8 h-8 text-red-400"})]),m[8]||(m[8]=e("p",{class:"text-xl font-semibold text-white mb-2"},"Update failed",-1)),e("p",Lt,d(s(z)),1),e("button",{onClick:F,class:"px-6 py-2.5 text-base font-medium bg-gray-700/60 text-white rounded-xl hover:bg-gray-600/60 transition-colors"}," Close ")],64)):b("",!0)])):b("",!0),e("div",Ot,[e("h3",Ht,[e("div",{class:w(["w-10 h-10 rounded-xl flex items-center justify-center shadow-lg",s(W)?"bg-gradient-to-br from-spider-green-500/30 to-spider-green-600/20 shadow-spider-green-500/20":"bg-gradient-to-br from-blue-500/30 to-indigo-600/20 shadow-blue-500/20"])},[s(W)?(l(),B(s(qe),{key:0,class:"w-5 h-5 text-spider-green-400"})):(l(),B(s(Le),{key:1,class:"w-5 h-5 text-blue-400"}))],2),r(" "+d(s(W)?"Updates Available":"Version Info"),1)]),s(W)?(l(),i("p",Et,[r(d(s(Z).length)+" component"+d(s(Z).length>1?"s":"")+" can be updated ",1),e("span",Mt,"("+d(ne(s(ae)))+")",1)])):(l(),i("p",Ut,[o(s(ue),{class:"w-4 h-4"}),m[9]||(m[9]=r(" All components are up to date ",-1))]))]),e("div",Wt,[s(W)?(l(),i(j,{key:0},[e("div",Vt,[(l(!0),i(j,null,U(s(Z),p=>(l(),i("div",{key:p.component,class:"flex items-center justify-between bg-gradient-to-r from-gray-700/40 to-gray-800/30 border border-gray-700/40 rounded-xl px-4 py-3 hover:border-spider-green-500/30 transition-colors"},[e("span",Ft,d(T(p.component)),1),e("div",qt,[e("span",zt,d(p.from),1),o(s(me),{class:"w-3.5 h-3.5 text-spider-green-500"}),e("span",Gt,d(p.to),1)])]))),128))]),s(V).length>0?(l(),i("div",Yt,[e("div",Bt,[e("p",Zt,[o(s(De),{class:"w-4 h-4"}),m[10]||(m[10]=r(" What's New ",-1))])]),e("div",Xt,[(l(!0),i(j,null,U(s(V),p=>(l(),i("div",{key:p.id,class:"px-5 py-4"},[e("p",Qt,d(p.label),1),e("div",Kt,[(l(!0),i(j,null,U(p.versions,a=>(l(),i("div",{key:a.version,class:"flex gap-3"},[e("span",Jt,"v"+d(a.version),1),e("div",es,[(l(!0),i(j,null,U(a.changes,(v,N)=>(l(),i("p",{key:N,class:"text-sm text-gray-300 leading-relaxed"},d(v),1))),128))])]))),128))])]))),128))])])):b("",!0),s(G)?(l(),i("div",ts,[o(s(Re),{class:"w-5 h-5 text-yellow-400 shrink-0 mt-0.5"}),m[11]||(m[11]=e("p",{class:"text-sm text-yellow-400/90"}," Includes a database schema update. A backup will be created automatically before migration. ",-1))])):b("",!0)],64)):(l(),i(j,{key:1},[e("div",ss,[(l(!0),i(j,null,U(s(ce),p=>(l(),i("div",{key:p.id,class:"bg-gradient-to-r from-gray-700/50 to-gray-800/30 border border-gray-700/40 rounded-xl px-3 py-2 flex items-center gap-2 hover:border-gray-600/50 transition-colors"},[e("span",rs,d(p.label),1),e("span",os,"v"+d(p.version),1)]))),128))]),s(X).length>0?(l(),i("div",as,[e("div",ls,[e("p",ns,[o(s(Ye),{class:"w-4 h-4"}),m[12]||(m[12]=r(" Release History ",-1))])]),e("div",is,[(l(!0),i(j,null,U(s(X),(p,a)=>(l(),i("div",{key:a,class:"px-5 py-4 border-b border-gray-700/20 last:border-0"},[e("div",ds,[(l(!0),i(j,null,U(p.components,v=>(l(),i("div",{key:v.id},[e("div",ps,[e("p",us,d(v.label),1),v.versionRange?(l(),i("span",gs,d(v.versionRange),1)):b("",!0)]),e("div",xs,[(l(!0),i(j,null,U(v.changes,(N,ie)=>(l(),i("div",{key:ie,class:"flex items-start gap-3"},[e("span",cs,d(N.version),1),e("p",ms,d(N.message),1)]))),128))])]))),128))])]))),128))])])):(l(),i("div",ys,[e("div",bs,[o(s(Ye),{class:"w-6 h-6 text-gray-600"})]),m[13]||(m[13]=e("p",{class:"text-sm text-gray-500"},"No release history available",-1)),m[14]||(m[14]=e("p",{class:"text-xs text-gray-600 mt-1"},'Click "Check Now" in System to fetch changelog',-1))]))],64))]),s(A)==="idle"?(l(),i("div",fs,[e("button",{onClick:Q,class:"px-5 py-2.5 text-base text-gray-400 hover:text-white rounded-xl hover:bg-gray-700/50 transition-all"},d(s(W)?"Later":"Close"),1),s(W)?(l(),i("button",{key:0,onClick:be,class:"px-6 py-2.5 text-base font-semibold bg-gradient-to-r from-spider-green-500 to-spider-green-600 hover:from-spider-green-400 hover:to-spider-green-500 text-white rounded-xl transition-all shadow-lg shadow-spider-green-500/25 hover:shadow-spider-green-500/40 flex items-center gap-2"}," Update Now ")):b("",!0)])):b("",!0)])):b("",!0)]),_:1})])):b("",!0)]),_:1})]))}}),hs=Object.assign(he(vs,[["__scopeId","data-v-a35624e1"]]),{__name:"UpdateModal"}),ws={key:0,class:"bg-gradient-to-br from-gray-800/95 to-gray-900/95 rounded-2xl border border-gray-700/50 shadow-2xl shadow-black/50 w-full max-w-lg max-h-[80vh] flex flex-col overflow-hidden relative"},ks={class:"px-6 pt-5 pb-4 border-b border-gray-700/30 relative"},_s={class:"text-lg font-semibold text-white flex items-center gap-3"},$s={class:"w-10 h-10 rounded-xl bg-gradient-to-br from-spider-green-500/30 to-emerald-600/20 shadow-lg shadow-spider-green-500/20 flex items-center justify-center"},Ps={class:"text-sm text-gray-400 mt-2 ml-[52px]"},Ss={class:"flex-1 overflow-y-auto px-6 py-5 scrollbar-thin relative"},Cs={key:0,class:"space-y-4"},Ts={key:0,class:"text-xs font-semibold text-spider-green-400 uppercase tracking-wider"},Rs={class:"space-y-1.5"},Ds={class:"text-sm text-gray-300 leading-relaxed"},As={key:1,class:"text-center py-6"},Ns=_e({__name:"WhatsNewModal",setup(E){const D={web:"Web App",ingest:"MQTT Ingestion",retention:"Data Retention",supervisor:"Supervisor",proxy:"MQTT Proxy",mosquitto:"Mosquitto",schema:"Database Schema"};function f(_){return D[_]||_}const P=$e(),{authenticated:C}=Ae(),k=S(!1),$=I(()=>{const _=P.updateStatus?.history;if(!_||_.length===0)return[];const g=_[0];if(!g||!g.changelog||g.changelog.length===0)return[];const L=new Map;for(const O of g.changelog){const T=O.component||"web";L.has(T)||L.set(T,[]),L.get(T).push(O.message)}return Array.from(L.entries()).map(([O,T])=>({component:O,messages:T}))}),h=I(()=>{const _=P.updateStatus?.lastUpdate;if(!_)return"recently";const g=Date.now()-new Date(_).getTime(),L=Math.floor(g/6e4);if(L<1)return"just now";if(L<60)return`${L}m ago`;const O=Math.floor(L/60);return O<24?`${O}h ago`:`${Math.floor(O/24)}d ago`});function A(){const _=localStorage.getItem("sf_changelog_dismissed");if(!_)return!1;const g=P.updateStatus?.lastUpdate;return g?new Date(_).getTime()>=new Date(g).getTime():!1}oe([()=>P.updateStatus?.showChangelog,C],([_,g])=>{if(_&&g&&!k.value){if((P.updateStatus?.pending?.length??0)>0||A())return;k.value=!0}},{immediate:!0});function z(){k.value=!1,P.dismissChangelog()}return(_,g)=>(l(),B(ye,{to:"body"},[o(xe,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:R(()=>[s(k)?(l(),i("div",{key:0,class:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-[90] p-4",onClick:re(z,["self"])},[o(xe,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 scale-95 translate-y-4","enter-to-class":"opacity-100 scale-100 translate-y-0","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:R(()=>[s(k)?(l(),i("div",ws,[g[3]||(g[3]=e("div",{class:"absolute -top-20 -left-20 w-40 h-40 rounded-full blur-3xl pointer-events-none bg-spider-green-500/20"},null,-1)),g[4]||(g[4]=e("div",{class:"absolute -bottom-20 -right-20 w-40 h-40 rounded-full blur-3xl pointer-events-none bg-emerald-500/10"},null,-1)),e("div",ks,[e("h3",_s,[e("div",$s,[o(s(De),{class:"w-5 h-5 text-spider-green-400"})]),g[0]||(g[0]=r(" What's New ",-1))]),e("p",Ps," Your system was updated "+d(s(h)),1)]),e("div",Ss,[s($).length>0?(l(),i("div",Cs,[(l(!0),i(j,null,U(s($),L=>(l(),i("div",{key:L.component,class:"space-y-2"},[s($).length>1?(l(),i("p",Ts,d(f(L.component)),1)):b("",!0),e("div",Rs,[(l(!0),i(j,null,U(L.messages,(O,T)=>(l(),i("div",{key:T,class:"flex items-start gap-3 bg-gradient-to-r from-gray-700/30 to-transparent rounded-lg px-3 py-2"},[g[1]||(g[1]=e("span",{class:"w-1.5 h-1.5 rounded-full bg-spider-green-500 mt-1.5 shrink-0"},null,-1)),e("span",Ds,d(O),1)]))),128))])]))),128))])):(l(),i("div",As,[...g[2]||(g[2]=[e("p",{class:"text-sm text-gray-400"},"System updated successfully.",-1)])]))]),e("div",{class:"px-6 py-4 border-t border-gray-700/30 flex justify-end bg-gray-900/30"},[e("button",{onClick:z,class:"px-6 py-2.5 text-sm font-semibold bg-gradient-to-r from-spider-green-500 to-spider-green-600 hover:from-spider-green-400 hover:to-spider-green-500 text-white rounded-xl transition-all shadow-lg shadow-spider-green-500/25 hover:shadow-spider-green-500/40"}," Got it ")])])):b("",!0)]),_:1})])):b("",!0)]),_:1})]))}}),Is=Object.assign(he(Ns,[["__scopeId","data-v-70979847"]]),{__name:"WhatsNewModal"}),js={key:0,class:"weedlix-modal w-full max-w-xl max-h-[90vh] flex flex-col overflow-hidden relative rounded-3xl"},Ls={class:"relative z-10 px-5 sm:px-8 pt-8 sm:pt-10 pb-6 sm:pb-8 space-y-4 sm:space-y-7 overflow-y-auto flex-1"},Os={class:"space-y-3"},Hs={class:"wx-glass-card flex items-start gap-4 p-4 rounded-2xl"},Es={class:"w-10 h-10 rounded-xl bg-wx/10 border border-wx/20 flex items-center justify-center shrink-0 mt-0.5"},Ms={class:"wx-glass-card flex items-start gap-4 p-4 rounded-2xl"},Us={class:"w-10 h-10 rounded-xl bg-emerald-500/10 border border-emerald-500/20 flex items-center justify-center shrink-0 mt-0.5"},Ws={href:"https://weedlix.com",target:"_blank",rel:"noopener noreferrer",class:"wx-cta group block w-full text-center py-4 sm:py-5 rounded-2xl font-black text-base sm:text-lg transition-all duration-300 relative overflow-hidden"},Vs={class:"relative z-10 text-wx group-hover:text-white transition-colors duration-300 flex items-center justify-center gap-3"},Fs=_e({__name:"WeedlixAdvertModal",props:{forceOpen:{type:Boolean,default:!1},forceOpenModifiers:{}},emits:["update:forceOpen"],setup(E){const D=Ke(E,"forceOpen"),f=$e(),{authenticated:P}=Ae(),C=et(),k=S(!1);function $(){return C.path==="/room3d"}function h(){return localStorage.getItem("sf_advert_dismissed_anon")==="true"}function A(){return localStorage.getItem("sf_advert_dismissed")==="true"}oe(()=>({advertDismissed:f.updateStatus?.advertDismissed,showChangelog:f.updateStatus?.showChangelog,pendingCount:f.updateStatus?.pending?.length??0,isAuth:P.value}),({advertDismissed:_,showChangelog:g,pendingCount:L,isAuth:O})=>{!O||k.value||$()||_===!1&&(L>0||g||A()||(k.value=!0))},{immediate:!0}),oe(()=>({isAuth:P.value,statusLoaded:f.updateStatus!==null}),({isAuth:_,statusLoaded:g})=>{_||k.value||$()||g&&(h()||(k.value=!0))},{immediate:!0}),oe(D,_=>{_&&(k.value=!0)});function z(){k.value=!1,D.value=!1,P.value?f.dismissAdvert():localStorage.setItem("sf_advert_dismissed_anon","true")}return(_,g)=>(l(),B(ye,{to:"body"},[o(xe,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:R(()=>[s(k)?(l(),i("div",{key:0,class:"fixed inset-0 bg-black/85 backdrop-blur-xl flex items-center justify-center z-[90] p-4",onClick:re(z,["self"])},[o(xe,{"enter-active-class":"transition-all duration-600 ease-out","enter-from-class":"opacity-0 scale-90 translate-y-6","enter-to-class":"opacity-100 scale-100 translate-y-0","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:R(()=>[s(k)?(l(),i("div",js,[g[9]||(g[9]=e("div",{class:"absolute inset-0 bg-gradient-to-br from-[#050505] via-[#0a0a0a] to-[#030803]"},null,-1)),g[10]||(g[10]=e("div",{class:"absolute -top-32 -left-32 w-96 h-96 rounded-full blur-[120px] pointer-events-none wx-pulse",style:{background:"radial-gradient(circle, rgba(124,252,0,0.25) 0%, transparent 70%)"}},null,-1)),g[11]||(g[11]=e("div",{class:"absolute -bottom-40 -right-32 w-[500px] h-[500px] rounded-full blur-[150px] pointer-events-none wx-pulse-delay",style:{background:"radial-gradient(circle, rgba(124,252,0,0.15) 0%, rgba(16,185,129,0.08) 50%, transparent 70%)"}},null,-1)),g[12]||(g[12]=e("div",{class:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-80 h-80 rounded-full blur-[100px] pointer-events-none wx-breathe",style:{background:"radial-gradient(circle, rgba(124,252,0,0.08) 0%, transparent 60%)"}},null,-1)),g[13]||(g[13]=e("div",{class:"absolute top-0 left-1/4 w-1/2 h-px pointer-events-none",style:{background:"linear-gradient(90deg, transparent, rgba(124,252,0,0.6), transparent)","box-shadow":"0 0 20px rgba(124,252,0,0.3), 0 0 60px rgba(124,252,0,0.1)"}},null,-1)),g[14]||(g[14]=e("div",{class:"absolute inset-0 pointer-events-none wx-hex-grid opacity-[0.04]"},null,-1)),g[15]||(g[15]=e("div",{class:"absolute inset-0 pointer-events-none overflow-hidden wx-scanline"},null,-1)),g[16]||(g[16]=e("div",{class:"absolute inset-0 pointer-events-none overflow-hidden"},[e("div",{class:"wx-particle wx-p-lg",style:{left:"8%",top:"12%"}}),e("div",{class:"wx-particle wx-p-md",style:{left:"22%",top:"8%","animation-delay":"0.4s"}}),e("div",{class:"wx-particle wx-p-sm",style:{left:"35%",top:"18%","animation-delay":"1.1s"}}),e("div",{class:"wx-particle wx-p-lg",style:{left:"50%",top:"5%","animation-delay":"0.7s"}}),e("div",{class:"wx-particle wx-p-md",style:{left:"68%",top:"14%","animation-delay":"2.0s"}}),e("div",{class:"wx-particle wx-p-sm",style:{left:"82%",top:"10%","animation-delay":"1.5s"}}),e("div",{class:"wx-particle wx-p-lg",style:{left:"92%",top:"22%","animation-delay":"0.3s"}}),e("div",{class:"wx-particle wx-p-md",style:{left:"12%",top:"40%","animation-delay":"2.5s"}}),e("div",{class:"wx-particle wx-p-sm",style:{left:"5%",top:"55%","animation-delay":"1.8s"}}),e("div",{class:"wx-particle wx-p-lg",style:{left:"88%",top:"45%","animation-delay":"0.9s"}}),e("div",{class:"wx-particle wx-p-md",style:{left:"95%",top:"60%","animation-delay":"3.2s"}}),e("div",{class:"wx-particle wx-p-sm",style:{left:"75%",top:"52%","animation-delay":"1.3s"}}),e("div",{class:"wx-particle wx-p-lg",style:{left:"18%",top:"72%","animation-delay":"2.8s"}}),e("div",{class:"wx-particle wx-p-md",style:{left:"30%",top:"65%","animation-delay":"0.6s"}}),e("div",{class:"wx-particle wx-p-sm",style:{left:"45%",top:"78%","animation-delay":"3.5s"}}),e("div",{class:"wx-particle wx-p-lg",style:{left:"60%",top:"70%","animation-delay":"1.7s"}}),e("div",{class:"wx-particle wx-p-md",style:{left:"78%",top:"82%","animation-delay":"2.3s"}}),e("div",{class:"wx-particle wx-p-sm",style:{left:"90%",top:"75%","animation-delay":"0.2s"}}),e("div",{class:"wx-particle wx-p-lg",style:{left:"10%",top:"88%","animation-delay":"3.0s"}}),e("div",{class:"wx-particle wx-p-md",style:{left:"42%",top:"92%","animation-delay":"1.0s"}}),e("div",{class:"wx-particle wx-p-sm",style:{left:"55%",top:"88%","animation-delay":"2.6s"}}),e("div",{class:"wx-particle wx-p-lg",style:{left:"70%",top:"95%","animation-delay":"0.5s"}})],-1)),g[17]||(g[17]=e("div",{class:"absolute inset-0 rounded-3xl pointer-events-none",style:{"box-shadow":"inset 0 0 1px rgba(124,252,0,0.3), inset 0 0 30px rgba(124,252,0,0.03)"}},null,-1)),e("button",{onClick:z,class:"absolute top-4 right-4 z-20 w-9 h-9 rounded-full flex items-center justify-center backdrop-blur-md bg-white/5 border border-white/10 text-gray-400 hover:text-wx hover:border-wx/30 hover:bg-wx/5 transition-all duration-300 group"},[o(s(Me),{class:"w-5 h-5 group-hover:rotate-90 transition-transform duration-300"})]),e("div",Ls,[g[5]||(g[5]=e("div",{class:"flex justify-center"},[e("div",{class:"wx-badge-glow inline-flex items-center gap-2 px-4 py-1.5 rounded-full border border-wx/20 backdrop-blur-sm"},[e("div",{class:"w-1.5 h-1.5 rounded-full bg-wx wx-blink"}),e("span",{class:"text-xs font-bold tracking-[0.3em] uppercase wx-text-bright"},"Molecular Engineering")])],-1)),g[6]||(g[6]=e("div",{class:"text-center space-y-3"},[e("h2",{class:"text-3xl sm:text-5xl md:text-6xl font-black text-white leading-none tracking-tight"},[r(" HEY "),e("span",{class:"text-wx wx-glow-strong"},"GROWER!")]),e("div",{class:"wx-line-accent mx-auto"})],-1)),g[7]||(g[7]=e("div",{class:"text-center"},[e("h3",{class:"text-xl sm:text-2xl md:text-3xl font-extrabold text-white/95 leading-tight"},[r(" Want to join the"),e("br"),e("span",{class:"text-wx wx-glow"},"WEEDLIX"),r(" trials? ")])],-1)),e("div",Os,[e("div",Hs,[e("div",Es,[o(s(Oe),{class:"w-5 h-5 text-wx"})]),g[0]||(g[0]=e("div",null,[e("p",{class:"text-base text-gray-200 leading-relaxed"},[r(" Years of "),e("span",{class:"text-wx font-bold"},"biotechnology R&D"),r(" have produced a next-gen Bloom stimulant that outperforms Bloombastic and every competitor on the market. ")])],-1))]),e("div",Ms,[e("div",Us,[o(s($t),{class:"w-5 h-5 text-emerald-400"})]),g[1]||(g[1]=e("div",null,[e("p",{class:"text-base text-gray-200 leading-relaxed"},[r(" We're seeking "),e("span",{class:"text-emerald-400 font-bold"},"professional growers"),r(" to test the product and share honest feedback before market launch. ")])],-1))])]),e("a",Ws,[g[3]||(g[3]=e("div",{class:"absolute inset-0 rounded-2xl bg-gradient-to-r from-wx via-emerald-400 to-wx bg-[length:300%_100%] wx-shimmer"},null,-1)),g[4]||(g[4]=e("div",{class:"absolute inset-[1.5px] rounded-[14.5px] backdrop-blur-xl bg-[#080808]/90 transition-all duration-300 group-hover:bg-[#080808]/60"},null,-1)),e("span",Vs,[g[2]||(g[2]=e("span",{class:"tracking-wide"},"Visit WEEDLIX.com",-1)),o(s(_t),{class:"w-5 h-5 opacity-60 group-hover:opacity-100 group-hover:translate-x-0.5 group-hover:-translate-y-0.5 transition-all duration-300"})])]),g[8]||(g[8]=e("p",{class:"text-center text-sm text-gray-500"}," Apply through the contact form on our website to join the trials ",-1))])])):b("",!0)]),_:1})])):b("",!0)]),_:1})]))}}),qs=Object.assign(he(Fs,[["__scopeId","data-v-c9a7becf"]]),{__name:"WeedlixAdvertModal"}),zs={key:0,class:"bg-gradient-to-br from-gray-800/95 to-gray-900/95 rounded-2xl border border-gray-700/50 shadow-2xl shadow-black/50 w-full max-w-3xl max-h-[90vh] flex flex-col overflow-hidden relative"},Gs={class:"px-6 pt-5 pb-4 border-b border-gray-700/30 relative flex items-center justify-between"},Ys={class:"flex items-center gap-3"},Bs={class:"w-10 h-10 rounded-xl bg-gradient-to-br from-spider-green-500/30 to-emerald-600/20 shadow-lg shadow-spider-green-500/20 flex items-center justify-center"},Zs={class:"px-6 pt-4 border-b border-gray-700/30"},Xs={class:"flex gap-1"},Qs=["onClick"],Ks={class:"flex-1 overflow-y-auto px-6 py-5 scrollbar-thin"},Js={key:0,class:"space-y-6"},er={class:"text-sm font-semibold text-white mb-3 flex items-center gap-2"},tr={class:"grid grid-cols-2 sm:grid-cols-4 gap-2"},sr={class:"text-2xl mb-1"},rr={class:"text-xs font-medium text-gray-300"},or={class:"text-[10px] text-gray-500"},ar={class:"bg-gradient-to-r from-blue-900/20 to-transparent border border-blue-700/30 rounded-xl p-4"},lr={class:"text-sm font-semibold text-blue-400 mb-2 flex items-center gap-2"},nr={class:"text-sm text-gray-300 space-y-1.5"},ir={class:"flex items-start gap-2"},dr={class:"flex items-start gap-2"},pr={class:"flex items-start gap-2"},ur={class:"text-sm font-semibold text-white mb-4 flex items-center gap-2"},gr={class:"space-y-4"},xr={class:"relative pl-8"},cr={class:"bg-gray-800/50 border border-gray-700/40 rounded-xl p-4"},mr={class:"relative"},yr={class:"relative pl-8"},br={class:"bg-gray-800/50 border border-gray-700/40 rounded-xl p-4"},fr={class:"text-xs text-gray-400"},vr={class:"relative pl-8"},hr={class:"bg-gray-800/50 border border-gray-700/40 rounded-xl p-4"},wr={class:"bg-gray-900/80 rounded-lg px-3 py-1.5 text-xs text-spider-green-400 font-mono"},kr={class:"bg-gradient-to-r from-spider-green-900/20 to-transparent border border-spider-green-700/30 rounded-xl p-4 flex items-start gap-3"},_r={class:"bg-gradient-to-r from-yellow-900/20 to-transparent border border-yellow-700/30 rounded-xl p-4 flex items-start gap-3"},$r={class:"text-sm text-gray-300 mt-2 space-y-1.5"},Pr={class:"flex items-start gap-2"},Sr={class:"flex items-start gap-2"},Cr={class:"flex items-start gap-2"},Tr={class:"text-sm text-gray-400 mt-3"},Rr={key:1,class:"space-y-6"},Dr={class:"bg-gradient-to-r from-yellow-900/20 to-transparent border border-yellow-700/30 rounded-xl p-4"},Ar={class:"text-sm font-semibold text-yellow-400 mb-2 flex items-center gap-2"},Nr={class:"text-sm font-semibold text-white mb-3 flex items-center gap-2"},Ir={class:"bg-gray-800/50 border border-gray-700/40 rounded-xl p-4"},jr={class:"flex items-center justify-center gap-2 text-xs text-gray-400 flex-wrap"},Lr={class:"relative pl-8"},Or={class:"flex flex-wrap gap-2 mb-4"},Hr=["onClick"],Er={key:0,class:"space-y-3"},Mr={key:1,class:"space-y-3"},Ur={key:2,class:"space-y-3"},Wr={class:"bg-gray-800/50 border border-gray-700/40 rounded-xl p-4"},Vr={class:"relative"},Fr={key:3,class:"space-y-3"},qr={class:"bg-gray-800/50 border border-gray-700/40 rounded-xl p-4"},zr={class:"relative"},Gr={class:"relative pl-8"},Yr={class:"bg-gray-800/50 border border-gray-700/40 rounded-xl p-4"},Br={class:"text-sm text-gray-300 mb-3"},Zr={class:"text-purple-400"},Xr={class:"bg-gray-900/50 rounded-lg p-3 space-y-2 text-sm text-gray-300"},Qr={class:"grid grid-cols-3 gap-2 text-center"},Kr={class:"bg-gray-800/50 rounded-lg p-2"},Jr={class:"text-purple-400 font-medium"},eo={class:"bg-gray-800/50 rounded-lg p-2"},to={class:"text-purple-400 font-medium"},so={class:"text-sm text-gray-500 mt-2"},ro={class:"bg-gradient-to-r from-spider-green-900/20 to-transparent border border-spider-green-700/30 rounded-xl p-4"},oo={class:"text-sm font-semibold text-spider-green-400 mb-2 flex items-center gap-2"},ao={key:2,class:"space-y-6"},lo={class:"bg-gradient-to-r from-blue-900/20 to-transparent border border-blue-700/30 rounded-xl p-4"},no={class:"text-sm font-semibold text-blue-400 mb-2 flex items-center gap-2"},io={class:"text-sm text-gray-300 space-y-1.5"},po={class:"flex items-start gap-2"},uo={class:"text-gray-500"},go={class:"flex items-start gap-2"},xo={class:"flex items-start gap-2"},co={class:"bg-gradient-to-r from-yellow-900/20 to-transparent border border-yellow-700/30 rounded-xl p-4"},mo={class:"text-sm font-semibold text-yellow-400 mb-2 flex items-center gap-2"},yo={class:"bg-gradient-to-r from-orange-900/20 to-transparent border border-orange-700/30 rounded-xl p-4"},bo={class:"text-sm font-semibold text-orange-400 mb-2 flex items-center gap-2"},fo={class:"bg-gradient-to-r from-spider-green-900/20 to-transparent border border-spider-green-700/30 rounded-xl p-4"},vo={class:"text-base font-semibold text-spider-green-400 mb-3 flex items-center gap-2"},ho={class:"text-base text-gray-500 mt-2"},wo={class:"text-sm font-semibold text-white mb-3 flex items-center gap-2"},ko={class:"flex flex-wrap gap-2 mb-4"},_o=["onClick"],$o={key:0,class:"space-y-4"},Po={class:"bg-gray-800/50 border border-gray-700/40 rounded-xl p-4"},So={class:"relative"},Co={class:"bg-gray-900/80 rounded-lg p-3 text-xs text-spider-green-400 font-mono overflow-x-auto whitespace-pre"},To={key:1,class:"space-y-4"},Ro={class:"bg-gray-800/50 border border-gray-700/40 rounded-xl p-4"},Do={class:"relative"},Ao={class:"bg-gray-900/80 rounded-lg p-3 text-xs text-spider-green-400 font-mono overflow-x-auto whitespace-pre"},No={key:2,class:"space-y-4"},Io={class:"bg-gray-800/50 border border-gray-700/40 rounded-xl p-4"},jo={class:"relative"},Lo={class:"bg-gray-900/80 rounded-lg p-3 text-xs text-spider-green-400 font-mono overflow-x-auto whitespace-pre"},Oo={key:3,class:"space-y-4"},Ho={class:"bg-gray-800/50 border border-gray-700/40 rounded-xl p-4"},Eo={class:"relative"},Mo={class:"bg-gray-900/80 rounded-lg p-3 text-xs text-spider-green-400 font-mono overflow-x-auto whitespace-pre"},Uo={key:4,class:"space-y-4"},Wo={class:"bg-gray-800/50 border border-gray-700/40 rounded-xl p-4"},Vo={class:"relative"},Fo={class:"bg-gray-900/80 rounded-lg p-3 text-xs text-spider-green-400 font-mono overflow-x-auto whitespace-pre"},qo={class:"bg-gradient-to-r from-purple-900/20 to-transparent border border-purple-700/30 rounded-xl p-4"},zo={class:"text-sm font-semibold text-purple-400 mb-2 flex items-center gap-2"},Go={class:"text-base text-gray-300 mb-3"},Yo={class:"text-base text-gray-300 space-y-1 mb-4"},Bo={class:"flex items-start gap-2"},Zo={class:"flex items-start gap-2"},Xo={class:"flex items-start gap-2"},Qo={class:"flex items-start gap-2"},Ko={class:"text-base text-gray-300 mb-3"},Jo={class:"text-base text-gray-300 space-y-1"},ea={class:"flex items-start gap-2"},ta={class:"flex items-start gap-2"},sa={class:"flex items-start gap-2"},ra={class:"flex items-start gap-2"},oa={class:"flex items-start gap-2"},aa={class:"flex items-start gap-2"},la={class:"flex items-start gap-2"},na={class:"bg-gradient-to-r from-spider-green-900/20 to-transparent border border-spider-green-700/30 rounded-xl p-4"},ia={class:"text-sm font-semibold text-spider-green-400 mb-2 flex items-center gap-2"},da={key:3,class:"space-y-6"},pa={class:"bg-gradient-to-r from-yellow-900/20 to-transparent border border-yellow-700/30 rounded-xl p-4"},ua={class:"text-sm font-semibold text-yellow-400 mb-2 flex items-center gap-2"},ga={class:"text-sm text-gray-300 space-y-1.5"},xa={class:"flex items-start gap-2"},ca={class:"flex items-start gap-2"},ma={class:"flex items-start gap-2"},ya={class:"flex items-start gap-2"},ba={class:"relative pl-8"},fa={class:"bg-gray-800/50 border border-gray-700/40 rounded-xl p-4"},va={class:"grid grid-cols-3 gap-2"},ha={key:0,class:"relative pl-8"},wa={class:"bg-gray-800/50 border border-gray-700/40 rounded-xl p-4"},ka={class:"relative"},_a={class:"relative mt-2"},$a={class:"bg-gray-900/80 rounded-lg p-3 text-sm text-spider-green-400 font-mono overflow-x-auto whitespace-pre"},Pa={class:"flex items-center justify-between mb-2"},Sa={key:0,class:"text-base text-gray-400 font-mono"},Ca={key:0,class:"space-y-2"},Ta=["disabled"],Ra={key:1,class:"space-y-2"},Da={class:"grid grid-cols-3 gap-2"},Aa=["disabled"],Na={key:2,class:"flex items-center gap-2"},Ia={key:1,class:"relative pl-8"},ja={class:"bg-gray-800/50 border border-gray-700/40 rounded-xl p-4"},La={key:0,class:"space-y-3"},Oa={class:"flex gap-2"},Ha=["disabled"],Ea={key:1,class:"space-y-3"},Ma={class:"grid gap-2"},Ua=["onClick"],Wa={class:"text-base text-white font-medium"},Va={class:"text-base text-gray-500 ml-2"},Fa={key:2,class:"space-y-3"},qa={class:"flex items-center gap-2 text-base text-orange-400"},za={class:"flex items-center gap-2"},Ga={class:"text-base text-gray-300"},Ya={class:"flex items-center gap-3"},Ba=["disabled"],Za={class:"flex items-center gap-2 text-base text-gray-400 cursor-pointer"},Xa=["checked"],Qa={key:3,class:"space-y-3"},Ka={class:"flex items-center gap-2 text-base text-green-400"},Ja={class:"grid gap-2"},el={class:"text-base font-mono text-white"},tl={class:"text-base font-mono text-gray-400"},sl={key:0,class:"ml-auto px-2 py-0.5 bg-orange-500/20 text-orange-400 text-base rounded"},rl={key:1,class:"ml-auto px-2 py-0.5 bg-gray-700/50 text-gray-400 text-base rounded"},ol={class:"flex items-center gap-2 flex-wrap"},al=["disabled"],ll={key:2,class:"relative pl-8"},nl={class:"bg-gray-800/50 border border-gray-700/40 rounded-xl p-4"},il={class:"mt-3 p-3 bg-blue-900/20 border border-blue-700/30 rounded-lg"},dl={class:"text-base text-blue-400"},pl={class:"text-purple-400"},ul={class:"relative pl-8"},gl={class:"bg-gray-800/50 border border-gray-700/40 rounded-xl p-4"},xl={class:"relative"},cl={class:"text-sm text-gray-400 mt-3"},ml={class:"flex items-center justify-between mb-2"},yl={key:0,class:"text-base text-green-400 font-mono flex items-center gap-1"},bl={key:0,class:"space-y-2"},fl=["disabled"],vl={key:1,class:"space-y-2"},hl=["disabled"],wl={key:0,class:"text-base text-yellow-400"},kl={key:2,class:"flex items-center gap-3"},_l={key:0,class:"text-base text-gray-500"},$l={class:"relative pl-8"},Pl={class:"bg-gray-800/50 border border-gray-700/40 rounded-xl p-4"},Sl={class:"relative"},Cl={class:"bg-gray-900/80 rounded-lg p-3 text-sm text-spider-green-400 font-mono overflow-x-auto whitespace-pre"},Tl={key:0,class:"mt-4 p-3 rounded-lg border bg-yellow-900/20 border-yellow-700/30"},Rl={class:"flex items-center justify-between"},Dl=["disabled"],Al={key:1,class:"mt-4 p-3 rounded-lg border bg-green-900/20 border-green-700/30"},Nl={class:"flex items-center gap-2"},Il={class:"text-base text-green-400"},jl={class:"relative pl-8"},Ll={class:"bg-gray-800/50 border border-gray-700/40 rounded-xl p-4"},Ol={class:"grid grid-cols-3 gap-3"},Hl={class:"bg-gray-900/50 rounded-lg p-3 text-center"},El={class:"text-lg font-bold text-purple-400"},Ml={class:"bg-gradient-to-r from-spider-green-900/20 to-transparent border border-spider-green-700/30 rounded-xl p-4 flex items-start gap-3"},Ul={class:"text-sm text-gray-400 mt-1"},Wl={class:"text-spider-green-400"},Vl={key:4,class:"space-y-6"},Fl={class:"bg-gradient-to-r from-purple-900/20 to-transparent border border-purple-700/30 rounded-xl p-4"},ql={class:"text-base font-semibold text-purple-400 mb-2 flex items-center gap-2"},zl={class:"bg-gray-800/50 border border-gray-700/40 rounded-xl p-4"},Gl={class:"flex items-center justify-center gap-2 text-base text-gray-400 flex-wrap"},Yl={class:"text-base font-semibold text-white mb-3 flex items-center gap-2"},Bl={class:"text-base text-gray-400 mb-3"},Zl={class:"text-purple-400"},Xl={class:"text-base font-semibold text-white mb-4 flex items-center gap-2"},Ql={class:"space-y-4"},Kl={class:"relative pl-8"},Jl={class:"bg-gray-800/50 border border-gray-700/40 rounded-xl p-4"},en={class:"text-base text-gray-400 mb-2"},tn={class:"text-yellow-400"},sn={class:"text-base text-gray-400"},rn={class:"text-purple-400"},on={class:"text-purple-400"},an={class:"text-purple-400"},ln={class:"bg-gradient-to-r from-spider-green-900/20 to-transparent border border-spider-green-700/30 rounded-xl p-4 flex items-start gap-3"},nn={class:"text-base text-gray-400 mt-2 space-y-1.5"},dn={class:"flex items-start gap-2"},pn={class:"flex items-start gap-2"},un={class:"flex items-start gap-2"},gn={class:"flex items-start gap-2"},xn={class:"flex items-start gap-2"},cn={class:"px-6 py-4 border-t border-gray-700/30 flex items-center justify-between bg-gray-900/30"},mn={href:"https://discord.gg/wZU6mnY2Sn",target:"_blank",rel:"noopener noreferrer",class:"text-xs text-indigo-400 hover:text-indigo-300 flex items-center gap-1.5 transition-colors"},Qe=`# Download and install No-IP DUC 3
cd /tmp
wget https://dmej8g5cpdyqd.cloudfront.net/downloads/noip-duc_3.3.0.tar.gz
tar xzf noip-duc_3.3.0.tar.gz
sudo cp noip-duc_3.3.0/binaries/noip-duc-linux-amd64 /usr/local/bin/noip-duc
sudo chmod +x /usr/local/bin/noip-duc`,yn=_e({__name:"InstallGuideModal",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(E){const D=$e(),f=I(()=>D.config?.API_PORT||"3000"),P=I(()=>D.config?.RELAY_PORT||"9443"),C=S(D.config?.APP_DOMAIN||""),k=I(()=>C.value||"yourdomain.com"),$=S("install"),h=S("pfsense"),A=S("apache"),z=[{id:"install",label:"Installation",icon:ze},{id:"nat",label:"NAT Config",icon:ke},{id:"proxy",label:"Your Domain",icon:Ie},{id:"ssl",label:"Domain & SSL",icon:fe},{id:"relay",label:"Relay Node",icon:je}],_=[{name:"Ubuntu",arch:"20.04+ / amd64",icon:"ðŸ§"},{name:"Debian",arch:"11+ / amd64",icon:"ðŸŒ€"},{name:"Raspberry Pi",arch:"OS Lite 64-bit",icon:"ðŸ“"},{name:"Proxmox LXC",arch:"Debian/Ubuntu",icon:"ðŸ“¦"}],g=[{id:"pfsense",name:"pfSense / OPNsense"},{id:"mikrotik",name:"MikroTik"},{id:"linux",name:"Linux (iptables)"},{id:"generic",name:"Other Router"}],L=[{id:"apache",name:"Apache"},{id:"nginx",name:"Nginx"},{id:"litespeed",name:"LiteSpeed"},{id:"caddy",name:"Caddy"},{id:"traefik",name:"Traefik"}],O=I(()=>{const u=k.value,t=f.value,n=P.value;return`# Add to /etc/nginx/nginx.conf inside http {} block:
# limit_conn_zone $binary_remote_addr zone=perip:10m;
# limit_conn_zone $server_name zone=perserver:10m;

server {
    listen 80;
    server_name ${u};
    return 301 https://$server_name$request_uri;
}

server {
    listen 443 ssl http2;
    server_name ${u};

    ssl_certificate /etc/letsencrypt/live/${u}/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/${u}/privkey.pem;

    limit_conn perip 1000;
    limit_conn perserver 2000;

    # â”€â”€â”€â”€ Relay Node endpoints â”€â”€â”€â”€
    # IMPORTANT: Do NOT add global CORS headers (add_header
    # Access-Control-Allow-Origin) â€” the relay handles its own
    # CORS. Adding them globally causes double "*, *" headers.

    # Relay WebSocket (onion circuit traffic)
    location /relay {
        proxy_pass http://127.0.0.1:${n}/;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_read_timeout 86400s;
        proxy_send_timeout 86400s;
    }

    # Relay HTTP: public room list
    location /rooms {
        proxy_pass http://127.0.0.1:${n}/rooms;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }

    # Relay HTTP: relay public key
    location /pk {
        proxy_pass http://127.0.0.1:${n}/pk;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }

    # Relay HTTP: peer discovery (gossip)
    location /peers {
        proxy_pass http://127.0.0.1:${n}/peers;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }

    # Relay HTTP: room registration (server-to-server)
    location /register {
        proxy_pass http://127.0.0.1:${n}/register;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }

    # Relay HTTP: room stats
    location /stats {
        proxy_pass http://127.0.0.1:${n}/stats;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }

    # Relay HTTP + WS: join room via token
    location /join {
        proxy_pass http://127.0.0.1:${n}/join;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_read_timeout 86400s;
    }

    # â”€â”€â”€â”€ App endpoints â”€â”€â”€â”€

    # Disable caching for static assets
    location ~ ^/(models|images|sound|fonts|defaults)/ {
        proxy_pass http://127.0.0.1:${t};
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        expires off;
        add_header Cache-Control "no-store, no-cache";
    }

    # WebSocket: real-time sensor data
    location /_ws {
        proxy_pass http://127.0.0.1:${t};
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $host;
        proxy_read_timeout 86400s;
        proxy_send_timeout 86400s;
    }

    # WebSocket: 3D room multiplayer + voice chat
    location /_room3d-ws {
        proxy_pass http://127.0.0.1:${t};
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $host;
        proxy_read_timeout 86400s;
        proxy_send_timeout 86400s;
    }

    # MQTT over WebSocket
    location /mqtt {
        proxy_pass http://127.0.0.1:9001;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $host;
        proxy_read_timeout 86400s;
        proxy_send_timeout 86400s;
    }

    # Default: app
    location / {
        proxy_pass http://127.0.0.1:${t};
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}`}),T=I(()=>{const u=k.value,t=f.value,n=P.value;return`${u} {
    # Disable cache for static assets
    @assets path /data/*
    header @assets Cache-Control "no-store, no-cache"

    # â”€â”€ Relay Node endpoints (port ${n}) â”€â”€
    # WebSocket: onion circuit traffic (strip /relay prefix)
    handle_path /relay* {
        reverse_proxy localhost:${n} {
            header_up X-Forwarded-Proto {scheme}
        }
    }

    # HTTP + WS: join room via token
    handle_path /join* {
        reverse_proxy localhost:${n} {
            header_up X-Forwarded-Proto {scheme}
        }
    }

    # HTTP: public room list, public key, peers, registration, stats
    @relay-http path /rooms /pk /peers /peers/* /register /stats
    reverse_proxy @relay-http localhost:${n}

    # â”€â”€ App endpoints (port ${t}) â”€â”€
    # MQTT over WebSocket
    @mqtt path /mqtt*
    reverse_proxy @mqtt localhost:9001

    # Default: app
    reverse_proxy localhost:${t}
}`}),Z=I(()=>{const u=k.value,t=f.value,n=P.value;return`labels:
  - "traefik.enable=true"
  - "traefik.http.routers.s4r.rule=Host(\`${u}\`)"
  - "traefik.http.routers.s4r.entrypoints=websecure"
  - "traefik.http.routers.s4r.tls.certresolver=letsencrypt"
  - "traefik.http.services.s4r.loadbalancer.server.port=${t}"
  # Disable cache for static assets
  - "traefik.http.middlewares.nocache-assets.headers.customResponseHeaders.Cache-Control=no-store, no-cache"
  - "traefik.http.routers.s4r-assets.rule=Host(\`${u}\`) && PathPrefix(\`/data/\`)"
  - "traefik.http.routers.s4r-assets.middlewares=nocache-assets"
  - "traefik.http.routers.s4r-assets.entrypoints=websecure"
  - "traefik.http.routers.s4r-assets.tls.certresolver=letsencrypt"
  - "traefik.http.routers.s4r-assets.service=s4r"
  # â”€â”€ Relay Node (port ${n}) â”€â”€
  - "traefik.http.services.relay.loadbalancer.server.port=${n}"
  # /relay WebSocket (strip prefix)
  - "traefik.http.routers.relay.rule=Host(\`${u}\`) && PathPrefix(\`/relay\`)"
  - "traefik.http.routers.relay.entrypoints=websecure"
  - "traefik.http.routers.relay.tls.certresolver=letsencrypt"
  - "traefik.http.routers.relay.service=relay"
  - "traefik.http.middlewares.relay-strip.stripprefix.prefixes=/relay"
  - "traefik.http.routers.relay.middlewares=relay-strip"
  # /join (HTTP + WS, strip prefix)
  - "traefik.http.routers.relay-join.rule=Host(\`${u}\`) && PathPrefix(\`/join\`)"
  - "traefik.http.routers.relay-join.entrypoints=websecure"
  - "traefik.http.routers.relay-join.tls.certresolver=letsencrypt"
  - "traefik.http.routers.relay-join.service=relay"
  # /rooms, /pk, /peers, /register, /stats (HTTP, no strip)
  - "traefik.http.routers.relay-api.rule=Host(\`${u}\`) && (PathPrefix(\`/rooms\`) || PathPrefix(\`/pk\`) || PathPrefix(\`/peers\`) || PathPrefix(\`/register\`) || PathPrefix(\`/stats\`))"
  - "traefik.http.routers.relay-api.entrypoints=websecure"
  - "traefik.http.routers.relay-api.tls.certresolver=letsencrypt"
  - "traefik.http.routers.relay-api.service=relay"
  # â”€â”€ MQTT over WebSocket â”€â”€
  - "traefik.http.services.s4r-mqtt.loadbalancer.server.port=9001"
  - "traefik.http.routers.s4r-mqtt.rule=Host(\`${u}\`) && PathPrefix(\`/mqtt\`)"
  - "traefik.http.routers.s4r-mqtt.entrypoints=websecure"
  - "traefik.http.routers.s4r-mqtt.tls.certresolver=letsencrypt"
  - "traefik.http.routers.s4r-mqtt.service=s4r-mqtt"`}),W=I(()=>{const u=k.value,t=f.value,n=P.value,we=u.replace(/\./g,"\\.");return`# ${u} â†’ app port ${t}, relay port ${n}
RewriteEngine On

# â”€â”€ Relay Node endpoints (port ${n}) â”€â”€

# /relay WebSocket (onion circuit traffic)
RewriteCond %{HTTP:Upgrade} =websocket [NC]
RewriteRule ^/relay(.*)$ ws://127.0.0.1:${n}/$1 [P,L]
RewriteRule ^/relay(.*)$ http://127.0.0.1:${n}/$1 [P,L]

# /join â€” room join via token (HTTP + WebSocket)
RewriteCond %{HTTP:Upgrade} =websocket [NC]
RewriteRule ^/join(.*)$ ws://127.0.0.1:${n}/join$1 [P,L]
RewriteRule ^/join(.*)$ http://127.0.0.1:${n}/join$1 [P,L]

# /rooms â€” public room list
RewriteRule ^/rooms$ http://127.0.0.1:${n}/rooms [P,L]

# /pk â€” relay public key
RewriteRule ^/pk$ http://127.0.0.1:${n}/pk [P,L]

# /peers â€” peer discovery (gossip)
RewriteRule ^/peers(.*)$ http://127.0.0.1:${n}/peers$1 [P,L]

# /register â€” room registration (server-to-server)
RewriteRule ^/register$ http://127.0.0.1:${n}/register [P,L]

# /stats â€” relay health stats
RewriteRule ^/stats$ http://127.0.0.1:${n}/stats [P,L]

# â”€â”€ App endpoints (port ${t}) â”€â”€

# WebSocket: real-time sensor data
RewriteCond %{HTTP:Upgrade} =websocket [NC]
RewriteRule ^/_ws(.*)$ ws://127.0.0.1:${t}/_ws$1 [P,L]

# WebSocket: 3D room multiplayer + voice chat
RewriteCond %{HTTP:Upgrade} =websocket [NC]
RewriteRule ^/_room3d-ws(.*)$ ws://127.0.0.1:${t}/_room3d-ws$1 [P,L]

# MQTT over WebSocket
RewriteCond %{HTTP:Upgrade} =websocket [NC]
RewriteRule ^/mqtt(.*)$ ws://127.0.0.1:9001/mqtt$1 [P,L]

# Disable cache for static assets
CacheDisable public /data/

# Normal HTTP traffic â†’ app
RewriteCond %{HTTP_HOST} ^${we} [NC]
RewriteRule (.*) http://127.0.0.1:${t}/$1 [P]`}),G=I(()=>{const u=k.value,t=f.value,n=P.value;return`<VirtualHost *:443>
    ServerName ${u}

    SSLEngine on
    SSLCertificateFile /etc/letsencrypt/live/${u}/fullchain.pem
    SSLCertificateKeyFile /etc/letsencrypt/live/${u}/privkey.pem

    RewriteEngine On

    # Disable caching for static assets
    <LocationMatch "^/data/">
        Header set Cache-Control "no-store, no-cache"
        Header set Pragma "no-cache"
    </LocationMatch>

    # â”€â”€ Relay Node endpoints (port ${n}) â”€â”€

    # /relay WebSocket (onion circuit traffic)
    RewriteCond %{HTTP:Upgrade} =websocket [NC]
    RewriteRule ^/relay(.*)$ ws://127.0.0.1:${n}/$1 [P,L]
    ProxyPass /relay http://127.0.0.1:${n}/
    ProxyPassReverse /relay http://127.0.0.1:${n}/

    # /join â€” room join via token (HTTP + WebSocket)
    RewriteCond %{HTTP:Upgrade} =websocket [NC]
    RewriteRule ^/join(.*)$ ws://127.0.0.1:${n}/join$1 [P,L]
    ProxyPass /join http://127.0.0.1:${n}/join
    ProxyPassReverse /join http://127.0.0.1:${n}/join

    # /rooms â€” public room list
    ProxyPass /rooms http://127.0.0.1:${n}/rooms
    ProxyPassReverse /rooms http://127.0.0.1:${n}/rooms

    # /pk â€” relay public key
    ProxyPass /pk http://127.0.0.1:${n}/pk
    ProxyPassReverse /pk http://127.0.0.1:${n}/pk

    # /peers â€” peer discovery (gossip)
    ProxyPass /peers http://127.0.0.1:${n}/peers
    ProxyPassReverse /peers http://127.0.0.1:${n}/peers

    # /register â€” room registration (server-to-server)
    ProxyPass /register http://127.0.0.1:${n}/register
    ProxyPassReverse /register http://127.0.0.1:${n}/register

    # /stats â€” relay health stats
    ProxyPass /stats http://127.0.0.1:${n}/stats
    ProxyPassReverse /stats http://127.0.0.1:${n}/stats

    # â”€â”€ App endpoints (port ${t}) â”€â”€

    # WebSocket: sensor data + multiplayer
    RewriteCond %{HTTP:Upgrade} =websocket [NC]
    RewriteRule ^/_ws(.*)$ ws://127.0.0.1:${t}/_ws$1 [P,L]
    RewriteCond %{HTTP:Upgrade} =websocket [NC]
    RewriteRule ^/_room3d-ws(.*)$ ws://127.0.0.1:${t}/_room3d-ws$1 [P,L]
    RewriteCond %{HTTP:Upgrade} =websocket [NC]
    RewriteRule ^/mqtt(.*)$ ws://127.0.0.1:9001/mqtt$1 [P,L]

    # Main app
    ProxyPreserveHost On
    ProxyPass / http://127.0.0.1:${t}/
    ProxyPassReverse / http://127.0.0.1:${t}/
    ProxyTimeout 86400

    # Required: mod_proxy mod_proxy_http mod_proxy_wstunnel mod_rewrite mod_headers
</VirtualHost>`}),ae=I(()=>`sudo noip-duc -g ${C.value||"mygrow.ddns.net"} \\
  --username YOUR_NOIP_EMAIL \\
  --password YOUR_NOIP_PASSWORD`),ce=I(()=>`sudo apt install -y certbot python3-certbot-nginx
sudo certbot --nginx -d ${C.value||"mygrow.ddns.net"}`),V=S({installed:!1,running:!1,hostname:""}),X=S(""),ne=S(""),le=S(""),F=S(!1);async function Q(){try{const u=await $fetch("/api/system/ddns");V.value=u,u.hostname&&(X.value=u.hostname)}catch{}}async function be(){await lt(),F.value=!0;try{await $fetch("/api/system/ddns",{method:"POST",body:{action:"install"}}),await Q()}catch(u){alert("Failed to install DUC: "+(u.data?.message||u.message))}finally{F.value=!1}}async function x(){F.value=!0;try{await $fetch("/api/system/ddns",{method:"POST",body:{action:"configure",hostname:X.value,username:ne.value,password:le.value}}),await Q()}catch(u){alert("Failed to configure DUC: "+(u.data?.message||u.message))}finally{F.value=!1}}async function m(){F.value=!0;try{await $fetch("/api/system/ddns",{method:"POST",body:{action:"remove"}}),V.value={installed:!1,running:!1,hostname:""}}catch(u){alert("Failed to remove DUC: "+(u.data?.message||u.message))}finally{F.value=!1}}const p=S({installed:!1,running:!1,configExists:!1,sslDomain:""}),a=S(!1);async function v(){try{const u=await $fetch("/api/system/nginx",{method:"POST",body:{action:"status"}});p.value=u}catch{}}async function N(){await nt(),a.value=!0;try{await $fetch("/api/system/nginx",{method:"POST",body:{action:"install"}}),await v()}catch(u){alert("Failed to install Nginx: "+(u.data?.message||u.message))}finally{a.value=!1}}async function ie(){if(!C.value){alert('Enter your domain in the "Your Domain" tab first');return}a.value=!0;try{await $fetch("/api/system/nginx",{method:"POST",body:{action:"configure",domain:C.value,apiPort:f.value,relayPort:P.value}}),await v()}catch(u){alert("Failed to configure Nginx: "+(u.data?.message||u.message))}finally{a.value=!1}}async function se(){if(!C.value){alert("Enter your domain first");return}a.value=!0;try{await $fetch("/api/system/nginx",{method:"POST",body:{action:"install-ssl",domain:C.value}}),await v()}catch(u){alert("Failed to install SSL: "+(u.data?.message||u.message))}finally{a.value=!1}}const y=S({configured:!1,domain:"",zoneId:"",zoneName:"",proxyEnabled:!0,records:[]}),H=S(""),q=S([]),c=S(!1),Y=S("noip");async function Pe(){try{const u=await $fetch("/api/system/cloudflare");y.value=u,u.configured&&(Y.value="cloudflare")}catch{}}async function Se(){if(H.value){await it(),c.value=!0;try{const u=await $fetch("/api/system/cloudflare",{method:"POST",body:{action:"test-token",apiToken:H.value}});q.value=u.zones||[]}catch(u){alert("Token invalid: "+(u.data?.message||u.message))}finally{c.value=!1}}}async function Ce(u,t){try{await $fetch("/api/system/cloudflare",{method:"POST",body:{action:"select-zone",zoneId:u,zoneName:t}}),y.value.zoneId=u,y.value.zoneName=t}catch{}}async function pe(){if(!C.value){alert("Enter your domain first");return}c.value=!0;try{const u=await $fetch("/api/system/cloudflare",{method:"POST",body:{action:"set-records",domain:C.value,proxied:y.value.proxyEnabled}});y.value.configured=!0,y.value.records=u.records||[],y.value.domain=C.value}catch(u){alert("DNS update failed: "+(u.data?.message||u.message))}finally{c.value=!1}}async function rt(u){try{await $fetch("/api/system/cloudflare",{method:"POST",body:{action:"toggle-proxy",proxied:u}}),y.value.proxyEnabled=u}catch{}}async function ot(){c.value=!0;try{await $fetch("/api/system/cloudflare",{method:"POST",body:{action:"sync"}})}catch(u){alert("Sync failed: "+(u.data?.message||u.message))}finally{c.value=!1}}async function at(){c.value=!0;try{await $fetch("/api/system/cloudflare",{method:"POST",body:{action:"remove"}}),y.value={configured:!1,domain:"",zoneId:"",zoneName:"",proxyEnabled:!0,records:[]},q.value=[],H.value=""}catch(u){alert("Failed to remove: "+(u.data?.message||u.message))}finally{c.value=!1}}const Ue=S(!1),We=S(!1),Ve=S(!1);async function lt(){Ue.value||(Ue.value=!0,await Q())}async function nt(){We.value||(We.value=!0,await v())}async function it(){Ve.value||(Ve.value=!0,await Pe())}function K(u){if(navigator.clipboard?.writeText){navigator.clipboard.writeText(u);return}const t=document.createElement("textarea");t.value=u,t.style.position="fixed",t.style.opacity="0",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}return(u,t)=>(l(),B(ye,{to:"body"},[o(xe,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:R(()=>[E.modelValue?(l(),i("div",{key:0,class:"fixed inset-0 bg-black/70 backdrop-blur-md flex items-center justify-center z-[95] p-4",onClick:t[31]||(t[31]=re(n=>u.$emit("update:modelValue",!1),["self"]))},[o(xe,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 scale-95 translate-y-4","enter-to-class":"opacity-100 scale-100 translate-y-0","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:R(()=>[E.modelValue?(l(),i("div",zs,[t[257]||(t[257]=e("div",{class:"absolute -top-20 -left-20 w-40 h-40 rounded-full blur-3xl pointer-events-none bg-spider-green-500/20"},null,-1)),t[258]||(t[258]=e("div",{class:"absolute -bottom-20 -right-20 w-40 h-40 rounded-full blur-3xl pointer-events-none bg-blue-500/15"},null,-1)),e("div",Gs,[e("div",Ys,[e("div",Bs,[o(s(Ee),{class:"w-5 h-5 text-spider-green-400"})]),t[32]||(t[32]=e("div",null,[e("h3",{class:"text-lg font-semibold text-white"},"How to Install"),e("p",{class:"text-xs text-gray-400"},"Schedule 4 Real â€” Grow Control Platform")],-1))]),e("button",{onClick:t[0]||(t[0]=n=>u.$emit("update:modelValue",!1)),class:"p-2 text-gray-400 hover:text-white hover:bg-gray-700/50 rounded-xl transition-all"},[o(s(Me),{class:"w-5 h-5"})])]),e("div",Zs,[e("div",Xs,[(l(),i(j,null,U(z,n=>e("button",{key:n.id,onClick:we=>$.value=n.id,class:w(["px-4 py-2.5 text-sm font-medium rounded-t-xl transition-all flex items-center gap-2",s($)===n.id?"bg-gray-700/50 text-white border-t border-x border-gray-600/50 -mb-px":"text-gray-400 hover:text-white hover:bg-gray-800/50"])},[(l(),B(ut(n.icon),{class:"w-4 h-4"})),r(" "+d(n.label),1)],10,Qs)),64))])]),e("div",Ks,[s($)==="install"?(l(),i("div",Js,[e("div",null,[e("h4",er,[o(s(ft),{class:"w-4 h-4 text-spider-green-400"}),t[33]||(t[33]=r(" Supported Operating Systems ",-1))]),e("div",tr,[(l(),i(j,null,U(_,n=>e("div",{key:n.name,class:"bg-gradient-to-r from-gray-700/40 to-gray-800/30 border border-gray-700/40 rounded-xl p-3 text-center"},[e("div",sr,d(n.icon),1),e("p",rr,d(n.name),1),e("p",or,d(n.arch),1)])),64))])]),e("div",ar,[e("h4",lr,[o(s(Le),{class:"w-4 h-4"}),t[34]||(t[34]=r(" Requirements ",-1))]),e("ul",nr,[e("li",ir,[o(s(ee),{class:"w-4 h-4 text-spider-green-400 shrink-0 mt-0.5"}),t[35]||(t[35]=r(" Same local network as your Spider Farmer GGS modules ",-1))]),e("li",dr,[o(s(ee),{class:"w-4 h-4 text-spider-green-400 shrink-0 mt-0.5"}),t[36]||(t[36]=r(" Static IP recommended (for NAT configuration) ",-1))]),e("li",pr,[o(s(ee),{class:"w-4 h-4 text-spider-green-400 shrink-0 mt-0.5"}),t[37]||(t[37]=r(" Root/Administrator access for installation ",-1))])])]),e("div",null,[e("h4",ur,[o(s(ze),{class:"w-4 h-4 text-spider-green-400"}),t[38]||(t[38]=r(" Installation Steps ",-1))]),e("div",gr,[e("div",xr,[t[42]||(t[42]=e("div",{class:"absolute left-0 top-0 w-6 h-6 rounded-full bg-spider-green-500 text-white text-xs font-bold flex items-center justify-center"},"1",-1)),e("div",cr,[t[40]||(t[40]=e("h5",{class:"text-sm font-medium text-white mb-2"},"Download and run the installer",-1)),t[41]||(t[41]=e("p",{class:"text-xs text-gray-400 mb-3"},"Open a terminal and run this command:",-1)),e("div",mr,[t[39]||(t[39]=e("pre",{class:"bg-gray-900/80 rounded-lg p-3 text-xs text-spider-green-400 font-mono overflow-x-auto"},"curl -fsSL https://schedule4real.com/dist/install/install.sh | sudo bash",-1)),e("button",{onClick:t[1]||(t[1]=n=>K("curl -fsSL https://schedule4real.com/dist/install/install.sh | sudo bash")),class:"absolute top-2 right-2 p-1.5 text-gray-400 hover:text-white hover:bg-gray-700/50 rounded-lg transition-all",title:"Copy to clipboard"},[o(s(te),{class:"w-4 h-4"})])])])]),t[50]||(t[50]=e("div",{class:"relative pl-8"},[e("div",{class:"absolute left-0 top-0 w-6 h-6 rounded-full bg-spider-green-500 text-white text-xs font-bold flex items-center justify-center"},"2"),e("div",{class:"bg-gray-800/50 border border-gray-700/40 rounded-xl p-4"},[e("h5",{class:"text-sm font-medium text-white mb-2"},"Wait for installation to complete"),e("p",{class:"text-xs text-gray-400"},"The installer will automatically:"),e("ul",{class:"text-xs text-gray-400 mt-2 space-y-1 list-disc list-inside"},[e("li",null,"Install all dependencies (Node.js, Mosquitto, QuestDB)"),e("li",null,"Set up the database and services"),e("li",null,"Configure the MQTT proxy"),e("li",null,"Start all services automatically")])])],-1)),e("div",yr,[t[46]||(t[46]=e("div",{class:"absolute left-0 top-0 w-6 h-6 rounded-full bg-spider-green-500 text-white text-xs font-bold flex items-center justify-center"},"3",-1)),e("div",br,[t[45]||(t[45]=e("h5",{class:"text-sm font-medium text-white mb-2"},"Configure your router (NAT redirect)",-1)),e("p",fr,[t[43]||(t[43]=r("This is required for Spider Farmer modules to communicate through the app. See the ",-1)),e("button",{onClick:t[2]||(t[2]=n=>$.value="nat"),class:"text-spider-green-400 hover:underline"},"NAT Configuration"),t[44]||(t[44]=r(" tab for detailed instructions.",-1))])])]),e("div",vr,[t[49]||(t[49]=e("div",{class:"absolute left-0 top-0 w-6 h-6 rounded-full bg-spider-green-500 text-white text-xs font-bold flex items-center justify-center"},"4",-1)),e("div",hr,[t[47]||(t[47]=e("h5",{class:"text-sm font-medium text-white mb-2"},"Access the web interface",-1)),t[48]||(t[48]=e("p",{class:"text-xs text-gray-400 mb-2"},"Open your browser and navigate to:",-1)),e("code",wr,"http://YOUR_SERVER_IP:"+d(s(f)),1)])])])]),e("div",kr,[o(s(ue),{class:"w-5 h-5 text-spider-green-400 shrink-0 mt-0.5"}),t[51]||(t[51]=e("div",null,[e("p",{class:"text-sm font-medium text-spider-green-400"},"That's it!"),e("p",{class:"text-xs text-gray-400 mt-1"},"Once the NAT is configured, your Spider Farmer modules will automatically connect through the app and you'll have full local control.")],-1))]),e("div",_r,[o(s(fe),{class:"w-5 h-5 text-yellow-400 shrink-0 mt-0.5"}),e("div",null,[t[61]||(t[61]=e("p",{class:"text-sm font-semibold text-yellow-400"},"SSL recommended for full functionality",-1)),t[62]||(t[62]=e("p",{class:"text-sm text-gray-300 mt-2"}," Some features require HTTPS (a domain with SSL certificate): ",-1)),e("ul",$r,[e("li",Pr,[o(s(M),{class:"w-4 h-4 text-yellow-400 shrink-0 mt-0.5"}),t[52]||(t[52]=e("span",null,[e("strong",{class:"text-yellow-400"},"Voice chat"),r(" in 3D rooms (WebRTC requires a secure context)")],-1))]),e("li",Sr,[o(s(M),{class:"w-4 h-4 text-yellow-400 shrink-0 mt-0.5"}),t[53]||(t[53]=e("span",null,[e("strong",{class:"text-yellow-400"},"Asset caching"),r(" for 3D models, images and sounds (Service Worker requires HTTPS)")],-1))]),e("li",Cr,[o(s(M),{class:"w-4 h-4 text-yellow-400 shrink-0 mt-0.5"}),t[54]||(t[54]=e("span",null,[e("strong",{class:"text-yellow-400"},"Remote access"),r(" from outside your home network")],-1))])]),e("p",Tr,[t[55]||(t[55]=r(" You can get a ",-1)),t[56]||(t[56]=e("strong",{class:"text-yellow-400"},"free domain",-1)),t[57]||(t[57]=r(" from ",-1)),t[58]||(t[58]=e("a",{href:"https://www.noip.com/",target:"_blank",rel:"noopener noreferrer",class:"text-yellow-400 hover:text-yellow-300 underline"},"noip.com",-1)),t[59]||(t[59]=r(" and free SSL certificates from Let's Encrypt. See the ",-1)),e("button",{onClick:t[3]||(t[3]=n=>$.value="ssl"),class:"text-yellow-400 hover:underline font-medium"},"Domain & SSL"),t[60]||(t[60]=r(" tab for a step-by-step guide. ",-1))])])])])):b("",!0),s($)==="nat"?(l(),i("div",Rr,[e("div",Dr,[e("h4",Ar,[o(s(Re),{class:"w-4 h-4"}),t[63]||(t[63]=r(" Why is this necessary? ",-1))]),t[64]||(t[64]=e("p",{class:"text-sm text-gray-300"},[r(" Spider Farmer modules connect to "),e("code",{class:"text-yellow-400"},"sf.mqtt.spider-farmer.com:8883"),r(" in China. We need to redirect this traffic to your local server so the app can intercept and control the modules locally. ")],-1))]),e("div",null,[e("h4",Nr,[o(s(ke),{class:"w-4 h-4 text-spider-green-400"}),t[65]||(t[65]=r(" How it works ",-1))]),e("div",Ir,[e("div",jr,[t[66]||(t[66]=e("div",{class:"px-3 py-2 bg-gray-700/50 rounded-lg text-center"},[e("div",{class:"text-lg mb-1"},"ðŸŒ±"),e("div",{class:"text-gray-300 font-medium"},"GGS Module")],-1)),o(s(me),{class:"w-4 h-4 text-gray-500"}),t[67]||(t[67]=e("div",{class:"px-3 py-2 bg-yellow-900/30 border border-yellow-700/30 rounded-lg text-center"},[e("div",{class:"text-lg mb-1"},"ðŸ”€"),e("div",{class:"text-yellow-400 font-medium"},"Router NAT")],-1)),o(s(me),{class:"w-4 h-4 text-gray-500"}),t[68]||(t[68]=e("div",{class:"px-3 py-2 bg-spider-green-900/30 border border-spider-green-700/30 rounded-lg text-center"},[e("div",{class:"text-lg mb-1"},"ðŸ’»"),e("div",{class:"text-spider-green-400 font-medium"},"Your Server")],-1)),o(s(me),{class:"w-4 h-4 text-gray-500"}),t[69]||(t[69]=e("div",{class:"px-3 py-2 bg-gray-700/50 rounded-lg text-center"},[e("div",{class:"text-lg mb-1"},"â˜ï¸"),e("div",{class:"text-gray-300 font-medium"},"Spider Farmer Cloud")],-1))]),t[70]||(t[70]=e("p",{class:"text-xs text-gray-500 text-center mt-3"},"Traffic is intercepted, processed locally, then forwarded to keep the official app working",-1))])]),t[94]||(t[94]=e("div",{class:"relative pl-8"},[e("div",{class:"absolute left-0 top-0 w-6 h-6 rounded-full bg-orange-500 text-white text-xs font-bold flex items-center justify-center"},"1"),e("div",{class:"bg-gradient-to-r from-orange-900/20 to-transparent border border-orange-700/30 rounded-xl p-4"},[e("h4",{class:"text-sm font-semibold text-orange-400 mb-2"}," Assign Static IPs to Modules (DHCP Reservation) "),e("p",{class:"text-sm text-gray-300 mb-3"},[r(" Spider Farmer modules use DHCP and "),e("strong",{class:"text-orange-400"},"cannot be configured with a static IP manually"),r(". You must configure your router to assign a fixed IP to each module using "),e("strong",null,"DHCP Reservation"),r(" (also called Static DHCP or MAC binding). ")]),e("div",{class:"bg-gray-800/50 rounded-lg p-3 space-y-2"},[e("p",{class:"text-xs text-gray-400"},"How to set up DHCP reservation:"),e("ol",{class:"text-xs text-gray-300 space-y-1.5 list-decimal list-inside ml-1"},[e("li",null,"Find your modules' MAC addresses (check router's DHCP leases or module labels)"),e("li",null,[r("In your router, go to "),e("span",{class:"text-orange-400"},"DHCP Settings"),r(" â†’ "),e("span",{class:"text-orange-400"},"Static Leases"),r(" or "),e("span",{class:"text-orange-400"},"Address Reservation")]),e("li",null,"Add each module's MAC address and assign a fixed IP (e.g., 192.168.1.50, 192.168.1.51)"),e("li",null,"Restart the modules to apply the new IP addresses")])]),e("p",{class:"text-xs text-gray-500 mt-2"}," This ensures the NAT rules always work correctly, as the modules will keep the same IP addresses. ")])],-1)),e("div",Lr,[t[78]||(t[78]=e("div",{class:"absolute left-0 top-0 w-6 h-6 rounded-full bg-spider-green-500 text-white text-xs font-bold flex items-center justify-center"},"2",-1)),t[79]||(t[79]=e("h4",{class:"text-sm font-semibold text-white mb-3"}," Configure NAT Port Redirect ",-1)),e("div",Or,[(l(),i(j,null,U(g,n=>e("button",{key:n.id,onClick:we=>h.value=n.id,class:w(["px-3 py-2 text-xs font-medium rounded-lg transition-all",s(h)===n.id?"bg-spider-green-500 text-white shadow-lg shadow-spider-green-500/25":"bg-gray-700/50 text-gray-400 hover:bg-gray-700 hover:text-white"])},d(n.name),11,Hr)),64))]),s(h)==="pfsense"?(l(),i("div",Er,[...t[71]||(t[71]=[e("div",{class:"bg-gray-800/50 border border-gray-700/40 rounded-xl p-4"},[e("p",{class:"text-xs text-gray-500 mb-3"},"Works the same on both pfSense and OPNsense"),e("ol",{class:"text-sm text-gray-300 space-y-3 list-decimal list-inside"},[e("li",null,[r("Go to "),e("span",{class:"text-spider-green-400 font-mono"},"Firewall â†’ NAT â†’ Port Forward")]),e("li",null,[r("Click "),e("span",{class:"text-spider-green-400"},"+ Add")]),e("li",null,[r("Configure: "),e("ul",{class:"ml-6 mt-2 space-y-1 text-xs text-gray-400 list-disc list-inside"},[e("li",null,[e("strong",{class:"text-gray-300"},"Interface:"),r(" LAN")]),e("li",null,[e("strong",{class:"text-gray-300"},"Protocol:"),r(" TCP")]),e("li",null,[e("strong",{class:"text-gray-300"},"Destination:"),r(" Any")]),e("li",null,[e("strong",{class:"text-gray-300"},"Destination port:"),r(" 8883")]),e("li",null,[e("strong",{class:"text-gray-300"},"Redirect target IP:"),r(),e("code",{class:"text-yellow-400"},"YOUR_SERVER_IP")]),e("li",null,[e("strong",{class:"text-gray-300"},"Redirect target port:"),r(" 8883")])])]),e("li",null,"Save and apply changes")])],-1)])])):b("",!0),s(h)==="generic"?(l(),i("div",Mr,[...t[72]||(t[72]=[e("div",{class:"bg-gray-800/50 border border-gray-700/40 rounded-xl p-4"},[e("p",{class:"text-sm text-gray-300 mb-3"},"Look for these settings in your router:"),e("ul",{class:"text-sm text-gray-300 space-y-2 list-disc list-inside"},[e("li",null,[e("strong",{class:"text-white"},"NAT"),r(", "),e("strong",{class:"text-white"},"Port Forwarding"),r(", or "),e("strong",{class:"text-white"},"Virtual Server")]),e("li",null,[r("Create a rule that redirects "),e("strong",{class:"text-yellow-400"},"outgoing traffic to port 8883"),r(" to your server IP")]),e("li",null,[r("This is different from standard port forwarding - you need to intercept "),e("em",null,"outgoing"),r(" traffic, not incoming")])]),e("div",{class:"mt-4 p-3 bg-red-900/20 border border-red-700/30 rounded-lg"},[e("p",{class:"text-xs text-red-400"},[e("strong",null,"Note:"),r(" Many consumer routers don't support this type of NAT redirect. Consider using pfSense, OPNsense, or a Linux-based router. ")])])],-1)])])):b("",!0),s(h)==="mikrotik"?(l(),i("div",Ur,[e("div",Wr,[t[74]||(t[74]=e("p",{class:"text-sm text-gray-300 mb-3"},"Run in terminal or Winbox:",-1)),e("div",Vr,[t[73]||(t[73]=e("pre",{class:"bg-gray-900/80 rounded-lg p-3 text-xs text-spider-green-400 font-mono overflow-x-auto whitespace-pre-wrap"},"/ip firewall nat add chain=dstnat protocol=tcp dst-port=8883 action=dst-nat to-addresses=YOUR_SERVER_IP to-ports=8883",-1)),e("button",{onClick:t[4]||(t[4]=n=>K("/ip firewall nat add chain=dstnat protocol=tcp dst-port=8883 action=dst-nat to-addresses=YOUR_SERVER_IP to-ports=8883")),class:"absolute top-2 right-2 p-1.5 text-gray-400 hover:text-white hover:bg-gray-700/50 rounded-lg transition-all"},[o(s(te),{class:"w-4 h-4"})])])])])):b("",!0),s(h)==="linux"?(l(),i("div",Fr,[e("div",qr,[t[76]||(t[76]=e("p",{class:"text-sm text-gray-300 mb-3"},"Run as root:",-1)),e("div",zr,[t[75]||(t[75]=e("pre",{class:"bg-gray-900/80 rounded-lg p-3 text-xs text-spider-green-400 font-mono overflow-x-auto whitespace-pre-wrap"},`iptables -t nat -A PREROUTING -p tcp --dport 8883 -j DNAT --to-destination YOUR_SERVER_IP:8883
iptables -t nat -A POSTROUTING -j MASQUERADE`,-1)),e("button",{onClick:t[5]||(t[5]=n=>K(`iptables -t nat -A PREROUTING -p tcp --dport 8883 -j DNAT --to-destination YOUR_SERVER_IP:8883
iptables -t nat -A POSTROUTING -j MASQUERADE`)),class:"absolute top-2 right-2 p-1.5 text-gray-400 hover:text-white hover:bg-gray-700/50 rounded-lg transition-all"},[o(s(te),{class:"w-4 h-4"})])]),t[77]||(t[77]=e("p",{class:"text-xs text-gray-500 mt-2"},[r("Make sure to save with "),e("code",{class:"text-gray-400"},"iptables-save"),r(" for persistence")],-1))])])):b("",!0)]),e("div",Gr,[t[91]||(t[91]=e("div",{class:"absolute left-0 top-0 w-6 h-6 rounded-full bg-purple-500 text-white text-xs font-bold flex items-center justify-center"},"3",-1)),e("div",Yr,[t[90]||(t[90]=e("h4",{class:"text-sm font-semibold text-purple-400 mb-2"}," Port Forwarding for Relay Node (optional) ",-1)),e("p",Br,[t[80]||(t[80]=r(" If you enable the Public Relay Node and ",-1)),t[81]||(t[81]=e("strong",{class:"text-purple-400"},"don't use a reverse proxy with a domain",-1)),t[82]||(t[82]=r(", you need to forward port ",-1)),e("code",Zr,d(s(P)),1),t[83]||(t[83]=r(" from your router to your server. This is standard port forwarding (not NAT redirect like port 8883 above). ",-1))]),e("div",Xr,[t[87]||(t[87]=e("p",{class:"text-gray-400"},"In your router's Port Forwarding settings, add:",-1)),e("div",Qr,[t[86]||(t[86]=e("div",{class:"bg-gray-800/50 rounded-lg p-2"},[e("div",{class:"text-gray-500 text-sm"},"Protocol"),e("div",{class:"text-white font-medium"},"TCP")],-1)),e("div",Kr,[t[84]||(t[84]=e("div",{class:"text-gray-500 text-sm"},"External Port",-1)),e("div",Jr,d(s(P)),1)]),e("div",eo,[t[85]||(t[85]=e("div",{class:"text-gray-500 text-sm"},"Internal Port",-1)),e("div",to,d(s(P)),1)])])]),e("p",so,[t[88]||(t[88]=r(" If you use a domain with a reverse proxy (Nginx, Caddy, etc.), skip this â€” the proxy handles it through ports 80/443. See the ",-1)),e("button",{onClick:t[6]||(t[6]=n=>$.value="proxy"),class:"text-purple-400 hover:underline"},"Your Domain"),t[89]||(t[89]=r(" tab. ",-1))])])]),e("div",ro,[e("h4",oo,[o(s(ue),{class:"w-4 h-4"}),t[92]||(t[92]=r(" How to verify it's working ",-1))]),t[93]||(t[93]=e("p",{class:"text-sm text-gray-300"}," After configuring NAT, restart your Spider Farmer modules (unplug and plug back). Within a minute, you should see sensor data appearing in the Dashboard. ",-1))])])):b("",!0),s($)==="proxy"?(l(),i("div",ao,[e("div",lo,[e("h4",no,[o(s(Le),{class:"w-4 h-4"}),t[95]||(t[95]=r(" What is this for? ",-1))]),t[101]||(t[101]=e("p",{class:"text-sm text-gray-300 mb-3"},[r(" A proxy lets you access the app using a custom domain name (like "),e("code",{class:"text-blue-400"},"mydomain.com"),r(") instead of typing the IP address and port. ")],-1)),e("ul",io,[e("li",po,[o(s(M),{class:"w-4 h-4 text-blue-400 shrink-0 mt-0.5"}),t[96]||(t[96]=r(" Easier to remember: ",-1)),t[97]||(t[97]=e("code",{class:"text-blue-400"},"mydomain.com",-1)),t[98]||(t[98]=r(" vs ",-1)),e("code",uo,"192.168.1.100:"+d(s(f)),1)]),e("li",go,[o(s(M),{class:"w-4 h-4 text-blue-400 shrink-0 mt-0.5"}),t[99]||(t[99]=r(" HTTPS encryption for secure access ",-1))]),e("li",xo,[o(s(M),{class:"w-4 h-4 text-blue-400 shrink-0 mt-0.5"}),t[100]||(t[100]=r(" Access from outside your home network (optional) ",-1))])])]),e("div",co,[e("h4",mo,[o(s(Re),{class:"w-4 h-4"}),t[102]||(t[102]=r(" Important: Where should the proxy be? ",-1))]),t[103]||(t[103]=e("p",{class:"text-sm text-gray-300 mb-3"}," The proxy server must be able to reach the app. This means it should be: ",-1)),t[104]||(t[104]=e("div",{class:"space-y-3"},[e("div",{class:"p-3 rounded-lg bg-gray-800/50 border border-gray-700/40"},[e("p",{class:"text-xs font-semibold text-spider-green-400 mb-1"},"Option A: Same machine (Recommended)"),e("p",{class:"text-xs text-gray-400"},"Install the proxy on the same server where the app is running. Simplest setup.")]),e("div",{class:"p-3 rounded-lg bg-gray-800/50 border border-gray-700/40"},[e("p",{class:"text-xs font-semibold text-spider-green-400 mb-1"},"Option B: Same local network"),e("p",{class:"text-xs text-gray-400"},"A different machine on your home/office network (e.g., a NAS or another server).")])],-1))]),e("div",yo,[e("h4",bo,[o(s(Re),{class:"w-4 h-4"}),t[105]||(t[105]=r(" Want to access from outside your network? ",-1))]),t[106]||(t[106]=e("p",{class:"text-sm text-gray-300 mb-3"}," If you want to access your grow room from anywhere (phone on mobile data, work, etc.), you'll need: ",-1)),t[107]||(t[107]=e("div",{class:"space-y-2 text-xs text-gray-300"},[e("div",{class:"flex items-start gap-2"},[e("span",{class:"w-5 h-5 rounded-full bg-orange-500/30 text-orange-400 text-[10px] font-bold flex items-center justify-center shrink-0"},"1"),e("div",null,[e("strong",{class:"text-orange-400"},"Dynamic DNS service"),e("p",{class:"text-gray-400 mt-0.5"},"Your home internet likely has a changing IP address. Services like No-IP, DuckDNS, or Cloudflare give you a domain that always points to your home IP.")])]),e("div",{class:"flex items-start gap-2"},[e("span",{class:"w-5 h-5 rounded-full bg-orange-500/30 text-orange-400 text-[10px] font-bold flex items-center justify-center shrink-0"},"2"),e("div",null,[e("strong",{class:"text-orange-400"},"SSL certificate (HTTPS)"),e("p",{class:"text-gray-400 mt-0.5"},"Required for secure access over the internet. Let's Encrypt provides free certificates. Caddy handles this automatically.")])]),e("div",{class:"flex items-start gap-2"},[e("span",{class:"w-5 h-5 rounded-full bg-orange-500/30 text-orange-400 text-[10px] font-bold flex items-center justify-center shrink-0"},"3"),e("div",null,[e("strong",{class:"text-orange-400"},"Port forwarding on your router"),e("p",{class:"text-gray-400 mt-0.5"},"Forward ports 80 and 443 from your router to the proxy server.")])])],-1))]),e("div",fo,[e("h4",vo,[o(s(Ie),{class:"w-4 h-4"}),t[108]||(t[108]=r(" Your Domain ",-1))]),t[111]||(t[111]=e("p",{class:"text-base text-gray-400 mb-3"},[r(" Enter your domain to generate ready-to-use proxy configurations below. The relay endpoints ("),e("code",{class:"text-purple-400"},"/relay"),r(", "),e("code",{class:"text-purple-400"},"/rooms"),r(", "),e("code",{class:"text-purple-400"},"/join"),r(", etc.) are included in all configs. ")],-1)),e("div",null,[de(e("input",{"onUpdate:modelValue":t[7]||(t[7]=n=>ve(C)?C.value=n:null),type:"text",class:"w-full bg-gray-900/60 border border-gray-600/50 rounded-lg px-3 py-2 text-base text-white focus:border-spider-green-500/50 focus:outline-none",placeholder:"mydomain.com"},null,512),[[ge,s(C)]])]),e("p",ho,[t[109]||(t[109]=r(" Don't have a domain? See the ",-1)),e("button",{onClick:t[8]||(t[8]=n=>$.value="ssl"),class:"text-spider-green-400 hover:underline"},"Domain & SSL"),t[110]||(t[110]=r(" tab for how to get a free one. ",-1))])]),e("div",null,[e("h4",wo,[o(s(je),{class:"w-4 h-4 text-spider-green-400"}),t[112]||(t[112]=r(" Choose your proxy software ",-1))]),e("div",ko,[(l(),i(j,null,U(L,n=>e("button",{key:n.id,onClick:we=>A.value=n.id,class:w(["px-3 py-2 text-xs font-medium rounded-lg transition-all",s(A)===n.id?"bg-spider-green-500 text-white shadow-lg shadow-spider-green-500/25":"bg-gray-700/50 text-gray-400 hover:bg-gray-700 hover:text-white"])},d(n.name),11,_o)),64))])]),s(A)==="nginx"?(l(),i("div",$o,[e("div",Po,[t[113]||(t[113]=e("h5",{class:"text-sm font-medium text-white mb-3"},"Nginx Configuration",-1)),t[114]||(t[114]=e("p",{class:"text-xs text-gray-400 mb-3"},[r("Create "),e("code",{class:"text-gray-300"},"/etc/nginx/sites-available/schedule4real"),r(":")],-1)),e("div",So,[e("pre",Co,d(s(O)),1),e("button",{onClick:t[9]||(t[9]=n=>K(s(O))),class:"absolute top-2 right-2 p-1.5 text-gray-400 hover:text-white hover:bg-gray-700/50 rounded-lg transition-all"},[o(s(te),{class:"w-4 h-4"})])]),t[115]||(t[115]=e("p",{class:"text-xs text-gray-400 mt-3"},"Then enable and reload:",-1)),t[116]||(t[116]=e("pre",{class:"bg-gray-900/80 rounded-lg p-2 text-xs text-gray-400 font-mono mt-2"},`sudo ln -s /etc/nginx/sites-available/schedule4real /etc/nginx/sites-enabled/
sudo nginx -t && sudo systemctl reload nginx`,-1))])])):b("",!0),s(A)==="caddy"?(l(),i("div",To,[e("div",Ro,[t[117]||(t[117]=e("h5",{class:"text-sm font-medium text-white mb-3"},"Caddy Configuration",-1)),t[118]||(t[118]=e("p",{class:"text-xs text-gray-400 mb-3"},[r("Add to your "),e("code",{class:"text-gray-300"},"Caddyfile"),r(":")],-1)),e("div",Do,[e("pre",Ao,d(s(T)),1),e("button",{onClick:t[10]||(t[10]=n=>K(s(T))),class:"absolute top-2 right-2 p-1.5 text-gray-400 hover:text-white hover:bg-gray-700/50 rounded-lg transition-all"},[o(s(te),{class:"w-4 h-4"})])]),t[119]||(t[119]=e("div",{class:"mt-3 p-3 bg-spider-green-900/20 border border-spider-green-700/30 rounded-lg"},[e("p",{class:"text-xs text-spider-green-400"},[e("strong",null,"Recommended!"),r(" Caddy automatically handles SSL certificates AND WebSockets with zero config. ")])],-1))])])):b("",!0),s(A)==="litespeed"?(l(),i("div",No,[e("div",Io,[t[120]||(t[120]=e("h5",{class:"text-sm font-medium text-white mb-3"},"LiteSpeed / OpenLiteSpeed Configuration",-1)),t[121]||(t[121]=e("p",{class:"text-xs text-gray-400 mb-3"},[r("Add to your "),e("code",{class:"text-gray-300"},".htaccess"),r(" or virtual host config:")],-1)),e("div",jo,[e("pre",Lo,d(s(W)),1),e("button",{onClick:t[11]||(t[11]=n=>K(s(W))),class:"absolute top-2 right-2 p-1.5 text-gray-400 hover:text-white hover:bg-gray-700/50 rounded-lg transition-all"},[o(s(te),{class:"w-4 h-4"})])]),t[122]||(t[122]=e("div",{class:"mt-3 p-3 bg-yellow-900/20 border border-yellow-700/30 rounded-lg"},[e("p",{class:"text-xs text-yellow-400"},[e("strong",null,"Important:"),r(" The WebSocket rewrite rule is essential for real-time sensor updates! ")])],-1))])])):b("",!0),s(A)==="traefik"?(l(),i("div",Oo,[e("div",Ho,[t[123]||(t[123]=e("h5",{class:"text-sm font-medium text-white mb-3"},"Traefik Docker Labels",-1)),t[124]||(t[124]=e("p",{class:"text-xs text-gray-400 mb-3"},"If using Docker with Traefik:",-1)),e("div",Eo,[e("pre",Mo,d(s(Z)),1),e("button",{onClick:t[12]||(t[12]=n=>K(s(Z))),class:"absolute top-2 right-2 p-1.5 text-gray-400 hover:text-white hover:bg-gray-700/50 rounded-lg transition-all"},[o(s(te),{class:"w-4 h-4"})])]),t[125]||(t[125]=e("div",{class:"mt-3 p-3 bg-spider-green-900/20 border border-spider-green-700/30 rounded-lg"},[e("p",{class:"text-xs text-spider-green-400"},[e("strong",null,"Note:"),r(" Traefik handles WebSockets automatically, no extra config needed. ")])],-1))])])):b("",!0),s(A)==="apache"?(l(),i("div",Uo,[e("div",Wo,[t[126]||(t[126]=e("h5",{class:"text-sm font-medium text-white mb-3"},"Apache Configuration",-1)),t[127]||(t[127]=e("p",{class:"text-xs text-gray-400 mb-3"},"Add to your virtual host config:",-1)),e("div",Vo,[e("pre",Fo,d(s(G)),1),e("button",{onClick:t[13]||(t[13]=n=>K(s(G))),class:"absolute top-2 right-2 p-1.5 text-gray-400 hover:text-white hover:bg-gray-700/50 rounded-lg transition-all"},[o(s(te),{class:"w-4 h-4"})])]),t[128]||(t[128]=e("p",{class:"text-xs text-gray-400 mt-3"},"Enable required modules:",-1)),t[129]||(t[129]=e("pre",{class:"bg-gray-900/80 rounded-lg p-2 text-xs text-gray-400 font-mono mt-2"},`sudo a2enmod proxy proxy_http proxy_wstunnel rewrite ssl headers
sudo systemctl restart apache2`,-1))])])):b("",!0),e("div",qo,[e("h4",zo,[o(s(ke),{class:"w-4 h-4"}),t[130]||(t[130]=r(" All Proxied Endpoints ",-1))]),e("p",Go,[t[131]||(t[131]=e("strong",{class:"text-white"},"App endpoints",-1)),r(" (port "+d(s(f))+"): ",1)]),e("ul",Yo,[e("li",Bo,[o(s(M),{class:"w-4 h-4 text-purple-400 shrink-0 mt-0.5"}),t[132]||(t[132]=e("code",{class:"text-purple-400"},"/_ws",-1)),t[133]||(t[133]=r(" â€” Real-time sensor data (WebSocket) ",-1))]),e("li",Zo,[o(s(M),{class:"w-4 h-4 text-purple-400 shrink-0 mt-0.5"}),t[134]||(t[134]=e("code",{class:"text-purple-400"},"/_room3d-ws",-1)),t[135]||(t[135]=r(" â€” 3D room multiplayer (WebSocket) ",-1))]),e("li",Xo,[o(s(M),{class:"w-4 h-4 text-purple-400 shrink-0 mt-0.5"}),t[136]||(t[136]=e("code",{class:"text-purple-400"},"/mqtt",-1)),t[137]||(t[137]=r(" â€” MQTT over WebSocket (port 9001) ",-1))]),e("li",Qo,[o(s(M),{class:"w-4 h-4 text-purple-400 shrink-0 mt-0.5"}),t[138]||(t[138]=e("code",{class:"text-purple-400"},"/",-1)),t[139]||(t[139]=r(" â€” All other paths (HTTP) ",-1))])]),e("p",Ko,[t[140]||(t[140]=e("strong",{class:"text-white"},"Relay Node endpoints",-1)),r(" (port "+d(s(P))+", optional): ",1)]),e("ul",Jo,[e("li",ea,[o(s(M),{class:"w-4 h-4 text-emerald-400 shrink-0 mt-0.5"}),t[141]||(t[141]=e("code",{class:"text-emerald-400"},"/relay",-1)),t[142]||(t[142]=r(" â€” Onion circuit traffic (WebSocket) ",-1))]),e("li",ta,[o(s(M),{class:"w-4 h-4 text-emerald-400 shrink-0 mt-0.5"}),t[143]||(t[143]=e("code",{class:"text-emerald-400"},"/join/*",-1)),t[144]||(t[144]=r(" â€” Room join via token (HTTP + WebSocket) ",-1))]),e("li",sa,[o(s(M),{class:"w-4 h-4 text-emerald-400 shrink-0 mt-0.5"}),t[145]||(t[145]=e("code",{class:"text-emerald-400"},"/rooms",-1)),t[146]||(t[146]=r(" â€” Public room list (HTTP) ",-1))]),e("li",ra,[o(s(M),{class:"w-4 h-4 text-emerald-400 shrink-0 mt-0.5"}),t[147]||(t[147]=e("code",{class:"text-emerald-400"},"/pk",-1)),t[148]||(t[148]=r(" â€” Relay public key (HTTP) ",-1))]),e("li",oa,[o(s(M),{class:"w-4 h-4 text-emerald-400 shrink-0 mt-0.5"}),t[149]||(t[149]=e("code",{class:"text-emerald-400"},"/peers",-1)),t[150]||(t[150]=r(" â€” Peer discovery / gossip (HTTP) ",-1))]),e("li",aa,[o(s(M),{class:"w-4 h-4 text-emerald-400 shrink-0 mt-0.5"}),t[151]||(t[151]=e("code",{class:"text-emerald-400"},"/register",-1)),t[152]||(t[152]=r(" â€” Room registration (HTTP POST) ",-1))]),e("li",la,[o(s(M),{class:"w-4 h-4 text-emerald-400 shrink-0 mt-0.5"}),t[153]||(t[153]=e("code",{class:"text-emerald-400"},"/stats",-1)),t[154]||(t[154]=r(" â€” Relay health stats (HTTP) ",-1))])]),t[155]||(t[155]=e("div",{class:"mt-3 p-3 bg-red-900/20 border border-red-700/30 rounded-lg"},[e("p",{class:"text-base text-red-400"},[e("strong",null,"CORS Warning:"),r(" Do NOT add global "),e("code",{class:"text-red-300"},"Access-Control-Allow-Origin"),r(" headers in your proxy config. The relay handles its own CORS headers â€” adding them globally causes a double "),e("code",{class:"text-red-300"},"*, *"),r(" header that breaks browsers. ")])],-1))]),e("div",na,[e("h4",ia,[o(s(ue),{class:"w-4 h-4"}),t[156]||(t[156]=r(" Quick Summary ",-1))]),t[157]||(t[157]=e("div",{class:"text-sm text-gray-300 space-y-2"},[e("p",null,[e("strong",{class:"text-white"},"Local access only:"),r(" Point your domain to the server's local IP (e.g., 192.168.1.100)")]),e("p",null,[e("strong",{class:"text-white"},"Remote access:"),r(" Use Dynamic DNS + SSL certificate + port forward 80/443 to your server")])],-1))])])):b("",!0),s($)==="ssl"?(l(),i("div",da,[e("div",pa,[e("h4",ua,[o(s(fe),{class:"w-4 h-4"}),t[158]||(t[158]=r(" Why do I need this? ",-1))]),t[163]||(t[163]=e("p",{class:"text-sm text-gray-300 mb-2"}," A domain with SSL (HTTPS) unlocks these features: ",-1)),e("ul",ga,[e("li",xa,[o(s(ee),{class:"w-4 h-4 text-yellow-400 shrink-0 mt-0.5"}),t[159]||(t[159]=r(" Voice chat in 3D grow rooms (WebRTC requires HTTPS) ",-1))]),e("li",ca,[o(s(ee),{class:"w-4 h-4 text-yellow-400 shrink-0 mt-0.5"}),t[160]||(t[160]=r(" Automatic caching of 3D models, images and sounds (Service Worker requires HTTPS) ",-1))]),e("li",ma,[o(s(ee),{class:"w-4 h-4 text-yellow-400 shrink-0 mt-0.5"}),t[161]||(t[161]=r(" Secure remote access from anywhere ",-1))]),e("li",ya,[o(s(ee),{class:"w-4 h-4 text-yellow-400 shrink-0 mt-0.5"}),t[162]||(t[162]=r(" Remote data forwarding between servers (MQTT over WebSocket) ",-1))])])]),t[219]||(t[219]=e("div",{class:"relative pl-8"},[e("div",{class:"absolute left-0 top-0 w-6 h-6 rounded-full bg-yellow-500 text-white text-xs font-bold flex items-center justify-center"},"1"),e("div",{class:"bg-gray-800/50 border border-gray-700/40 rounded-xl p-4"},[e("h5",{class:"text-sm font-medium text-white mb-2"},"Get a free domain name"),e("p",{class:"text-sm text-gray-400 mb-3"},[r(" If you don't have a domain, you can get one for free from "),e("a",{href:"https://www.noip.com/",target:"_blank",rel:"noopener noreferrer",class:"text-yellow-400 hover:text-yellow-300 underline font-medium"},"noip.com"),r(". ")]),e("ol",{class:"text-sm text-gray-300 space-y-2 list-decimal list-inside"},[e("li",null,[r("Create a free account at "),e("a",{href:"https://www.noip.com/sign-up",target:"_blank",rel:"noopener noreferrer",class:"text-yellow-400 hover:text-yellow-300 underline"},"noip.com/sign-up")]),e("li",null,[r("Go to "),e("span",{class:"text-yellow-400"},"Dynamic DNS"),r(" â†’ "),e("span",{class:"text-yellow-400"},"No-IP Hostnames")]),e("li",null,[r("Create a hostname, e.g. "),e("code",{class:"text-yellow-400"},"mygrow.ddns.net")]),e("li",null,[r("Point it to your server's "),e("strong",{class:"text-white"},"public IP"),r(" (or local IP for LAN-only access)")])]),e("div",{class:"mt-3 p-3 bg-blue-900/20 border border-blue-700/30 rounded-lg"},[e("p",{class:"text-sm text-blue-400"},[e("strong",null,"Tip:"),r(" No-IP free hostnames need to be confirmed every 30 days. Their DUC client (next step) handles IP updates automatically. ")])])])],-1)),e("div",ba,[t[168]||(t[168]=e("div",{class:"absolute left-0 top-0 w-6 h-6 rounded-full bg-yellow-500 text-white text-xs font-bold flex items-center justify-center"},"2",-1)),e("div",fa,[t[167]||(t[167]=e("h5",{class:"text-base font-medium text-white mb-3"},"How will you manage your DNS?",-1)),e("div",va,[e("button",{onClick:t[14]||(t[14]=n=>Y.value="noip"),class:w(["p-3 rounded-lg border text-center transition-all",s(Y)==="noip"?"bg-yellow-900/30 border-yellow-500/50 text-yellow-400":"bg-gray-900/40 border-gray-700/40 text-gray-400 hover:border-gray-600"])},[...t[164]||(t[164]=[e("p",{class:"text-base font-medium"},"No-IP",-1),e("p",{class:"text-base opacity-60"},"Free DDNS",-1)])],2),e("button",{onClick:t[15]||(t[15]=n=>Y.value="cloudflare"),class:w(["p-3 rounded-lg border text-center transition-all",s(Y)==="cloudflare"?"bg-orange-900/30 border-orange-500/50 text-orange-400":"bg-gray-900/40 border-gray-700/40 text-gray-400 hover:border-gray-600"])},[...t[165]||(t[165]=[e("p",{class:"text-base font-medium"},"Cloudflare",-1),e("p",{class:"text-base opacity-60"},"Advanced DNS",-1)])],2),e("button",{onClick:t[16]||(t[16]=n=>Y.value="manual"),class:w(["p-3 rounded-lg border text-center transition-all",s(Y)==="manual"?"bg-gray-700/50 border-gray-500/50 text-gray-300":"bg-gray-900/40 border-gray-700/40 text-gray-400 hover:border-gray-600"])},[...t[166]||(t[166]=[e("p",{class:"text-base font-medium"},"Manual",-1),e("p",{class:"text-base opacity-60"},"Own domain",-1)])],2)])])]),s(Y)==="noip"?(l(),i("div",ha,[t[175]||(t[175]=e("div",{class:"absolute left-0 top-0 w-6 h-6 rounded-full bg-yellow-500/60 text-white text-xs font-bold flex items-center justify-center"},"2b",-1)),e("div",wa,[t[171]||(t[171]=e("h5",{class:"text-base font-medium text-white mb-2"},"Install the No-IP DUC client (Dynamic Update Client)",-1)),t[172]||(t[172]=e("p",{class:"text-sm text-gray-400 mb-3"}," This keeps your domain pointing to your server even if your ISP changes your IP address. ",-1)),e("div",ka,[e("pre",{class:"bg-gray-900/80 rounded-lg p-3 text-sm text-spider-green-400 font-mono overflow-x-auto whitespace-pre"},d(Qe)),e("button",{onClick:t[17]||(t[17]=n=>K(Qe)),class:"absolute top-2 right-2 p-1.5 text-gray-400 hover:text-white hover:bg-gray-700/50 rounded-lg transition-all"},[o(s(te),{class:"w-4 h-4"})])]),t[173]||(t[173]=e("p",{class:"text-sm text-gray-400 mt-3"},"Then configure it with your No-IP credentials:",-1)),e("div",_a,[e("pre",$a,d(s(ae)),1),e("button",{onClick:t[18]||(t[18]=n=>K(s(ae))),class:"absolute top-2 right-2 p-1.5 text-gray-400 hover:text-white hover:bg-gray-700/50 rounded-lg transition-all"},[o(s(te),{class:"w-4 h-4"})])]),t[174]||(t[174]=e("p",{class:"text-sm text-gray-500 mt-2"},[r(" See "),e("a",{href:"https://www.noip.com/support/knowledgebase/install-linux-3-x-dynamic-update-client-duc/",target:"_blank",rel:"noopener noreferrer",class:"text-blue-400 hover:text-blue-300 underline"},"No-IP Linux DUC docs"),r(" for full setup and running as a service. ")],-1)),e("div",{class:w(["mt-4 p-3 rounded-lg border",s(V).installed?"bg-green-900/20 border-green-700/30":"bg-purple-900/20 border-purple-700/30"])},[e("div",Pa,[e("span",{class:w(["text-base font-medium",s(V).installed?"text-green-400":"text-purple-400"])},d(s(V).installed?s(V).running?"DUC Running":"DUC Installed (stopped)":"Or install from here:"),3),s(V).hostname?(l(),i("span",Sa,d(s(V).hostname),1)):b("",!0)]),s(V).installed?s(V).running?(l(),i("div",Na,[t[169]||(t[169]=e("span",{class:"w-2 h-2 rounded-full bg-green-400 shadow-lg shadow-green-400/50"},null,-1)),t[170]||(t[170]=e("span",{class:"text-base text-green-400"},"Active",-1)),e("button",{onClick:m,class:"ml-auto text-base text-red-400 hover:text-red-300"},"Remove")])):(l(),i("div",Ra,[e("div",Da,[de(e("input",{"onUpdate:modelValue":t[19]||(t[19]=n=>ve(X)?X.value=n:null),type:"text",placeholder:"mygrow.ddns.net",class:"bg-gray-900/60 border border-gray-600/50 rounded-lg px-2 py-1.5 text-base text-white focus:border-purple-500/50 focus:outline-none"},null,512),[[ge,s(X)]]),de(e("input",{"onUpdate:modelValue":t[20]||(t[20]=n=>ve(ne)?ne.value=n:null),type:"text",placeholder:"Email",class:"bg-gray-900/60 border border-gray-600/50 rounded-lg px-2 py-1.5 text-base text-white focus:border-purple-500/50 focus:outline-none"},null,512),[[ge,s(ne)]]),de(e("input",{"onUpdate:modelValue":t[21]||(t[21]=n=>ve(le)?le.value=n:null),type:"password",placeholder:"Password",class:"bg-gray-900/60 border border-gray-600/50 rounded-lg px-2 py-1.5 text-base text-white focus:border-purple-500/50 focus:outline-none"},null,512),[[ge,s(le)]])]),e("button",{onClick:x,disabled:s(F)||!s(X)||!s(ne)||!s(le),class:"px-4 py-1.5 bg-purple-600 hover:bg-purple-500 text-white text-base font-medium rounded-lg transition-all disabled:opacity-40"},d(s(F)?"Configuring...":"Configure & Start"),9,Aa)])):(l(),i("div",Ca,[e("button",{onClick:be,disabled:s(F),class:"px-4 py-2 bg-purple-600 hover:bg-purple-500 text-white text-base font-medium rounded-lg transition-all disabled:opacity-40"},d(s(F)?"Installing...":"Install No-IP DUC"),9,Ta)]))],2)])])):b("",!0),s(Y)==="cloudflare"?(l(),i("div",Ia,[t[185]||(t[185]=e("div",{class:"absolute left-0 top-0 w-6 h-6 rounded-full bg-orange-500/60 text-white text-xs font-bold flex items-center justify-center"},"2b",-1)),e("div",ja,[t[183]||(t[183]=e("h5",{class:"text-base font-medium text-white mb-2"},"Cloudflare DNS Setup",-1)),t[184]||(t[184]=e("p",{class:"text-base text-gray-400 mb-3"},[r(" Cloudflare provides free DNS management, DDoS protection, and automatic SSL. You'll need an "),e("a",{href:"https://dash.cloudflare.com/profile/api-tokens",target:"_blank",rel:"noopener noreferrer",class:"text-orange-400 hover:text-orange-300 underline"},"API token"),r(" with Zone:DNS:Edit permissions. ")],-1)),!s(y).configured&&s(q).length===0?(l(),i("div",La,[e("div",Oa,[de(e("input",{"onUpdate:modelValue":t[22]||(t[22]=n=>ve(H)?H.value=n:null),type:"password",placeholder:"Cloudflare API Token",class:"flex-1 bg-gray-900/60 border border-gray-600/50 rounded-lg px-3 py-2 text-base text-white placeholder-gray-500 focus:border-orange-500/50 focus:outline-none"},null,512),[[ge,s(H)]]),e("button",{onClick:Se,disabled:s(c)||!s(H),class:"px-4 py-2 bg-orange-600 hover:bg-orange-500 text-white text-base font-medium rounded-lg transition-all disabled:opacity-40 whitespace-nowrap"},d(s(c)?"Verifying...":"Test Token"),9,Ha)]),t[176]||(t[176]=e("p",{class:"text-base text-gray-500"},[r(" Create a token at "),e("a",{href:"https://dash.cloudflare.com/profile/api-tokens",target:"_blank",class:"text-orange-400 hover:underline"},"dash.cloudflare.com"),r(" â†’ Create Token â†’ Edit zone DNS. ")],-1))])):s(q).length>0&&!s(y).zoneId?(l(),i("div",Ea,[t[177]||(t[177]=e("p",{class:"text-base text-orange-400 font-medium"},"Token verified. Select your domain zone:",-1)),e("div",Ma,[(l(!0),i(j,null,U(s(q),n=>(l(),i("button",{key:n.id,onClick:we=>Ce(n.id,n.name),class:"p-3 bg-gray-900/40 border border-gray-700/40 rounded-lg text-left hover:border-orange-500/50 transition-all"},[e("span",Wa,d(n.name),1),e("span",Va,"("+d(n.status)+")",1)],8,Ua))),128))])])):s(y).zoneId&&!s(y).configured?(l(),i("div",Fa,[e("div",qa,[o(s(ue),{class:"w-4 h-4"}),e("span",null,[t[178]||(t[178]=r("Zone: ",-1)),e("strong",null,d(s(y).zoneName),1)])]),t[180]||(t[180]=e("p",{class:"text-base text-gray-400"},' Enter your domain above in the "Your Domain" tab, then create DNS records pointing to your public IP: ',-1)),e("div",za,[e("span",Ga,d(s(C)||"(enter domain above)"),1)]),e("div",Ya,[e("button",{onClick:pe,disabled:s(c)||!s(C),class:"px-4 py-2 bg-orange-600 hover:bg-orange-500 text-white text-base font-medium rounded-lg transition-all disabled:opacity-40"},d(s(c)?"Creating...":"Create DNS Records"),9,Ba),e("label",Za,[e("input",{type:"checkbox",checked:s(y).proxyEnabled,onChange:t[23]||(t[23]=n=>s(y).proxyEnabled=n.target.checked),class:"rounded bg-gray-700 border-gray-600 text-orange-500 focus:ring-orange-500"},null,40,Xa),t[179]||(t[179]=r(" Cloudflare Proxy (CDN + DDoS) ",-1))])])])):s(y).configured?(l(),i("div",Qa,[e("div",Ka,[o(s(ue),{class:"w-4 h-4"}),e("span",null,[t[181]||(t[181]=r("DNS records active on ",-1)),e("strong",null,d(s(y).zoneName),1)])]),e("div",Ja,[(l(!0),i(j,null,U(s(y).records,n=>(l(),i("div",{key:n.id,class:"flex items-center gap-2 p-2 bg-gray-900/40 rounded-lg"},[e("span",el,d(n.name),1),t[182]||(t[182]=e("span",{class:"text-base text-gray-500"},"â†’",-1)),e("span",tl,d(n.content),1),n.proxied?(l(),i("span",sl,"Proxied")):(l(),i("span",rl,"DNS only"))]))),128))]),e("div",ol,[e("button",{onClick:ot,disabled:s(c),class:"px-3 py-1.5 bg-gray-700 hover:bg-gray-600 text-white text-base rounded-lg transition-all disabled:opacity-40"},d(s(c)?"Syncing...":"Sync IP"),9,al),e("button",{onClick:t[24]||(t[24]=n=>rt(!s(y).proxyEnabled)),class:w(["px-3 py-1.5 text-base rounded-lg transition-all",s(y).proxyEnabled?"bg-orange-600/30 text-orange-400 hover:bg-orange-600/40":"bg-gray-700 text-gray-400 hover:bg-gray-600"])},d(s(y).proxyEnabled?"Disable Proxy":"Enable Proxy"),3),e("button",{onClick:at,class:"ml-auto text-base text-red-400 hover:text-red-300"},"Remove")])])):b("",!0)])])):b("",!0),s(Y)==="manual"?(l(),i("div",ll,[t[191]||(t[191]=e("div",{class:"absolute left-0 top-0 w-6 h-6 rounded-full bg-gray-500/60 text-white text-xs font-bold flex items-center justify-center"},"2b",-1)),e("div",nl,[t[189]||(t[189]=e("h5",{class:"text-base font-medium text-white mb-2"},"Manual DNS Setup",-1)),t[190]||(t[190]=e("p",{class:"text-base text-gray-400"}," Point your domain's A record to your server's public IP address using your domain registrar's DNS panel. If your IP changes frequently, consider using one of the automated options above. ",-1)),e("div",il,[e("p",dl,[t[186]||(t[186]=e("strong",null,"Tip:",-1)),t[187]||(t[187]=r(" The relay will be accessible at ",-1)),e("code",pl,d(s(k))+"/relay",1),t[188]||(t[188]=r(" â€” no extra DNS record needed. ",-1))])])])])):b("",!0),e("div",ul,[t[201]||(t[201]=e("div",{class:"absolute left-0 top-0 w-6 h-6 rounded-full bg-yellow-500 text-white text-xs font-bold flex items-center justify-center"},"3",-1)),e("div",gl,[t[198]||(t[198]=e("h5",{class:"text-base font-medium text-white mb-2"},"Install Nginx (reverse proxy)",-1)),t[199]||(t[199]=e("p",{class:"text-sm text-gray-400 mb-3"},"Nginx will sit in front of the app and handle SSL termination.",-1)),e("div",xl,[t[192]||(t[192]=e("pre",{class:"bg-gray-900/80 rounded-lg p-3 text-sm text-spider-green-400 font-mono overflow-x-auto whitespace-pre"},"sudo apt update && sudo apt install -y nginx",-1)),e("button",{onClick:t[25]||(t[25]=n=>K("sudo apt update && sudo apt install -y nginx")),class:"absolute top-2 right-2 p-1.5 text-gray-400 hover:text-white hover:bg-gray-700/50 rounded-lg transition-all"},[o(s(te),{class:"w-4 h-4"})])]),e("p",cl,[t[193]||(t[193]=r(" Then copy the Nginx configuration from the ",-1)),e("button",{onClick:t[26]||(t[26]=n=>{$.value="proxy",A.value="nginx"}),class:"text-spider-green-400 hover:underline font-medium"},"Your Domain â†’ Nginx"),t[194]||(t[194]=r(" tab and save it to ",-1)),t[195]||(t[195]=e("code",{class:"text-gray-300"},"/etc/nginx/sites-available/schedule4real",-1)),t[196]||(t[196]=r(". ",-1))]),t[200]||(t[200]=e("div",{class:"relative mt-2"},[e("pre",{class:"bg-gray-900/80 rounded-lg p-3 text-sm text-gray-400 font-mono overflow-x-auto whitespace-pre"},`sudo ln -s /etc/nginx/sites-available/schedule4real /etc/nginx/sites-enabled/
sudo rm /etc/nginx/sites-enabled/default
sudo nginx -t && sudo systemctl reload nginx`)],-1)),e("div",{class:w(["mt-4 p-3 rounded-lg border",s(p).installed?"bg-green-900/20 border-green-700/30":"bg-blue-900/20 border-blue-700/30"])},[e("div",ml,[e("span",{class:w(["text-base font-medium",s(p).installed?"text-green-400":"text-blue-400"])},d(s(p).installed?s(p).running?"Nginx Running":"Nginx Installed (stopped)":"Or install from here:"),3),s(p).sslDomain?(l(),i("span",yl,[o(s(fe),{class:"w-4 h-4"}),r(" "+d(s(p).sslDomain),1)])):b("",!0)]),s(p).installed?s(p).configExists?(l(),i("div",kl,[e("span",{class:w(["w-2 h-2 rounded-full shadow-lg",s(p).running?"bg-green-400 shadow-green-400/50":"bg-yellow-400 shadow-yellow-400/50"])},null,2),e("span",{class:w(["text-base",s(p).running?"text-green-400":"text-yellow-400"])},d(s(p).running?"Active":"Stopped"),3),s(p).configExists?(l(),i("span",_l,"Config applied")):b("",!0)])):(l(),i("div",vl,[t[197]||(t[197]=e("p",{class:"text-base text-gray-400"},'Generate and apply config using your domain from the "Your Domain" tab:',-1)),e("button",{onClick:ie,disabled:s(a)||!s(C),class:"px-4 py-1.5 bg-blue-600 hover:bg-blue-500 text-white text-base font-medium rounded-lg transition-all disabled:opacity-40"},d(s(a)?"Configuring...":"Apply Nginx Config"),9,hl),s(C)?b("",!0):(l(),i("p",wl,'Enter your domain in the "Your Domain" tab first.'))])):(l(),i("div",bl,[e("button",{onClick:N,disabled:s(a),class:"px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white text-base font-medium rounded-lg transition-all disabled:opacity-40"},d(s(a)?"Installing...":"Install Nginx"),9,fl)]))],2)])]),e("div",$l,[t[207]||(t[207]=e("div",{class:"absolute left-0 top-0 w-6 h-6 rounded-full bg-yellow-500 text-white text-xs font-bold flex items-center justify-center"},"4",-1)),e("div",Pl,[t[204]||(t[204]=e("h5",{class:"text-sm font-medium text-white mb-2"},"Get a free SSL certificate (Let's Encrypt)",-1)),t[205]||(t[205]=e("p",{class:"text-sm text-gray-400 mb-3"},"Certbot will automatically obtain and configure the SSL certificate for Nginx.",-1)),e("div",Sl,[e("pre",Cl,d(s(ce)),1),e("button",{onClick:t[27]||(t[27]=n=>K(s(ce))),class:"absolute top-2 right-2 p-1.5 text-gray-400 hover:text-white hover:bg-gray-700/50 rounded-lg transition-all"},[o(s(te),{class:"w-4 h-4"})])]),t[206]||(t[206]=e("div",{class:"mt-3 p-3 bg-spider-green-900/20 border border-spider-green-700/30 rounded-lg"},[e("p",{class:"text-base text-spider-green-400"},[e("strong",null,"Auto-renewal:"),r(" Certbot sets up automatic renewal. Your certificate will be renewed every 60-90 days without any manual action. ")])],-1)),s(p).installed&&s(p).configExists&&!s(p).sslDomain?(l(),i("div",Tl,[e("div",Rl,[t[202]||(t[202]=e("span",{class:"text-base font-medium text-yellow-400"},"Install SSL from here:",-1)),e("button",{onClick:se,disabled:s(a)||!s(C),class:"px-4 py-1.5 bg-yellow-600 hover:bg-yellow-500 text-white text-base font-medium rounded-lg transition-all disabled:opacity-40"},d(s(a)?"Installing SSL...":"Install Let's Encrypt SSL"),9,Dl)])])):s(p).sslDomain?(l(),i("div",Al,[e("div",Nl,[o(s(fe),{class:"w-4 h-4 text-green-400"}),e("span",Il,[t[203]||(t[203]=r("SSL active for ",-1)),e("strong",null,d(s(p).sslDomain),1)])])])):b("",!0)])]),e("div",jl,[t[215]||(t[215]=e("div",{class:"absolute left-0 top-0 w-6 h-6 rounded-full bg-gray-500 text-white text-xs font-bold flex items-center justify-center"},"5",-1)),e("div",Ll,[t[212]||(t[212]=e("h5",{class:"text-sm font-medium text-white mb-2"},"Port forwarding (optional â€” for remote access)",-1)),t[213]||(t[213]=e("p",{class:"text-sm text-gray-400 mb-3"}," If you want to access your grow room from outside your network (phone on mobile data, work, etc.), forward these ports in your router to the server running Nginx: ",-1)),e("div",Ol,[t[210]||(t[210]=e("div",{class:"bg-gray-900/50 rounded-lg p-3 text-center"},[e("p",{class:"text-lg font-bold text-yellow-400"},"80"),e("p",{class:"text-sm text-gray-400"},"HTTP"),e("p",{class:"text-sm text-gray-500"},"(redirects to HTTPS)")],-1)),t[211]||(t[211]=e("div",{class:"bg-gray-900/50 rounded-lg p-3 text-center"},[e("p",{class:"text-lg font-bold text-spider-green-400"},"443"),e("p",{class:"text-sm text-gray-400"},"HTTPS"),e("p",{class:"text-sm text-gray-500"},"(main access)")],-1)),e("div",Hl,[e("p",El,d(s(P)),1),t[208]||(t[208]=e("p",{class:"text-sm text-gray-400"},"Relay Node",-1)),t[209]||(t[209]=e("p",{class:"text-sm text-gray-500"},"(only if no proxy)",-1))])]),t[214]||(t[214]=e("p",{class:"text-sm text-gray-500 mt-3"}," Skip this step if you only need access within your local network (LAN). In that case, point your domain to the server's local IP instead of your public IP. ",-1))])]),e("div",Ml,[o(s(ue),{class:"w-5 h-5 text-spider-green-400 shrink-0 mt-0.5"}),e("div",null,[t[218]||(t[218]=e("p",{class:"text-sm font-medium text-spider-green-400"},"All done!",-1)),e("p",Ul,[t[216]||(t[216]=r(" You can now access your grow room at ",-1)),e("code",Wl,"https://"+d(s(C)||"mygrow.ddns.net"),1),t[217]||(t[217]=r(" with full SSL encryption. Voice chat, asset caching, and remote access will all work correctly. ",-1))])])])])):b("",!0),s($)==="relay"?(l(),i("div",Vl,[e("div",Fl,[e("h4",ql,[o(s(je),{class:"w-4 h-4"}),t[220]||(t[220]=r(" What is the Relay Node? ",-1))]),t[221]||(t[221]=e("p",{class:"text-base text-gray-300 mb-3"},[r(" The Relay Node turns your machine into part of a "),e("strong",{class:"text-purple-400"},"decentralized privacy network"),r(". It helps other users connect securely to each other without any central server. ")],-1)),t[222]||(t[222]=e("p",{class:"text-base text-gray-300"},[r(" Think of it like "),e("strong",{class:"text-purple-300"},"helping your neighbors"),r(" â€” your machine relays encrypted traffic so others can visit 3D grow rooms, even if they're behind restrictive networks. You can't read the traffic â€” it's all encrypted end-to-end. ")],-1))]),e("div",null,[t[228]||(t[228]=e("h4",{class:"text-base font-semibold text-white mb-3"},"How it works",-1)),e("div",zl,[e("div",Gl,[t[223]||(t[223]=e("div",{class:"px-3 py-2 bg-gray-700/50 rounded-lg text-center"},[e("div",{class:"text-lg mb-1"},"ðŸ‘¤"),e("div",{class:"text-gray-300 font-medium"},"Visitor")],-1)),o(s(me),{class:"w-4 h-4 text-gray-500"}),t[224]||(t[224]=e("div",{class:"px-3 py-2 bg-sky-900/30 border border-sky-700/30 rounded-lg text-center"},[e("div",{class:"text-lg mb-1"},"ðŸ”’"),e("div",{class:"text-sky-400 font-medium"},"Relay A")],-1)),o(s(me),{class:"w-4 h-4 text-gray-500"}),t[225]||(t[225]=e("div",{class:"px-3 py-2 bg-purple-900/30 border border-purple-700/30 rounded-lg text-center"},[e("div",{class:"text-lg mb-1"},"ðŸ”’"),e("div",{class:"text-purple-400 font-medium"},"Relay B")],-1)),o(s(me),{class:"w-4 h-4 text-gray-500"}),t[226]||(t[226]=e("div",{class:"px-3 py-2 bg-spider-green-900/30 border border-spider-green-700/30 rounded-lg text-center"},[e("div",{class:"text-lg mb-1"},"ðŸ "),e("div",{class:"text-spider-green-400 font-medium"},"Host's Room")],-1))]),t[227]||(t[227]=e("p",{class:"text-base text-gray-500 text-center mt-3"}," Traffic bounces through 2 relays (onion routing) â€” each relay only sees the previous and next hop, never both endpoints ",-1))])]),t[254]||(t[254]=e("div",{class:"grid grid-cols-1 sm:grid-cols-3 gap-3"},[e("div",{class:"p-4 rounded-xl bg-gray-800/50 border border-gray-700/40"},[e("h5",{class:"text-base font-semibold text-spider-green-400 mb-2"},"Relay"),e("p",{class:"text-base text-gray-400"}," Routes encrypted onion circuits between users. Each connection passes through 2 relays for privacy. ")]),e("div",{class:"p-4 rounded-xl bg-gray-800/50 border border-gray-700/40"},[e("h5",{class:"text-base font-semibold text-purple-400 mb-2"},"Tracker (optional)"),e("p",{class:"text-base text-gray-400"}," Indexes public rooms so users can browse and join. Only stores encrypted blobs â€” can't read room names or content. ")]),e("div",{class:"p-4 rounded-xl bg-gray-800/50 border border-gray-700/40"},[e("h5",{class:"text-base font-semibold text-blue-400 mb-2"},"Gossip"),e("p",{class:"text-base text-gray-400"}," Relays discover each other automatically via a gossip protocol with Ed25519-signed announcements. ")])],-1)),t[255]||(t[255]=e("div",{class:"bg-gradient-to-r from-blue-900/20 to-transparent border border-blue-700/30 rounded-xl p-4"},[e("h4",{class:"text-base font-semibold text-blue-400 mb-2"},"Automatic Network Discovery"),e("p",{class:"text-base text-gray-300 mb-2"},[r(" Relay nodes "),e("strong",{class:"text-blue-300"},"find each other automatically"),r(" using a gossip protocol. Each relay announces itself with an Ed25519-signed message. Other relays verify the signature, add the new peer, and propagate the announcement. ")]),e("p",{class:"text-base text-gray-300"}," No manual configuration needed â€” once online, your relay discovers all peers within minutes. Clients also learn about new relays dynamically and sort them by latency for optimal routing. ")],-1)),e("div",null,[e("h4",Yl,[o(s(Ie),{class:"w-4 h-4 text-emerald-400"}),t[229]||(t[229]=r(" Relay Endpoints ",-1))]),e("p",Bl,[t[230]||(t[230]=r(" Your relay exposes these endpoints on port ",-1)),e("code",Zl,d(s(P)),1),t[231]||(t[231]=r(". If you use a reverse proxy, map each one to your relay port. See the ",-1)),e("button",{onClick:t[28]||(t[28]=n=>$.value="proxy"),class:"text-spider-green-400 hover:underline font-medium"},"Your Domain"),t[232]||(t[232]=r(" tab for ready-to-use configs. ",-1))]),t[233]||(t[233]=e("div",{class:"grid grid-cols-1 sm:grid-cols-2 gap-2"},[e("div",{class:"bg-gray-800/50 border border-gray-700/40 rounded-lg p-3"},[e("code",{class:"text-emerald-400 text-base font-mono"},"/relay"),e("span",{class:"text-base text-gray-500 ml-2"},"WebSocket"),e("p",{class:"text-base text-gray-400 mt-1"},"Onion circuit traffic")]),e("div",{class:"bg-gray-800/50 border border-gray-700/40 rounded-lg p-3"},[e("code",{class:"text-emerald-400 text-base font-mono"},"/join/*"),e("span",{class:"text-base text-gray-500 ml-2"},"HTTP + WS"),e("p",{class:"text-base text-gray-400 mt-1"},"Room join via encrypted token")]),e("div",{class:"bg-gray-800/50 border border-gray-700/40 rounded-lg p-3"},[e("code",{class:"text-emerald-400 text-base font-mono"},"/rooms"),e("span",{class:"text-base text-gray-500 ml-2"},"GET"),e("p",{class:"text-base text-gray-400 mt-1"},"Public room list (tracker)")]),e("div",{class:"bg-gray-800/50 border border-gray-700/40 rounded-lg p-3"},[e("code",{class:"text-emerald-400 text-base font-mono"},"/pk"),e("span",{class:"text-base text-gray-500 ml-2"},"GET"),e("p",{class:"text-base text-gray-400 mt-1"},"Relay public key")]),e("div",{class:"bg-gray-800/50 border border-gray-700/40 rounded-lg p-3"},[e("code",{class:"text-emerald-400 text-base font-mono"},"/peers"),e("span",{class:"text-base text-gray-500 ml-2"},"GET / POST"),e("p",{class:"text-base text-gray-400 mt-1"},"Peer discovery (gossip)")]),e("div",{class:"bg-gray-800/50 border border-gray-700/40 rounded-lg p-3"},[e("code",{class:"text-emerald-400 text-base font-mono"},"/register"),e("span",{class:"text-base text-gray-500 ml-2"},"POST"),e("p",{class:"text-base text-gray-400 mt-1"},"Room registration (server-to-server)")]),e("div",{class:"bg-gray-800/50 border border-gray-700/40 rounded-lg p-3"},[e("code",{class:"text-emerald-400 text-base font-mono"},"/stats"),e("span",{class:"text-base text-gray-500 ml-2"},"GET"),e("p",{class:"text-base text-gray-400 mt-1"},"Relay health info")]),e("div",{class:"bg-gray-800/50 border border-gray-700/40 rounded-lg p-3"},[e("code",{class:"text-emerald-400 text-base font-mono"},"/tunnel"),e("span",{class:"text-base text-gray-500 ml-2"},"WebSocket"),e("p",{class:"text-base text-gray-400 mt-1"},"Host tunnel (internal)")])],-1))]),e("div",null,[e("h4",Xl,[o(s(He),{class:"w-4 h-4 text-spider-green-400"}),t[234]||(t[234]=r(" Setup Steps ",-1))]),e("div",Ql,[t[246]||(t[246]=e("div",{class:"relative pl-8"},[e("div",{class:"absolute left-0 top-0 w-6 h-6 rounded-full bg-spider-green-500 text-white text-xs font-bold flex items-center justify-center"},"1"),e("div",{class:"bg-gray-800/50 border border-gray-700/40 rounded-xl p-4"},[e("h5",{class:"text-base font-medium text-white mb-2"},"Enable the Relay in System settings"),e("p",{class:"text-base text-gray-400"},[r(" Go to "),e("strong",{class:"text-spider-green-400"},"System â†’ Relay Node"),r(" and flip the toggle on. The public URL will be auto-detected from your internet IP address. ")])])],-1)),e("div",Kl,[t[245]||(t[245]=e("div",{class:"absolute left-0 top-0 w-6 h-6 rounded-full bg-spider-green-500 text-white text-xs font-bold flex items-center justify-center"},"2",-1)),e("div",Jl,[t[244]||(t[244]=e("h5",{class:"text-base font-medium text-white mb-2"},"Make it reachable",-1)),e("p",en,[t[235]||(t[235]=e("strong",{class:"text-white"},"Option A â€” Direct:",-1)),t[236]||(t[236]=r(" Forward ",-1)),e("strong",tn,"TCP port "+d(s(P)),1),t[237]||(t[237]=r(" from your router to this machine. Simple, no domain needed. ",-1))]),e("p",sn,[t[238]||(t[238]=e("strong",{class:"text-white"},"Option B â€” Domain:",-1)),t[239]||(t[239]=r(" Set up a reverse proxy with SSL. The relay endpoints become ",-1)),e("code",rn,d(s(k))+"/relay",1),t[240]||(t[240]=r(", ",-1)),e("code",on,d(s(k))+"/rooms",1),t[241]||(t[241]=r(", etc. Then set the Public URL to ",-1)),e("code",an,"wss://"+d(s(k))+"/relay",1),t[242]||(t[242]=r(" in relay settings. See the ",-1)),e("button",{onClick:t[29]||(t[29]=n=>$.value="proxy"),class:"text-spider-green-400 hover:underline font-medium"},"Your Domain"),t[243]||(t[243]=r(" tab â€” all proxy configs include every relay endpoint. ",-1))])])]),t[247]||(t[247]=e("div",{class:"relative pl-8"},[e("div",{class:"absolute left-0 top-0 w-6 h-6 rounded-full bg-gray-500 text-white text-xs font-bold flex items-center justify-center"},"3"),e("div",{class:"bg-gray-800/50 border border-gray-700/40 rounded-xl p-4"},[e("h5",{class:"text-base font-medium text-white mb-2"},"Optional: Enable the Tracker"),e("p",{class:"text-base text-gray-400"}," If you want to help with public room discovery, enable the Tracker option in relay settings. The tracker only stores encrypted blobs â€” it cannot read room names or content. Disabled by default for maximum privacy. ")])],-1))])]),e("div",ln,[o(s(fe),{class:"w-5 h-5 text-spider-green-400 shrink-0 mt-0.5"}),e("div",null,[t[253]||(t[253]=e("p",{class:"text-base font-medium text-spider-green-400"},"Privacy by design",-1)),e("ul",nn,[e("li",dn,[o(s(ee),{class:"w-4 h-4 text-spider-green-400 shrink-0 mt-0.5"}),t[248]||(t[248]=r(" All traffic is encrypted end-to-end (XChaCha20-Poly1305) â€” your relay cannot read it ",-1))]),e("li",pn,[o(s(ee),{class:"w-4 h-4 text-spider-green-400 shrink-0 mt-0.5"}),t[249]||(t[249]=r(" No accounts, no registration â€” just flip the switch ",-1))]),e("li",un,[o(s(ee),{class:"w-4 h-4 text-spider-green-400 shrink-0 mt-0.5"}),t[250]||(t[250]=r(" Relay keys rotate every hour for forward secrecy ",-1))]),e("li",gn,[o(s(ee),{class:"w-4 h-4 text-spider-green-400 shrink-0 mt-0.5"}),t[251]||(t[251]=r(" Peer announcements are Ed25519-signed to prevent spoofing ",-1))]),e("li",xn,[o(s(ee),{class:"w-4 h-4 text-spider-green-400 shrink-0 mt-0.5"}),t[252]||(t[252]=r(" Zero logs â€” no connection, traffic, or metadata is ever stored ",-1))])])])])])):b("",!0)]),e("div",cn,[e("a",mn,[o(s(st),{class:"w-4 h-4"}),t[256]||(t[256]=r(" Need help? Join Discord ",-1))]),e("button",{onClick:t[30]||(t[30]=n=>u.$emit("update:modelValue",!1)),class:"px-5 py-2.5 text-sm font-medium bg-gray-700/60 hover:bg-gray-600/60 text-gray-300 hover:text-white rounded-xl transition-all"}," Close ")])])):b("",!0)]),_:1})])):b("",!0)]),_:1})]))}}),bn=Object.assign(he(yn,[["__scopeId","data-v-cc733c60"]]),{__name:"InstallGuideModal"}),fn={class:"fixed bottom-4 right-4 z-50 flex flex-col gap-2 max-w-sm"},vn=["onClick"],hn={class:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},wn=["d"],kn={class:"text-sm font-medium"},_n=["onClick"],$n=_e({__name:"ToastContainer",setup(E){const{toasts:D,dismiss:f}=tt(),P={success:"bg-spider-green-600 border-spider-green-500",error:"bg-red-600 border-red-500",warning:"bg-amber-600 border-amber-500",info:"bg-blue-600 border-blue-500"},C={success:"M5 13l4 4L19 7",error:"M6 18L18 6M6 6l12 12",warning:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z",info:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"};return(k,$)=>(l(),B(ye,{to:"body"},[e("div",fn,[o(gt,{name:"toast"},{default:R(()=>[(l(!0),i(j,null,U(s(D),h=>(l(),i("div",{key:h.id,class:w(["px-4 py-3 rounded-lg border shadow-lg flex items-center gap-3 text-white cursor-pointer",P[h.type]]),onClick:A=>s(f)(h.id)},[(l(),i("svg",hn,[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:C[h.type]},null,8,wn)])),e("span",kn,d(h.message),1),e("button",{class:"ml-auto p-1 hover:bg-white/20 rounded transition-colors",onClick:re(A=>s(f)(h.id),["stop"])},[...$[0]||($[0]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,_n)],10,vn))),128))]),_:1})])]))}}),Pn=Object.assign(he($n,[["__scopeId","data-v-80e86211"]]),{__name:"ToastContainer"}),Sn={class:"flex h-[100dvh] overflow-hidden",style:{"--sidebar-width":"256px","--landscape-nav-width":"52px"}},Cn={class:"flex-1 p-4"},Tn={class:"space-y-1 sm:space-y-1.5"},Rn={key:0},Dn={class:"px-4 pb-2"},An={class:"hidden sm:block px-4 pb-2"},Nn={class:"px-4 pb-2"},In={class:"px-4 pb-3"},jn={href:"https://discord.gg/wZU6mnY2Sn",target:"_blank",rel:"noopener noreferrer",class:"flex items-center px-4 py-2.5 rounded-xl transition-all font-medium bg-gradient-to-r from-indigo-500/15 to-purple-600/10 text-indigo-400 border border-indigo-500/30 hover:from-indigo-500 hover:to-indigo-600 hover:text-white hover:border-transparent hover:shadow-lg hover:shadow-indigo-500/25"},Ln={class:"p-4 border-t border-gray-700/50 space-y-3"},On={class:"flex items-center justify-between text-sm"},Hn={class:"flex items-center gap-2"},En={class:"text-gray-400 font-medium"},Mn={key:0,class:"flex items-center justify-between p-2 rounded-lg bg-spider-green-500/10 border border-spider-green-500/30"},Un={class:"flex items-center gap-2"},Wn={key:2,class:"text-xs text-red-400 mt-2 flex items-center gap-1"},Vn={class:"flex-1 flex flex-col min-w-0 overflow-hidden"},Fn={class:"portrait-only desktop:hidden flex items-center justify-between px-4 py-2.5 bg-gradient-to-r from-gray-800/95 to-gray-900/95 backdrop-blur-md border-b border-gray-700/50 shrink-0"},qn={class:"flex items-center gap-2"},zn={key:1,class:"landscape-nav hidden flex-col items-center justify-center gap-2 py-2 px-1.5 bg-gradient-to-b from-gray-800/95 to-gray-900/95 backdrop-blur-md border-r border-gray-700/50 order-first"},Gn={class:"mt-auto pt-2 flex flex-col items-center gap-2"},Yn={class:"relative"},Bn={class:"flex items-center gap-3 mb-4"},Zn={class:"w-10 h-10 rounded-xl bg-gradient-to-br from-spider-green-500/30 to-emerald-600/20 flex items-center justify-center"},Xn={key:0,class:"text-xs text-red-400 mb-3 flex items-center gap-1"},Qn={class:"flex gap-3"},Kn={class:"relative"},Jn={class:"flex items-center gap-3 mb-3"},ei={class:"w-10 h-10 rounded-xl bg-gradient-to-br from-yellow-500/30 to-amber-600/20 flex items-center justify-center"},ti={key:0,class:"text-xs text-red-400 mb-3 flex items-center gap-1"},si={class:"flex gap-3"},ri=["disabled"],oi={__name:"default",setup(E){const D=S(!1),f=S(!1),P=S(!1),C=S(!1),k=et(),$=I(()=>k.path==="/room3d"),{sidebarOpen:h}=bt(),{privateRooms:A}=wt(),{connected:z}=ht(),_=vt(),g=$e(),L=I(()=>g.updateStatus?.installed?.web?.version||"1.0.0"),O=S(!1);xt(()=>{O.value=!0,_.fetchDayNight(),g.fetchUpdateStatus(),localStorage.getItem("sf_update_just_applied")&&(localStorage.removeItem("sf_update_just_applied"),tt().success("Update applied successfully!"))});const{authenticated:T,setPassword:Z,logout:W}=Ae();oe(T,p=>{p&&g.checkForUpdates().catch(()=>{})});const G=S(""),ae=S(!1),ce=S(null),{showAuthGate:V,gatePasswordInput:X,gateAuthError:ne,gateLoading:le,submitGatePassword:F,cancelGate:Q}=Je(),be=S(null);oe(D,p=>{p&&(ae.value=!1,G.value="",Fe(()=>ce.value?.focus()))}),oe(V,p=>{p&&Fe(()=>be.value?.focus())});async function x(){if(G.value){ae.value=!1;try{await $fetch("/api/auth/verify",{method:"POST",headers:{"x-auth-token":G.value}}),Z(G.value),G.value=""}catch{ae.value=!0}}}async function m(){await x(),T.value&&(D.value=!1)}return(p,a)=>{const v=dt,N=pt,ie=hs,se=Is,y=qs,H=bn,q=Pn;return l(),i("div",Sn,[s(h)?(l(),i("div",{key:0,class:w(["fixed inset-0 bg-black/50 z-40",s($)?"":"desktop:hidden"]),onClick:a[0]||(a[0]=c=>h.value=!1)},null,2)):b("",!0),e("aside",{class:w(["fixed inset-y-0 left-0 z-50 w-64 bg-gradient-to-b from-gray-800/95 to-gray-900/95 backdrop-blur-md border-r border-gray-700/50 flex flex-col transition-transform duration-200",s($)?"":"desktop:static desktop:translate-x-0",s(h)?"translate-x-0":"-translate-x-full"])},[e("div",{class:w(["px-4 py-3 border-b border-gray-700/50 relative overflow-hidden",O.value&&s(T)?"cursor-pointer":""]),onClick:a[2]||(a[2]=c=>s(T)&&(f.value=!0))},[a[29]||(a[29]=e("div",{class:"absolute -top-6 -left-6 w-24 h-24 rounded-full blur-2xl pointer-events-none bg-spider-green-500/20"},null,-1)),e("span",{class:w(["absolute top-2 right-2 text-sm font-medium z-10 transition-colors desktop:right-2",O.value&&s(T)?"text-spider-green-400 hover:text-spider-green-300":"text-gray-500"])},"v"+d(s(L)),3),e("button",{onClick:a[1]||(a[1]=re(c=>h.value=!1,["stop"])),class:"absolute top-2 right-2 desktop:hidden p-1.5 text-gray-400 hover:text-white hover:bg-gray-700/60 rounded-lg transition-colors z-20"},[o(s(Me),{class:"w-5 h-5"})]),a[30]||(a[30]=e("img",{src:"/data/appdata/images/SCHEDULE-4-REAL.svg",alt:"Schedule 4 Real",class:"relative w-full select-none",draggable:"false"},null,-1))],2),e("nav",Cn,[e("ul",Tn,[e("li",null,[o(v,{to:"/",class:w(["flex items-center px-4 py-1.5 sm:py-2.5 rounded-xl transition-all font-medium",(p._.provides[J]||p.$route).path==="/"?"bg-gradient-to-r from-spider-green-500 to-spider-green-600 text-white shadow-lg shadow-spider-green-500/25":"text-gray-400 hover:bg-gray-700/60 hover:text-gray-200"]),onClick:a[3]||(a[3]=c=>h.value=!1)},{default:R(()=>[o(s(Ge),{class:"w-5 h-5 mr-3"}),a[31]||(a[31]=r(" Dashboard ",-1))]),_:1},8,["class"])]),e("li",null,[o(v,{to:"/laboratory",class:w(["flex items-center px-4 py-1.5 sm:py-2.5 rounded-xl transition-all font-medium",(p._.provides[J]||p.$route).path==="/laboratory"?"bg-gradient-to-r from-spider-green-500 to-spider-green-600 text-white shadow-lg shadow-spider-green-500/25":"text-gray-400 hover:bg-gray-700/60 hover:text-gray-200"]),onClick:a[4]||(a[4]=c=>h.value=!1)},{default:R(()=>[o(s(Oe),{class:"w-5 h-5 mr-3"}),a[32]||(a[32]=r(" Laboratory ",-1))]),_:1},8,["class"])]),e("li",null,[o(v,{to:"/triggers",class:w(["flex items-center px-4 py-1.5 sm:py-2.5 rounded-xl transition-all font-medium",(p._.provides[J]||p.$route).path==="/triggers"?"bg-gradient-to-r from-spider-green-500 to-spider-green-600 text-white shadow-lg shadow-spider-green-500/25":"text-gray-400 hover:bg-gray-700/60 hover:text-gray-200"]),onClick:a[5]||(a[5]=c=>h.value=!1)},{default:R(()=>[o(s(Be),{class:"w-5 h-5 mr-3"}),a[33]||(a[33]=r(" Triggers ",-1))]),_:1},8,["class"])]),e("li",null,[o(v,{to:"/settings",class:w(["flex items-center px-4 py-1.5 sm:py-2.5 rounded-xl transition-all font-medium",(p._.provides[J]||p.$route).path==="/settings"?"bg-gradient-to-r from-spider-green-500 to-spider-green-600 text-white shadow-lg shadow-spider-green-500/25":"text-gray-400 hover:bg-gray-700/60 hover:text-gray-200"]),onClick:a[6]||(a[6]=c=>h.value=!1)},{default:R(()=>[o(s(He),{class:"w-5 h-5 mr-3"}),a[34]||(a[34]=r(" Settings ",-1))]),_:1},8,["class"])]),e("li",null,[o(v,{to:"/system",class:w(["flex items-center px-4 py-1.5 sm:py-2.5 rounded-xl transition-all font-medium",(p._.provides[J]||p.$route).path==="/system"?"bg-gradient-to-r from-spider-green-500 to-spider-green-600 text-white shadow-lg shadow-spider-green-500/25":"text-gray-400 hover:bg-gray-700/60 hover:text-gray-200"]),onClick:a[7]||(a[7]=c=>h.value=!1)},{default:R(()=>[o(s(Ze),{class:"w-5 h-5 mr-3"}),a[35]||(a[35]=r(" System ",-1))]),_:1},8,["class"])]),o(N,null,{default:R(()=>[!s(A)||s(T)?(l(),i("li",Rn,[o(v,{to:"/room3d",class:w(["flex items-center px-4 py-1.5 sm:py-2.5 rounded-xl transition-all font-medium",(p._.provides[J]||p.$route).path==="/room3d"?"bg-gradient-to-r from-purple-500 to-indigo-600 text-white shadow-lg shadow-purple-500/25":"text-gray-400 hover:bg-gray-700/60 hover:text-gray-200"]),onClick:a[8]||(a[8]=c=>h.value=!1)},{default:R(()=>[o(s(kt),{class:"w-5 h-5 mr-3"}),a[36]||(a[36]=r(" 3D Grow Room ",-1))]),_:1},8,["class"])])):b("",!0)]),_:1})])]),e("div",Dn,[e("button",{onClick:a[9]||(a[9]=c=>{C.value=!0,h.value=!1}),class:"wx-sidebar-btn w-full flex items-center px-4 py-1.5 sm:py-2.5 rounded-xl transition-all duration-300 font-bold border hover:text-white hover:border-transparent hover:shadow-lg"},[o(s(De),{class:"w-5 h-5 mr-3 shrink-0 wx-sidebar-icon"}),a[37]||(a[37]=e("span",{class:"text-left leading-tight whitespace-nowrap"},"Grow with WEEDLIX",-1))])]),e("div",An,[o(v,{to:"/compare",class:"flex items-center px-4 py-2.5 rounded-xl transition-all font-medium bg-gradient-to-r from-spider-green-500/15 to-emerald-600/10 text-spider-green-400 border border-spider-green-500/30 hover:from-spider-green-500 hover:to-spider-green-600 hover:text-white hover:border-transparent hover:shadow-lg hover:shadow-spider-green-500/25",onClick:a[10]||(a[10]=c=>h.value=!1)},{default:R(()=>[o(s(Xe),{class:"w-5 h-5 mr-3"}),a[38]||(a[38]=r(" App Comparison ",-1))]),_:1})]),e("div",Nn,[e("button",{onClick:a[11]||(a[11]=c=>{P.value=!0,h.value=!1}),class:"w-full flex items-center px-4 py-1.5 sm:py-2.5 rounded-xl transition-all font-medium bg-gradient-to-r from-cyan-500/15 to-blue-600/10 text-cyan-400 border border-cyan-500/30 hover:from-cyan-500 hover:to-cyan-600 hover:text-white hover:border-transparent hover:shadow-lg hover:shadow-cyan-500/25"},[o(s(Ee),{class:"w-5 h-5 mr-3"}),a[39]||(a[39]=r(" How to Install ",-1))])]),e("div",In,[e("a",jn,[o(s(st),{class:"w-5 h-5 mr-3"}),a[40]||(a[40]=r(" Contact Developer ",-1))])]),e("div",Ln,[e("div",On,[e("div",Hn,[e("span",{class:w(["w-2.5 h-2.5 rounded-full animate-pulse",s(z)?"bg-spider-green-500 shadow-lg shadow-spider-green-500/50":"bg-red-500 shadow-lg shadow-red-500/50"])},null,2),e("span",En,d(s(z)?"Connected":"Disconnected"),1)]),e("span",{class:w(["text-xs font-semibold px-2 py-0.5 rounded-lg",s(_).currentPeriod==="day"?"text-yellow-400 bg-yellow-400/10":"text-blue-400 bg-blue-400/10"])},d(s(_).currentPeriod==="day"?"Day":"Night"),3)]),o(N,null,{default:R(()=>[e("div",null,[s(T)?(l(),i("div",Mn,[e("div",Un,[o(s(Ne),{class:"w-4 h-4 text-spider-green-400"}),a[41]||(a[41]=e("span",{class:"text-xs text-spider-green-400 font-medium"},"Unlocked",-1))]),e("button",{onClick:a[12]||(a[12]=(...c)=>s(W)&&s(W)(...c)),class:"text-xs text-gray-400 hover:text-gray-200 font-medium transition-colors"},"Lock")])):(l(),i("form",{key:1,class:"flex gap-2",onSubmit:re(x,["prevent"])},[de(e("input",{"onUpdate:modelValue":a[13]||(a[13]=c=>G.value=c),type:"password",placeholder:"Password",autocomplete:"current-password",class:"flex-1 bg-gray-900/60 border border-gray-600/50 rounded-lg px-3 py-2 text-xs text-gray-300 focus:border-spider-green-500/50 focus:outline-none transition-colors"},null,512),[[ge,G.value]]),a[42]||(a[42]=e("button",{type:"submit",class:"px-3 py-2 bg-gradient-to-r from-gray-700 to-gray-600 text-gray-300 rounded-lg text-xs font-medium hover:from-gray-600 hover:to-gray-500 transition-all"},"OK",-1))],32)),ae.value?(l(),i("p",Wn,[...a[43]||(a[43]=[e("span",{class:"w-1 h-1 rounded-full bg-red-400"},null,-1),r(" Wrong password ",-1)])])):b("",!0)])]),_:1})])],2),e("div",Vn,[de(e("header",Fn,[e("button",{onClick:a[14]||(a[14]=c=>h.value=!0),class:"p-1.5 text-gray-400 hover:text-white hover:bg-gray-700/60 rounded-lg transition-all"},[o(s(yt),{class:"w-5 h-5"})]),a[44]||(a[44]=e("img",{src:"/data/appdata/images/SCHEDULE-4-REAL.svg",alt:"Schedule 4 Real",class:"h-6 select-none",draggable:"false"},null,-1)),e("div",qn,[e("span",{class:w(["text-[10px] font-semibold px-1.5 py-0.5 rounded",s(_).currentPeriod==="day"?"text-yellow-400 bg-yellow-400/10":"text-blue-400 bg-blue-400/10"])},d(s(_).currentPeriod==="day"?"DAY":"NIGHT"),3),o(N,null,{default:R(()=>[e("button",{onClick:a[15]||(a[15]=c=>s(T)?s(W)():D.value=!0),class:w(["p-1.5 rounded-lg transition-all",s(T)?"text-spider-green-400 bg-spider-green-400/10":"text-gray-400 hover:bg-gray-700/60"])},[s(T)?(l(),B(s(Ne),{key:0,class:"w-4 h-4"})):(l(),B(s(Te),{key:1,class:"w-4 h-4"}))],2)]),_:1}),e("span",{class:w(["w-2.5 h-2.5 rounded-full animate-pulse",s(z)?"bg-spider-green-500 shadow-lg shadow-spider-green-500/50":"bg-red-500 shadow-lg shadow-red-500/50"])},null,2)])],512),[[ct,!s($)]]),e("main",{class:w(["flex-1 min-h-0 flex flex-col",["/triggers","/compare","/laboratory","/room3d"].includes((p._.provides[J]||p.$route).path)?"overflow-hidden":"overflow-auto py-2 sm:p-4 lg:p-6"])},[mt(p.$slots,"default",{},void 0,!0)],2)]),s($)?b("",!0):(l(),i("nav",zn,[o(v,{to:"/",class:w(["p-2 rounded-xl transition-all",(p._.provides[J]||p.$route).path==="/"?"bg-gradient-to-br from-spider-green-500 to-spider-green-600 text-white shadow-lg shadow-spider-green-500/30":"text-gray-400 hover:bg-gray-700/60 hover:text-white"])},{default:R(()=>[o(s(Ge),{class:"w-5 h-5"})]),_:1},8,["class"]),o(v,{to:"/triggers",class:w(["p-2 rounded-xl transition-all",(p._.provides[J]||p.$route).path==="/triggers"?"bg-gradient-to-br from-spider-green-500 to-spider-green-600 text-white shadow-lg shadow-spider-green-500/30":"text-gray-400 hover:bg-gray-700/60 hover:text-white"])},{default:R(()=>[o(s(Be),{class:"w-5 h-5"})]),_:1},8,["class"]),o(v,{to:"/laboratory",class:w(["p-2 rounded-xl transition-all",(p._.provides[J]||p.$route).path==="/laboratory"?"bg-gradient-to-br from-spider-green-500 to-spider-green-600 text-white shadow-lg shadow-spider-green-500/30":"text-gray-400 hover:bg-gray-700/60 hover:text-white"])},{default:R(()=>[o(s(Oe),{class:"w-5 h-5"})]),_:1},8,["class"]),o(v,{to:"/settings",class:w(["p-2 rounded-xl transition-all",(p._.provides[J]||p.$route).path==="/settings"?"bg-gradient-to-br from-spider-green-500 to-spider-green-600 text-white shadow-lg shadow-spider-green-500/30":"text-gray-400 hover:bg-gray-700/60 hover:text-white"])},{default:R(()=>[o(s(He),{class:"w-5 h-5"})]),_:1},8,["class"]),o(v,{to:"/system",class:w(["p-2 rounded-xl transition-all",(p._.provides[J]||p.$route).path==="/system"?"bg-gradient-to-br from-spider-green-500 to-spider-green-600 text-white shadow-lg shadow-spider-green-500/30":"text-gray-400 hover:bg-gray-700/60 hover:text-white"])},{default:R(()=>[o(s(Ze),{class:"w-5 h-5"})]),_:1},8,["class"]),e("div",Gn,[e("button",{onClick:a[16]||(a[16]=c=>C.value=!0),class:"wx-sidebar-btn p-1.5 rounded-xl transition-all duration-300 border hover:text-white hover:border-transparent hover:shadow-lg",title:"Grow with WEEDLIX"},[o(s(De),{class:"w-4 h-4 wx-sidebar-icon"})]),o(v,{to:"/compare",class:"p-1.5 rounded-xl transition-all bg-spider-green-500/15 text-spider-green-400 border border-spider-green-500/30 hover:bg-spider-green-500 hover:text-white hover:border-transparent hover:shadow-lg hover:shadow-spider-green-500/30",title:"App Comparison"},{default:R(()=>[o(s(Xe),{class:"w-4 h-4"})]),_:1}),e("button",{onClick:a[17]||(a[17]=c=>P.value=!0),class:"p-1.5 rounded-xl transition-all bg-cyan-500/15 text-cyan-400 border border-cyan-500/30 hover:bg-cyan-500 hover:text-white hover:border-transparent hover:shadow-lg hover:shadow-cyan-500/30",title:"How to Install"},[o(s(Ee),{class:"w-4 h-4"})]),e("span",{class:w(["text-[9px] font-semibold px-1.5 py-0.5 rounded",s(_).currentPeriod==="day"?"text-yellow-400 bg-yellow-400/10":"text-blue-400 bg-blue-400/10"])},d(s(_).currentPeriod==="day"?"DAY":"NGT"),3),o(N,null,{default:R(()=>[e("button",{onClick:a[18]||(a[18]=c=>s(T)?s(W)():D.value=!0),class:w(["p-1.5 rounded-xl transition-all",s(T)?"text-spider-green-400 bg-spider-green-400/15":"text-gray-400 hover:bg-gray-700/60"])},[s(T)?(l(),B(s(Ne),{key:0,class:"w-4 h-4"})):(l(),B(s(Te),{key:1,class:"w-4 h-4"}))],2)]),_:1}),e("span",{class:w(["w-2.5 h-2.5 rounded-full animate-pulse",s(z)?"bg-spider-green-500 shadow-lg shadow-spider-green-500/50":"bg-red-500 shadow-lg shadow-red-500/50"])},null,2)])])),(l(),B(ye,{to:"body"},[D.value&&!s($)?(l(),i("div",{key:0,class:"fixed inset-0 z-[100] flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",onClick:a[21]||(a[21]=re(c=>D.value=!1,["self"]))},[e("form",{class:"bg-gradient-to-br from-gray-800/95 to-gray-900/95 backdrop-blur-md rounded-2xl border border-gray-700/50 p-5 w-full max-w-xs shadow-2xl relative overflow-hidden",onSubmit:re(m,["prevent"])},[a[48]||(a[48]=e("div",{class:"absolute -top-6 -left-6 w-24 h-24 rounded-full blur-2xl pointer-events-none bg-spider-green-500/20"},null,-1)),e("div",Yn,[e("div",Bn,[e("div",Zn,[o(s(Te),{class:"w-5 h-5 text-spider-green-400"})]),a[45]||(a[45]=e("h3",{class:"text-base font-semibold text-white"},"Enter Password",-1))]),de(e("input",{ref_key:"modalPasswordInput",ref:ce,"onUpdate:modelValue":a[19]||(a[19]=c=>G.value=c),type:"password",placeholder:"Password",autocomplete:"current-password",class:"w-full bg-gray-900/60 border border-gray-600/50 rounded-xl px-4 py-3 text-sm text-gray-300 focus:border-spider-green-500/50 focus:outline-none mb-3 transition-colors"},null,512),[[ge,G.value]]),ae.value?(l(),i("p",Xn,[...a[46]||(a[46]=[e("span",{class:"w-1 h-1 rounded-full bg-red-400"},null,-1),r(" Wrong password ",-1)])])):b("",!0),e("div",Qn,[e("button",{type:"button",onClick:a[20]||(a[20]=c=>D.value=!1),class:"flex-1 py-2.5 bg-gray-700/60 text-gray-300 rounded-xl text-sm font-medium hover:bg-gray-600/60 transition-colors"},"Cancel"),a[47]||(a[47]=e("button",{type:"submit",class:"flex-1 py-2.5 bg-gradient-to-r from-spider-green-500 to-spider-green-600 text-white rounded-xl text-sm font-semibold hover:from-spider-green-400 hover:to-spider-green-500 shadow-lg shadow-spider-green-500/25 transition-all"},"Unlock",-1))])])],32)])):b("",!0)])),(l(),B(ye,{to:"body"},[s(V)&&!s($)?(l(),i("div",{key:0,class:"fixed inset-0 z-[100] flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",onClick:a[25]||(a[25]=re((...c)=>s(Q)&&s(Q)(...c),["self"]))},[e("form",{class:"bg-gradient-to-br from-gray-800/95 to-gray-900/95 backdrop-blur-md rounded-2xl border border-gray-700/50 p-5 w-full max-w-xs shadow-2xl relative overflow-hidden",onSubmit:a[24]||(a[24]=re((...c)=>s(F)&&s(F)(...c),["prevent"]))},[a[52]||(a[52]=e("div",{class:"absolute -top-6 -left-6 w-24 h-24 rounded-full blur-2xl pointer-events-none bg-yellow-500/20"},null,-1)),e("div",Kn,[e("div",Jn,[e("div",ei,[o(s(Te),{class:"w-5 h-5 text-yellow-400"})]),a[49]||(a[49]=e("h3",{class:"text-base font-semibold text-white"},"Authentication Required",-1))]),a[51]||(a[51]=e("p",{class:"text-xs text-gray-400 mb-4"},"Enter your password to perform this action.",-1)),de(e("input",{ref_key:"gatePasswordRef",ref:be,"onUpdate:modelValue":a[22]||(a[22]=c=>ve(X)?X.value=c:null),type:"password",placeholder:"Password",autocomplete:"current-password",class:"w-full bg-gray-900/60 border border-gray-600/50 rounded-xl px-4 py-3 text-sm text-gray-300 focus:border-spider-green-500/50 focus:outline-none mb-3 transition-colors"},null,512),[[ge,s(X)]]),s(ne)?(l(),i("p",ti,[...a[50]||(a[50]=[e("span",{class:"w-1 h-1 rounded-full bg-red-400"},null,-1),r(" Wrong password ",-1)])])):b("",!0),e("div",si,[e("button",{type:"button",onClick:a[23]||(a[23]=(...c)=>s(Q)&&s(Q)(...c)),class:"flex-1 py-2.5 bg-gray-700/60 text-gray-300 rounded-xl text-sm font-medium hover:bg-gray-600/60 transition-colors"},"Cancel"),e("button",{type:"submit",disabled:s(le),class:"flex-1 py-2.5 bg-gradient-to-r from-spider-green-500 to-spider-green-600 text-white rounded-xl text-sm font-semibold hover:from-spider-green-400 hover:to-spider-green-500 shadow-lg shadow-spider-green-500/25 transition-all disabled:opacity-50"},d(s(le)?"Verifying...":"Unlock"),9,ri)])])],32)])):b("",!0)])),o(N,null,{default:R(()=>[o(ie,{forceOpen:f.value,"onUpdate:forceOpen":a[26]||(a[26]=c=>f.value=c)},null,8,["forceOpen"])]),_:1}),o(N,null,{default:R(()=>[o(se)]),_:1}),o(N,null,{default:R(()=>[o(y,{forceOpen:C.value,"onUpdate:forceOpen":a[27]||(a[27]=c=>C.value=c)},null,8,["forceOpen"])]),_:1}),o(N,null,{default:R(()=>[o(H,{modelValue:P.value,"onUpdate:modelValue":a[28]||(a[28]=c=>P.value=c)},null,8,["modelValue"])]),_:1}),o(N,null,{default:R(()=>[o(q)]),_:1})])}}},Ri=he(oi,[["__scopeId","data-v-08e7b3e2"]]);export{Ri as default};
