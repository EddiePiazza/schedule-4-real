import{createRenderer as e,getRequestDependencies as t,getPreloadLinks as r,getPrefetchLinks as n}from"vue-bundle-renderer/runtime";import{q as o,u as s,t as a,v as i,w as d,x as u,a as l,c,y as p,z as h,A as f,B as m}from"../nitro/nitro.mjs";import{renderToString as y}from"vue/server-renderer";import{createHead as b,propsToString as g,renderSSRHead as v}from"unhead/server";import{stringify as w,uneval as _}from"devalue";import{walkResolver as R}from"unhead/utils";import{isRef as x,toValue as A,hasInjectionContext as C,inject as S,ref as j,watchEffect as T,getCurrentInstance as L,onBeforeUnmount as U,onDeactivated as P,onActivated as k}from"vue";const VueResolver=(e,t)=>x(t)?A(t):t,H="usehead";function injectHead(){if(C()){const e=S(H);if(!e)throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.");return e}throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.")}function useHead(e,t={}){const r=t.head||injectHead();return r.ssr?r.push(e||{},t):function(e,t,r={}){const n=j(!1);let o;T(()=>{const s=n.value?{}:R(t,VueResolver);o?o.patch(s):o=e.push(s,r)});L()&&(U(()=>{o.dispose()}),P(()=>{n.value=!0}),k(()=>{n.value=!1}));return o}(r,e,t)}function createHead(e={}){const t=b({...e,propResolvers:[VueResolver]});return t.install=function(e){return{install(t){t.config.globalProperties.$unhead=e,t.config.globalProperties.$head=e,t.provide(H,e)}}.install}(t),t}const $={meta:[{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover"},{charset:"utf-8"},{name:"description",content:"Schedule 4 Real"},{name:"theme-color",content:"#22c55e"}],link:[],style:[],script:[],noscript:[],charset:"utf-8",viewport:"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover",title:"Schedule 4 Real"},z={id:"teleports"},M={id:"__nuxt-loader"};function baseURL(){return s().app.baseURL}function buildAssetsURL(...e){return o(publicAssetsURL(),s().app.buildAssetsDir,...e)}function publicAssetsURL(...e){const t=s().app,r=t.cdnURL||t.baseURL;return e.length?o(r,...e):r}const N=`<div${g({id:"__nuxt"})}>`,O="</div>",getPrecomputedDependencies=()=>import("../build/client.precomputed.mjs").then(e=>e.default||e).then(e=>"function"==typeof e?e():e),F=lazyCachedFunction(async()=>{const t=await import("../build/server.mjs").then(e=>e.default||e);if(!t)throw new Error("Server bundle is not available");const r=await getPrecomputedDependencies();return e(t,{precomputed:r,manifest:void 0,renderToString:async function(e,t){const r=await y(e,t);return N+r+O},buildAssetsURL:buildAssetsURL})}),D=lazyCachedFunction(async()=>{const t=await getPrecomputedDependencies(),r=await import("../virtual/_virtual_spa-template.mjs").then(e=>e.template).catch(()=>"").then(e=>{{const t=`<div${g(M)}>`;return N+O+(e?t+e+"</div>":"")}}),n=e(()=>()=>{},{precomputed:t,manifest:void 0,renderToString:()=>r,buildAssetsURL:buildAssetsURL}),o=await n.renderToString({});return{rendererContext:n.rendererContext,renderToString:e=>{const t=s(e.event);return e.modules||=new Set,e.payload.serverRendered=!1,e.config={public:t.public,app:t.app},Promise.resolve(o)}}});function lazyCachedFunction(e){let t=null;return()=>(null===t&&(t=e().catch(e=>{throw t=null,e})),t)}const E=lazyCachedFunction(()=>import("../build/styles.mjs").then(e=>e.default||e));function renderPayloadJsonScript(e){const t={type:"application/json",innerHTML:e.data?w(e.data,e.ssrContext["~payloadReducers"]):"","data-nuxt-data":"nuxt-app","data-ssr":!e.ssrContext.noSSR,id:"__NUXT_DATA__"};e.src&&(t["data-src"]=e.src);return[t,{innerHTML:`window.__NUXT__={};window.__NUXT__.config=${_(e.ssrContext.config)}`}]}function splitPayload(e){const{data:t,prerenderedAt:r,...n}=e.payload;return{initial:{...n,prerenderedAt:r},payload:{data:t,prerenderedAt:r}}}const I={disableDefaults:!0};const q={omitLineBreaks:!0},X=[];globalThis.__buildAssetsURL=buildAssetsURL,globalThis.__publicAssetsURL=publicAssetsURL;const B=!!z.id,J=B?`<div${g(z)}>`:"",W=B?"</div>":"",Y=/^[^?]*\/_payload.json(?:\?.*)?$/,G=u(async e=>{const o=m(),u=e.path.startsWith("/__nuxt_error")?l(e):null;if(u&&!("__unenv__"in e.node.req))throw c({status:404,statusText:"Page Not Found: /__nuxt_error",message:"Page Not Found: /__nuxt_error"});const y=function(e){return{url:d(e.path),event:e,runtimeConfig:s(e),noSSR:e.context.nuxt?.noSSR||!1,head:createHead(I),error:!1,nuxt:void 0,payload:{},"~payloadReducers":Object.create(null),modules:new Set}}(e),b={mode:"server"};if(y.head.push($,b),u){const e=u.status||u.statusCode;if(e&&(u.status=u.statusCode=Number.parseInt(e)),"string"==typeof u.data)try{u.data=p(u.data)}catch{}!function(e,t){e.error=!0,e.payload={error:t},e.url=t.url}(y,u)}const g=h(e),_=!y.noSSR&&false,R=!!_&&Y.test(y.url);if(R){const t=y.url.substring(0,y.url.lastIndexOf("/"))||"/";y.url=t,e._path=e.node.req.url=t}!1===g.ssr&&(y.noSSR=!0);const x=_?f(y.runtimeConfig.app.cdnURL||y.runtimeConfig.app.baseURL,y.url.replace(/\?.*$/,""),"_payload.json")+"?"+y.runtimeConfig.app.buildId:void 0,A=await function(e){return e.noSSR?D():F()}(y);for(const e of X)y.modules.add(e);const C=await A.renderToString(y).catch(async e=>{if((y["~renderResponse"]||y._renderResponse)&&"skipping render"===e.message)return{};const t=!u&&y.payload?.error||e;throw await(y.nuxt?.hooks.callHook("app:error",t)),t}),S=y["~renderResponse"]||y._renderResponse||R?[]:await async function(e){const t=await E(),r=new Set;for(const n of e)if(n in t&&t[n])for(const e of await t[n]())r.add(e);return Array.from(r).map(e=>({innerHTML:e}))}(y.modules??[]);if(await(y.nuxt?.hooks.callHook("app:rendered",{ssrContext:y,renderResult:C})),y["~renderResponse"]||y._renderResponse)return y["~renderResponse"]||y._renderResponse;if(y.payload?.error&&!u)throw y.payload.error;if(R){const e=function(e){return{body:w(splitPayload(e).payload,e["~payloadReducers"]),statusCode:i(e.event),statusMessage:a(e.event),headers:{"content-type":"application/json;charset=utf-8","x-powered-by":"Nuxt"}}}(y);return e}const j=g.noScripts,{styles:T,scripts:L}=t(y,A.rendererContext);_&&!j&&y.head.push({link:[{rel:"preload",as:"fetch",crossorigin:"anonymous",href:x}]},b),y["~preloadManifest"]&&!j&&y.head.push({link:[{rel:"preload",as:"fetch",fetchpriority:"low",crossorigin:"anonymous",href:buildAssetsURL(`builds/meta/${y.runtimeConfig.app.buildId}.json`)}]},{...b,tagPriority:"low"}),S.length&&y.head.push({style:S});const U=[];for(const e of Object.values(T))U.push({rel:"stylesheet",href:A.rendererContext.buildAssetsURL(e.file),crossorigin:""});if(U.length&&y.head.push({link:U},b),!j){if(y["~lazyHydratedModules"])for(const e of y["~lazyHydratedModules"])y.modules?.delete(e);y.head.push({link:r(y,A.rendererContext)},b),y.head.push({link:n(y,A.rendererContext)},b),y.head.push({script:renderPayloadJsonScript(_?{ssrContext:y,data:splitPayload(y).initial,src:x}:{ssrContext:y,data:y.payload})},{...b,tagPosition:"bodyClose",tagPriority:"high"})}if(!g.noScripts){const e="head";y.head.push({script:Object.values(L).map(t=>({type:t.module?"module":null,src:A.rendererContext.buildAssetsURL(t.file),defer:!t.module||null,tagPosition:e,crossorigin:""}))},b)}const{headTags:P,bodyTags:k,bodyTagsOpen:H,htmlAttrs:M,bodyAttrs:N}=await v(y.head,q),O={htmlAttrs:M?[M]:[],head:normalizeChunks([P]),bodyAttrs:N?[N]:[],bodyPrepend:normalizeChunks([H,y.teleports?.body]),body:[C.html,J+(B?joinTags([y.teleports?.[`#${z.id}`]]):"")+W],bodyAppend:[k]};return await o.hooks.callHook("render:html",O,{event:e}),{body:(G=O,`<!DOCTYPE html><html${joinAttrs(G.htmlAttrs)}><head>${joinTags(G.head)}</head><body${joinAttrs(G.bodyAttrs)}>${joinTags(G.bodyPrepend)}${joinTags(G.body)}${joinTags(G.bodyAppend)}</body></html>`),statusCode:i(e),statusMessage:a(e),headers:{"content-type":"text/html;charset=utf-8","x-powered-by":"Nuxt"}};var G});function normalizeChunks(e){const t=[];for(const r of e){const e=r?.trim();e&&t.push(e)}return t}function joinTags(e){return e.join("")}function joinAttrs(e){return 0===e.length?"":" "+e.join(" ")}const K=Object.freeze(Object.defineProperty({__proto__:null,default:G},Symbol.toStringTag,{value:"Module"}));export{baseURL as b,H as h,K as r,useHead as u};
