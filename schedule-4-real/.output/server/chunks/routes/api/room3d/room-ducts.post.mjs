import{d as t,r,c as o,b as i}from"../../../nitro/nitro.mjs";import{mkdir as s,writeFile as p}from"fs/promises";import{join as m}from"path";import"node:http";import"node:https";import"node:crypto";import"stream";import"events";import"http";import"crypto";import"buffer";import"zlib";import"https";import"net";import"tls";import"url";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"fs";import"node:url";const e=t(async t=>{const e=await r(t);if(!e||"string"!=typeof e.roomId||!Array.isArray(e.ducts))throw o({statusCode:400,message:"roomId (string) and ducts (array) required"});const a=e.roomId.replace(/[^a-zA-Z0-9._-]/g,""),n=m(i(),"data","room3d","ducts");await s(n,{recursive:!0});const d=m(n,`${a}.json`);return await p(d,JSON.stringify(e.ducts,null,2),"utf-8"),{ok:!0}});export{e as default};
