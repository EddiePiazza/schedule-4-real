import{d as t,b as o}from"../../../nitro/nitro.mjs";import{readdir as e}from"fs/promises";import{join as r,extname as n}from"path";import"node:http";import"node:https";import"node:crypto";import"stream";import"events";import"http";import"crypto";import"buffer";import"zlib";import"https";import"net";import"tls";import"url";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"fs";import"node:url";const a=new Set([".ttf",".otf",".woff"]);async function collectFonts(t,o){let r;try{r=await e(t,{withFileTypes:!0})}catch{return[]}const s=[];for(const t of r){if(!t.isFile())continue;const e=n(t.name).toLowerCase();if(!a.has(e))continue;const r=t.name.replace(/\.[^.]+$/,"").replace(/[-_]/g," "),p="system"===o?`/data/appdata/fonts/${t.name}`:`/data/room3d/fonts/${t.name}`;s.push({name:r,path:p,source:o})}return s}const s=t(async()=>{const t=r(o(),"data","appdata","fonts"),e=r(o(),"data","room3d","fonts"),n=await collectFonts(t,"system"),a=await collectFonts(e,"user"),s=new Map;for(const t of n)s.set(t.name.toLowerCase(),t);for(const t of a)s.set(t.name.toLowerCase(),t);return[...s.values()].sort((t,o)=>t.name.localeCompare(o.name))});export{s as default};
