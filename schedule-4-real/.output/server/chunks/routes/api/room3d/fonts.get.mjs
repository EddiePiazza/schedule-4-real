import{d as t,b as o}from"../../../nitro/nitro.mjs";import{readdir as e}from"fs/promises";import{join as r,extname as n}from"path";import"node:http";import"node:https";import"node:crypto";import"stream";import"events";import"http";import"crypto";import"buffer";import"zlib";import"https";import"net";import"tls";import"url";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"fs";import"node:url";const s=new Set([".ttf",".otf",".woff"]);async function collectFonts(t,o){let r;try{r=await e(t,{withFileTypes:!0})}catch{return[]}const a=[];for(const t of r){if(!t.isFile())continue;const e=n(t.name).toLowerCase();if(!s.has(e))continue;const r=t.name.replace(/\.[^.]+$/,"").replace(/[-_]/g," "),m="system"===o?`/fonts/${t.name}`:`/room3d-fonts/${t.name}`;a.push({name:r,path:m,source:o})}return a}const a=t(async()=>{const t=r(o(),"data","appdata","fonts"),e=r(o(),"data","room3d","fonts"),n=await collectFonts(t,"system"),s=await collectFonts(e,"user"),a=new Map;for(const t of n)a.set(t.name.toLowerCase(),t);for(const t of s)a.set(t.name.toLowerCase(),t);return[...a.values()].sort((t,o)=>t.name.localeCompare(o.name))});export{a as default};
