import{d as t,g as o,c as r,b as e}from"../../../../nitro/nitro.mjs";import{readFile as m}from"fs/promises";import{join as s}from"path";import"node:http";import"node:https";import"node:crypto";import"stream";import"events";import"http";import"crypto";import"buffer";import"zlib";import"https";import"net";import"tls";import"url";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"fs";import"node:url";const p=/^[A-Z0-9]{4}$/,i=t(async t=>{const i=(o(t,"code")||"").toUpperCase().trim();if(!p.test(i))throw r({statusCode:400,message:"Invalid room code format"});const n=s(e(),"data","room3d","room-codes.json");let a={};try{a=JSON.parse(await m(n,"utf-8"))}catch{}for(const[t,o]of Object.entries(a))if(o===i)return{envId:t};throw r({statusCode:404,message:"Room code not found"})});export{i as default};
