import{d as t}from"../../../nitro/nitro.mjs";import{readdir as o,stat as i}from"fs/promises";import{join as r,extname as e}from"path";import"node:http";import"node:https";import"node:crypto";import"stream";import"events";import"http";import"crypto";import"buffer";import"zlib";import"https";import"net";import"tls";import"url";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"fs";import"node:url";const p=new Set([".jpg",".jpeg",".png",".gif",".webp",".svg",".mp4",".webm"]),m=t(async()=>{try{const t=r(process.cwd(),"data","room3d","display-images"),m=r(process.cwd(),"data","appdata","display-images"),s=new Set,a=[];for(const{dir:d,prefix:n}of[{dir:t,prefix:"/data/room3d/display-images/"},{dir:m,prefix:"/data/appdata/display-images/"}]){const t=await o(d).catch(()=>[]);for(const o of t){if(s.has(o))continue;const t=e(o).toLowerCase();if(!p.has(t))continue;const m=await i(r(d,o)).catch(()=>null);if(!m||!m.isFile())continue;s.add(o);const f=".mp4"===t||".webm"===t;a.push({name:o,path:`${n}${o}`,size:m.size,modified:m.mtimeMs,type:f?"video":"image"})}}return a.sort((t,o)=>o.modified-t.modified),a}catch{return[]}});export{m as default};
