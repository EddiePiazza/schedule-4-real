import{d as t,r as o,c as r,b as s}from"../../../nitro/nitro.mjs";import{mkdir as e,writeFile as i}from"fs/promises";import{join as p}from"path";import"node:http";import"node:https";import"node:crypto";import"stream";import"events";import"http";import"crypto";import"buffer";import"zlib";import"https";import"net";import"tls";import"url";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"fs";import"node:url";const m=t(async t=>{const m=await o(t);if(!m||"string"!=typeof m.roomId||!Array.isArray(m.objects))throw r({statusCode:400,message:"roomId (string) and objects (array) required"});const a=m.roomId.replace(/[^a-zA-Z0-9._-]/g,""),n=p(s(),"data","appdata","defaults","room-objects");await e(n,{recursive:!0});const c=p(n,`${a}.json`);return console.log(`[room-objects.post] Writing ${m.objects.length} objects to ${c}`),await i(c,JSON.stringify(m.objects,null,2),"utf-8"),{ok:!0,count:m.objects.length}});export{m as default};
