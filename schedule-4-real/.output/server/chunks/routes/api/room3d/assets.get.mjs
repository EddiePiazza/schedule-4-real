import{d as t,b as o}from"../../../nitro/nitro.mjs";import{stat as r,readdir as s}from"fs/promises";import{join as e,relative as p}from"path";import"node:http";import"node:https";import"node:crypto";import"stream";import"events";import"http";import"crypto";import"buffer";import"zlib";import"https";import"net";import"tls";import"url";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"fs";import"node:url";async function collectGlbs(t,o){let r;try{r=await s(t,{withFileTypes:!0})}catch{return[]}const a=[];for(const s of r){const r=e(t,s.name);s.isDirectory()?a.push(...await collectGlbs(r,o)):s.isFile()&&s.name.toLowerCase().endsWith(".glb")&&a.push(p(o,r))}return a}const a=t(async()=>{const t=e(o(),"data","appdata","models","assets"),s=e(o(),"data","room3d","models","assets"),p=[];try{await r(t);const o=await collectGlbs(t,t);for(const t of o)p.push({path:t,source:"system"})}catch{}try{await r(s);const t=await collectGlbs(s,s);for(const o of t)p.push({path:o,source:"user"})}catch{}return p.sort((t,o)=>t.path.localeCompare(o.path)),p});export{a as default};
