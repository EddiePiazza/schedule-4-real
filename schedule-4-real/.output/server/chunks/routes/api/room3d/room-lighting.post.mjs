import{d as t,r as o,c as r,b as i}from"../../../nitro/nitro.mjs";import{mkdir as m,writeFile as s}from"fs/promises";import{join as e}from"path";import"node:http";import"node:https";import"node:crypto";import"stream";import"events";import"http";import"crypto";import"buffer";import"zlib";import"https";import"net";import"tls";import"url";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"fs";import"node:url";const p=t(async t=>{const p=await o(t);if(!p||"string"!=typeof p.roomId||!p.config)throw r({statusCode:400,message:"roomId (string) and config (object) required"});const a=p.roomId.replace(/[^a-zA-Z0-9._-]/g,"");if(!a)throw r({statusCode:400,message:"Invalid roomId"});const n=p.system?e(i(),"data","appdata","defaults","room-lighting"):e(i(),"data","room3d","room-lighting");return await m(n,{recursive:!0}),await s(e(n,`${a}.json`),JSON.stringify(p.config,null,2),"utf-8"),{ok:!0}});export{p as default};
