import{d as r,r as t,c as o,b as e}from"../../../nitro/nitro.mjs";import{mkdir as i,writeFile as a}from"fs/promises";import{join as s}from"path";import"node:http";import"node:https";import"node:crypto";import"stream";import"events";import"http";import"crypto";import"buffer";import"zlib";import"https";import"net";import"tls";import"url";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"fs";import"node:url";const m=r(async r=>{const m=await t(r);if(!m||!Array.isArray(m.added)||!Array.isArray(m.removed))throw o({statusCode:400,message:"added (array) and removed (array of urls) required"});const p=s(e(),"data","room3d");await i(p,{recursive:!0});const d=s(p,"tv-channels-user.json"),n={added:m.added,removed:m.removed,favorites:Array.isArray(m.favorites)?m.favorites:[],favoritesOnly:!!m.favoritesOnly};return await a(d,JSON.stringify(n,null,2),"utf-8"),{ok:!0}});export{m as default};
