import{d as t,c as e}from"../../../nitro/nitro.mjs";import{g as o,c as r,d as i}from"../../../_/mqtt.mjs";import"node:http";import"node:https";import"node:crypto";import"stream";import"events";import"http";import"crypto";import"buffer";import"zlib";import"https";import"net";import"tls";import"url";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"fs";import"path";import"fs/promises";import"node:url";import"mqtt";import"child_process";const m=t(async()=>{var t,m,l,p,s,n;try{const e=o();let d={};const a=r(e);if(null==(t=null==a?void 0:a.data)?void 0:t.blower)d=a.data.blower;else try{const t=await i(["device","blower"],e,5e3);d=(null==t?void 0:t.blower)||{}}catch{}const c=null!=(m=d.mLevel)?m:d.level,f=null!=(l=d.closeCO2)?l:0;return{on:1===d.mOnOff||1===d.on||!0===d.on,level:c&&c>0?c:50,modeType:null!=(p=d.modeType)?p:0,closeCO2:1===f||!0===f,minSpeed:null!=(s=d.minSpeed)?s:0,maxSpeed:null!=(n=d.maxSpeed)?n:0,timePeriod:d.timePeriod||[],cycleTime:d.cycleTime||null}}catch(t){throw console.error("Failed to fetch blower state:",t),e({statusCode:500,message:"Failed to fetch blower state from device"})}});export{m as default};
