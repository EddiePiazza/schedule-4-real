import{d as t,g as o,c as e}from"../../../../nitro/nitro.mjs";import{query as r}from"../../../../_/db.mjs";import"node:http";import"node:https";import"node:crypto";import"stream";import"events";import"http";import"crypto";import"buffer";import"zlib";import"https";import"net";import"tls";import"url";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"fs";import"path";import"fs/promises";import"node:url";import"pg";const i=t(async t=>{const i=o(t,"id");if(!i)throw e({statusCode:400,message:"Flow ID is required"});try{if(0===(await r("\n      SELECT id FROM automation_flows WHERE id = $1 LIMIT 1\n    ",[i])).length)throw e({statusCode:404,message:"Flow not found"});return await r("\n      INSERT INTO automation_flows (id, name, description, enabled, flow_json, created_at, updated_at)\n      VALUES ($1, '', '', -1, '{}', now(), now())\n    ",[i]),{success:!0,id:i}}catch(t){if(t.statusCode)throw t;throw console.error("Failed to delete flow:",t),e({statusCode:500,message:"Failed to delete flow"})}});export{i as default};
