import{d as t,g as o,r,c as s}from"../../../../nitro/nitro.mjs";import{l as i}from"../../../../_/cameras.mjs";import{c as p}from"../../../../_/camera-fetch.mjs";import"node:http";import"node:https";import"node:crypto";import"stream";import"events";import"http";import"crypto";import"buffer";import"zlib";import"https";import"net";import"tls";import"url";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"fs";import"path";import"fs/promises";import"node:url";import"../../../../_/db.mjs";import"pg";const m=t(async t=>{const m=o(t,"id"),a=await r(t),e=null==a?void 0:a.path;if(!e||"string"!=typeof e)throw s({statusCode:400,message:"Missing path parameter"});if(!e.startsWith("/")||e.includes("://")||e.includes(".."))throw s({statusCode:400,message:"Invalid path"});const n=(await i()).find(t=>t.id===m);if(!n)throw s({statusCode:404,message:"Camera not found"});const d=await p(n.host,n.port,e);return{success:d.ok,status:d.status,body:d.body.toString("utf-8")}});export{m as default};
