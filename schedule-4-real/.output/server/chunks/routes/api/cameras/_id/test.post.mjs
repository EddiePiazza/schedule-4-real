import{d as t,g as o,c as r}from"../../../../nitro/nitro.mjs";import{createConnection as s}from"net";import{l as e}from"../../../../_/cameras.mjs";import"node:http";import"node:https";import"node:crypto";import"stream";import"events";import"http";import"crypto";import"buffer";import"zlib";import"https";import"tls";import"url";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"fs";import"path";import"fs/promises";import"node:url";import"../../../../_/db.mjs";import"pg";const m=t(async t=>{const m=o(t,"id"),p=(await e()).find(t=>t.id===m);if(!p)throw r({statusCode:404,message:"Camera not found"});return await new Promise(t=>{const o=s({host:p.host,port:p.port,timeout:5e3});o.on("connect",()=>{o.destroy(),t({success:!0,message:`Connected to ${p.host}:${p.port}`})}),o.on("timeout",()=>{o.destroy(),t({success:!1,message:`Timeout connecting to ${p.host}:${p.port}`})}),o.on("error",r=>{o.destroy(),t({success:!1,message:`Cannot reach ${p.host}:${p.port} â€” ${r.message}`})})})});export{m as default};
