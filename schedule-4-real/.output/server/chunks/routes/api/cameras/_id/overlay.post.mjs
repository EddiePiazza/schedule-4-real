import{d as t,g as o,c as e,r}from"../../../../nitro/nitro.mjs";import{D as s,b as i}from"../../../../_/cameras.mjs";import"node:http";import"node:https";import"node:crypto";import"stream";import"events";import"http";import"crypto";import"buffer";import"zlib";import"https";import"net";import"tls";import"url";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"fs";import"path";import"fs/promises";import"node:url";import"../../../../_/db.mjs";import"pg";const a=["bottom-left","bottom-right","top-left","top-right"],m=["YYYY-MM-DD","DD/MM/YYYY","MM/DD/YYYY"],n=["white","yellow","green","cyan","red"],p=t(async t=>{const p=o(t,"id");if(!p)throw e({statusCode:400,message:"Missing camera id"});const d=await r(t)||{},_={camera_id:p,enabled:Boolean(d.enabled),position:a.includes(d.position)?d.position:s.position,show_date:!1!==d.show_date,date_format:m.includes(d.date_format)?d.date_format:s.date_format,show_time:!1!==d.show_time,show_day_counter:Boolean(d.show_day_counter),day_counter_start:d.day_counter_start&&/^\d{4}-\d{2}-\d{2}$/.test(d.day_counter_start)?d.day_counter_start:"",day_counter_label:String(d.day_counter_label||"Day").slice(0,20),custom_text:String(d.custom_text||"").slice(0,100),font_size:Math.max(18,Math.min(72,parseInt(d.font_size)||36)),text_color:n.includes(d.text_color)?d.text_color:s.text_color};return await i(_),{success:!0,settings:_}});export{p as default};
