import{d as t,b as o,c as r}from"../../../nitro/nitro.mjs";import{readdirSync as e,statSync as s}from"fs";import{resolve as i}from"path";import"node:http";import"node:https";import"node:crypto";import"stream";import"events";import"http";import"crypto";import"buffer";import"zlib";import"https";import"net";import"tls";import"url";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"fs/promises";import"node:url";const p=t(async t=>{try{const t=i(o(),"database/backups");try{const o=e(t);return o.filter(t=>t.endsWith(".json")||t.endsWith(".json.gz")).map(o=>{const r=i(t,o),e=s(r);return{filename:o,size:e.size,created:e.mtime.toISOString(),compressed:o.endsWith(".gz")}}).sort((t,o)=>o.created.localeCompare(t.created))}catch(t){if("ENOENT"===t.code)return[];throw t}}catch(t){throw r({statusCode:500,message:"Failed to list backups: "+t.message})}});export{p as default};
