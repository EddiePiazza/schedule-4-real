import{d as t,r as o,c as r}from"../../../nitro/nitro.mjs";import{o as i}from"../../../_/mqtt.mjs";import"node:http";import"node:https";import"node:crypto";import"stream";import"events";import"http";import"crypto";import"buffer";import"zlib";import"https";import"net";import"tls";import"url";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"fs";import"path";import"fs/promises";import"node:url";import"mqtt";import"child_process";const s=t(async t=>{const s=await o(t),{mode:e,allowedUids:m}=s;if("allow-all"!==e&&"whitelist"!==e)throw r({statusCode:400,message:'Invalid mode. Must be "allow-all" or "whitelist"'});if("whitelist"===e&&(!Array.isArray(m)||0===m.length))throw r({statusCode:400,message:"Whitelist mode requires at least one UID"});return i(e,Array.isArray(m)?m:[]),{success:!0,mode:e,allowedUids:m||[]}});export{s as default};
