import{d as t,c as o}from"../../../nitro/nitro.mjs";import{query as r}from"../../../_/db.mjs";import"node:http";import"node:https";import"node:crypto";import"stream";import"events";import"http";import"crypto";import"buffer";import"zlib";import"https";import"net";import"tls";import"url";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"fs";import"path";import"fs/promises";import"node:url";import"pg";const e=t(async()=>{var t;try{const t=await r("\n      SELECT day_start, day_end, timestamp\n      FROM day_night_schedule\n      ORDER BY timestamp DESC\n      LIMIT 1\n    ");return t.length>0?{dayStart:t[0].day_start,dayEnd:t[0].day_end,updatedAt:t[0].timestamp}:{dayStart:"06:00",dayEnd:"00:00",updatedAt:null}}catch(r){if(null==(t=r.message)?void 0:t.includes("does not exist"))return{dayStart:"06:00",dayEnd:"00:00",updatedAt:null};throw console.error("Failed to fetch day/night schedule:",r),o({statusCode:500,message:"Failed to fetch day/night schedule"})}});export{e as default};
