import{d as t,a as o}from"../../../nitro/nitro.mjs";import{query as r}from"../../../_/db.mjs";import"node:http";import"node:https";import"node:crypto";import"stream";import"events";import"http";import"crypto";import"buffer";import"zlib";import"https";import"net";import"tls";import"url";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"fs";import"path";import"fs/promises";import"node:url";import"pg";const i=t(async t=>{const i=o(t),p="true"===i.unread,m=Math.min(parseInt(i.limit)||50,500);try{let t="1=1";p&&(t="acknowledged = 0");return await r(`\n      SELECT * FROM lab_notifications\n      WHERE ${t}\n      ORDER BY timestamp DESC\n      LIMIT ${m}\n    `)}catch(t){return console.error("Failed to fetch notifications:",t),[]}});export{i as default};
