import{readonly as e,toRef as t,isRef as o}from"vue";import{u as a}from"./useAuthGate-BgxmmIEE.mjs";import{b as n}from"./server.mjs";function m(...e){const a="string"==typeof e[e.length-1]?e.pop():void 0;"string"!=typeof e[0]&&e.unshift(a);const[s,c]=e;if(!s||"string"!=typeof s)throw new TypeError("[nuxt] [useState] key must be a string: "+s);if(void 0!==c&&"function"!=typeof c)throw new Error("[nuxt] [useState] init must be a function: "+c);const r="$s"+s,u=n(),i=t(u.payload.state,r);if(void 0===i.value&&c){const e=c();if(o(e))return u.payload.state[r]=e,e;i.value=e}return i}function w(){const t=m("socket-names",()=>({})),o=m("socket-names-loaded",()=>!1),n=m("socket-names-loading",()=>!1);return{socketNames:e(t),loaded:e(o),loading:e(n),fetchSocketNames:async function(){if(!n.value){n.value=!0;try{const e=await $fetch("/api/socket-names");t.value=e||{},o.value=!0}catch{}finally{n.value=!1}}},saveSocketName:async function(e,o){try{const{getAuthHeaders:n}=a();await $fetch("/api/socket-names",{method:"POST",headers:n(),body:{socket:e,name:o}}),t.value[e]=o}catch(e){throw e}},getSocketDisplayName:function(e,o="full"){const a=e.replace("O",""),n=t.value[e];switch(o){case"name-only":return n||`Socket ${a}`;case"short":return n||`S${a}`;default:return n?`${n} (Socket ${a})`:`Socket ${a}`}},getSocketLabel:function(e){return`Socket ${e.replace("O","")}`}}}export{w};
