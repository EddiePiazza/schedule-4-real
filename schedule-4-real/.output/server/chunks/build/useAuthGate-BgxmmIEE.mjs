import{ref as e}from"vue";function o(){return{authToken:e(""),authenticated:e(!1),setPassword:e=>{},logout:()=>{},getAuthHeaders:()=>({})}}e(""),e(!1);const u=Object.freeze(Object.defineProperty({__proto__:null,useAuth:o},Symbol.toStringTag,{value:"Module"})),t=e(!1),a=e(""),l=e(!1),n=e(!1);let r=null,s=null;function g(){const{authenticated:e,setPassword:u}=o();return{showAuthGate:t,gatePasswordInput:a,gateAuthError:l,gateLoading:n,requireAuth:function(){return e.value?Promise.resolve():new Promise((e,u)=>{r=e,s=u,a.value="",l.value=!1,n.value=!1,t.value=!0})},submitGatePassword:async function(){if(a.value){n.value=!0,l.value=!1;try{await $fetch("/api/auth/verify",{method:"POST",headers:{"x-auth-token":a.value}}),u(a.value),a.value="",t.value=!1,null==r||r(),r=null,s=null}catch{l.value=!0}finally{n.value=!1}}},cancelGate:function(){t.value=!1,a.value="",null==s||s(),r=null,s=null}}}export{g as a,u as b,o as u};
